var fU=Object.create;var gh=Object.defineProperty,pU=Object.defineProperties,mU=Object.getOwnPropertyDescriptor,gU=Object.getOwnPropertyDescriptors,_U=Object.getOwnPropertyNames,Ox=Object.getOwnPropertySymbols,Fx=Object.getPrototypeOf,Vx=Object.prototype.hasOwnProperty,vU=Object.prototype.propertyIsEnumerable,yU=Reflect.get;var Lx=(n,e,t)=>e in n?gh(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Y=(n,e)=>{for(var t in e||={})Vx.call(e,t)&&Lx(n,t,e[t]);if(Ox)for(var t of Ox(e))vU.call(e,t)&&Lx(n,t,e[t]);return n},_e=(n,e)=>pU(n,gU(e));var wU=(n,e)=>()=>(n&&(e=n(n=0)),e);var ps=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),jx=(n,e)=>{for(var t in e)gh(n,t,{get:e[t],enumerable:!0})},Ux=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of _U(e))!Vx.call(n,i)&&i!==t&&gh(n,i,{get:()=>e[i],enumerable:!(r=mU(e,i))||r.enumerable});return n};var _h=(n,e,t)=>(t=n!=null?fU(Fx(n)):{},Ux(e||!n||!n.__esModule?gh(t,"default",{value:n,enumerable:!0}):t,n)),Cu=n=>Ux(gh({},"__esModule",{value:!0}),n);var ms=(n,e,t)=>yU(Fx(n),t,e);var b=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{c(t.next(l))}catch(h){i(h)}},a=l=>{try{c(t.throw(l))}catch(h){i(h)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,a);c((t=t.apply(n,e)).next())});var $a={};jx($a,{__addDisposableResource:()=>TR,__assign:()=>ng,__asyncDelegator:()=>_R,__asyncGenerator:()=>og,__asyncValues:()=>sg,__await:()=>Ci,__awaiter:()=>te,__classPrivateFieldGet:()=>ER,__classPrivateFieldIn:()=>IR,__classPrivateFieldSet:()=>bR,__createBinding:()=>ig,__decorate:()=>oR,__disposeResources:()=>CR,__esDecorate:()=>aR,__exportStar:()=>fR,__extends:()=>iR,__generator:()=>hR,__importDefault:()=>wR,__importStar:()=>yR,__makeTemplateObject:()=>vR,__metadata:()=>dR,__param:()=>sR,__propKey:()=>uR,__read:()=>KE,__rest:()=>lr,__rewriteRelativeImportExtension:()=>SR,__runInitializers:()=>cR,__setFunctionName:()=>lR,__spread:()=>pR,__spreadArray:()=>gR,__spreadArrays:()=>mR,__values:()=>rg,default:()=>OU});function iR(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");WE(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function lr(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function oR(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var c=n.length-1;c>=0;c--)(a=n[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o}function sR(n,e){return function(t,r){e(t,r,n)}}function aR(n,e,t,r,i,o){function a(j){if(j!==void 0&&typeof j!="function")throw new TypeError("Function expected");return j}for(var c=r.kind,l=c==="getter"?"get":c==="setter"?"set":"value",h=!e&&n?r.static?n:n.prototype:null,p=e||(h?Object.getOwnPropertyDescriptor(h,r.name):{}),_,E=!1,w=t.length-1;w>=0;w--){var C={};for(var k in r)C[k]=k==="access"?{}:r[k];for(var k in r.access)C.access[k]=r.access[k];C.addInitializer=function(j){if(E)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(j||null))};var R=(0,t[w])(c==="accessor"?{get:p.get,set:p.set}:p[l],C);if(c==="accessor"){if(R===void 0)continue;if(R===null||typeof R!="object")throw new TypeError("Object expected");(_=a(R.get))&&(p.get=_),(_=a(R.set))&&(p.set=_),(_=a(R.init))&&i.unshift(_)}else(_=a(R))&&(c==="field"?i.unshift(_):p[l]=_)}h&&Object.defineProperty(h,r.name,p),E=!0}function cR(n,e,t){for(var r=arguments.length>2,i=0;i<e.length;i++)t=r?e[i].call(n,t):e[i].call(n);return r?t:void 0}function uR(n){return typeof n=="symbol"?n:"".concat(n)}function lR(n,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function dR(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function te(n,e,t,r){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function c(p){try{h(r.next(p))}catch(_){a(_)}}function l(p){try{h(r.throw(p))}catch(_){a(_)}}function h(p){p.done?o(p.value):i(p.value).then(c,l)}h((r=r.apply(n,e||[])).next())})}function hR(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=c(0),a.throw=c(1),a.return=c(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(h){return function(p){return l([h,p])}}function l(h){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,h[0]&&(t=0)),t;)try{if(r=1,i&&(o=h[0]&2?i.return:h[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,h[1])).done)return o;switch(i=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,i=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){t.label=h[1];break}if(h[0]===6&&t.label<o[1]){t.label=o[1],o=h;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(h);break}o[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(n,t)}catch(p){h=[6,p],i=0}finally{r=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function fR(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&ig(e,n,t)}function rg(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function KE(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}function pR(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(KE(arguments[e]));return n}function mR(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var o=arguments[e],a=0,c=o.length;a<c;a++,i++)r[i]=o[a];return r}function gR(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}function Ci(n){return this instanceof Ci?(this.v=n,this):new Ci(n)}function og(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(w){return function(C){return Promise.resolve(C).then(w,_)}}function c(w,C){r[w]&&(i[w]=function(k){return new Promise(function(R,j){o.push([w,k,R,j])>1||l(w,k)})},C&&(i[w]=C(i[w])))}function l(w,C){try{h(r[w](C))}catch(k){E(o[0][3],k)}}function h(w){w.value instanceof Ci?Promise.resolve(w.value.v).then(p,_):E(o[0][2],w)}function p(w){l("next",w)}function _(w){l("throw",w)}function E(w,C){w(C),o.shift(),o.length&&l(o[0][0],o[0][1])}}function _R(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,o){e[i]=n[i]?function(a){return(t=!t)?{value:Ci(n[i](a)),done:!1}:o?o(a):a}:o}}function sg(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof rg=="function"?rg(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(a){return new Promise(function(c,l){a=n[o](a),i(c,l,a.done,a.value)})}}function i(o,a,c,l){Promise.resolve(l).then(function(h){o({value:h,done:c})},a)}}function vR(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function yR(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t=GE(n),r=0;r<t.length;r++)t[r]!=="default"&&ig(e,n,t[r]);return kU(e,n),e}function wR(n){return n&&n.__esModule?n:{default:n}}function ER(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)}function bR(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t}function IR(n,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?e===n:n.has(e)}function TR(n,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],t&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),n.stack.push({value:e,dispose:r,async:t})}else t&&n.stack.push({async:!0});return e}function CR(n){function e(o){n.error=n.hasError?new NU(o,n.error,"An error was suppressed during disposal."):o,n.hasError=!0}var t,r=0;function i(){for(;t=n.stack.pop();)try{if(!t.async&&r===1)return r=0,n.stack.push(t),Promise.resolve().then(i);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return r|=2,Promise.resolve(o).then(i,function(a){return e(a),i()})}else r|=1}catch(a){e(a)}if(r===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return i()}function SR(n,e){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,r,i,o,a){return r?e?".jsx":".js":i&&(!o||!a)?t:i+o+"."+a.toLowerCase()+"js"}):n}var WE,ng,ig,kU,GE,NU,OU,_t=wU(()=>{"use strict";WE=function(n,e){return WE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},WE(n,e)};ng=function(){return ng=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ng.apply(this,arguments)};ig=Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]};kU=Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e},GE=function(n){return GE=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},GE(n)};NU=typeof SuppressedError=="function"?SuppressedError:function(n,e,t){var r=new Error(t);return r.name="SuppressedError",r.error=n,r.suppressed=e,r};OU={__extends:iR,__assign:ng,__rest:lr,__decorate:oR,__param:sR,__esDecorate:aR,__runInitializers:cR,__propKey:uR,__setFunctionName:lR,__metadata:dR,__awaiter:te,__generator:hR,__createBinding:ig,__exportStar:fR,__values:rg,__read:KE,__spread:pR,__spreadArrays:mR,__spreadArray:gR,__await:Ci,__asyncGenerator:og,__asyncDelegator:_R,__asyncValues:sg,__makeTemplateObject:vR,__importStar:yR,__importDefault:wR,__classPrivateFieldGet:ER,__classPrivateFieldSet:bR,__classPrivateFieldIn:IR,__addDisposableResource:TR,__disposeResources:CR,__rewriteRelativeImportExtension:SR}});var Ip=ps((pw,ZV)=>{"use strict";(function(n,e){typeof pw=="object"&&typeof ZV<"u"?e(pw):typeof define=="function"&&define.amd?define(["exports"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.leaflet={}))})(pw,function(n){"use strict";var e="1.9.4";function t(s){var u,f,m,v;for(f=1,m=arguments.length;f<m;f++){v=arguments[f];for(u in v)s[u]=v[u]}return s}var r=Object.create||(function(){function s(){}return function(u){return s.prototype=u,new s}})();function i(s,u){var f=Array.prototype.slice;if(s.bind)return s.bind.apply(s,f.call(arguments,1));var m=f.call(arguments,2);return function(){return s.apply(u,m.length?m.concat(f.call(arguments)):arguments)}}var o=0;function a(s){return"_leaflet_id"in s||(s._leaflet_id=++o),s._leaflet_id}function c(s,u,f){var m,v,I,A;return A=function(){m=!1,v&&(I.apply(f,v),v=!1)},I=function(){m?v=arguments:(s.apply(f,arguments),setTimeout(A,u),m=!0)},I}function l(s,u,f){var m=u[1],v=u[0],I=m-v;return s===m&&f?s:((s-v)%I+I)%I+v}function h(){return!1}function p(s,u){if(u===!1)return s;var f=Math.pow(10,u===void 0?6:u);return Math.round(s*f)/f}function _(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function E(s){return _(s).split(/\s+/)}function w(s,u){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?r(s.options):{});for(var f in u)s.options[f]=u[f];return s.options}function C(s,u,f){var m=[];for(var v in s)m.push(encodeURIComponent(f?v.toUpperCase():v)+"="+encodeURIComponent(s[v]));return(!u||u.indexOf("?")===-1?"?":"&")+m.join("&")}var k=/\{ *([\w_ -]+) *\}/g;function R(s,u){return s.replace(k,function(f,m){var v=u[m];if(v===void 0)throw new Error("No value provided for variable "+f);return typeof v=="function"&&(v=v(u)),v})}var j=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function K(s,u){for(var f=0;f<s.length;f++)if(s[f]===u)return f;return-1}var q="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Z(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var pe=0;function Pe(s){var u=+new Date,f=Math.max(0,16-(u-pe));return pe=u+f,window.setTimeout(s,f)}var M=window.requestAnimationFrame||Z("RequestAnimationFrame")||Pe,S=window.cancelAnimationFrame||Z("CancelAnimationFrame")||Z("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function D(s,u,f){if(f&&M===Pe)s.call(u);else return M.call(window,i(s,u))}function P(s){s&&S.call(window,s)}var N={__proto__:null,extend:t,create:r,bind:i,get lastId(){return o},stamp:a,throttle:c,wrapNum:l,falseFn:h,formatNum:p,trim:_,splitWords:E,setOptions:w,getParamString:C,template:R,isArray:j,indexOf:K,emptyImageUrl:q,requestFn:M,cancelFn:S,requestAnimFrame:D,cancelAnimFrame:P};function F(){}F.extend=function(s){var u=function(){w(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},f=u.__super__=this.prototype,m=r(f);m.constructor=u,u.prototype=m;for(var v in this)Object.prototype.hasOwnProperty.call(this,v)&&v!=="prototype"&&v!=="__super__"&&(u[v]=this[v]);return s.statics&&t(u,s.statics),s.includes&&(x(s.includes),t.apply(null,[m].concat(s.includes))),t(m,s),delete m.statics,delete m.includes,m.options&&(m.options=f.options?r(f.options):{},t(m.options,s.options)),m._initHooks=[],m.callInitHooks=function(){if(!this._initHooksCalled){f.callInitHooks&&f.callInitHooks.call(this),this._initHooksCalled=!0;for(var I=0,A=m._initHooks.length;I<A;I++)m._initHooks[I].call(this)}},u},F.include=function(s){var u=this.prototype.options;return t(this.prototype,s),s.options&&(this.prototype.options=u,this.mergeOptions(s.options)),this},F.mergeOptions=function(s){return t(this.prototype.options,s),this},F.addInitHook=function(s){var u=Array.prototype.slice.call(arguments,1),f=typeof s=="function"?s:function(){this[s].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(f),this};function x(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=j(s)?s:[s];for(var u=0;u<s.length;u++)s[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Dt={on:function(s,u,f){if(typeof s=="object")for(var m in s)this._on(m,s[m],u);else{s=E(s);for(var v=0,I=s.length;v<I;v++)this._on(s[v],u,f)}return this},off:function(s,u,f){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var m in s)this._off(m,s[m],u);else{s=E(s);for(var v=arguments.length===1,I=0,A=s.length;I<A;I++)v?this._off(s[I]):this._off(s[I],u,f)}return this},_on:function(s,u,f,m){if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}if(this._listens(s,u,f)===!1){f===this&&(f=void 0);var v={fn:u,ctx:f};m&&(v.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(v)}},_off:function(s,u,f){var m,v,I;if(this._events&&(m=this._events[s],!!m)){if(arguments.length===1){if(this._firingCount)for(v=0,I=m.length;v<I;v++)m[v].fn=h;delete this._events[s];return}if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}var A=this._listens(s,u,f);if(A!==!1){var V=m[A];this._firingCount&&(V.fn=h,this._events[s]=m=m.slice()),m.splice(A,1)}}},fire:function(s,u,f){if(!this.listens(s,f))return this;var m=t({},u,{type:s,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var v=this._events[s];if(v){this._firingCount=this._firingCount+1||1;for(var I=0,A=v.length;I<A;I++){var V=v[I],U=V.fn;V.once&&this.off(s,U,V.ctx),U.call(V.ctx||this,m)}this._firingCount--}}return f&&this._propagateEvent(m),this},listens:function(s,u,f,m){typeof s!="string"&&console.warn('"string" type argument expected');var v=u;typeof u!="function"&&(m=!!u,v=void 0,f=void 0);var I=this._events&&this._events[s];if(I&&I.length&&this._listens(s,v,f)!==!1)return!0;if(m){for(var A in this._eventParents)if(this._eventParents[A].listens(s,u,f,m))return!0}return!1},_listens:function(s,u,f){if(!this._events)return!1;var m=this._events[s]||[];if(!u)return!!m.length;f===this&&(f=void 0);for(var v=0,I=m.length;v<I;v++)if(m[v].fn===u&&m[v].ctx===f)return v;return!1},once:function(s,u,f){if(typeof s=="object")for(var m in s)this._on(m,s[m],u,!0);else{s=E(s);for(var v=0,I=s.length;v<I;v++)this._on(s[v],u,f,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[a(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[a(s)],this},_propagateEvent:function(s){for(var u in this._eventParents)this._eventParents[u].fire(s.type,t({layer:s.target,propagatedFrom:s.target},s),!0)}};Dt.addEventListener=Dt.on,Dt.removeEventListener=Dt.clearAllEventListeners=Dt.off,Dt.addOneTimeEventListener=Dt.once,Dt.fireEvent=Dt.fire,Dt.hasEventListeners=Dt.listens;var qr=F.extend(Dt);function Se(s,u,f){this.x=f?Math.round(s):s,this.y=f?Math.round(u):u}var es=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};Se.prototype={clone:function(){return new Se(this.x,this.y)},add:function(s){return this.clone()._add(ge(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(ge(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new Se(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new Se(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=es(this.x),this.y=es(this.y),this},distanceTo:function(s){s=ge(s);var u=s.x-this.x,f=s.y-this.y;return Math.sqrt(u*u+f*f)},equals:function(s){return s=ge(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=ge(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+p(this.x)+", "+p(this.y)+")"}};function ge(s,u,f){return s instanceof Se?s:j(s)?new Se(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new Se(s.x,s.y):new Se(s,u,f)}function ht(s,u){if(s)for(var f=u?[s,u]:s,m=0,v=f.length;m<v;m++)this.extend(f[m])}ht.prototype={extend:function(s){var u,f;if(!s)return this;if(s instanceof Se||typeof s[0]=="number"||"x"in s)u=f=ge(s);else if(s=gn(s),u=s.min,f=s.max,!u||!f)return this;return!this.min&&!this.max?(this.min=u.clone(),this.max=f.clone()):(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(f.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(f.y,this.max.y)),this},getCenter:function(s){return ge((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return ge(this.min.x,this.max.y)},getTopRight:function(){return ge(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var u,f;return typeof s[0]=="number"||s instanceof Se?s=ge(s):s=gn(s),s instanceof ht?(u=s.min,f=s.max):u=f=s,u.x>=this.min.x&&f.x<=this.max.x&&u.y>=this.min.y&&f.y<=this.max.y},intersects:function(s){s=gn(s);var u=this.min,f=this.max,m=s.min,v=s.max,I=v.x>=u.x&&m.x<=f.x,A=v.y>=u.y&&m.y<=f.y;return I&&A},overlaps:function(s){s=gn(s);var u=this.min,f=this.max,m=s.min,v=s.max,I=v.x>u.x&&m.x<f.x,A=v.y>u.y&&m.y<f.y;return I&&A},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var u=this.min,f=this.max,m=Math.abs(u.x-f.x)*s,v=Math.abs(u.y-f.y)*s;return gn(ge(u.x-m,u.y-v),ge(f.x+m,f.y+v))},equals:function(s){return s?(s=gn(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function gn(s,u){return!s||s instanceof ht?s:new ht(s,u)}function Sn(s,u){if(s)for(var f=u?[s,u]:s,m=0,v=f.length;m<v;m++)this.extend(f[m])}Sn.prototype={extend:function(s){var u=this._southWest,f=this._northEast,m,v;if(s instanceof Ie)m=s,v=s;else if(s instanceof Sn){if(m=s._southWest,v=s._northEast,!m||!v)return this}else return s?this.extend(We(s)||at(s)):this;return!u&&!f?(this._southWest=new Ie(m.lat,m.lng),this._northEast=new Ie(v.lat,v.lng)):(u.lat=Math.min(m.lat,u.lat),u.lng=Math.min(m.lng,u.lng),f.lat=Math.max(v.lat,f.lat),f.lng=Math.max(v.lng,f.lng)),this},pad:function(s){var u=this._southWest,f=this._northEast,m=Math.abs(u.lat-f.lat)*s,v=Math.abs(u.lng-f.lng)*s;return new Sn(new Ie(u.lat-m,u.lng-v),new Ie(f.lat+m,f.lng+v))},getCenter:function(){return new Ie((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ie(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ie(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof Ie||"lat"in s?s=We(s):s=at(s);var u=this._southWest,f=this._northEast,m,v;return s instanceof Sn?(m=s.getSouthWest(),v=s.getNorthEast()):m=v=s,m.lat>=u.lat&&v.lat<=f.lat&&m.lng>=u.lng&&v.lng<=f.lng},intersects:function(s){s=at(s);var u=this._southWest,f=this._northEast,m=s.getSouthWest(),v=s.getNorthEast(),I=v.lat>=u.lat&&m.lat<=f.lat,A=v.lng>=u.lng&&m.lng<=f.lng;return I&&A},overlaps:function(s){s=at(s);var u=this._southWest,f=this._northEast,m=s.getSouthWest(),v=s.getNorthEast(),I=v.lat>u.lat&&m.lat<f.lat,A=v.lng>u.lng&&m.lng<f.lng;return I&&A},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,u){return s?(s=at(s),this._southWest.equals(s.getSouthWest(),u)&&this._northEast.equals(s.getNorthEast(),u)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function at(s,u){return s instanceof Sn?s:new Sn(s,u)}function Ie(s,u,f){if(isNaN(s)||isNaN(u))throw new Error("Invalid LatLng object: ("+s+", "+u+")");this.lat=+s,this.lng=+u,f!==void 0&&(this.alt=+f)}Ie.prototype={equals:function(s,u){if(!s)return!1;s=We(s);var f=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return f<=(u===void 0?1e-9:u)},toString:function(s){return"LatLng("+p(this.lat,s)+", "+p(this.lng,s)+")"},distanceTo:function(s){return pi.distance(this,We(s))},wrap:function(){return pi.wrapLatLng(this)},toBounds:function(s){var u=180*s/40075017,f=u/Math.cos(Math.PI/180*this.lat);return at([this.lat-u,this.lng-f],[this.lat+u,this.lng+f])},clone:function(){return new Ie(this.lat,this.lng,this.alt)}};function We(s,u,f){return s instanceof Ie?s:j(s)&&typeof s[0]!="object"?s.length===3?new Ie(s[0],s[1],s[2]):s.length===2?new Ie(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new Ie(s.lat,"lng"in s?s.lng:s.lon,s.alt):u===void 0?null:new Ie(s,u,f)}var Fn={latLngToPoint:function(s,u){var f=this.projection.project(s),m=this.scale(u);return this.transformation._transform(f,m)},pointToLatLng:function(s,u){var f=this.scale(u),m=this.transformation.untransform(s,f);return this.projection.unproject(m)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var u=this.projection.bounds,f=this.scale(s),m=this.transformation.transform(u.min,f),v=this.transformation.transform(u.max,f);return new ht(m,v)},infinite:!1,wrapLatLng:function(s){var u=this.wrapLng?l(s.lng,this.wrapLng,!0):s.lng,f=this.wrapLat?l(s.lat,this.wrapLat,!0):s.lat,m=s.alt;return new Ie(f,u,m)},wrapLatLngBounds:function(s){var u=s.getCenter(),f=this.wrapLatLng(u),m=u.lat-f.lat,v=u.lng-f.lng;if(m===0&&v===0)return s;var I=s.getSouthWest(),A=s.getNorthEast(),V=new Ie(I.lat-m,I.lng-v),U=new Ie(A.lat-m,A.lng-v);return new Sn(V,U)}},pi=t({},Fn,{wrapLng:[-180,180],R:6371e3,distance:function(s,u){var f=Math.PI/180,m=s.lat*f,v=u.lat*f,I=Math.sin((u.lat-s.lat)*f/2),A=Math.sin((u.lng-s.lng)*f/2),V=I*I+Math.cos(m)*Math.cos(v)*A*A,U=2*Math.atan2(Math.sqrt(V),Math.sqrt(1-V));return this.R*U}}),ts=6378137,Ld={R:ts,MAX_LATITUDE:85.0511287798,project:function(s){var u=Math.PI/180,f=this.MAX_LATITUDE,m=Math.max(Math.min(f,s.lat),-f),v=Math.sin(m*u);return new Se(this.R*s.lng*u,this.R*Math.log((1+v)/(1-v))/2)},unproject:function(s){var u=180/Math.PI;return new Ie((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*u,s.x*u/this.R)},bounds:(function(){var s=ts*Math.PI;return new ht([-s,-s],[s,s])})()};function Fd(s,u,f,m){if(j(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=u,this._c=f,this._d=m}Fd.prototype={transform:function(s,u){return this._transform(s.clone(),u)},_transform:function(s,u){return u=u||1,s.x=u*(this._a*s.x+this._b),s.y=u*(this._c*s.y+this._d),s},untransform:function(s,u){return u=u||1,new Se((s.x/u-this._b)/this._a,(s.y/u-this._d)/this._c)}};function mi(s,u,f,m){return new Fd(s,u,f,m)}var ns=t({},pi,{code:"EPSG:3857",projection:Ld,transformation:(function(){var s=.5/(Math.PI*Ld.R);return mi(s,.5,-s,.5)})()}),Vd=t({},ns,{code:"EPSG:900913"});function tu(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function nu(s,u){var f="",m,v,I,A,V,U;for(m=0,I=s.length;m<I;m++){for(V=s[m],v=0,A=V.length;v<A;v++)U=V[v],f+=(v?"L":"M")+U.x+" "+U.y;f+=u?ue.svg?"z":"x":""}return f||"M0 0"}var Ea=document.documentElement.style,ba="ActiveXObject"in window,Jp=ba&&!document.addEventListener,Xp="msLaunchUri"in navigator&&!("documentMode"in document),ru=rr("webkit"),jd=rr("android"),iu=rr("android 2")||rr("android 3"),em=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),vE=jd&&rr("Google")&&em<537&&!("AudioNode"in window),Ia=!!window.opera,ou=!Xp&&rr("chrome"),su=rr("gecko")&&!ru&&!Ia&&!ba,an=!ou&&rr("safari"),cn=rr("phantom"),Ta="OTransition"in Ea,tm=navigator.platform.indexOf("Win")===0,Ud=ba&&"transition"in Ea,Bd="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!iu,rs="MozPerspective"in Ea,nm=!window.L_DISABLE_3D&&(Ud||Bd||rs)&&!Ta&&!cn,is=typeof orientation<"u"||rr("mobile"),$d=is&&ru,yE=is&&Bd,rm=!window.PointerEvent&&window.MSPointerEvent,au=!!(window.PointerEvent||rm),Hd="ontouchstart"in window||!!window.TouchEvent,im=!window.L_NO_TOUCH&&(Hd||au),Ca=is&&Ia,zd=is&&su,qd=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,co=(function(){var s=!1;try{var u=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",h,u),window.removeEventListener("testPassiveEventSupport",h,u)}catch{}return s})(),om=(function(){return!!document.createElement("canvas").getContext})(),os=!!(document.createElementNS&&tu("svg").createSVGRect),sm=!!os&&(function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Sa=!os&&(function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var u=s.firstChild;return u.style.behavior="url(#default#VML)",u&&typeof u.adj=="object"}catch{return!1}})(),am=navigator.platform.indexOf("Mac")===0,_n=navigator.platform.indexOf("Linux")===0;function rr(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var ue={ie:ba,ielt9:Jp,edge:Xp,webkit:ru,android:jd,android23:iu,androidStock:vE,opera:Ia,chrome:ou,gecko:su,safari:an,phantom:cn,opera12:Ta,win:tm,ie3d:Ud,webkit3d:Bd,gecko3d:rs,any3d:nm,mobile:is,mobileWebkit:$d,mobileWebkit3d:yE,msPointer:rm,pointer:au,touch:im,touchNative:Hd,mobileOpera:Ca,mobileGecko:zd,retina:qd,passiveEvents:co,canvas:om,svg:os,vml:Sa,inlineSvg:sm,mac:am,linux:_n},ss=ue.msPointer?"MSPointerDown":"pointerdown",cm=ue.msPointer?"MSPointerMove":"pointermove",um=ue.msPointer?"MSPointerUp":"pointerup",uo=ue.msPointer?"MSPointerCancel":"pointercancel",Wd={touchstart:ss,touchmove:cm,touchend:um,touchcancel:uo},lm={touchstart:hm,touchmove:as,touchend:as,touchcancel:as},Wr={},Gd=!1;function Kd(s,u,f){return u==="touchstart"&&Qd(),lm[u]?(f=lm[u].bind(this,f),s.addEventListener(Wd[u],f,!1),f):(console.warn("wrong event specified:",u),h)}function cu(s,u,f){if(!Wd[u]){console.warn("wrong event specified:",u);return}s.removeEventListener(Wd[u],f,!1)}function gi(s){Wr[s.pointerId]=s}function dm(s){Wr[s.pointerId]&&(Wr[s.pointerId]=s)}function Zd(s){delete Wr[s.pointerId]}function Qd(){Gd||(document.addEventListener(ss,gi,!0),document.addEventListener(cm,dm,!0),document.addEventListener(um,Zd,!0),document.addEventListener(uo,Zd,!0),Gd=!0)}function as(s,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){u.touches=[];for(var f in Wr)u.touches.push(Wr[f]);u.changedTouches=[u],s(u)}}function hm(s,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&xt(u),as(s,u)}function fm(s){var u={},f,m;for(m in s)f=s[m],u[m]=f&&f.bind?f.bind(s):f;return s=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}var wE=200;function uu(s,u){s.addEventListener("dblclick",u);var f=0,m;function v(I){if(I.detail!==1){m=I.detail;return}if(!(I.pointerType==="mouse"||I.sourceCapabilities&&!I.sourceCapabilities.firesTouchEvents)){var A=oh(I);if(!(A.some(function(U){return U instanceof HTMLLabelElement&&U.attributes.for})&&!A.some(function(U){return U instanceof HTMLInputElement||U instanceof HTMLSelectElement}))){var V=Date.now();V-f<=wE?(m++,m===2&&u(fm(I))):m=1,f=V}}}return s.addEventListener("click",v),{dblclick:u,simDblclick:v}}function pm(s,u){s.removeEventListener("dblclick",u.dblclick),s.removeEventListener("click",u.simDblclick)}var Da=br(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Gr=br(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),_i=Gr==="webkitTransition"||Gr==="OTransition"?Gr+"End":"transitionend";function lu(s){return typeof s=="string"?document.getElementById(s):s}function Aa(s,u){var f=s.style[u]||s.currentStyle&&s.currentStyle[u];if((!f||f==="auto")&&document.defaultView){var m=document.defaultView.getComputedStyle(s,null);f=m?m[u]:null}return f==="auto"?null:f}function Qe(s,u,f){var m=document.createElement(s);return m.className=u||"",f&&f.appendChild(m),m}function pt(s){var u=s.parentNode;u&&u.removeChild(s)}function xa(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function vi(s){var u=s.parentNode;u&&u.lastChild!==s&&u.appendChild(s)}function yi(s){var u=s.parentNode;u&&u.firstChild!==s&&u.insertBefore(s,u.firstChild)}function du(s,u){if(s.classList!==void 0)return s.classList.contains(u);var f=Ra(s);return f.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(f)}function Me(s,u){if(s.classList!==void 0)for(var f=E(u),m=0,v=f.length;m<v;m++)s.classList.add(f[m]);else if(!du(s,u)){var I=Ra(s);Yd(s,(I?I+" ":"")+u)}}function At(s,u){s.classList!==void 0?s.classList.remove(u):Yd(s,_((" "+Ra(s)+" ").replace(" "+u+" "," ")))}function Yd(s,u){s.className.baseVal===void 0?s.className=u:s.className.baseVal=u}function Ra(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function Vn(s,u){"opacity"in s.style?s.style.opacity=u:"filter"in s.style&&EE(s,u)}function EE(s,u){var f=!1,m="DXImageTransform.Microsoft.Alpha";try{f=s.filters.item(m)}catch{if(u===1)return}u=Math.round(u*100),f?(f.Enabled=u!==100,f.Opacity=u):s.style.filter+=" progid:"+m+"(opacity="+u+")"}function br(s){for(var u=document.documentElement.style,f=0;f<s.length;f++)if(s[f]in u)return s[f];return!1}function vn(s,u,f){var m=u||new Se(0,0);s.style[Da]=(ue.ie3d?"translate("+m.x+"px,"+m.y+"px)":"translate3d("+m.x+"px,"+m.y+"px,0)")+(f?" scale("+f+")":"")}function gt(s,u){s._leaflet_pos=u,ue.any3d?vn(s,u):(s.style.left=u.x+"px",s.style.top=u.y+"px")}function Ir(s){return s._leaflet_pos||new Se(0,0)}var cs,tt,us;if("onselectstart"in document)cs=function(){Te(window,"selectstart",xt)},tt=function(){ct(window,"selectstart",xt)};else{var Kr=br(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);cs=function(){if(Kr){var s=document.documentElement.style;us=s[Kr],s[Kr]="none"}},tt=function(){Kr&&(document.documentElement.style[Kr]=us,us=void 0)}}function lo(){Te(window,"dragstart",xt)}function Jd(){ct(window,"dragstart",xt)}var Pa,Xd;function eh(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(hu(),Pa=s,Xd=s.style.outlineStyle,s.style.outlineStyle="none",Te(window,"keydown",hu))}function hu(){Pa&&(Pa.style.outlineStyle=Xd,Pa=void 0,Xd=void 0,ct(window,"keydown",hu))}function mm(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function ho(s){var u=s.getBoundingClientRect();return{x:u.width/s.offsetWidth||1,y:u.height/s.offsetHeight||1,boundingClientRect:u}}var wi={__proto__:null,TRANSFORM:Da,TRANSITION:Gr,TRANSITION_END:_i,get:lu,getStyle:Aa,create:Qe,remove:pt,empty:xa,toFront:vi,toBack:yi,hasClass:du,addClass:Me,removeClass:At,setClass:Yd,getClass:Ra,setOpacity:Vn,testProp:br,setTransform:vn,setPosition:gt,getPosition:Ir,get disableTextSelection(){return cs},get enableTextSelection(){return tt},disableImageDrag:lo,enableImageDrag:Jd,preventOutline:eh,restoreOutline:hu,getSizedParentNode:mm,getScale:ho};function Te(s,u,f,m){if(u&&typeof u=="object")for(var v in u)nh(s,v,u[v],f);else{u=E(u);for(var I=0,A=u.length;I<A;I++)nh(s,u[I],f,m)}return this}var ir="_leaflet_events";function ct(s,u,f,m){if(arguments.length===1)fo(s),delete s[ir];else if(u&&typeof u=="object")for(var v in u)rh(s,v,u[v],f);else if(u=E(u),arguments.length===2)fo(s,function(V){return K(u,V)!==-1});else for(var I=0,A=u.length;I<A;I++)rh(s,u[I],f,m);return this}function fo(s,u){for(var f in s[ir]){var m=f.split(/\d/)[0];(!u||u(m))&&rh(s,m,null,null,f)}}var th={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function nh(s,u,f,m){var v=u+a(f)+(m?"_"+a(m):"");if(s[ir]&&s[ir][v])return this;var I=function(V){return f.call(m||s,V||window.event)},A=I;!ue.touchNative&&ue.pointer&&u.indexOf("touch")===0?I=Kd(s,u,I):ue.touch&&u==="dblclick"?I=uu(s,I):"addEventListener"in s?u==="touchstart"||u==="touchmove"||u==="wheel"||u==="mousewheel"?s.addEventListener(th[u]||u,I,ue.passiveEvents?{passive:!1}:!1):u==="mouseenter"||u==="mouseleave"?(I=function(V){V=V||window.event,Na(s,V)&&A(V)},s.addEventListener(th[u],I,!1)):s.addEventListener(u,A,!1):s.attachEvent("on"+u,I),s[ir]=s[ir]||{},s[ir][v]=I}function rh(s,u,f,m,v){v=v||u+a(f)+(m?"_"+a(m):"");var I=s[ir]&&s[ir][v];if(!I)return this;!ue.touchNative&&ue.pointer&&u.indexOf("touch")===0?cu(s,u,I):ue.touch&&u==="dblclick"?pm(s,I):"removeEventListener"in s?s.removeEventListener(th[u]||u,I,!1):s.detachEvent("on"+u,I),s[ir][v]=null}function Dn(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function ih(s){return nh(s,"wheel",Dn),this}function Ma(s){return Te(s,"mousedown touchstart dblclick contextmenu",Dn),s._leaflet_disable_click=!0,this}function xt(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function Tr(s){return xt(s),Dn(s),this}function oh(s){if(s.composedPath)return s.composedPath();for(var u=[],f=s.target;f;)u.push(f),f=f.parentNode;return u}function ls(s,u){if(!u)return new Se(s.clientX,s.clientY);var f=ho(u),m=f.boundingClientRect;return new Se((s.clientX-m.left)/f.x-u.clientLeft,(s.clientY-m.top)/f.y-u.clientTop)}var ka=ue.linux&&ue.chrome?window.devicePixelRatio:ue.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function sh(s){return ue.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/ka:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function Na(s,u){var f=u.relatedTarget;if(!f)return!0;try{for(;f&&f!==s;)f=f.parentNode}catch{return!1}return f!==s}var Et={__proto__:null,on:Te,off:ct,stopPropagation:Dn,disableScrollPropagation:ih,disableClickPropagation:Ma,preventDefault:xt,stop:Tr,getPropagationPath:oh,getMousePosition:ls,getWheelDelta:sh,isExternalTarget:Na,addListener:Te,removeListener:ct},gm=qr.extend({run:function(s,u,f,m){this.stop(),this._el=s,this._inProgress=!0,this._duration=f||.25,this._easeOutPower=1/Math.max(m||.5,.2),this._startPos=Ir(s),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(s){var u=+new Date-this._startTime,f=this._duration*1e3;u<f?this._runFrame(this._easeOut(u/f),s):(this._runFrame(1),this._complete())},_runFrame:function(s,u){var f=this._startPos.add(this._offset.multiplyBy(s));u&&f._round(),gt(this._el,f),this.fire("step")},_complete:function(){P(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Ge=qr.extend({options:{crs:ns,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,u){u=w(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),u.zoom!==void 0&&(this._zoom=this._limitZoom(u.zoom)),u.center&&u.zoom!==void 0&&this.setView(We(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Gr&&ue.any3d&&!ue.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Te(this._proxy,_i,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,u,f){if(u=u===void 0?this._zoom:this._limitZoom(u),s=this._limitCenter(We(s),u,this.options.maxBounds),f=f||{},this._stop(),this._loaded&&!f.reset&&f!==!0){f.animate!==void 0&&(f.zoom=t({animate:f.animate},f.zoom),f.pan=t({animate:f.animate,duration:f.duration},f.pan));var m=this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,u,f.zoom):this._tryAnimatedPan(s,f.pan);if(m)return clearTimeout(this._sizeTimer),this}return this._resetView(s,u,f.pan&&f.pan.noMoveStart),this},setZoom:function(s,u){return this._loaded?this.setView(this.getCenter(),s,{zoom:u}):(this._zoom=s,this)},zoomIn:function(s,u){return s=s||(ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,u)},zoomOut:function(s,u){return s=s||(ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,u)},setZoomAround:function(s,u,f){var m=this.getZoomScale(u),v=this.getSize().divideBy(2),I=s instanceof Se?s:this.latLngToContainerPoint(s),A=I.subtract(v).multiplyBy(1-1/m),V=this.containerPointToLatLng(v.add(A));return this.setView(V,u,{zoom:f})},_getBoundsCenterZoom:function(s,u){u=u||{},s=s.getBounds?s.getBounds():at(s);var f=ge(u.paddingTopLeft||u.padding||[0,0]),m=ge(u.paddingBottomRight||u.padding||[0,0]),v=this.getBoundsZoom(s,!1,f.add(m));if(v=typeof u.maxZoom=="number"?Math.min(u.maxZoom,v):v,v===1/0)return{center:s.getCenter(),zoom:v};var I=m.subtract(f).divideBy(2),A=this.project(s.getSouthWest(),v),V=this.project(s.getNorthEast(),v),U=this.unproject(A.add(V).divideBy(2).add(I),v);return{center:U,zoom:v}},fitBounds:function(s,u){if(s=at(s),!s.isValid())throw new Error("Bounds are not valid.");var f=this._getBoundsCenterZoom(s,u);return this.setView(f.center,f.zoom,u)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,u){return this.setView(s,this._zoom,{pan:u})},panBy:function(s,u){if(s=ge(s).round(),u=u||{},!s.x&&!s.y)return this.fire("moveend");if(u.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new gm,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),u.animate!==!1){Me(this._mapPane,"leaflet-pan-anim");var f=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,f,u.duration||.25,u.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,u,f){if(f=f||{},f.animate===!1||!ue.any3d)return this.setView(s,u,f);this._stop();var m=this.project(this.getCenter()),v=this.project(s),I=this.getSize(),A=this._zoom;s=We(s),u=u===void 0?A:u;var V=Math.max(I.x,I.y),U=V*this.getZoomScale(A,u),G=v.distanceTo(m)||1,ne=1.42,we=ne*ne;function $e(Ht){var Nm=Ht?-1:1,uU=Ht?U:V,lU=U*U-V*V+Nm*we*we*G*G,dU=2*uU*we*G,SE=lU/dU,Nx=Math.sqrt(SE*SE+1)-SE,hU=Nx<1e-9?-18:Math.log(Nx);return hU}function Un(Ht){return(Math.exp(Ht)-Math.exp(-Ht))/2}function ln(Ht){return(Math.exp(Ht)+Math.exp(-Ht))/2}function Cr(Ht){return Un(Ht)/ln(Ht)}var Kn=$e(0);function Tu(Ht){return V*(ln(Kn)/ln(Kn+ne*Ht))}function oU(Ht){return V*(ln(Kn)*Cr(Kn+ne*Ht)-Un(Kn))/we}function sU(Ht){return 1-Math.pow(1-Ht,1.5)}var aU=Date.now(),Mx=($e(1)-Kn)/ne,cU=f.duration?1e3*f.duration:1e3*Mx*.8;function kx(){var Ht=(Date.now()-aU)/cU,Nm=sU(Ht)*Mx;Ht<=1?(this._flyToFrame=D(kx,this),this._move(this.unproject(m.add(v.subtract(m).multiplyBy(oU(Nm)/G)),A),this.getScaleZoom(V/Tu(Nm),A),{flyTo:!0})):this._move(s,u)._moveEnd(!0)}return this._moveStart(!0,f.noMoveStart),kx.call(this),this},flyToBounds:function(s,u){var f=this._getBoundsCenterZoom(s,u);return this.flyTo(f.center,f.zoom,u)},setMaxBounds:function(s){return s=at(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var u=this.options.minZoom;return this.options.minZoom=s,this._loaded&&u!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var u=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&u!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,u){this._enforcingBounds=!0;var f=this.getCenter(),m=this._limitCenter(f,this._zoom,at(s));return f.equals(m)||this.panTo(m,u),this._enforcingBounds=!1,this},panInside:function(s,u){u=u||{};var f=ge(u.paddingTopLeft||u.padding||[0,0]),m=ge(u.paddingBottomRight||u.padding||[0,0]),v=this.project(this.getCenter()),I=this.project(s),A=this.getPixelBounds(),V=gn([A.min.add(f),A.max.subtract(m)]),U=V.getSize();if(!V.contains(I)){this._enforcingBounds=!0;var G=I.subtract(V.getCenter()),ne=V.extend(I).getSize().subtract(U);v.x+=G.x<0?-ne.x:ne.x,v.y+=G.y<0?-ne.y:ne.y,this.panTo(this.unproject(v),u),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=t({animate:!1,pan:!0},s===!0?{animate:!0}:s);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var f=this.getSize(),m=u.divideBy(2).round(),v=f.divideBy(2).round(),I=m.subtract(v);return!I.x&&!I.y?this:(s.animate&&s.pan?this.panBy(I):(s.pan&&this._rawPanBy(I),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:f}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=t({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=i(this._handleGeolocationResponse,this),f=i(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,f,s):navigator.geolocation.getCurrentPosition(u,f,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var u=s.code,f=s.message||(u===1?"permission denied":u===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+f+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var u=s.coords.latitude,f=s.coords.longitude,m=new Ie(u,f),v=m.toBounds(s.coords.accuracy*2),I=this._locateOptions;if(I.setView){var A=this.getBoundsZoom(v);this.setView(m,I.maxZoom?Math.min(A,I.maxZoom):A)}var V={latlng:m,bounds:v,timestamp:s.timestamp};for(var U in s.coords)typeof s.coords[U]=="number"&&(V[U]=s.coords[U]);this.fire("locationfound",V)}},addHandler:function(s,u){if(!u)return this;var f=this[s]=new u(this);return this._handlers.push(f),this.options[s]&&f.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),pt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(P(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)pt(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,u){var f="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),m=Qe("div",f,u||this._mapPane);return s&&(this._panes[s]=m),m},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),u=this.unproject(s.getBottomLeft()),f=this.unproject(s.getTopRight());return new Sn(u,f)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,u,f){s=at(s),f=ge(f||[0,0]);var m=this.getZoom()||0,v=this.getMinZoom(),I=this.getMaxZoom(),A=s.getNorthWest(),V=s.getSouthEast(),U=this.getSize().subtract(f),G=gn(this.project(V,m),this.project(A,m)).getSize(),ne=ue.any3d?this.options.zoomSnap:1,we=U.x/G.x,$e=U.y/G.y,Un=u?Math.max(we,$e):Math.min(we,$e);return m=this.getScaleZoom(Un,m),ne&&(m=Math.round(m/(ne/100))*(ne/100),m=u?Math.ceil(m/ne)*ne:Math.floor(m/ne)*ne),Math.max(v,Math.min(I,m))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Se(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,u){var f=this._getTopLeftPoint(s,u);return new ht(f,f.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,u){var f=this.options.crs;return u=u===void 0?this._zoom:u,f.scale(s)/f.scale(u)},getScaleZoom:function(s,u){var f=this.options.crs;u=u===void 0?this._zoom:u;var m=f.zoom(s*f.scale(u));return isNaN(m)?1/0:m},project:function(s,u){return u=u===void 0?this._zoom:u,this.options.crs.latLngToPoint(We(s),u)},unproject:function(s,u){return u=u===void 0?this._zoom:u,this.options.crs.pointToLatLng(ge(s),u)},layerPointToLatLng:function(s){var u=ge(s).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(s){var u=this.project(We(s))._round();return u._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(We(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(at(s))},distance:function(s,u){return this.options.crs.distance(We(s),We(u))},containerPointToLayerPoint:function(s){return ge(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return ge(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var u=this.containerPointToLayerPoint(ge(s));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(We(s)))},mouseEventToContainerPoint:function(s){return ls(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var u=this._container=lu(s);if(u){if(u._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Te(u,"scroll",this._onScroll,this),this._containerId=a(u)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&ue.any3d,Me(s,"leaflet-container"+(ue.touch?" leaflet-touch":"")+(ue.retina?" leaflet-retina":"")+(ue.ielt9?" leaflet-oldie":"")+(ue.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=Aa(s,"position");u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),gt(this._mapPane,new Se(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Me(s.markerPane,"leaflet-zoom-hide"),Me(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,u,f){gt(this._mapPane,new Se(0,0));var m=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var v=this._zoom!==u;this._moveStart(v,f)._move(s,u)._moveEnd(v),this.fire("viewreset"),m&&this.fire("load")},_moveStart:function(s,u){return s&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(s,u,f,m){u===void 0&&(u=this._zoom);var v=this._zoom!==u;return this._zoom=u,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),m?f&&f.pinch&&this.fire("zoom",f):((v||f&&f.pinch)&&this.fire("zoom",f),this.fire("move",f)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return P(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){gt(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[a(this._container)]=this;var u=s?ct:Te;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),ue.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){P(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,u){for(var f=[],m,v=u==="mouseout"||u==="mouseover",I=s.target||s.srcElement,A=!1;I;){if(m=this._targets[a(I)],m&&(u==="click"||u==="preclick")&&this._draggableMoved(m)){A=!0;break}if(m&&m.listens(u,!0)&&(v&&!Na(I,s)||(f.push(m),v))||I===this._container)break;I=I.parentNode}return!f.length&&!A&&!v&&this.listens(u,!0)&&(f=[this]),f},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var u=s.target||s.srcElement;if(!(!this._loaded||u._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(u))){var f=s.type;f==="mousedown"&&eh(u),this._fireDOMEvent(s,f)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,u,f){if(s.type==="click"){var m=t({},s);m.type="preclick",this._fireDOMEvent(m,m.type,f)}var v=this._findEventTargets(s,u);if(f){for(var I=[],A=0;A<f.length;A++)f[A].listens(u,!0)&&I.push(f[A]);v=I.concat(v)}if(v.length){u==="contextmenu"&&xt(s);var V=v[0],U={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var G=V.getLatLng&&(!V._radius||V._radius<=10);U.containerPoint=G?this.latLngToContainerPoint(V.getLatLng()):this.mouseEventToContainerPoint(s),U.layerPoint=this.containerPointToLayerPoint(U.containerPoint),U.latlng=G?V.getLatLng():this.layerPointToLatLng(U.layerPoint)}for(A=0;A<v.length;A++)if(v[A].fire(u,U,!0),U.originalEvent._stopped||v[A].options.bubblingMouseEvents===!1&&K(this._mouseEvents,u)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,u=this._handlers.length;s<u;s++)this._handlers[s].disable()},whenReady:function(s,u){return this._loaded?s.call(u||this,{target:this}):this.on("load",s,u),this},_getMapPanePos:function(){return Ir(this._mapPane)||new Se(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,u){var f=s&&u!==void 0?this._getNewPixelOrigin(s,u):this.getPixelOrigin();return f.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,u){var f=this.getSize()._divideBy(2);return this.project(s,u)._subtract(f)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,u,f){var m=this._getNewPixelOrigin(f,u);return this.project(s,u)._subtract(m)},_latLngBoundsToNewLayerBounds:function(s,u,f){var m=this._getNewPixelOrigin(f,u);return gn([this.project(s.getSouthWest(),u)._subtract(m),this.project(s.getNorthWest(),u)._subtract(m),this.project(s.getSouthEast(),u)._subtract(m),this.project(s.getNorthEast(),u)._subtract(m)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,u,f){if(!f)return s;var m=this.project(s,u),v=this.getSize().divideBy(2),I=new ht(m.subtract(v),m.add(v)),A=this._getBoundsOffset(I,f,u);return Math.abs(A.x)<=1&&Math.abs(A.y)<=1?s:this.unproject(m.add(A),u)},_limitOffset:function(s,u){if(!u)return s;var f=this.getPixelBounds(),m=new ht(f.min.add(s),f.max.add(s));return s.add(this._getBoundsOffset(m,u))},_getBoundsOffset:function(s,u,f){var m=gn(this.project(u.getNorthEast(),f),this.project(u.getSouthWest(),f)),v=m.min.subtract(s.min),I=m.max.subtract(s.max),A=this._rebound(v.x,-I.x),V=this._rebound(v.y,-I.y);return new Se(A,V)},_rebound:function(s,u){return s+u>0?Math.round(s-u)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(u))},_limitZoom:function(s){var u=this.getMinZoom(),f=this.getMaxZoom(),m=ue.any3d?this.options.zoomSnap:1;return m&&(s=Math.round(s/m)*m),Math.max(u,Math.min(f,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){At(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,u){var f=this._getCenterOffset(s)._trunc();return(u&&u.animate)!==!0&&!this.getSize().contains(f)?!1:(this.panBy(f,u),!0)},_createAnimProxy:function(){var s=this._proxy=Qe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(u){var f=Da,m=this._proxy.style[f];vn(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),m===this._proxy.style[f]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){pt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),u=this.getZoom();vn(this._proxy,this.project(s,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,u,f){if(this._animatingZoom)return!0;if(f=f||{},!this._zoomAnimated||f.animate===!1||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var m=this.getZoomScale(u),v=this._getCenterOffset(s)._divideBy(1-1/m);return f.animate!==!0&&!this.getSize().contains(v)?!1:(D(function(){this._moveStart(!0,f.noMoveStart||!1)._animateZoom(s,u,!0)},this),!0)},_animateZoom:function(s,u,f,m){this._mapPane&&(f&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=u,Me(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:u,noUpdate:m}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&At(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function _m(s,u){return new Ge(s,u)}var Gn=F.extend({options:{position:"topright"},initialize:function(s){w(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var u=this._map;return u&&u.removeControl(this),this.options.position=s,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var u=this._container=this.onAdd(s),f=this.getPosition(),m=s._controlCorners[f];return Me(u,"leaflet-control"),f.indexOf("bottom")!==-1?m.insertBefore(u,m.firstChild):m.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(pt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),ds=function(s){return new Gn(s)};Ge.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},u="leaflet-",f=this._controlContainer=Qe("div",u+"control-container",this._container);function m(v,I){var A=u+v+" "+u+I;s[v+I]=Qe("div",A,f)}m("top","left"),m("top","right"),m("bottom","left"),m("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)pt(this._controlCorners[s]);pt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Oa=Gn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,u,f,m){return f<m?-1:m<f?1:0}},initialize:function(s,u,f){w(this,f),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var m in s)this._addLayer(s[m],m);for(m in u)this._addLayer(u[m],m,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return Gn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,u){return this._addLayer(s,u),this._map?this._update():this},addOverlay:function(s,u){return this._addLayer(s,u,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var u=this._getLayer(a(s));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){Me(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(Me(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):At(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return At(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",u=this._container=Qe("div",s),f=this.options.collapsed;u.setAttribute("aria-haspopup",!0),Ma(u),ih(u);var m=this._section=Qe("section",s+"-list");f&&(this._map.on("click",this.collapse,this),Te(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var v=this._layersLink=Qe("a",s+"-toggle",u);v.href="#",v.title="Layers",v.setAttribute("role","button"),Te(v,{keydown:function(I){I.keyCode===13&&this._expandSafely()},click:function(I){xt(I),this._expandSafely()}},this),f||this.expand(),this._baseLayersList=Qe("div",s+"-base",m),this._separator=Qe("div",s+"-separator",m),this._overlaysList=Qe("div",s+"-overlays",m),u.appendChild(m)},_getLayer:function(s){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&a(this._layers[u].layer)===s)return this._layers[u]},_addLayer:function(s,u,f){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:u,overlay:f}),this.options.sortLayers&&this._layers.sort(i(function(m,v){return this.options.sortFunction(m.layer,v.layer,m.name,v.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;xa(this._baseLayersList),xa(this._overlaysList),this._layerControlInputs=[];var s,u,f,m,v=0;for(f=0;f<this._layers.length;f++)m=this._layers[f],this._addItem(m),u=u||m.overlay,s=s||!m.overlay,v+=m.overlay?0:1;return this.options.hideSingleBase&&(s=s&&v>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=u&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var u=this._getLayer(a(s.target)),f=u.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;f&&this._map.fire(f,u)},_createRadioElement:function(s,u){var f='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(u?' checked="checked"':"")+"/>",m=document.createElement("div");return m.innerHTML=f,m.firstChild},_addItem:function(s){var u=document.createElement("label"),f=this._map.hasLayer(s.layer),m;s.overlay?(m=document.createElement("input"),m.type="checkbox",m.className="leaflet-control-layers-selector",m.defaultChecked=f):m=this._createRadioElement("leaflet-base-layers_"+a(this),f),this._layerControlInputs.push(m),m.layerId=a(s.layer),Te(m,"click",this._onInputClick,this);var v=document.createElement("span");v.innerHTML=" "+s.name;var I=document.createElement("span");u.appendChild(I),I.appendChild(m),I.appendChild(v);var A=s.overlay?this._overlaysList:this._baseLayersList;return A.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,u,f,m=[],v=[];this._handlingClick=!0;for(var I=s.length-1;I>=0;I--)u=s[I],f=this._getLayer(u.layerId).layer,u.checked?m.push(f):u.checked||v.push(f);for(I=0;I<v.length;I++)this._map.hasLayer(v[I])&&this._map.removeLayer(v[I]);for(I=0;I<m.length;I++)this._map.hasLayer(m[I])||this._map.addLayer(m[I]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,u,f,m=this._map.getZoom(),v=s.length-1;v>=0;v--)u=s[v],f=this._getLayer(u.layerId).layer,u.disabled=f.options.minZoom!==void 0&&m<f.options.minZoom||f.options.maxZoom!==void 0&&m>f.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,Te(s,"click",xt),this.expand();var u=this;setTimeout(function(){ct(s,"click",xt),u._preventClick=!1})}}),vm=function(s,u,f){return new Oa(s,u,f)},or=Gn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var u="leaflet-control-zoom",f=Qe("div",u+" leaflet-bar"),m=this.options;return this._zoomInButton=this._createButton(m.zoomInText,m.zoomInTitle,u+"-in",f,this._zoomIn),this._zoomOutButton=this._createButton(m.zoomOutText,m.zoomOutTitle,u+"-out",f,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),f},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,u,f,m,v){var I=Qe("a",f,m);return I.innerHTML=s,I.href="#",I.title=u,I.setAttribute("role","button"),I.setAttribute("aria-label",u),Ma(I),Te(I,"click",Tr),Te(I,"click",v,this),Te(I,"click",this._refocusOnMap,this),I},_updateDisabled:function(){var s=this._map,u="leaflet-disabled";At(this._zoomInButton,u),At(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(Me(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(Me(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ge.mergeOptions({zoomControl:!0}),Ge.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new or,this.addControl(this.zoomControl))});var ym=function(s){return new or(s)},wm=Gn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var u="leaflet-control-scale",f=Qe("div",u),m=this.options;return this._addScales(m,u+"-line",f),s.on(m.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),f},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,u,f){s.metric&&(this._mScale=Qe("div",u,f)),s.imperial&&(this._iScale=Qe("div",u,f))},_update:function(){var s=this._map,u=s.getSize().y/2,f=s.distance(s.containerPointToLatLng([0,u]),s.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(f)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var u=this._getRoundNum(s),f=u<1e3?u+" m":u/1e3+" km";this._updateScale(this._mScale,f,u/s)},_updateImperial:function(s){var u=s*3.2808399,f,m,v;u>5280?(f=u/5280,m=this._getRoundNum(f),this._updateScale(this._iScale,m+" mi",m/f)):(v=this._getRoundNum(u),this._updateScale(this._iScale,v+" ft",v/u))},_updateScale:function(s,u,f){s.style.width=Math.round(this.options.maxWidth*f)+"px",s.innerHTML=u},_getRoundNum:function(s){var u=Math.pow(10,(Math.floor(s)+"").length-1),f=s/u;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:1,u*f}}),La=function(s){return new wm(s)},Em='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Fa=Gn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ue.inlineSvg?Em+" ":"")+"Leaflet</a>"},initialize:function(s){w(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Qe("div","leaflet-control-attribution"),Ma(this._container);for(var u in s._layers)s._layers[u].getAttribution&&this.addAttribution(s._layers[u].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var u in this._attributions)this._attributions[u]&&s.push(u);var f=[];this.options.prefix&&f.push(this.options.prefix),s.length&&f.push(s.join(", ")),this._container.innerHTML=f.join(' <span aria-hidden="true">|</span> ')}}});Ge.mergeOptions({attributionControl:!0}),Ge.addInitHook(function(){this.options.attributionControl&&new Fa().addTo(this)});var fu=function(s){return new Fa(s)};Gn.Layers=Oa,Gn.Zoom=or,Gn.Scale=wm,Gn.Attribution=Fa,ds.layers=vm,ds.zoom=ym,ds.scale=La,ds.attribution=fu;var sr=F.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});sr.addTo=function(s,u){return s.addHandler(u,this),this};var pu={Events:Dt},bm=ue.touch?"touchstart mousedown":"mousedown",Zr=qr.extend({options:{clickTolerance:3},initialize:function(s,u,f,m){w(this,m),this._element=s,this._dragStartTarget=u||s,this._preventOutline=f},enable:function(){this._enabled||(Te(this._dragStartTarget,bm,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Zr._dragging===this&&this.finishDrag(!0),ct(this._dragStartTarget,bm,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!du(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Zr._dragging===this&&this.finishDrag();return}if(!(Zr._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Zr._dragging=this,this._preventOutline&&eh(this._element),lo(),cs(),!this._moving)){this.fire("down");var u=s.touches?s.touches[0]:s,f=mm(this._element);this._startPoint=new Se(u.clientX,u.clientY),this._startPos=Ir(this._element),this._parentScale=ho(f);var m=s.type==="mousedown";Te(document,m?"mousemove":"touchmove",this._onMove,this),Te(document,m?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var u=s.touches&&s.touches.length===1?s.touches[0]:s,f=new Se(u.clientX,u.clientY)._subtract(this._startPoint);!f.x&&!f.y||Math.abs(f.x)+Math.abs(f.y)<this.options.clickTolerance||(f.x/=this._parentScale.x,f.y/=this._parentScale.y,xt(s),this._moved||(this.fire("dragstart"),this._moved=!0,Me(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Me(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(f),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),gt(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){At(document.body,"leaflet-dragging"),this._lastTarget&&(At(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ct(document,"mousemove touchmove",this._onMove,this),ct(document,"mouseup touchend touchcancel",this._onUp,this),Jd(),tt();var u=this._moved&&this._moving;this._moving=!1,Zr._dragging=!1,u&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function hs(s,u,f){var m,v=[1,4,2,8],I,A,V,U,G,ne,we,$e;for(I=0,ne=s.length;I<ne;I++)s[I]._code=Ei(s[I],u);for(V=0;V<4;V++){for(we=v[V],m=[],I=0,ne=s.length,A=ne-1;I<ne;A=I++)U=s[I],G=s[A],U._code&we?G._code&we||($e=Va(G,U,we,u,f),$e._code=Ei($e,u),m.push($e)):(G._code&we&&($e=Va(G,U,we,u,f),$e._code=Ei($e,u),m.push($e)),m.push(U));s=m}return s}function ah(s,u){var f,m,v,I,A,V,U,G,ne;if(!s||s.length===0)throw new Error("latlngs not passed");jn(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var we=We([0,0]),$e=at(s),Un=$e.getNorthWest().distanceTo($e.getSouthWest())*$e.getNorthEast().distanceTo($e.getNorthWest());Un<1700&&(we=mu(s));var ln=s.length,Cr=[];for(f=0;f<ln;f++){var Kn=We(s[f]);Cr.push(u.project(We([Kn.lat-we.lat,Kn.lng-we.lng])))}for(V=U=G=0,f=0,m=ln-1;f<ln;m=f++)v=Cr[f],I=Cr[m],A=v.y*I.x-I.y*v.x,U+=(v.x+I.x)*A,G+=(v.y+I.y)*A,V+=A*3;V===0?ne=Cr[0]:ne=[U/V,G/V];var Tu=u.unproject(ge(ne));return We([Tu.lat+we.lat,Tu.lng+we.lng])}function mu(s){for(var u=0,f=0,m=0,v=0;v<s.length;v++){var I=We(s[v]);u+=I.lat,f+=I.lng,m++}return We([u/m,f/m])}var ch={__proto__:null,clipPolygon:hs,polygonCenter:ah,centroid:mu};function gu(s,u){if(!u||!s.length)return s.slice();var f=u*u;return s=po(s,f),s=Im(s,f),s}function uh(s,u,f){return Math.sqrt(Xt(s,u,f,!0))}function _u(s,u,f){return Xt(s,u,f)}function Im(s,u){var f=s.length,m=typeof Uint8Array<"u"?Uint8Array:Array,v=new m(f);v[0]=v[f-1]=1,vu(s,v,u,0,f-1);var I,A=[];for(I=0;I<f;I++)v[I]&&A.push(s[I]);return A}function vu(s,u,f,m,v){var I=0,A,V,U;for(V=m+1;V<=v-1;V++)U=Xt(s[V],s[m],s[v],!0),U>I&&(A=V,I=U);I>f&&(u[A]=1,vu(s,u,f,m,A),vu(s,u,f,A,v))}function po(s,u){for(var f=[s[0]],m=1,v=0,I=s.length;m<I;m++)yu(s[m],s[v])>u&&(f.push(s[m]),v=m);return v<I-1&&f.push(s[I-1]),f}var lh;function dh(s,u,f,m,v){var I=m?lh:Ei(s,f),A=Ei(u,f),V,U,G;for(lh=A;;){if(!(I|A))return[s,u];if(I&A)return!1;V=I||A,U=Va(s,u,V,f,v),G=Ei(U,f),V===I?(s=U,I=G):(u=U,A=G)}}function Va(s,u,f,m,v){var I=u.x-s.x,A=u.y-s.y,V=m.min,U=m.max,G,ne;return f&8?(G=s.x+I*(U.y-s.y)/A,ne=U.y):f&4?(G=s.x+I*(V.y-s.y)/A,ne=V.y):f&2?(G=U.x,ne=s.y+A*(U.x-s.x)/I):f&1&&(G=V.x,ne=s.y+A*(V.x-s.x)/I),new Se(G,ne,v)}function Ei(s,u){var f=0;return s.x<u.min.x?f|=1:s.x>u.max.x&&(f|=2),s.y<u.min.y?f|=4:s.y>u.max.y&&(f|=8),f}function yu(s,u){var f=u.x-s.x,m=u.y-s.y;return f*f+m*m}function Xt(s,u,f,m){var v=u.x,I=u.y,A=f.x-v,V=f.y-I,U=A*A+V*V,G;return U>0&&(G=((s.x-v)*A+(s.y-I)*V)/U,G>1?(v=f.x,I=f.y):G>0&&(v+=A*G,I+=V*G)),A=s.x-v,V=s.y-I,m?A*A+V*V:new Se(v,I)}function jn(s){return!j(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function hh(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),jn(s)}function mo(s,u){var f,m,v,I,A,V,U,G;if(!s||s.length===0)throw new Error("latlngs not passed");jn(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ne=We([0,0]),we=at(s),$e=we.getNorthWest().distanceTo(we.getSouthWest())*we.getNorthEast().distanceTo(we.getNorthWest());$e<1700&&(ne=mu(s));var Un=s.length,ln=[];for(f=0;f<Un;f++){var Cr=We(s[f]);ln.push(u.project(We([Cr.lat-ne.lat,Cr.lng-ne.lng])))}for(f=0,m=0;f<Un-1;f++)m+=ln[f].distanceTo(ln[f+1])/2;if(m===0)G=ln[0];else for(f=0,I=0;f<Un-1;f++)if(A=ln[f],V=ln[f+1],v=A.distanceTo(V),I+=v,I>m){U=(I-m)/v,G=[V.x-U*(V.x-A.x),V.y-U*(V.y-A.y)];break}var Kn=u.unproject(ge(G));return We([Kn.lat+ne.lat,Kn.lng+ne.lng])}var d={__proto__:null,simplify:gu,pointToSegmentDistance:uh,closestPointOnSegment:_u,clipSegment:dh,_getEdgeIntersection:Va,_getBitCode:Ei,_sqClosestPointOnSegment:Xt,isFlat:jn,_flat:hh,polylineCenter:mo},g={project:function(s){return new Se(s.lng,s.lat)},unproject:function(s){return new Ie(s.y,s.x)},bounds:new ht([-180,-90],[180,90])},y={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ht([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var u=Math.PI/180,f=this.R,m=s.lat*u,v=this.R_MINOR/f,I=Math.sqrt(1-v*v),A=I*Math.sin(m),V=Math.tan(Math.PI/4-m/2)/Math.pow((1-A)/(1+A),I/2);return m=-f*Math.log(Math.max(V,1e-10)),new Se(s.lng*u*f,m)},unproject:function(s){for(var u=180/Math.PI,f=this.R,m=this.R_MINOR/f,v=Math.sqrt(1-m*m),I=Math.exp(-s.y/f),A=Math.PI/2-2*Math.atan(I),V=0,U=.1,G;V<15&&Math.abs(U)>1e-7;V++)G=v*Math.sin(A),G=Math.pow((1-G)/(1+G),v/2),U=Math.PI/2-2*Math.atan(I*G)-A,A+=U;return new Ie(A*u,s.x*u/f)}},T={__proto__:null,LonLat:g,Mercator:y,SphericalMercator:Ld},O=t({},pi,{code:"EPSG:3395",projection:y,transformation:(function(){var s=.5/(Math.PI*y.R);return mi(s,.5,-s,.5)})()}),B=t({},pi,{code:"EPSG:4326",projection:g,transformation:mi(1/180,1,-1/180,.5)}),X=t({},Fn,{projection:g,transformation:mi(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,u){var f=u.lng-s.lng,m=u.lat-s.lat;return Math.sqrt(f*f+m*m)},infinite:!0});Fn.Earth=pi,Fn.EPSG3395=O,Fn.EPSG3857=ns,Fn.EPSG900913=Vd,Fn.EPSG4326=B,Fn.Simple=X;var je=qr.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[a(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[a(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var u=s.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var f=this.getEvents();u.on(f,this),this.once("remove",function(){u.off(f,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});Ge.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var u=a(s);return this._layers[u]?this:(this._layers[u]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var u=a(s);return this._layers[u]?(this._loaded&&s.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return a(s)in this._layers},eachLayer:function(s,u){for(var f in this._layers)s.call(u,this._layers[f]);return this},_addLayers:function(s){s=s?j(s)?s:[s]:[];for(var u=0,f=s.length;u<f;u++)this.addLayer(s[u])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[a(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var u=a(s);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,u=-1/0,f=this._getZoomSpan();for(var m in this._zoomBoundLayers){var v=this._zoomBoundLayers[m].options;s=v.minZoom===void 0?s:Math.min(s,v.minZoom),u=v.maxZoom===void 0?u:Math.max(u,v.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=s===1/0?void 0:s,f!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var bt=je.extend({initialize:function(s,u){w(this,u),this._layers={};var f,m;if(s)for(f=0,m=s.length;f<m;f++)this.addLayer(s[f])},addLayer:function(s){var u=this.getLayerId(s);return this._layers[u]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var u=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(s){var u=typeof s=="number"?s:this.getLayerId(s);return u in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var u=Array.prototype.slice.call(arguments,1),f,m;for(f in this._layers)m=this._layers[f],m[s]&&m[s].apply(m,u);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,u){for(var f in this._layers)s.call(u,this._layers[f]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return a(s)}}),Ye=function(s,u){return new bt(s,u)},mt=bt.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),bt.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),bt.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Sn;for(var u in this._layers){var f=this._layers[u];s.extend(f.getBounds?f.getBounds():f.getLatLng())}return s}}),un=function(s,u){return new mt(s,u)},ar=F.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){w(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,u){var f=this._getIconUrl(s);if(!f){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var m=this._createImg(f,u&&u.tagName==="IMG"?u:null);return this._setIconStyles(m,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),m},_setIconStyles:function(s,u){var f=this.options,m=f[u+"Size"];typeof m=="number"&&(m=[m,m]);var v=ge(m),I=ge(u==="shadow"&&f.shadowAnchor||f.iconAnchor||v&&v.divideBy(2,!0));s.className="leaflet-marker-"+u+" "+(f.className||""),I&&(s.style.marginLeft=-I.x+"px",s.style.marginTop=-I.y+"px"),v&&(s.style.width=v.x+"px",s.style.height=v.y+"px")},_createImg:function(s,u){return u=u||document.createElement("img"),u.src=s,u},_getIconUrl:function(s){return ue.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function cr(s){return new ar(s)}var bi=ar.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof bi.imagePath!="string"&&(bi.imagePath=this._detectIconPath()),(this.options.imagePath||bi.imagePath)+ar.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var u=function(f,m,v){var I=m.exec(f);return I&&I[v]};return s=u(s,/^url\((['"])?(.+)\1\)$/,2),s&&u(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Qe("div","leaflet-default-icon-path",document.body),u=Aa(s,"background-image")||Aa(s,"backgroundImage");if(document.body.removeChild(s),u=this._stripUrl(u),u)return u;var f=document.querySelector('link[href$="leaflet.css"]');return f?f.href.substring(0,f.href.length-11-1):""}}),wu=sr.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Zr(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Me(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&At(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var u=this._marker,f=u._map,m=this._marker.options.autoPanSpeed,v=this._marker.options.autoPanPadding,I=Ir(u._icon),A=f.getPixelBounds(),V=f.getPixelOrigin(),U=gn(A.min._subtract(V).add(v),A.max._subtract(V).subtract(v));if(!U.contains(I)){var G=ge((Math.max(U.max.x,I.x)-U.max.x)/(A.max.x-U.max.x)-(Math.min(U.min.x,I.x)-U.min.x)/(A.min.x-U.min.x),(Math.max(U.max.y,I.y)-U.max.y)/(A.max.y-U.max.y)-(Math.min(U.min.y,I.y)-U.min.y)/(A.min.y-U.min.y)).multiplyBy(m);f.panBy(G,{animate:!1}),this._draggable._newPos._add(G),this._draggable._startPos._add(G),gt(u._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=D(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(P(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,s)))},_onDrag:function(s){var u=this._marker,f=u._shadow,m=Ir(u._icon),v=u._map.layerPointToLatLng(m);f&&gt(f,m),u._latlng=v,s.latlng=v,s.oldLatLng=this._oldLatLng,u.fire("move",s).fire("drag",s)},_onDragEnd:function(s){P(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Tm=je.extend({options:{icon:new bi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,u){w(this,u),this._latlng=We(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var u=this._latlng;return this._latlng=We(s),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),f=s.icon.createIcon(this._icon),m=!1;f!==this._icon&&(this._icon&&this._removeIcon(),m=!0,s.title&&(f.title=s.title),f.tagName==="IMG"&&(f.alt=s.alt||"")),Me(f,u),s.keyboard&&(f.tabIndex="0",f.setAttribute("role","button")),this._icon=f,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Te(f,"focus",this._panOnFocus,this);var v=s.icon.createShadow(this._shadow),I=!1;v!==this._shadow&&(this._removeShadow(),I=!0),v&&(Me(v,u),v.alt=""),this._shadow=v,s.opacity<1&&this._updateOpacity(),m&&this.getPane().appendChild(this._icon),this._initInteraction(),v&&I&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ct(this._icon,"focus",this._panOnFocus,this),pt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&pt(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&gt(this._icon,s),this._shadow&&gt(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var u=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(Me(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),wu)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new wu(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&Vn(this._icon,s),this._shadow&&Vn(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var u=this.options.icon.options,f=u.iconSize?ge(u.iconSize):ge(0,0),m=u.iconAnchor?ge(u.iconAnchor):ge(0,0);s.panInside(this._latlng,{paddingTopLeft:m,paddingBottomRight:f.subtract(m)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Bj(s,u){return new Tm(s,u)}var fs=je.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return w(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Cm=fs.extend({options:{fill:!0,radius:10},initialize:function(s,u){w(this,u),this._latlng=We(s),this._radius=this.options.radius},setLatLng:function(s){var u=this._latlng;return this._latlng=We(s),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var u=s&&s.radius||this._radius;return fs.prototype.setStyle.call(this,s),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,u=this._radiusY||s,f=this._clickTolerance(),m=[s+f,u+f];this._pxBounds=new ht(this._point.subtract(m),this._point.add(m))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function $j(s,u){return new Cm(s,u)}var bE=Cm.extend({initialize:function(s,u,f){if(typeof u=="number"&&(u=t({},f,{radius:u})),w(this,u),this._latlng=We(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Sn(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:fs.prototype.setStyle,_project:function(){var s=this._latlng.lng,u=this._latlng.lat,f=this._map,m=f.options.crs;if(m.distance===pi.distance){var v=Math.PI/180,I=this._mRadius/pi.R/v,A=f.project([u+I,s]),V=f.project([u-I,s]),U=A.add(V).divideBy(2),G=f.unproject(U).lat,ne=Math.acos((Math.cos(I*v)-Math.sin(u*v)*Math.sin(G*v))/(Math.cos(u*v)*Math.cos(G*v)))/v;(isNaN(ne)||ne===0)&&(ne=I/Math.cos(Math.PI/180*u)),this._point=U.subtract(f.getPixelOrigin()),this._radius=isNaN(ne)?0:U.x-f.project([G,s-ne]).x,this._radiusY=U.y-A.y}else{var we=m.unproject(m.project(this._latlng).subtract([this._mRadius,0]));this._point=f.latLngToLayerPoint(this._latlng),this._radius=this._point.x-f.latLngToLayerPoint(we).x}this._updateBounds()}});function Hj(s,u,f){return new bE(s,u,f)}var go=fs.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,u){w(this,u),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var u=1/0,f=null,m=Xt,v,I,A=0,V=this._parts.length;A<V;A++)for(var U=this._parts[A],G=1,ne=U.length;G<ne;G++){v=U[G-1],I=U[G];var we=m(s,v,I,!0);we<u&&(u=we,f=m(s,v,I))}return f&&(f.distance=Math.sqrt(u)),f},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return mo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,u){return u=u||this._defaultShape(),s=We(s),u.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Sn,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return jn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var u=[],f=jn(s),m=0,v=s.length;m<v;m++)f?(u[m]=We(s[m]),this._bounds.extend(u[m])):u[m]=this._convertLatLngs(s[m]);return u},_project:function(){var s=new ht;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),u=new Se(s,s);this._rawPxBounds&&(this._pxBounds=new ht([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(s,u,f){var m=s[0]instanceof Ie,v=s.length,I,A;if(m){for(A=[],I=0;I<v;I++)A[I]=this._map.latLngToLayerPoint(s[I]),f.extend(A[I]);u.push(A)}else for(I=0;I<v;I++)this._projectLatlngs(s[I],u,f)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var u=this._parts,f,m,v,I,A,V,U;for(f=0,v=0,I=this._rings.length;f<I;f++)for(U=this._rings[f],m=0,A=U.length;m<A-1;m++)V=dh(U[m],U[m+1],s,m,!0),V&&(u[v]=u[v]||[],u[v].push(V[0]),(V[1]!==U[m+1]||m===A-2)&&(u[v].push(V[1]),v++))}},_simplifyPoints:function(){for(var s=this._parts,u=this.options.smoothFactor,f=0,m=s.length;f<m;f++)s[f]=gu(s[f],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,u){var f,m,v,I,A,V,U=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(f=0,I=this._parts.length;f<I;f++)for(V=this._parts[f],m=0,A=V.length,v=A-1;m<A;v=m++)if(!(!u&&m===0)&&uh(s,V[v],V[m])<=U)return!0;return!1}});function zj(s,u){return new go(s,u)}go._flat=hh;var Eu=go.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ah(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var u=go.prototype._convertLatLngs.call(this,s),f=u.length;return f>=2&&u[0]instanceof Ie&&u[0].equals(u[f-1])&&u.pop(),u},_setLatLngs:function(s){go.prototype._setLatLngs.call(this,s),jn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return jn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,u=this.options.weight,f=new Se(u,u);if(s=new ht(s.min.subtract(f),s.max.add(f)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var m=0,v=this._rings.length,I;m<v;m++)I=hs(this._rings[m],s,!0),I.length&&this._parts.push(I)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var u=!1,f,m,v,I,A,V,U,G;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(I=0,U=this._parts.length;I<U;I++)for(f=this._parts[I],A=0,G=f.length,V=G-1;A<G;V=A++)m=f[A],v=f[V],m.y>s.y!=v.y>s.y&&s.x<(v.x-m.x)*(s.y-m.y)/(v.y-m.y)+m.x&&(u=!u);return u||go.prototype._containsPoint.call(this,s,!0)}});function qj(s,u){return new Eu(s,u)}var _o=mt.extend({initialize:function(s,u){w(this,u),this._layers={},s&&this.addData(s)},addData:function(s){var u=j(s)?s:s.features,f,m,v;if(u){for(f=0,m=u.length;f<m;f++)v=u[f],(v.geometries||v.geometry||v.features||v.coordinates)&&this.addData(v);return this}var I=this.options;if(I.filter&&!I.filter(s))return this;var A=Sm(s,I);return A?(A.feature=xm(s),A.defaultOptions=A.options,this.resetStyle(A),I.onEachFeature&&I.onEachFeature(s,A),this.addLayer(A)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=t({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(u){this._setLayerStyle(u,s)},this)},_setLayerStyle:function(s,u){s.setStyle&&(typeof u=="function"&&(u=u(s.feature)),s.setStyle(u))}});function Sm(s,u){var f=s.type==="Feature"?s.geometry:s,m=f?f.coordinates:null,v=[],I=u&&u.pointToLayer,A=u&&u.coordsToLatLng||IE,V,U,G,ne;if(!m&&!f)return null;switch(f.type){case"Point":return V=A(m),px(I,s,V,u);case"MultiPoint":for(G=0,ne=m.length;G<ne;G++)V=A(m[G]),v.push(px(I,s,V,u));return new mt(v);case"LineString":case"MultiLineString":return U=Dm(m,f.type==="LineString"?0:1,A),new go(U,u);case"Polygon":case"MultiPolygon":return U=Dm(m,f.type==="Polygon"?1:2,A),new Eu(U,u);case"GeometryCollection":for(G=0,ne=f.geometries.length;G<ne;G++){var we=Sm({geometry:f.geometries[G],type:"Feature",properties:s.properties},u);we&&v.push(we)}return new mt(v);case"FeatureCollection":for(G=0,ne=f.features.length;G<ne;G++){var $e=Sm(f.features[G],u);$e&&v.push($e)}return new mt(v);default:throw new Error("Invalid GeoJSON object.")}}function px(s,u,f,m){return s?s(u,f):new Tm(f,m&&m.markersInheritOptions&&m)}function IE(s){return new Ie(s[1],s[0],s[2])}function Dm(s,u,f){for(var m=[],v=0,I=s.length,A;v<I;v++)A=u?Dm(s[v],u-1,f):(f||IE)(s[v]),m.push(A);return m}function TE(s,u){return s=We(s),s.alt!==void 0?[p(s.lng,u),p(s.lat,u),p(s.alt,u)]:[p(s.lng,u),p(s.lat,u)]}function Am(s,u,f,m){for(var v=[],I=0,A=s.length;I<A;I++)v.push(u?Am(s[I],jn(s[I])?0:u-1,f,m):TE(s[I],m));return!u&&f&&v.length>0&&v.push(v[0].slice()),v}function bu(s,u){return s.feature?t({},s.feature,{geometry:u}):xm(u)}function xm(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var CE={toGeoJSON:function(s){return bu(this,{type:"Point",coordinates:TE(this.getLatLng(),s)})}};Tm.include(CE),bE.include(CE),Cm.include(CE),go.include({toGeoJSON:function(s){var u=!jn(this._latlngs),f=Am(this._latlngs,u?1:0,!1,s);return bu(this,{type:(u?"Multi":"")+"LineString",coordinates:f})}}),Eu.include({toGeoJSON:function(s){var u=!jn(this._latlngs),f=u&&!jn(this._latlngs[0]),m=Am(this._latlngs,f?2:u?1:0,!0,s);return u||(m=[m]),bu(this,{type:(f?"Multi":"")+"Polygon",coordinates:m})}}),bt.include({toMultiPoint:function(s){var u=[];return this.eachLayer(function(f){u.push(f.toGeoJSON(s).geometry.coordinates)}),bu(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(s){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(u==="MultiPoint")return this.toMultiPoint(s);var f=u==="GeometryCollection",m=[];return this.eachLayer(function(v){if(v.toGeoJSON){var I=v.toGeoJSON(s);if(f)m.push(I.geometry);else{var A=xm(I);A.type==="FeatureCollection"?m.push.apply(m,A.features):m.push(A)}}}),f?bu(this,{geometries:m,type:"GeometryCollection"}):{type:"FeatureCollection",features:m}}});function mx(s,u){return new _o(s,u)}var Wj=mx,Rm=je.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,u,f){this._url=s,this._bounds=at(u),w(this,f)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Me(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){pt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&vi(this._image),this},bringToBack:function(){return this._map&&yi(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=at(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",u=this._image=s?this._url:Qe("img");if(Me(u,"leaflet-image-layer"),this._zoomAnimated&&Me(u,"leaflet-zoom-animated"),this.options.className&&Me(u,this.options.className),u.onselectstart=h,u.onmousemove=h,u.onload=i(this.fire,this,"load"),u.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=u.src;return}u.src=this._url,u.alt=this.options.alt},_animateZoom:function(s){var u=this._map.getZoomScale(s.zoom),f=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;vn(this._image,f,u)},_reset:function(){var s=this._image,u=new ht(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),f=u.getSize();gt(s,u.min),s.style.width=f.x+"px",s.style.height=f.y+"px"},_updateOpacity:function(){Vn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),Gj=function(s,u,f){return new Rm(s,u,f)},gx=Rm.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",u=this._image=s?this._url:Qe("video");if(Me(u,"leaflet-image-layer"),this._zoomAnimated&&Me(u,"leaflet-zoom-animated"),this.options.className&&Me(u,this.options.className),u.onselectstart=h,u.onmousemove=h,u.onloadeddata=i(this.fire,this,"load"),s){for(var f=u.getElementsByTagName("source"),m=[],v=0;v<f.length;v++)m.push(f[v].src);this._url=f.length>0?m:[u.src];return}j(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var I=0;I<this._url.length;I++){var A=Qe("source");A.src=this._url[I],u.appendChild(A)}}});function Kj(s,u,f){return new gx(s,u,f)}var _x=Rm.extend({_initImage:function(){var s=this._image=this._url;Me(s,"leaflet-image-layer"),this._zoomAnimated&&Me(s,"leaflet-zoom-animated"),this.options.className&&Me(s,this.options.className),s.onselectstart=h,s.onmousemove=h}});function Zj(s,u,f){return new _x(s,u,f)}var Ii=je.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,u){s&&(s instanceof Ie||j(s))?(this._latlng=We(s),w(this,u)):(w(this,s),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&Vn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&Vn(this._container,1),this.bringToFront(),this.options.interactive&&(Me(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(Vn(this._container,0),this._removeTimeout=setTimeout(i(pt,void 0,this._container),200)):pt(this._container),this.options.interactive&&(At(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=We(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&vi(this._container),this},bringToBack:function(){return this._map&&yi(this._container),this},_prepareOpen:function(s){var u=this._source;if(!u._map)return!1;if(u instanceof mt){u=null;var f=this._source._layers;for(var m in f)if(f[m]._map){u=f[m];break}if(!u)return!1;this._source=u}if(!s)if(u.getCenter)s=u.getCenter();else if(u.getLatLng)s=u.getLatLng();else if(u.getBounds)s=u.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,u=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof u=="string")s.innerHTML=u;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),u=ge(this.options.offset),f=this._getAnchor();this._zoomAnimated?gt(this._container,s.add(f)):u=u.add(s).add(f);var m=this._containerBottom=-u.y,v=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=m+"px",this._container.style.left=v+"px"}},_getAnchor:function(){return[0,0]}});Ge.include({_initOverlay:function(s,u,f,m){var v=u;return v instanceof s||(v=new s(m).setContent(u)),f&&v.setLatLng(f),v}}),je.include({_initOverlay:function(s,u,f,m){var v=f;return v instanceof s?(w(v,m),v._source=this):(v=u&&!m?u:new s(m,this),v.setContent(f)),v}});var Pm=Ii.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,Ii.prototype.openOn.call(this,s)},onAdd:function(s){Ii.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof fs||this._source.on("preclick",Dn))},onRemove:function(s){Ii.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof fs||this._source.off("preclick",Dn))},getEvents:function(){var s=Ii.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",u=this._container=Qe("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),f=this._wrapper=Qe("div",s+"-content-wrapper",u);if(this._contentNode=Qe("div",s+"-content",f),Ma(u),ih(this._contentNode),Te(u,"contextmenu",Dn),this._tipContainer=Qe("div",s+"-tip-container",u),this._tip=Qe("div",s+"-tip",this._tipContainer),this.options.closeButton){var m=this._closeButton=Qe("a",s+"-close-button",u);m.setAttribute("role","button"),m.setAttribute("aria-label","Close popup"),m.href="#close",m.innerHTML='<span aria-hidden="true">&#215;</span>',Te(m,"click",function(v){xt(v),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,u=s.style;u.width="",u.whiteSpace="nowrap";var f=s.offsetWidth;f=Math.min(f,this.options.maxWidth),f=Math.max(f,this.options.minWidth),u.width=f+1+"px",u.whiteSpace="",u.height="";var m=s.offsetHeight,v=this.options.maxHeight,I="leaflet-popup-scrolled";v&&m>v?(u.height=v+"px",Me(s,I)):At(s,I),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var u=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),f=this._getAnchor();gt(this._container,u.add(f))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,u=parseInt(Aa(this._container,"marginBottom"),10)||0,f=this._container.offsetHeight+u,m=this._containerWidth,v=new Se(this._containerLeft,-f-this._containerBottom);v._add(Ir(this._container));var I=s.layerPointToContainerPoint(v),A=ge(this.options.autoPanPadding),V=ge(this.options.autoPanPaddingTopLeft||A),U=ge(this.options.autoPanPaddingBottomRight||A),G=s.getSize(),ne=0,we=0;I.x+m+U.x>G.x&&(ne=I.x+m-G.x+U.x),I.x-ne-V.x<0&&(ne=I.x-V.x),I.y+f+U.y>G.y&&(we=I.y+f-G.y+U.y),I.y-we-V.y<0&&(we=I.y-V.y),(ne||we)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([ne,we]))}},_getAnchor:function(){return ge(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Qj=function(s,u){return new Pm(s,u)};Ge.mergeOptions({closePopupOnClick:!0}),Ge.include({openPopup:function(s,u,f){return this._initOverlay(Pm,s,u,f).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),je.include({bindPopup:function(s,u){return this._popup=this._initOverlay(Pm,this._popup,s,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof mt||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){Tr(s);var u=s.layer||s.target;if(this._popup._source===u&&!(u instanceof fs)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=u,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Mm=Ii.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){Ii.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){Ii.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=Ii.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",u=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Qe("div",u),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+a(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var u,f,m=this._map,v=this._container,I=m.latLngToContainerPoint(m.getCenter()),A=m.layerPointToContainerPoint(s),V=this.options.direction,U=v.offsetWidth,G=v.offsetHeight,ne=ge(this.options.offset),we=this._getAnchor();V==="top"?(u=U/2,f=G):V==="bottom"?(u=U/2,f=0):V==="center"?(u=U/2,f=G/2):V==="right"?(u=0,f=G/2):V==="left"?(u=U,f=G/2):A.x<I.x?(V="right",u=0,f=G/2):(V="left",u=U+(ne.x+we.x)*2,f=G/2),s=s.subtract(ge(u,f,!0)).add(ne).add(we),At(v,"leaflet-tooltip-right"),At(v,"leaflet-tooltip-left"),At(v,"leaflet-tooltip-top"),At(v,"leaflet-tooltip-bottom"),Me(v,"leaflet-tooltip-"+V),gt(v,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&Vn(this._container,s)},_animateZoom:function(s){var u=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(u)},_getAnchor:function(){return ge(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Yj=function(s,u){return new Mm(s,u)};Ge.include({openTooltip:function(s,u,f){return this._initOverlay(Mm,s,u,f).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),je.include({bindTooltip:function(s,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Mm,this._tooltip,s,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var u=s?"off":"on",f={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?f.add=this._openTooltip:(f.mouseover=this._openTooltip,f.mouseout=this.closeTooltip,f.click=this._openTooltip,this._map?this._addFocusListeners():f.add=this._addFocusListeners),this._tooltip.options.sticky&&(f.mousemove=this._moveTooltip),this[u](f),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof mt||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var u=typeof s.getElement=="function"&&s.getElement();u&&(Te(u,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),Te(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var u=typeof s.getElement=="function"&&s.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var u=s.latlng,f,m;this._tooltip.options.sticky&&s.originalEvent&&(f=this._map.mouseEventToContainerPoint(s.originalEvent),m=this._map.containerPointToLayerPoint(f),u=this._map.layerPointToLatLng(m)),this._tooltip.setLatLng(u)}});var vx=ar.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var u=s&&s.tagName==="DIV"?s:document.createElement("div"),f=this.options;if(f.html instanceof Element?(xa(u),u.appendChild(f.html)):u.innerHTML=f.html!==!1?f.html:"",f.bgPos){var m=ge(f.bgPos);u.style.backgroundPosition=-m.x+"px "+-m.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});function Jj(s){return new vx(s)}ar.Default=bi;var fh=je.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ue.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){w(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),pt(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(vi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(yi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof Se?s:new Se(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var u=this.getPane().children,f=-s(-1/0,1/0),m=0,v=u.length,I;m<v;m++)I=u[m].style.zIndex,u[m]!==this._container&&I&&(f=s(f,+I));isFinite(f)&&(this.options.zIndex=f+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ue.ielt9){Vn(this._container,this.options.opacity);var s=+new Date,u=!1,f=!1;for(var m in this._tiles){var v=this._tiles[m];if(!(!v.current||!v.loaded)){var I=Math.min(1,(s-v.loaded)/200);Vn(v.el,I),I<1?u=!0:(v.active?f=!0:this._onOpaqueTile(v),v.active=!0)}}f&&!this._noPrune&&this._pruneTiles(),u&&(P(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:h,_initContainer:function(){this._container||(this._container=Qe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,u=this.options.maxZoom;if(s!==void 0){for(var f in this._levels)f=Number(f),this._levels[f].el.children.length||f===s?(this._levels[f].el.style.zIndex=u-Math.abs(s-f),this._onUpdateLevel(f)):(pt(this._levels[f].el),this._removeTilesAtZoom(f),this._onRemoveLevel(f),delete this._levels[f]);var m=this._levels[s],v=this._map;return m||(m=this._levels[s]={},m.el=Qe("div","leaflet-tile-container leaflet-zoom-animated",this._container),m.el.style.zIndex=u,m.origin=v.project(v.unproject(v.getPixelOrigin()),s).round(),m.zoom=s,this._setZoomTransform(m,v.getCenter(),v.getZoom()),h(m.el.offsetWidth),this._onCreateLevel(m)),this._level=m,m}},_onUpdateLevel:h,_onRemoveLevel:h,_onCreateLevel:h,_pruneTiles:function(){if(this._map){var s,u,f=this._map.getZoom();if(f>this.options.maxZoom||f<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)u=this._tiles[s],u.retain=u.current;for(s in this._tiles)if(u=this._tiles[s],u.current&&!u.active){var m=u.coords;this._retainParent(m.x,m.y,m.z,m.z-5)||this._retainChildren(m.x,m.y,m.z,m.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var u in this._tiles)this._tiles[u].coords.z===s&&this._removeTile(u)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)pt(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,u,f,m){var v=Math.floor(s/2),I=Math.floor(u/2),A=f-1,V=new Se(+v,+I);V.z=+A;var U=this._tileCoordsToKey(V),G=this._tiles[U];return G&&G.active?(G.retain=!0,!0):(G&&G.loaded&&(G.retain=!0),A>m?this._retainParent(v,I,A,m):!1)},_retainChildren:function(s,u,f,m){for(var v=2*s;v<2*s+2;v++)for(var I=2*u;I<2*u+2;I++){var A=new Se(v,I);A.z=f+1;var V=this._tileCoordsToKey(A),U=this._tiles[V];if(U&&U.active){U.retain=!0;continue}else U&&U.loaded&&(U.retain=!0);f+1<m&&this._retainChildren(v,I,f+1,m)}},_resetView:function(s){var u=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var u=this.options;return u.minNativeZoom!==void 0&&s<u.minNativeZoom?u.minNativeZoom:u.maxNativeZoom!==void 0&&u.maxNativeZoom<s?u.maxNativeZoom:s},_setView:function(s,u,f,m){var v=Math.round(u);this.options.maxZoom!==void 0&&v>this.options.maxZoom||this.options.minZoom!==void 0&&v<this.options.minZoom?v=void 0:v=this._clampZoom(v);var I=this.options.updateWhenZooming&&v!==this._tileZoom;(!m||I)&&(this._tileZoom=v,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),v!==void 0&&this._update(s),f||this._pruneTiles(),this._noPrune=!!f),this._setZoomTransforms(s,u)},_setZoomTransforms:function(s,u){for(var f in this._levels)this._setZoomTransform(this._levels[f],s,u)},_setZoomTransform:function(s,u,f){var m=this._map.getZoomScale(f,s.zoom),v=s.origin.multiplyBy(m).subtract(this._map._getNewPixelOrigin(u,f)).round();ue.any3d?vn(s.el,v,m):gt(s.el,v)},_resetGrid:function(){var s=this._map,u=s.options.crs,f=this._tileSize=this.getTileSize(),m=this._tileZoom,v=this._map.getPixelWorldBounds(this._tileZoom);v&&(this._globalTileRange=this._pxBoundsToTileRange(v)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,u.wrapLng[0]],m).x/f.x),Math.ceil(s.project([0,u.wrapLng[1]],m).x/f.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([u.wrapLat[0],0],m).y/f.x),Math.ceil(s.project([u.wrapLat[1],0],m).y/f.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var u=this._map,f=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),m=u.getZoomScale(f,this._tileZoom),v=u.project(s,this._tileZoom).floor(),I=u.getSize().divideBy(m*2);return new ht(v.subtract(I),v.add(I))},_update:function(s){var u=this._map;if(u){var f=this._clampZoom(u.getZoom());if(s===void 0&&(s=u.getCenter()),this._tileZoom!==void 0){var m=this._getTiledPixelBounds(s),v=this._pxBoundsToTileRange(m),I=v.getCenter(),A=[],V=this.options.keepBuffer,U=new ht(v.getBottomLeft().subtract([V,-V]),v.getTopRight().add([V,-V]));if(!(isFinite(v.min.x)&&isFinite(v.min.y)&&isFinite(v.max.x)&&isFinite(v.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var G in this._tiles){var ne=this._tiles[G].coords;(ne.z!==this._tileZoom||!U.contains(new Se(ne.x,ne.y)))&&(this._tiles[G].current=!1)}if(Math.abs(f-this._tileZoom)>1){this._setView(s,f);return}for(var we=v.min.y;we<=v.max.y;we++)for(var $e=v.min.x;$e<=v.max.x;$e++){var Un=new Se($e,we);if(Un.z=this._tileZoom,!!this._isValidTile(Un)){var ln=this._tiles[this._tileCoordsToKey(Un)];ln?ln.current=!0:A.push(Un)}}if(A.sort(function(Kn,Tu){return Kn.distanceTo(I)-Tu.distanceTo(I)}),A.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Cr=document.createDocumentFragment();for($e=0;$e<A.length;$e++)this._addTile(A[$e],Cr);this._level.el.appendChild(Cr)}}}},_isValidTile:function(s){var u=this._map.options.crs;if(!u.infinite){var f=this._globalTileRange;if(!u.wrapLng&&(s.x<f.min.x||s.x>f.max.x)||!u.wrapLat&&(s.y<f.min.y||s.y>f.max.y))return!1}if(!this.options.bounds)return!0;var m=this._tileCoordsToBounds(s);return at(this.options.bounds).overlaps(m)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var u=this._map,f=this.getTileSize(),m=s.scaleBy(f),v=m.add(f),I=u.unproject(m,s.z),A=u.unproject(v,s.z);return[I,A]},_tileCoordsToBounds:function(s){var u=this._tileCoordsToNwSe(s),f=new Sn(u[0],u[1]);return this.options.noWrap||(f=this._map.wrapLatLngBounds(f)),f},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var u=s.split(":"),f=new Se(+u[0],+u[1]);return f.z=+u[2],f},_removeTile:function(s){var u=this._tiles[s];u&&(pt(u.el),delete this._tiles[s],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){Me(s,"leaflet-tile");var u=this.getTileSize();s.style.width=u.x+"px",s.style.height=u.y+"px",s.onselectstart=h,s.onmousemove=h,ue.ielt9&&this.options.opacity<1&&Vn(s,this.options.opacity)},_addTile:function(s,u){var f=this._getTilePos(s),m=this._tileCoordsToKey(s),v=this.createTile(this._wrapCoords(s),i(this._tileReady,this,s));this._initTile(v),this.createTile.length<2&&D(i(this._tileReady,this,s,null,v)),gt(v,f),this._tiles[m]={el:v,coords:s,current:!0},u.appendChild(v),this.fire("tileloadstart",{tile:v,coords:s})},_tileReady:function(s,u,f){u&&this.fire("tileerror",{error:u,tile:f,coords:s});var m=this._tileCoordsToKey(s);f=this._tiles[m],f&&(f.loaded=+new Date,this._map._fadeAnimated?(Vn(f.el,0),P(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(f.active=!0,this._pruneTiles()),u||(Me(f.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:f.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ue.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var u=new Se(this._wrapX?l(s.x,this._wrapX):s.x,this._wrapY?l(s.y,this._wrapY):s.y);return u.z=s.z,u},_pxBoundsToTileRange:function(s){var u=this.getTileSize();return new ht(s.min.unscaleBy(u).floor(),s.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function Xj(s){return new fh(s)}var Iu=fh.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,u){this._url=s,u=w(this,u),u.detectRetina&&ue.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),typeof u.subdomains=="string"&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,u){return this._url===s&&u===void 0&&(u=!0),this._url=s,u||this.redraw(),this},createTile:function(s,u){var f=document.createElement("img");return Te(f,"load",i(this._tileOnLoad,this,u,f)),Te(f,"error",i(this._tileOnError,this,u,f)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(f.referrerPolicy=this.options.referrerPolicy),f.alt="",f.src=this.getTileUrl(s),f},getTileUrl:function(s){var u={r:ue.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var f=this._globalTileRange.max.y-s.y;this.options.tms&&(u.y=f),u["-y"]=f}return R(this._url,t(u,this.options))},_tileOnLoad:function(s,u){ue.ielt9?setTimeout(i(s,this,null,u),0):s(null,u)},_tileOnError:function(s,u,f){var m=this.options.errorTileUrl;m&&u.getAttribute("src")!==m&&(u.src=m),s(f,u)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,u=this.options.maxZoom,f=this.options.zoomReverse,m=this.options.zoomOffset;return f&&(s=u-s),s+m},_getSubdomain:function(s){var u=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var s,u;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(u=this._tiles[s].el,u.onload=h,u.onerror=h,!u.complete)){u.src=q;var f=this._tiles[s].coords;pt(u),delete this._tiles[s],this.fire("tileabort",{tile:u,coords:f})}},_removeTile:function(s){var u=this._tiles[s];if(u)return u.el.setAttribute("src",q),fh.prototype._removeTile.call(this,s)},_tileReady:function(s,u,f){if(!(!this._map||f&&f.getAttribute("src")===q))return fh.prototype._tileReady.call(this,s,u,f)}});function yx(s,u){return new Iu(s,u)}var wx=Iu.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,u){this._url=s;var f=t({},this.defaultWmsParams);for(var m in u)m in this.options||(f[m]=u[m]);u=w(this,u);var v=u.detectRetina&&ue.retina?2:1,I=this.getTileSize();f.width=I.x*v,f.height=I.y*v,this.wmsParams=f},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var u=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[u]=this._crs.code,Iu.prototype.onAdd.call(this,s)},getTileUrl:function(s){var u=this._tileCoordsToNwSe(s),f=this._crs,m=gn(f.project(u[0]),f.project(u[1])),v=m.min,I=m.max,A=(this._wmsVersion>=1.3&&this._crs===B?[v.y,v.x,I.y,I.x]:[v.x,v.y,I.x,I.y]).join(","),V=Iu.prototype.getTileUrl.call(this,s);return V+C(this.wmsParams,V,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+A},setParams:function(s,u){return t(this.wmsParams,s),u||this.redraw(),this}});function eU(s,u){return new wx(s,u)}Iu.WMS=wx,yx.wms=eU;var vo=je.extend({options:{padding:.1},initialize:function(s){w(this,s),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Me(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,u){var f=this._map.getZoomScale(u,this._zoom),m=this._map.getSize().multiplyBy(.5+this.options.padding),v=this._map.project(this._center,u),I=m.multiplyBy(-f).add(v).subtract(this._map._getNewPixelOrigin(s,u));ue.any3d?vn(this._container,I,f):gt(this._container,I)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,u=this._map.getSize(),f=this._map.containerPointToLayerPoint(u.multiplyBy(-s)).round();this._bounds=new ht(f,f.add(u.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Ex=vo.extend({options:{tolerance:0},getEvents:function(){var s=vo.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){vo.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");Te(s,"mousemove",this._onMouseMove,this),Te(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Te(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){P(this._redrawRequest),delete this._ctx,pt(this._container),ct(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var u in this._layers)s=this._layers[u],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){vo.prototype._update.call(this);var s=this._bounds,u=this._container,f=s.getSize(),m=ue.retina?2:1;gt(u,s.min),u.width=m*f.x,u.height=m*f.y,u.style.width=f.x+"px",u.style.height=f.y+"px",ue.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){vo.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[a(s)]=s;var u=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var u=s._order,f=u.next,m=u.prev;f?f.prev=m:this._drawLast=m,m?m.next=f:this._drawFirst=f,delete s._order,delete this._layers[a(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var u=s.options.dashArray.split(/[, ]+/),f=[],m,v;for(v=0;v<u.length;v++){if(m=Number(u[v]),isNaN(m))return;f.push(m)}s.options._dashArray=f}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var u=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ht,this._redrawBounds.extend(s._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(s._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var u=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,u=this._redrawBounds;if(this._ctx.save(),u){var f=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,f.x,f.y),this._ctx.clip()}this._drawing=!0;for(var m=this._drawFirst;m;m=m.next)s=m.layer,(!u||s._pxBounds&&s._pxBounds.intersects(u))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,u){if(this._drawing){var f,m,v,I,A=s._parts,V=A.length,U=this._ctx;if(V){for(U.beginPath(),f=0;f<V;f++){for(m=0,v=A[f].length;m<v;m++)I=A[f][m],U[m?"lineTo":"moveTo"](I.x,I.y);u&&U.closePath()}this._fillStroke(U,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var u=s._point,f=this._ctx,m=Math.max(Math.round(s._radius),1),v=(Math.max(Math.round(s._radiusY),1)||m)/m;v!==1&&(f.save(),f.scale(1,v)),f.beginPath(),f.arc(u.x,u.y/v,m,0,Math.PI*2,!1),v!==1&&f.restore(),this._fillStroke(f,s)}},_fillStroke:function(s,u){var f=u.options;f.fill&&(s.globalAlpha=f.fillOpacity,s.fillStyle=f.fillColor||f.color,s.fill(f.fillRule||"evenodd")),f.stroke&&f.weight!==0&&(s.setLineDash&&s.setLineDash(u.options&&u.options._dashArray||[]),s.globalAlpha=f.opacity,s.lineWidth=f.weight,s.strokeStyle=f.color,s.lineCap=f.lineCap,s.lineJoin=f.lineJoin,s.stroke())},_onClick:function(s){for(var u=this._map.mouseEventToLayerPoint(s),f,m,v=this._drawFirst;v;v=v.next)f=v.layer,f.options.interactive&&f._containsPoint(u)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(f))&&(m=f);this._fireEvent(m?[m]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var u=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,u)}},_handleMouseOut:function(s){var u=this._hoveredLayer;u&&(At(this._container,"leaflet-interactive"),this._fireEvent([u],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,u){if(!this._mouseHoverThrottled){for(var f,m,v=this._drawFirst;v;v=v.next)f=v.layer,f.options.interactive&&f._containsPoint(u)&&(m=f);m!==this._hoveredLayer&&(this._handleMouseOut(s),m&&(Me(this._container,"leaflet-interactive"),this._fireEvent([m],s,"mouseover"),this._hoveredLayer=m)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(i(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,u,f){this._map._fireDOMEvent(u,f||u.type,s)},_bringToFront:function(s){var u=s._order;if(u){var f=u.next,m=u.prev;if(f)f.prev=m;else return;m?m.next=f:f&&(this._drawFirst=f),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(s)}},_bringToBack:function(s){var u=s._order;if(u){var f=u.next,m=u.prev;if(m)m.next=f;else return;f?f.prev=m:m&&(this._drawLast=m),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(s)}}});function bx(s){return ue.canvas?new Ex(s):null}var ph=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),tU={_initContainer:function(){this._container=Qe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(vo.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var u=s._container=ph("shape");Me(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",s._path=ph("path"),u.appendChild(s._path),this._updateStyle(s),this._layers[a(s)]=s},_addPath:function(s){var u=s._container;this._container.appendChild(u),s.options.interactive&&s.addInteractiveTarget(u)},_removePath:function(s){var u=s._container;pt(u),s.removeInteractiveTarget(u),delete this._layers[a(s)]},_updateStyle:function(s){var u=s._stroke,f=s._fill,m=s.options,v=s._container;v.stroked=!!m.stroke,v.filled=!!m.fill,m.stroke?(u||(u=s._stroke=ph("stroke")),v.appendChild(u),u.weight=m.weight+"px",u.color=m.color,u.opacity=m.opacity,m.dashArray?u.dashStyle=j(m.dashArray)?m.dashArray.join(" "):m.dashArray.replace(/( *, *)/g," "):u.dashStyle="",u.endcap=m.lineCap.replace("butt","flat"),u.joinstyle=m.lineJoin):u&&(v.removeChild(u),s._stroke=null),m.fill?(f||(f=s._fill=ph("fill")),v.appendChild(f),f.color=m.fillColor||m.color,f.opacity=m.fillOpacity):f&&(v.removeChild(f),s._fill=null)},_updateCircle:function(s){var u=s._point.round(),f=Math.round(s._radius),m=Math.round(s._radiusY||f);this._setPath(s,s._empty()?"M0 0":"AL "+u.x+","+u.y+" "+f+","+m+" 0,"+65535*360)},_setPath:function(s,u){s._path.v=u},_bringToFront:function(s){vi(s._container)},_bringToBack:function(s){yi(s._container)}},km=ue.vml?ph:tu,mh=vo.extend({_initContainer:function(){this._container=km("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=km("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){pt(this._container),ct(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){vo.prototype._update.call(this);var s=this._bounds,u=s.getSize(),f=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,f.setAttribute("width",u.x),f.setAttribute("height",u.y)),gt(f,s.min),f.setAttribute("viewBox",[s.min.x,s.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(s){var u=s._path=km("path");s.options.className&&Me(u,s.options.className),s.options.interactive&&Me(u,"leaflet-interactive"),this._updateStyle(s),this._layers[a(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){pt(s._path),s.removeInteractiveTarget(s._path),delete this._layers[a(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var u=s._path,f=s.options;u&&(f.stroke?(u.setAttribute("stroke",f.color),u.setAttribute("stroke-opacity",f.opacity),u.setAttribute("stroke-width",f.weight),u.setAttribute("stroke-linecap",f.lineCap),u.setAttribute("stroke-linejoin",f.lineJoin),f.dashArray?u.setAttribute("stroke-dasharray",f.dashArray):u.removeAttribute("stroke-dasharray"),f.dashOffset?u.setAttribute("stroke-dashoffset",f.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),f.fill?(u.setAttribute("fill",f.fillColor||f.color),u.setAttribute("fill-opacity",f.fillOpacity),u.setAttribute("fill-rule",f.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(s,u){this._setPath(s,nu(s._parts,u))},_updateCircle:function(s){var u=s._point,f=Math.max(Math.round(s._radius),1),m=Math.max(Math.round(s._radiusY),1)||f,v="a"+f+","+m+" 0 1,0 ",I=s._empty()?"M0 0":"M"+(u.x-f)+","+u.y+v+f*2+",0 "+v+-f*2+",0 ";this._setPath(s,I)},_setPath:function(s,u){s._path.setAttribute("d",u)},_bringToFront:function(s){vi(s._path)},_bringToBack:function(s){yi(s._path)}});ue.vml&&mh.include(tU);function Ix(s){return ue.svg||ue.vml?new mh(s):null}Ge.include({getRenderer:function(s){var u=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var u=this._paneRenderers[s];return u===void 0&&(u=this._createRenderer({pane:s}),this._paneRenderers[s]=u),u},_createRenderer:function(s){return this.options.preferCanvas&&bx(s)||Ix(s)}});var Tx=Eu.extend({initialize:function(s,u){Eu.prototype.initialize.call(this,this._boundsToLatLngs(s),u)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=at(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function nU(s,u){return new Tx(s,u)}mh.create=km,mh.pointsToPath=nu,_o.geometryToLayer=Sm,_o.coordsToLatLng=IE,_o.coordsToLatLngs=Dm,_o.latLngToCoords=TE,_o.latLngsToCoords=Am,_o.getFeature=bu,_o.asFeature=xm,Ge.mergeOptions({boxZoom:!0});var Cx=sr.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){Te(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ct(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){pt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),cs(),lo(),this._startPoint=this._map.mouseEventToContainerPoint(s),Te(document,{contextmenu:Tr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Qe("div","leaflet-zoom-box",this._container),Me(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var u=new ht(this._point,this._startPoint),f=u.getSize();gt(this._box,u.min),this._box.style.width=f.x+"px",this._box.style.height=f.y+"px"},_finish:function(){this._moved&&(pt(this._box),At(this._container,"leaflet-crosshair")),tt(),Jd(),ct(document,{contextmenu:Tr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var u=new Sn(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ge.addInitHook("addHandler","boxZoom",Cx),Ge.mergeOptions({doubleClickZoom:!0});var Sx=sr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var u=this._map,f=u.getZoom(),m=u.options.zoomDelta,v=s.originalEvent.shiftKey?f-m:f+m;u.options.doubleClickZoom==="center"?u.setZoom(v):u.setZoomAround(s.containerPoint,v)}});Ge.addInitHook("addHandler","doubleClickZoom",Sx),Ge.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Dx=sr.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Zr(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}Me(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){At(this._map._container,"leaflet-grab"),At(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=at(this._map.options.maxBounds);this._offsetLimit=gn(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var u=this._lastTime=+new Date,f=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(f),this._times.push(u),this._prunePositions(u)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,u){return s-(s-u)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;s.x<u.min.x&&(s.x=this._viscousLimit(s.x,u.min.x)),s.y<u.min.y&&(s.y=this._viscousLimit(s.y,u.min.y)),s.x>u.max.x&&(s.x=this._viscousLimit(s.x,u.max.x)),s.y>u.max.y&&(s.y=this._viscousLimit(s.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,u=Math.round(s/2),f=this._initialWorldOffset,m=this._draggable._newPos.x,v=(m-u+f)%s+u-f,I=(m+u+f)%s-u-f,A=Math.abs(v+f)<Math.abs(I+f)?v:I;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=A},_onDragEnd:function(s){var u=this._map,f=u.options,m=!f.inertia||s.noInertia||this._times.length<2;if(u.fire("dragend",s),m)u.fire("moveend");else{this._prunePositions(+new Date);var v=this._lastPos.subtract(this._positions[0]),I=(this._lastTime-this._times[0])/1e3,A=f.easeLinearity,V=v.multiplyBy(A/I),U=V.distanceTo([0,0]),G=Math.min(f.inertiaMaxSpeed,U),ne=V.multiplyBy(G/U),we=G/(f.inertiaDeceleration*A),$e=ne.multiplyBy(-we/2).round();!$e.x&&!$e.y?u.fire("moveend"):($e=u._limitOffset($e,u.options.maxBounds),D(function(){u.panBy($e,{duration:we,easeLinearity:A,noMoveStart:!0,animate:!0})}))}}});Ge.addInitHook("addHandler","dragging",Dx),Ge.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ax=sr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),Te(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ct(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,u=document.documentElement,f=s.scrollTop||u.scrollTop,m=s.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(m,f)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var u=this._panKeys={},f=this.keyCodes,m,v;for(m=0,v=f.left.length;m<v;m++)u[f.left[m]]=[-1*s,0];for(m=0,v=f.right.length;m<v;m++)u[f.right[m]]=[s,0];for(m=0,v=f.down.length;m<v;m++)u[f.down[m]]=[0,s];for(m=0,v=f.up.length;m<v;m++)u[f.up[m]]=[0,-1*s]},_setZoomDelta:function(s){var u=this._zoomKeys={},f=this.keyCodes,m,v;for(m=0,v=f.zoomIn.length;m<v;m++)u[f.zoomIn[m]]=s;for(m=0,v=f.zoomOut.length;m<v;m++)u[f.zoomOut[m]]=-s},_addHooks:function(){Te(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ct(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var u=s.keyCode,f=this._map,m;if(u in this._panKeys){if(!f._panAnim||!f._panAnim._inProgress)if(m=this._panKeys[u],s.shiftKey&&(m=ge(m).multiplyBy(3)),f.options.maxBounds&&(m=f._limitOffset(ge(m),f.options.maxBounds)),f.options.worldCopyJump){var v=f.wrapLatLng(f.unproject(f.project(f.getCenter()).add(m)));f.panTo(v)}else f.panBy(m)}else if(u in this._zoomKeys)f.setZoom(f.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[u]);else if(u===27&&f._popup&&f._popup.options.closeOnEscapeKey)f.closePopup();else return;Tr(s)}}});Ge.addInitHook("addHandler","keyboard",Ax),Ge.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var xx=sr.extend({addHooks:function(){Te(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ct(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var u=sh(s),f=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var m=Math.max(f-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),m),Tr(s)},_performZoom:function(){var s=this._map,u=s.getZoom(),f=this._map.options.zoomSnap||0;s._stop();var m=this._delta/(this._map.options.wheelPxPerZoomLevel*4),v=4*Math.log(2/(1+Math.exp(-Math.abs(m))))/Math.LN2,I=f?Math.ceil(v/f)*f:v,A=s._limitZoom(u+(this._delta>0?I:-I))-u;this._delta=0,this._startTime=null,A&&(s.options.scrollWheelZoom==="center"?s.setZoom(u+A):s.setZoomAround(this._lastMousePos,u+A))}});Ge.addInitHook("addHandler","scrollWheelZoom",xx);var rU=600;Ge.mergeOptions({tapHold:ue.touchNative&&ue.safari&&ue.mobile,tapTolerance:15});var Rx=sr.extend({addHooks:function(){Te(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ct(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var u=s.touches[0];this._startPos=this._newPos=new Se(u.clientX,u.clientY),this._holdTimeout=setTimeout(i(function(){this._cancel(),this._isTapValid()&&(Te(document,"touchend",xt),Te(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),rU),Te(document,"touchend touchcancel contextmenu",this._cancel,this),Te(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){ct(document,"touchend",xt),ct(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),ct(document,"touchend touchcancel contextmenu",this._cancel,this),ct(document,"touchmove",this._onMove,this)},_onMove:function(s){var u=s.touches[0];this._newPos=new Se(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,u){var f=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});f._simulated=!0,u.target.dispatchEvent(f)}});Ge.addInitHook("addHandler","tapHold",Rx),Ge.mergeOptions({touchZoom:ue.touch,bounceAtZoomLimits:!0});var Px=sr.extend({addHooks:function(){Me(this._map._container,"leaflet-touch-zoom"),Te(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){At(this._map._container,"leaflet-touch-zoom"),ct(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var u=this._map;if(!(!s.touches||s.touches.length!==2||u._animatingZoom||this._zooming)){var f=u.mouseEventToContainerPoint(s.touches[0]),m=u.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),u.options.touchZoom!=="center"&&(this._pinchStartLatLng=u.containerPointToLatLng(f.add(m)._divideBy(2))),this._startDist=f.distanceTo(m),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),Te(document,"touchmove",this._onTouchMove,this),Te(document,"touchend touchcancel",this._onTouchEnd,this),xt(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var u=this._map,f=u.mouseEventToContainerPoint(s.touches[0]),m=u.mouseEventToContainerPoint(s.touches[1]),v=f.distanceTo(m)/this._startDist;if(this._zoom=u.getScaleZoom(v,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&v<1||this._zoom>u.getMaxZoom()&&v>1)&&(this._zoom=u._limitZoom(this._zoom)),u.options.touchZoom==="center"){if(this._center=this._startLatLng,v===1)return}else{var I=f._add(m)._divideBy(2)._subtract(this._centerPoint);if(v===1&&I.x===0&&I.y===0)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(I),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),P(this._animRequest);var A=i(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(A,this,!0),xt(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,P(this._animRequest),ct(document,"touchmove",this._onTouchMove,this),ct(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ge.addInitHook("addHandler","touchZoom",Px),Ge.BoxZoom=Cx,Ge.DoubleClickZoom=Sx,Ge.Drag=Dx,Ge.Keyboard=Ax,Ge.ScrollWheelZoom=xx,Ge.TapHold=Rx,Ge.TouchZoom=Px,n.Bounds=ht,n.Browser=ue,n.CRS=Fn,n.Canvas=Ex,n.Circle=bE,n.CircleMarker=Cm,n.Class=F,n.Control=Gn,n.DivIcon=vx,n.DivOverlay=Ii,n.DomEvent=Et,n.DomUtil=wi,n.Draggable=Zr,n.Evented=qr,n.FeatureGroup=mt,n.GeoJSON=_o,n.GridLayer=fh,n.Handler=sr,n.Icon=ar,n.ImageOverlay=Rm,n.LatLng=Ie,n.LatLngBounds=Sn,n.Layer=je,n.LayerGroup=bt,n.LineUtil=d,n.Map=Ge,n.Marker=Tm,n.Mixin=pu,n.Path=fs,n.Point=Se,n.PolyUtil=ch,n.Polygon=Eu,n.Polyline=go,n.Popup=Pm,n.PosAnimation=gm,n.Projection=T,n.Rectangle=Tx,n.Renderer=vo,n.SVG=mh,n.SVGOverlay=_x,n.TileLayer=Iu,n.Tooltip=Mm,n.Transformation=Fd,n.Util=N,n.VideoOverlay=gx,n.bind=i,n.bounds=gn,n.canvas=bx,n.circle=Hj,n.circleMarker=$j,n.control=ds,n.divIcon=Jj,n.extend=t,n.featureGroup=un,n.geoJSON=mx,n.geoJson=Wj,n.gridLayer=Xj,n.icon=cr,n.imageOverlay=Gj,n.latLng=We,n.latLngBounds=at,n.layerGroup=Ye,n.map=_m,n.marker=Bj,n.point=ge,n.polygon=qj,n.polyline=zj,n.popup=Qj,n.rectangle=nU,n.setOptions=w,n.stamp=a,n.svg=Ix,n.svgOverlay=Zj,n.tileLayer=yx,n.tooltip=Yj,n.transformation=mi,n.version=e,n.videoOverlay=Kj;var iU=window.L;n.noConflict=function(){return window.L=iU,this},window.L=n})});var RA=ps(xA=>{"use strict";Object.defineProperty(xA,"__esModule",{value:!0});var AA=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};xA.default=AA});var kA=ps(MA=>{"use strict";Object.defineProperty(MA,"__esModule",{value:!0});var PK=(_t(),Cu($a)),MK=PK.__importDefault(RA()),PA=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");let r=this.fetch,i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(o=>b(this,null,function*(){var a,c,l,h;let p=null,_=null,E=null,w=o.status,C=o.statusText;if(o.ok){if(this.method!=="HEAD"){let K=yield o.text();K===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?_=K:_=JSON.parse(K))}let R=(c=this.headers.get("Prefer"))===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),j=(l=o.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");R&&j&&j.length>1&&(E=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(p={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,E=null,w=406,C="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{let R=yield o.text();try{p=JSON.parse(R),Array.isArray(p)&&o.status===404&&(_=[],p=null,w=200,C="OK")}catch{o.status===404&&R===""?(w=204,C="No Content"):p={message:R}}if(p&&this.isMaybeSingle&&(!((h=p?.details)===null||h===void 0)&&h.includes("0 rows"))&&(p=null,w=200,C="OK"),p&&this.shouldThrowOnError)throw new MK.default(p)}return{error:p,data:_,count:E,status:w,statusText:C}}));return this.shouldThrowOnError||(i=i.catch(o=>{var a,c,l,h,p,_;let E="",w=o?.cause;if(w){let C=(a=w?.message)!==null&&a!==void 0?a:"",k=(c=w?.code)!==null&&c!==void 0?c:"";E=`${(l=o?.name)!==null&&l!==void 0?l:"FetchError"}: ${o?.message}`,E+=`

Caused by: ${(h=w?.name)!==null&&h!==void 0?h:"Error"}: ${C}`,k&&(E+=` (${k})`),w?.stack&&(E+=`
${w.stack}`)}else E=(p=o?.stack)!==null&&p!==void 0?p:"";return{error:{message:`${(_=o?.name)!==null&&_!==void 0?_:"FetchError"}: ${o?.message}`,details:E,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}};MA.default=PA});var LA=ps(OA=>{"use strict";Object.defineProperty(OA,"__esModule",{value:!0});var kK=(_t(),Cu($a)),NK=kK.__importDefault(kA()),NA=class extends NK.default{select(e){let t=!1,r=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:i,referencedTable:o=i}={}){let a=o?`${o}.order`:"order",c=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${c?`${c},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){let i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:i=r}={}){let o=typeof i>"u"?"offset":`${i}.offset`,a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:i=!1,wal:o=!1,format:a="text"}={}){var c;let l=[e?"analyze":null,t?"verbose":null,r?"settings":null,i?"buffers":null,o?"wal":null].filter(Boolean).join("|"),h=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${h}"; options=${l};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};OA.default=NA});var Rw=ps(VA=>{"use strict";Object.defineProperty(VA,"__esModule",{value:!0});var OK=(_t(),Cu($a)),LK=OK.__importDefault(LA()),FK=new RegExp("[,()]"),FA=class extends LK.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){let r=Array.from(new Set(t)).map(i=>typeof i=="string"&&FK.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:i}={}){let o="";i==="plain"?o="pl":i==="phrase"?o="ph":i==="websearch"&&(o="w");let a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${o}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){let i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};VA.default=FA});var BA=ps(UA=>{"use strict";Object.defineProperty(UA,"__esModule",{value:!0});var VK=(_t(),Cu($a)),Lp=VK.__importDefault(Rw()),jA=class{constructor(e,{headers:t={},schema:r,fetch:i}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=i}select(e,t){let{head:r=!1,count:i}=t??{},o=r?"HEAD":"GET",a=!1,c=(e??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",c),i&&this.headers.append("Prefer",`count=${i}`),new Lp.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var i;let o="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){let a=e.reduce((c,l)=>c.concat(Object.keys(l)),[]);if(a.length>0){let c=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",c.join(","))}}return new Lp.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:i,defaultToNull:o=!0}={}){var a;let c="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(e)){let l=e.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(l.length>0){let h=[...new Set(l)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new Lp.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:t}={}){var r;let i="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new Lp.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;let r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Lp.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}};UA.default=jA});var E2=ps(HA=>{"use strict";Object.defineProperty(HA,"__esModule",{value:!0});var w2=(_t(),Cu($a)),jK=w2.__importDefault(BA()),UK=w2.__importDefault(Rw()),$A=class n{constructor(e,{headers:t={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");let t=new URL(`${this.url}/${e}`);return new jK.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new n(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:i=!1,count:o}={}){var a;let c,l=new URL(`${this.url}/rpc/${e}`),h;r||i?(c=r?"HEAD":"GET",Object.entries(t).filter(([_,E])=>E!==void 0).map(([_,E])=>[_,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([_,E])=>{l.searchParams.append(_,E)})):(c="POST",h=t);let p=new Headers(this.headers);return o&&p.set("Prefer",`count=${o}`),new UK.default({method:c,url:l,headers:p,schema:this.schemaName,body:h,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};HA.default=$A});var A2=ps(Wn=>{"use strict";Object.defineProperty(Wn,"__esModule",{value:!0});Wn.PostgrestError=Wn.PostgrestBuilder=Wn.PostgrestTransformBuilder=Wn.PostgrestFilterBuilder=Wn.PostgrestQueryBuilder=Wn.PostgrestClient=void 0;var bd=(_t(),Cu($a)),b2=bd.__importDefault(E2());Wn.PostgrestClient=b2.default;var I2=bd.__importDefault(BA());Wn.PostgrestQueryBuilder=I2.default;var T2=bd.__importDefault(Rw());Wn.PostgrestFilterBuilder=T2.default;var C2=bd.__importDefault(LA());Wn.PostgrestTransformBuilder=C2.default;var S2=bd.__importDefault(kA());Wn.PostgrestBuilder=S2.default;var D2=bd.__importDefault(RA());Wn.PostgrestError=D2.default;Wn.default={PostgrestClient:b2.default,PostgrestQueryBuilder:I2.default,PostgrestFilterBuilder:T2.default,PostgrestTransformBuilder:C2.default,PostgrestBuilder:S2.default,PostgrestError:D2.default}});var DE;function Om(){return DE}function Ti(n){let e=DE;return DE=n,e}var Bx=Symbol("NotFound");function Su(n){return n===Bx||n?.name==="\u0275NotFound"}var An=null,Lm=!1,AE=1,EU=null,xn=Symbol("SIGNAL");function Le(n){let e=An;return An=n,e}function Um(){return An}var Du={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Au(n){if(Lm)throw new Error("");if(An===null)return;An.consumerOnSignalRead(n);let e=An.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=An.recomputing;if(r&&(t=e!==void 0?e.nextProducer:An.producers,t!==void 0&&t.producer===n)){An.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===An&&(!r||IU(i,An)))return;let o=Ru(An),a={producer:n,consumer:An,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};An.producersTail=a,e!==void 0?e.nextProducer=a:An.producers=a,o&&qx(n,a)}function $x(){AE++}function Bm(n){if(!(Ru(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===AE)){if(!n.producerMustRecompute(n)&&!wh(n)){jm(n);return}n.producerRecomputeValue(n),jm(n)}}function xE(n){if(n.consumers===void 0)return;let e=Lm;Lm=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||bU(r)}}finally{Lm=e}}function RE(){return An?.consumerAllowSignalWrites!==!1}function bU(n){n.dirty=!0,xE(n),n.consumerMarkedDirty?.(n)}function jm(n){n.dirty=!1,n.lastCleanEpoch=AE}function xu(n){return n&&Hx(n),Le(n)}function Hx(n){n.producersTail=void 0,n.recomputing=!0}function yh(n,e){Le(e),n&&zx(n)}function zx(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Ru(n))do t=PE(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function wh(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(Bm(t),r!==t.version))return!0}return!1}function Eh(n){if(Ru(n)){let e=n.producers;for(;e!==void 0;)e=PE(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function qx(n,e){let t=n.consumersTail,r=Ru(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)qx(i.producer,i)}function PE(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Ru(e)){let o=e.producers;for(;o!==void 0;)o=PE(o)}return t}function Ru(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function $m(n){EU?.(n)}function IU(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function Hm(n,e){return Object.is(n,e)}function zm(n,e){let t=Object.create(TU);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Bm(t),Au(t),t.value===vh)throw t.error;return t.value};return r[xn]=t,$m(t),r}var Fm=Symbol("UNSET"),Vm=Symbol("COMPUTING"),vh=Symbol("ERRORED"),TU=_e(Y({},Du),{value:Fm,dirty:!0,error:null,equal:Hm,kind:"computed",producerMustRecompute(n){return n.value===Fm||n.value===Vm},producerRecomputeValue(n){if(n.value===Vm)throw new Error("");let e=n.value;n.value=Vm;let t=xu(n),r,i=!1;try{r=n.computation(),Le(null),i=e!==Fm&&e!==vh&&r!==vh&&n.equal(e,r)}catch(o){r=vh,n.error=o}finally{yh(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function CU(){throw new Error}var Wx=CU;function Gx(n){Wx(n)}function ME(n){Wx=n}var SU=null;function kE(n,e){let t=Object.create(qm);t.value=n,e!==void 0&&(t.equal=e);let r=()=>Kx(t);return r[xn]=t,$m(t),[r,a=>Pu(t,a),a=>NE(t,a)]}function Kx(n){return Au(n),n.value}function Pu(n,e){RE()||Gx(n),n.equal(n.value,e)||(n.value=e,DU(n))}function NE(n,e){RE()||Gx(n),Pu(n,e(n.value))}var qm=_e(Y({},Du),{equal:Hm,value:void 0,kind:"signal"});function DU(n){n.version++,$x(),xE(n),SU?.(n)}function ke(n){return typeof n=="function"}function Mu(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Wm=Mu(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ja(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var It=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ke(r))try{r()}catch(o){e=o instanceof Wm?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Zx(o)}catch(a){e=e??[],a instanceof Wm?e=[...e,...a.errors]:e.push(a)}}if(e)throw new Wm(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Zx(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ja(t,e)}remove(e){let{_finalizers:t}=this;t&&ja(t,e),e instanceof n&&e._removeParent(this)}};It.EMPTY=(()=>{let n=new It;return n.closed=!0,n})();var OE=It.EMPTY;function Gm(n){return n instanceof It||n&&"closed"in n&&ke(n.remove)&&ke(n.add)&&ke(n.unsubscribe)}function Zx(n){ke(n)?n():n.unsubscribe()}var Qr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ku={setTimeout(n,e,...t){let{delegate:r}=ku;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ku;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Km(n){ku.setTimeout(()=>{let{onUnhandledError:e}=Qr;if(e)e(n);else throw n})}function bh(){}var Qx=LE("C",void 0,void 0);function Yx(n){return LE("E",void 0,n)}function Jx(n){return LE("N",n,void 0)}function LE(n,e,t){return{kind:n,value:e,error:t}}var Ua=null;function Nu(n){if(Qr.useDeprecatedSynchronousErrorHandling){let e=!Ua;if(e&&(Ua={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Ua;if(Ua=null,t)throw r}}else n()}function Xx(n){Qr.useDeprecatedSynchronousErrorHandling&&Ua&&(Ua.errorThrown=!0,Ua.error=n)}var Ba=class extends It{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Gm(e)&&e.add(this)):this.destination=RU}static create(e,t,r){return new gs(e,t,r)}next(e){this.isStopped?VE(Jx(e),this):this._next(e)}error(e){this.isStopped?VE(Yx(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?VE(Qx,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},AU=Function.prototype.bind;function FE(n,e){return AU.call(n,e)}var jE=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Zm(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Zm(r)}else Zm(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Zm(t)}}},gs=class extends Ba{constructor(e,t,r){super();let i;if(ke(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Qr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&FE(e.next,o),error:e.error&&FE(e.error,o),complete:e.complete&&FE(e.complete,o)}):i=e}this.destination=new jE(i)}};function Zm(n){Qr.useDeprecatedSynchronousErrorHandling?Xx(n):Km(n)}function xU(n){throw n}function VE(n,e){let{onStoppedNotification:t}=Qr;t&&ku.setTimeout(()=>t(n,e))}var RU={closed:!0,next:bh,error:xU,complete:bh};var Ou=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ur(n){return n}function Qm(...n){return UE(n)}function UE(n){return n.length===0?ur:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var De=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=MU(t)?t:new gs(t,r,i);return Nu(()=>{let{operator:a,source:c}=this;o.add(a?a.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=eR(r),new r((i,o)=>{let a=new gs({next:c=>{try{t(c)}catch(l){o(l),a.unsubscribe()}},error:o,complete:i});this.subscribe(a)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Ou](){return this}pipe(...t){return UE(t)(this)}toPromise(t){return t=eR(t),new t((r,i)=>{let o;this.subscribe(a=>o=a,a=>i(a),()=>r(o))})}}return n.create=e=>new n(e),n})();function eR(n){var e;return(e=n??Qr.Promise)!==null&&e!==void 0?e:Promise}function PU(n){return n&&ke(n.next)&&ke(n.error)&&ke(n.complete)}function MU(n){return n&&n instanceof Ba||PU(n)&&Gm(n)}function BE(n){return ke(n?.lift)}function Je(n){return e=>{if(BE(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ke(n,e,t,r,i){return new $E(n,e,t,r,i)}var $E=class extends Ba{constructor(e,t,r,i,o,a){super(e),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=t?function(c){try{t(c)}catch(l){e.error(l)}}:super._next,this._error=i?function(c){try{i(c)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Lu(){return Je((n,e)=>{let t=null;n._refCount++;let r=Ke(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Fu=class extends De{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,BE(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new It;let t=this.getSubject();e.add(this.source.subscribe(Ke(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=It.EMPTY)}return e}refCount(){return Lu()(this)}};var tR=Mu(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Lt=(()=>{class n extends De{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Ym(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new tR}next(t){Nu(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Nu(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Nu(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?OE:(this.currentObservers=null,o.push(t),new It(()=>{this.currentObservers=null,ja(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new De;return t.source=this,t}}return n.create=(e,t)=>new Ym(e,t),n})(),Ym=class extends Lt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:OE}};var yn=class extends Lt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var HE={now(){return(HE.delegate||Date).now()},delegate:void 0};var Jm=class extends It{constructor(e,t){super()}schedule(e,t=0){return this}};var Ih={setInterval(n,e,...t){let{delegate:r}=Ih;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Ih;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Vu=class extends Jm{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Ih.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Ih.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ja(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ju=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};ju.now=HE.now;var Uu=class extends ju{constructor(e,t=ju.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var zE=new Uu(Vu);var Xm=class extends Vu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var eg=class extends Uu{};var qE=new eg(Xm);var Zn=new De(n=>n.complete());function nR(n){return n&&ke(n.schedule)}function rR(n){return n[n.length-1]}function tg(n){return ke(rR(n))?n.pop():void 0}function _s(n){return nR(rR(n))?n.pop():void 0}_t();var ag=n=>n&&typeof n.length=="number"&&typeof n!="function";function cg(n){return ke(n?.then)}function ug(n){return ke(n[Ou])}function lg(n){return Symbol.asyncIterator&&ke(n?.[Symbol.asyncIterator])}function dg(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function LU(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var hg=LU();function fg(n){return ke(n?.[hg])}_t();function pg(n){return og(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Ci(t.read());if(i)return yield Ci(void 0);yield yield Ci(r)}}finally{t.releaseLock()}})}function mg(n){return ke(n?.getReader)}function zt(n){if(n instanceof De)return n;if(n!=null){if(ug(n))return FU(n);if(ag(n))return VU(n);if(cg(n))return jU(n);if(lg(n))return DR(n);if(fg(n))return UU(n);if(mg(n))return BU(n)}throw dg(n)}function FU(n){return new De(e=>{let t=n[Ou]();if(ke(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function VU(n){return new De(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function jU(n){return new De(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Km)})}function UU(n){return new De(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function DR(n){return new De(e=>{$U(n,e).catch(t=>e.error(t))})}function BU(n){return DR(pg(n))}function $U(n,e){var t,r,i,o;return te(this,void 0,void 0,function*(){try{for(t=sg(n);r=yield t.next(),!r.done;){let a=r.value;if(e.next(a),e.closed)return}}catch(a){i={error:a}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Qn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function vs(n,e=0){return Je((t,r)=>{t.subscribe(Ke(r,i=>Qn(r,n,()=>r.next(i),e),()=>Qn(r,n,()=>r.complete(),e),i=>Qn(r,n,()=>r.error(i),e)))})}function ys(n,e=0){return Je((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function AR(n,e){return zt(n).pipe(ys(e),vs(e))}function xR(n,e){return zt(n).pipe(ys(e),vs(e))}function RR(n,e){return new De(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function PR(n,e){return new De(t=>{let r;return Qn(t,e,()=>{r=n[hg](),Qn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(a){t.error(a);return}o?t.complete():t.next(i)},0,!0)}),()=>ke(r?.return)&&r.return()})}function gg(n,e){if(!n)throw new Error("Iterable cannot be null");return new De(t=>{Qn(t,e,()=>{let r=n[Symbol.asyncIterator]();Qn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function MR(n,e){return gg(pg(n),e)}function kR(n,e){if(n!=null){if(ug(n))return AR(n,e);if(ag(n))return RR(n,e);if(cg(n))return xR(n,e);if(lg(n))return gg(n,e);if(fg(n))return PR(n,e);if(mg(n))return MR(n,e)}throw dg(n)}function ft(n,e){return e?kR(n,e):zt(n)}function he(...n){let e=_s(n);return ft(n,e)}function Bu(n,e){let t=ke(n)?n:()=>n,r=i=>i.error(t());return new De(e?i=>e.schedule(r,0,i):r)}function ZE(n){return!!n&&(n instanceof De||ke(n.lift)&&ke(n.subscribe))}var Yr=Mu(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function QE(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let o=new gs({next:a=>{r(a),o.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new Yr)}});n.subscribe(o)})}function Ae(n,e){return Je((t,r)=>{let i=0;t.subscribe(Ke(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:HU}=Array;function zU(n,e){return HU(e)?n(...e):n(e)}function _g(n){return Ae(e=>zU(n,e))}var{isArray:qU}=Array,{getPrototypeOf:WU,prototype:GU,keys:KU}=Object;function vg(n){if(n.length===1){let e=n[0];if(qU(e))return{args:e,keys:null};if(ZU(e)){let t=KU(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function ZU(n){return n&&typeof n=="object"&&WU(n)===GU}function yg(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Th(...n){let e=_s(n),t=tg(n),{args:r,keys:i}=vg(n);if(r.length===0)return ft([],e);let o=new De(QU(r,e,i?a=>yg(i,a):ur));return t?o.pipe(_g(t)):o}function QU(n,e,t=ur){return r=>{NR(e,()=>{let{length:i}=n,o=new Array(i),a=i,c=i;for(let l=0;l<i;l++)NR(e,()=>{let h=ft(n[l],e),p=!1;h.subscribe(Ke(r,_=>{o[l]=_,p||(p=!0,c--),c||r.next(t(o.slice()))},()=>{--a||r.complete()}))},r)},r)}}function NR(n,e,t){n?Qn(t,n,e):e()}function OR(n,e,t,r,i,o,a,c){let l=[],h=0,p=0,_=!1,E=()=>{_&&!l.length&&!h&&e.complete()},w=k=>h<r?C(k):l.push(k),C=k=>{o&&e.next(k),h++;let R=!1;zt(t(k,p++)).subscribe(Ke(e,j=>{i?.(j),o?w(j):e.next(j)},()=>{R=!0},void 0,()=>{if(R)try{for(h--;l.length&&h<r;){let j=l.shift();a?Qn(e,a,()=>C(j)):C(j)}E()}catch(j){e.error(j)}}))};return n.subscribe(Ke(e,w,()=>{_=!0,E()})),()=>{c?.()}}function Ft(n,e,t=1/0){return ke(e)?Ft((r,i)=>Ae((o,a)=>e(r,o,i,a))(zt(n(r,i))),t):(typeof e=="number"&&(t=e),Je((r,i)=>OR(r,i,n,t)))}function ws(n=1/0){return Ft(ur,n)}function LR(){return ws(1)}function $u(...n){return LR()(ft(n,_s(n)))}function Ch(n){return new De(e=>{zt(n()).subscribe(e)})}function YE(...n){let e=tg(n),{args:t,keys:r}=vg(n),i=new De(o=>{let{length:a}=t;if(!a){o.complete();return}let c=new Array(a),l=a,h=a;for(let p=0;p<a;p++){let _=!1;zt(t[p]).subscribe(Ke(o,E=>{_||(_=!0,h--),c[p]=E},()=>l--,void 0,()=>{(!l||!_)&&(h||o.next(r?yg(r,c):c),o.complete())}))}});return e?i.pipe(_g(e)):i}function Bn(n,e){return Je((t,r)=>{let i=0;t.subscribe(Ke(r,o=>n.call(e,o,i++)&&r.next(o)))})}function yo(n){return Je((e,t)=>{let r=null,i=!1,o;r=e.subscribe(Ke(t,void 0,void 0,a=>{o=zt(n(a,yo(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function FR(n,e,t,r,i){return(o,a)=>{let c=t,l=e,h=0;o.subscribe(Ke(a,p=>{let _=h++;l=c?n(l,p,_):(c=!0,p),r&&a.next(l)},i&&(()=>{c&&a.next(l),a.complete()})))}}function Es(n,e){return ke(e)?Ft(n,e,1):Ft(n,1)}function bs(n){return Je((e,t)=>{let r=!1;e.subscribe(Ke(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function dr(n){return n<=0?()=>Zn:Je((e,t)=>{let r=0;e.subscribe(Ke(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function wg(n=YU){return Je((e,t)=>{let r=!1;e.subscribe(Ke(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function YU(){return new Yr}function Sh(n){return Je((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function wo(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Bn((i,o)=>n(i,o,r)):ur,dr(1),t?bs(e):wg(()=>new Yr))}function Hu(n){return n<=0?()=>Zn:Je((e,t)=>{let r=[];e.subscribe(Ke(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function JE(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Bn((i,o)=>n(i,o,r)):ur,Hu(1),t?bs(e):wg(()=>new Yr))}function Eg(n,e){return Je(FR(n,e,arguments.length>=2,!0))}function bg(...n){let e=_s(n);return Je((t,r)=>{(e?$u(n,t,e):$u(n,t)).subscribe(r)})}function Vt(n,e){return Je((t,r)=>{let i=null,o=0,a=!1,c=()=>a&&!i&&r.complete();t.subscribe(Ke(r,l=>{i?.unsubscribe();let h=0,p=o++;zt(n(l,p)).subscribe(i=Ke(r,_=>r.next(e?e(l,_,p,h++):_),()=>{i=null,c()}))},()=>{a=!0,c()}))})}function Ig(n){return Je((e,t)=>{zt(n).subscribe(Ke(t,()=>t.complete(),bh)),!t.closed&&e.subscribe(t)})}function Rt(n,e,t){let r=ke(n)||e||t?{next:n,error:e,complete:t}:n;return r?Je((i,o)=>{var a;(a=r.subscribe)===null||a===void 0||a.call(r);let c=!0;i.subscribe(Ke(o,l=>{var h;(h=r.next)===null||h===void 0||h.call(r,l),o.next(l)},()=>{var l;c=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var h;c=!1,(h=r.error)===null||h===void 0||h.call(r,l),o.error(l)},()=>{var l,h;c&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(h=r.finalize)===null||h===void 0||h.call(r)}))}):ur}function VR(n){let e=Le(null);try{return n()}finally{Le(e)}}var Is=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Dg=new Is("20.3.13");var Ag="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",re=class extends Error{code;constructor(e,t){super(Ss(e,t)),this.code=e}};function JU(n){return`NG0${Math.abs(n)}`}function Ss(n,e){return`${JU(n)}${e?": "+e:""}`}var To=globalThis;function ot(n){for(let e in n)if(n[e]===ot)return e;throw Error("")}function BR(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function bo(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(bo).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function db(n,e){return n?e?`${n} ${e}`:n:e||""}var XU=ot({__forward_ref__:ot});function Si(n){return n.__forward_ref__=Si,n.toString=function(){return bo(this())},n}function wn(n){return hb(n)?n():n}function hb(n){return typeof n=="function"&&n.hasOwnProperty(XU)&&n.__forward_ref__===Si}function ie(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function fr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Rh(n){return eB(n,xg)}function fb(n){return Rh(n)!==null}function eB(n,e){return n.hasOwnProperty(e)&&n[e]||null}function tB(n){let e=n?.[xg]??null;return e||null}function eb(n){return n&&n.hasOwnProperty(Cg)?n[Cg]:null}var xg=ot({\u0275prov:ot}),Cg=ot({\u0275inj:ot}),ae=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=ie({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function pb(n){return n&&!!n.\u0275providers}var mb=ot({\u0275cmp:ot}),gb=ot({\u0275dir:ot}),_b=ot({\u0275pipe:ot}),vb=ot({\u0275mod:ot}),Ah=ot({\u0275fac:ot}),Ga=ot({__NG_ELEMENT_ID__:ot}),jR=ot({__NG_ENV_ID__:ot});function Ds(n){return typeof n=="string"?n:n==null?"":String(n)}function $R(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Ds(n)}var HR=ot({ngErrorCode:ot}),nB=ot({ngErrorMessage:ot}),rB=ot({ngTokenPath:ot});function yb(n,e){return zR("",-200,e)}function Rg(n,e){throw new re(-201,!1)}function zR(n,e,t){let r=new re(e,n);return r[HR]=e,r[nB]=n,t&&(r[rB]=t),r}function iB(n){return n[HR]}var tb;function qR(){return tb}function $n(n){let e=tb;return tb=n,e}function wb(n,e,t){let r=Rh(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Rg(n,"Injector")}var oB={},Ha=oB,nb="__NG_DI_FLAG__",rb=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=za(t)||0;try{return this.injector.get(e,r&8?null:Ha,r)}catch(i){if(Su(i))return i;throw i}}};function sB(n,e=0){let t=Om();if(t===void 0)throw new re(-203,!1);if(t===null)return wb(n,void 0,e);{let r=aB(e),i=t.retrieve(n,r);if(Su(i)){if(r.optional)return null;throw i}return i}}function ve(n,e=0){return(qR()||sB)(wn(n),e)}function H(n,e){return ve(n,za(e))}function za(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function aB(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function ib(n){let e=[];for(let t=0;t<n.length;t++){let r=wn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new re(900,!1);let i,o=0;for(let a=0;a<r.length;a++){let c=r[a],l=cB(c);typeof l=="number"?l===-1?i=c.token:o|=l:i=c}e.push(ve(i,o))}else e.push(ve(r))}return e}function WR(n,e){return n[nb]=e,n.prototype[nb]=e,n}function cB(n){return n[nb]}function Ts(n,e){let t=n.hasOwnProperty(Ah);return t?n[Ah]:null}function GR(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function KR(n){return n.flat(Number.POSITIVE_INFINITY)}function Pg(n,e){n.forEach(t=>Array.isArray(t)?Pg(t,e):e(t))}function Eb(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ph(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function ZR(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function QR(n,e,t){let r=qu(n,e);return r>=0?n[r|1]=t:(r=~r,ZR(n,r,e,t)),r}function Mg(n,e){let t=qu(n,e);if(t>=0)return n[t|1]}function qu(n,e){return uB(n,e,1)}function uB(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),a=n[o<<t];if(e===a)return o<<t;a>e?i=o:r=o+1}return~(i<<t)}var As={},hr=[],xs=new ae(""),bb=new ae("",-1),Ib=new ae(""),xh=class{get(e,t=Ha){if(t===Ha){let i=zR("",-201);throw i.name="\u0275NotFound",i}return t}};function Tb(n){return n[vb]||null}function Co(n){return n[mb]||null}function Cb(n){return n[gb]||null}function YR(n){return n[_b]||null}function Xr(n){return{\u0275providers:n}}function JR(...n){return{\u0275providers:Sb(!0,n),\u0275fromNgModule:!0}}function Sb(n,...e){let t=[],r=new Set,i,o=a=>{t.push(a)};return Pg(e,a=>{let c=a;Sg(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&XR(i,o),t}function XR(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Db(i,o=>{e(o,r)})}}function Sg(n,e,t,r){if(n=wn(n),!n)return!1;let i=null,o=eb(n),a=!o&&Co(n);if(!o&&!a){let l=n.ngModule;if(o=eb(l),o)i=l;else return!1}else{if(a&&!a.standalone)return!1;i=n}let c=r.has(i);if(a){if(c)return!1;if(r.add(i),a.dependencies){let l=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let h of l)Sg(h,e,t,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let h;try{Pg(o.imports,p=>{Sg(p,e,t,r)&&(h||=[],h.push(p))})}finally{}h!==void 0&&XR(h,e)}if(!c){let h=Ts(i)||(()=>new i);e({provide:i,useFactory:h,deps:hr},i),e({provide:Ib,useValue:i,multi:!0},i),e({provide:xs,useValue:()=>ve(i),multi:!0},i)}let l=o.providers;if(l!=null&&!c){let h=n;Db(l,p=>{e(p,h)})}}else return!1;return i!==n&&n.providers!==void 0}function Db(n,e){for(let t of n)pb(t)&&(t=t.\u0275providers),Array.isArray(t)?Db(t,e):e(t)}var lB=ot({provide:String,useValue:ot});function eP(n){return n!==null&&typeof n=="object"&&lB in n}function dB(n){return!!(n&&n.useExisting)}function hB(n){return!!(n&&n.useFactory)}function qa(n){return typeof n=="function"}function tP(n){return!!n.useClass}var Mh=new ae(""),Tg={},UR={},XE;function kh(){return XE===void 0&&(XE=new xh),XE}var jt=class{},Wa=class extends jt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,sb(e,a=>this.processProvider(a)),this.records.set(bb,zu(void 0,this)),i.has("environment")&&this.records.set(jt,zu(void 0,this));let o=this.records.get(Mh);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Ib,hr,{self:!0}))}retrieve(e,t){let r=za(t)||0;try{return this.get(e,Ha,r)}catch(i){if(Su(i))return i;throw i}}destroy(){Dh(this),this._destroyed=!0;let e=Le(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Le(e)}}onDestroy(e){return Dh(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Dh(this);let t=Ti(this),r=$n(void 0),i;try{return e()}finally{Ti(t),$n(r)}}get(e,t=Ha,r){if(Dh(this),e.hasOwnProperty(jR))return e[jR](this);let i=za(r),o,a=Ti(this),c=$n(void 0);try{if(!(i&4)){let h=this.records.get(e);if(h===void 0){let p=_B(e)&&Rh(e);p&&this.injectableDefInScope(p)?h=zu(ob(e),Tg):h=null,this.records.set(e,h)}if(h!=null)return this.hydrate(e,h,i)}let l=i&2?kh():this.parent;return t=i&8&&t===Ha?null:t,l.get(e,t)}catch(l){let h=iB(l);throw h===-200||h===-201?new re(h,null):l}finally{$n(c),Ti(a)}}resolveInjectorInitializers(){let e=Le(null),t=Ti(this),r=$n(void 0),i;try{let o=this.get(xs,hr,{self:!0});for(let a of o)a()}finally{Ti(t),$n(r),Le(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(bo(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=wn(e);let t=qa(e)?e:wn(e&&e.provide),r=pB(e);if(!qa(e)&&e.multi===!0){let i=this.records.get(t);i||(i=zu(void 0,Tg,!0),i.factory=()=>ib(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=Le(null);try{if(t.value===UR)throw yb(bo(e));return t.value===Tg&&(t.value=UR,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&gB(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Le(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=wn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function ob(n){let e=Rh(n),t=e!==null?e.factory:Ts(n);if(t!==null)return t;if(n instanceof ae)throw new re(204,!1);if(n instanceof Function)return fB(n);throw new re(204,!1)}function fB(n){if(n.length>0)throw new re(204,!1);let t=tB(n);return t!==null?()=>t.factory(n):()=>new n}function pB(n){if(eP(n))return zu(void 0,n.useValue);{let e=Ab(n);return zu(e,Tg)}}function Ab(n,e,t){let r;if(qa(n)){let i=wn(n);return Ts(i)||ob(i)}else if(eP(n))r=()=>wn(n.useValue);else if(hB(n))r=()=>n.useFactory(...ib(n.deps||[]));else if(dB(n))r=(i,o)=>ve(wn(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=wn(n&&(n.useClass||n.provide));if(mB(n))r=()=>new i(...ib(n.deps));else return Ts(i)||ob(i)}return r}function Dh(n){if(n.destroyed)throw new re(205,!1)}function zu(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function mB(n){return!!n.deps}function gB(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function _B(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function sb(n,e){for(let t of n)Array.isArray(t)?sb(t,e):t&&pb(t)?sb(t.\u0275providers,e):e(t)}function qt(n,e){let t;n instanceof Wa?(Dh(n),t=n):t=new rb(n);let r,i=Ti(t),o=$n(void 0);try{return e()}finally{Ti(i),$n(o)}}function nP(){return qR()!==void 0||Om()!=null}var ei=0,Ee=1,Ce=2,dn=3,Sr=4,Dr=5,Nh=6,Wu=7,Rn=8,Rs=9,Di=10,Pt=11,Gu=12,xb=13,Ka=14,Ar=15,Ps=16,Za=17,Ai=18,Oh=19,Rb=20,Eo=21,kg=22,Lh=23,pr=24,Qa=25,Fh=26,en=27,rP=1;var Ms=7,Vh=8,Ya=9,Hn=10;function xi(n){return Array.isArray(n)&&typeof n[rP]=="object"}function ti(n){return Array.isArray(n)&&n[rP]===!0}function Pb(n){return(n.flags&4)!==0}function ks(n){return n.componentOffset>-1}function Ku(n){return(n.flags&1)===1}function Ri(n){return!!n.template}function Zu(n){return(n[Ce]&512)!==0}function Ja(n){return(n[Ce]&256)===256}var Mb="svg",iP="math";function xr(n){for(;Array.isArray(n);)n=n[ei];return n}function kb(n,e){return xr(e[n])}function ni(n,e){return xr(e[n.index])}function Ng(n,e){return n.data[e]}function Og(n,e){return n[e]}function Nb(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Rr(n,e){let t=e[n];return xi(t)?t:t[ei]}function oP(n){return(n[Ce]&4)===4}function Lg(n){return(n[Ce]&128)===128}function sP(n){return ti(n[dn])}function Xa(n,e){return e==null?null:n[e]}function Ob(n){n[Za]=0}function Lb(n){n[Ce]&1024||(n[Ce]|=1024,Lg(n)&&Qu(n))}function aP(n,e){for(;n>0;)e=e[Ka],n--;return e}function jh(n){return!!(n[Ce]&9216||n[pr]?.dirty)}function Fg(n){n[Di].changeDetectionScheduler?.notify(8),n[Ce]&64&&(n[Ce]|=1024),jh(n)&&Qu(n)}function Qu(n){n[Di].changeDetectionScheduler?.notify(0);let e=Cs(n);for(;e!==null&&!(e[Ce]&8192||(e[Ce]|=8192,!Lg(e)));)e=Cs(e)}function Fb(n,e){if(Ja(n))throw new re(911,!1);n[Eo]===null&&(n[Eo]=[]),n[Eo].push(e)}function cP(n,e){if(n[Eo]===null)return;let t=n[Eo].indexOf(e);t!==-1&&n[Eo].splice(t,1)}function Cs(n){let e=n[dn];return ti(e)?e[dn]:e}function Vb(n){return n[Wu]??=[]}function jb(n){return n.cleanup??=[]}function uP(n,e,t,r){let i=Vb(e);i.push(t),n.firstCreatePass&&jb(n).push(r,i.length-1)}var Oe={lFrame:IP(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var ab=!1;function lP(){return Oe.lFrame.elementDepthCount}function dP(){Oe.lFrame.elementDepthCount++}function Ub(){Oe.lFrame.elementDepthCount--}function Vg(){return Oe.bindingsEnabled}function hP(){return Oe.skipHydrationRootTNode!==null}function Bb(n){return Oe.skipHydrationRootTNode===n}function $b(){Oe.skipHydrationRootTNode=null}function Fe(){return Oe.lFrame.lView}function En(){return Oe.lFrame.tView}function nt(n){return Oe.lFrame.contextLView=n,n[Rn]}function rt(n){return Oe.lFrame.contextLView=null,n}function tn(){let n=Hb();for(;n!==null&&n.type===64;)n=n.parent;return n}function Hb(){return Oe.lFrame.currentTNode}function fP(){let n=Oe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Yu(n,e){let t=Oe.lFrame;t.currentTNode=n,t.isParent=e}function zb(){return Oe.lFrame.isParent}function pP(){Oe.lFrame.isParent=!1}function mP(){return Oe.lFrame.contextLView}function qb(){return ab}function Wb(n){let e=ab;return ab=n,e}function Ju(){let n=Oe.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function gP(){return Oe.lFrame.bindingIndex}function _P(n){return Oe.lFrame.bindingIndex=n}function Xu(){return Oe.lFrame.bindingIndex++}function Gb(n){let e=Oe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function vP(){return Oe.lFrame.inI18n}function yP(n,e){let t=Oe.lFrame;t.bindingIndex=t.bindingRootIndex=n,jg(e)}function wP(){return Oe.lFrame.currentDirectiveIndex}function jg(n){Oe.lFrame.currentDirectiveIndex=n}function EP(n){let e=Oe.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Kb(){return Oe.lFrame.currentQueryIndex}function Ug(n){Oe.lFrame.currentQueryIndex=n}function vB(n){let e=n[Ee];return e.type===2?e.declTNode:e.type===1?n[Dr]:null}function Zb(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=vB(o),i===null||(o=o[Ka],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=Oe.lFrame=bP();return r.currentTNode=e,r.lView=n,!0}function Bg(n){let e=bP(),t=n[Ee];Oe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function bP(){let n=Oe.lFrame,e=n===null?null:n.child;return e===null?IP(n):e}function IP(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function TP(){let n=Oe.lFrame;return Oe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Qb=TP;function $g(){let n=TP();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function CP(n){return(Oe.lFrame.contextLView=aP(n,Oe.lFrame.contextLView))[Rn]}function Ns(){return Oe.lFrame.selectedIndex}function Os(n){Oe.lFrame.selectedIndex=n}function Hg(){let n=Oe.lFrame;return Ng(n.tView,n.selectedIndex)}function Ls(){Oe.lFrame.currentNamespace=Mb}function zg(){yB()}function yB(){Oe.lFrame.currentNamespace=null}function SP(){return Oe.lFrame.currentNamespace}var DP=!0;function qg(){return DP}function Uh(n){DP=n}function cb(n,e=null,t=null,r){let i=Yb(n,e,t,r);return i.resolveInjectorInitializers(),i}function Yb(n,e=null,t=null,r,i=new Set){let o=[t||hr,JR(n)];return r=r||(typeof n=="object"?void 0:bo(n)),new Wa(o,e||kh(),r||null,i)}var Nt=class n{static THROW_IF_NOT_FOUND=Ha;static NULL=new xh;static create(e,t){if(Array.isArray(e))return cb({name:""},t,e,"");{let r=e.name??"";return cb({name:r},e.parent,e.providers,r)}}static \u0275prov=ie({token:n,providedIn:"any",factory:()=>ve(bb)});static __NG_ELEMENT_ID__=-1},Wt=new ae(""),Pi=(()=>{class n{static __NG_ELEMENT_ID__=wB;static __NG_ENV_ID__=t=>t}return n})(),ub=class extends Pi{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Ja(this._lView)}onDestroy(e){let t=this._lView;return Fb(t,e),()=>cP(t,e)}};function wB(){return new ub(Fe())}var Jr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},zn=new ae("",{providedIn:"root",factory:()=>{let n=H(jt),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(Jr),e.handleError(t))}}}),AP={provide:xs,useValue:()=>void H(Jr),multi:!0};function Jb(n){return typeof n=="function"&&n[xn]!==void 0}function Pr(n,e){let[t,r,i]=kE(n,e?.equal),o=t,a=o[xn];return o.set=r,o.update=i,o.asReadonly=xP.bind(o),o}function xP(){let n=this[xn];if(n.readonlyFn===void 0){let e=()=>this();e[xn]=n,n.readonlyFn=e}return n.readonlyFn}function Xb(n){return Jb(n)&&typeof n.set=="function"}var Wg=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=EB}return n})();function EB(){return new Wg(Fe(),tn())}var Io=class{},Gg=new ae("",{providedIn:"root",factory:()=>!1});var e0=new ae(""),t0=new ae(""),Mi=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new yn(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new De(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=ie({token:n,providedIn:"root",factory:()=>new n})}return n})(),el=(()=>{class n{internalPendingTasks=H(Mi);scheduler=H(Io);errorHandler=H(zn);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=ie({token:n,providedIn:"root",factory:()=>new n})}return n})();function Bh(...n){}var n0=(()=>{class n{static \u0275prov=ie({token:n,providedIn:"root",factory:()=>new lb})}return n})(),lb=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function al(n){return{toString:n}.toString()}var Kg="__parameters__";function DB(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function AB(n,e,t){return al(()=>{let r=DB(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let a=new i(...o);return c.annotation=a,c;function c(l,h,p){let _=l.hasOwnProperty(Kg)?l[Kg]:Object.defineProperty(l,Kg,{value:[]})[Kg];for(;_.length<=p;)_.push(null);return(_[p]=_[p]||[]).push(a),l}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Yn=WR(AB("Optional"),8);function xB(n){return typeof n=="function"}var n_=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function aM(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Mr=(()=>{let n=()=>cM;return n.ngInherit=!0,n})();function cM(n){return n.type.prototype.ngOnChanges&&(n.setInput=PB),RB}function RB(){let n=lM(this),e=n?.current;if(e){let t=n.previous;if(t===As)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function PB(n,e,t,r,i){let o=this.declaredInputs[r],a=lM(n)||MB(n,{previous:As,current:null}),c=a.current||(a.current={}),l=a.previous,h=l[o];c[o]=new n_(h&&h.currentValue,t,l===As),aM(n,e,i,t)}var uM="__ngSimpleChanges__";function lM(n){return n[uM]||null}function MB(n,e){return n[uM]=e}var RP=[];var ut=function(n,e=null,t){for(let r=0;r<RP.length;r++){let i=RP[r];i(n,e,t)}};function kB(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let a=cM(e);(t.preOrderHooks??=[]).push(n,a),(t.preOrderCheckHooks??=[]).push(n,a)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function dM(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:c,ngAfterViewInit:l,ngAfterViewChecked:h,ngOnDestroy:p}=o;a&&(n.contentHooks??=[]).push(-t,a),c&&((n.contentHooks??=[]).push(t,c),(n.contentCheckHooks??=[]).push(t,c)),l&&(n.viewHooks??=[]).push(-t,l),h&&((n.viewHooks??=[]).push(t,h),(n.viewCheckHooks??=[]).push(t,h)),p!=null&&(n.destroyHooks??=[]).push(t,p)}}function Jg(n,e,t){hM(n,e,3,t)}function Xg(n,e,t,r){(n[Ce]&3)===t&&hM(n,e,t,r)}function r0(n,e){let t=n[Ce];(t&3)===e&&(t&=16383,t+=1,n[Ce]=t)}function hM(n,e,t,r){let i=r!==void 0?n[Za]&65535:0,o=r??-1,a=e.length-1,c=0;for(let l=i;l<a;l++)if(typeof e[l+1]=="number"){if(c=e[l],r!=null&&c>=r)break}else e[l]<0&&(n[Za]+=65536),(c<o||o==-1)&&(NB(n,t,e,l),n[Za]=(n[Za]&4294901760)+l+2),l++}function PP(n,e){ut(4,n,e);let t=Le(null);try{e.call(n)}finally{Le(t),ut(5,n,e)}}function NB(n,e,t,r){let i=t[r]<0,o=t[r+1],a=i?-t[r]:t[r],c=n[a];i?n[Ce]>>14<n[Za]>>16&&(n[Ce]&3)===e&&(n[Ce]+=16384,PP(c,o)):PP(c,o)}var nl=-1,tc=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function OB(n){return(n.flags&8)!==0}function LB(n){return(n.flags&16)!==0}function FB(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],a=t[r++],c=t[r++];n.setAttribute(e,a,c,o)}else{let o=i,a=t[++r];VB(o)?n.setProperty(e,o,a):n.setAttribute(e,o,a),r++}}return r}function fM(n){return n===3||n===4||n===6}function VB(n){return n.charCodeAt(0)===64}function rl(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?MP(n,t,i,null,e[++r]):MP(n,t,i,null,null))}}return n}function MP(n,e,t,r,i){let o=0,a=n.length;if(e===-1)a=-1;else for(;o<n.length;){let c=n[o++];if(typeof c=="number"){if(c===e){a=-1;break}else if(c>e){a=o-1;break}}}for(;o<n.length;){let c=n[o];if(typeof c=="number")break;if(c===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}a!==-1&&(n.splice(a,0,e),o=a+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function pM(n){return n!==nl}function r_(n){return n&32767}function jB(n){return n>>16}function i_(n,e){let t=jB(n),r=e;for(;t>0;)r=r[Ka],t--;return r}var p0=!0;function o_(n){let e=p0;return p0=n,e}var UB=256,mM=UB-1,gM=5,BB=0,ki={};function $B(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Ga)&&(r=t[Ga]),r==null&&(r=t[Ga]=BB++);let i=r&mM,o=1<<i;e.data[n+(i>>gM)]|=o}function s_(n,e){let t=_M(n,e);if(t!==-1)return t;let r=e[Ee];r.firstCreatePass&&(n.injectorIndex=e.length,i0(r.data,n),i0(e,null),i0(r.blueprint,null));let i=j0(n,e),o=n.injectorIndex;if(pM(i)){let a=r_(i),c=i_(i,e),l=c[Ee].data;for(let h=0;h<8;h++)e[o+h]=c[a+h]|l[a+h]}return e[o+8]=i,o}function i0(n,e){n.push(0,0,0,0,0,0,0,0,e)}function _M(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function j0(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=bM(i),r===null)return nl;if(t++,i=i[Ka],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return nl}function m0(n,e,t){$B(n,e,t)}function HB(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(fM(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function vM(n,e,t){if(t&8||n!==void 0)return n;Rg(e,"NodeInjector")}function yM(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Rs],o=$n(void 0);try{return i?i.get(e,r,t&8):wb(e,r,t&8)}finally{$n(o)}}return vM(r,e,t)}function wM(n,e,t,r=0,i){if(n!==null){if(e[Ce]&2048&&!(r&2)){let a=GB(n,e,t,r,ki);if(a!==ki)return a}let o=EM(n,e,t,r,ki);if(o!==ki)return o}return yM(e,t,r,i)}function EM(n,e,t,r,i){let o=qB(t);if(typeof o=="function"){if(!Zb(e,n,r))return r&1?vM(i,t,r):yM(e,t,r,i);try{let a;if(a=o(r),a==null&&!(r&8))Rg(t);else return a}finally{Qb()}}else if(typeof o=="number"){let a=null,c=_M(n,e),l=nl,h=r&1?e[Ar][Dr]:null;for((c===-1||r&4)&&(l=c===-1?j0(n,e):e[c+8],l===nl||!NP(r,!1)?c=-1:(a=e[Ee],c=r_(l),e=i_(l,e)));c!==-1;){let p=e[Ee];if(kP(o,c,p.data)){let _=zB(c,e,t,a,r,h);if(_!==ki)return _}l=e[c+8],l!==nl&&NP(r,e[Ee].data[c+8]===h)&&kP(o,c,e)?(a=p,c=r_(l),e=i_(l,e)):c=-1}}return i}function zB(n,e,t,r,i,o){let a=e[Ee],c=a.data[n+8],l=r==null?ks(c)&&p0:r!=a&&(c.type&3)!==0,h=i&1&&o===c,p=e_(c,a,t,l,h);return p!==null?zh(e,a,p,c,i):ki}function e_(n,e,t,r,i){let o=n.providerIndexes,a=e.data,c=o&1048575,l=n.directiveStart,h=n.directiveEnd,p=o>>20,_=r?c:c+p,E=i?c+p:h;for(let w=_;w<E;w++){let C=a[w];if(w<l&&t===C||w>=l&&C.type===t)return w}if(i){let w=a[l];if(w&&Ri(w)&&w.type===t)return l}return null}function zh(n,e,t,r,i){let o=n[t],a=e.data;if(o instanceof tc){let c=o;if(c.resolving){let w=$R(a[t]);throw yb(w)}let l=o_(c.canSeeViewProviders);c.resolving=!0;let h=a[t].type||a[t],p,_=c.injectImpl?$n(c.injectImpl):null,E=Zb(n,r,0);try{o=n[t]=c.factory(void 0,i,a,n,r),e.firstCreatePass&&t>=r.directiveStart&&kB(t,a[t],e)}finally{_!==null&&$n(_),o_(l),c.resolving=!1,Qb()}}return o}function qB(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Ga)?n[Ga]:void 0;return typeof e=="number"?e>=0?e&mM:WB:e}function kP(n,e,t){let r=1<<n;return!!(t[e+(n>>gM)]&r)}function NP(n,e){return!(n&2)&&!(n&1&&e)}var ec=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return wM(this._tNode,this._lView,e,za(r),t)}};function WB(){return new ec(tn(),Fe())}function js(n){return al(()=>{let e=n.prototype.constructor,t=e[Ah]||g0(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Ah]||g0(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function g0(n){return hb(n)?()=>{let e=g0(wn(n));return e&&e()}:Ts(n)}function GB(n,e,t,r,i){let o=n,a=e;for(;o!==null&&a!==null&&a[Ce]&2048&&!Zu(a);){let c=EM(o,a,t,r|2,ki);if(c!==ki)return c;let l=o.parent;if(!l){let h=a[Rb];if(h){let p=h.get(t,ki,r);if(p!==ki)return p}l=bM(a),a=a[Ka]}o=l}return i}function bM(n){let e=n[Ee],t=e.type;return t===2?e.declTNode:t===1?n[Dr]:null}function Kh(n){return HB(tn(),n)}function KB(){return cl(tn(),Fe())}function cl(n,e){return new Pn(ni(n,e))}var Pn=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=KB}return n})();function ZB(n){return n instanceof Pn?n.nativeElement:n}function QB(){return this._results[Symbol.iterator]()}var a_=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Lt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=KR(e);(this._changesDetected=!GR(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=QB};function IM(n){return(n.flags&128)===128}var U0=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(U0||{}),TM=new Map,YB=0;function JB(){return YB++}function XB(n){TM.set(n[Oh],n)}function _0(n){TM.delete(n[Oh])}var OP="__ngContext__";function il(n,e){xi(e)?(n[OP]=e[Oh],XB(e)):n[OP]=e}function CM(n){return DM(n[Gu])}function SM(n){return DM(n[Sr])}function DM(n){for(;n!==null&&!ti(n);)n=n[Sr];return n}var v0;function B0(n){v0=n}function AM(){if(v0!==void 0)return v0;if(typeof document<"u")return document;throw new re(210,!1)}var w_=new ae("",{providedIn:"root",factory:()=>e$}),e$="ng",E_=new ae(""),Us=new ae("",{providedIn:"platform",factory:()=>"unknown"});var b_=new ae("",{providedIn:"root",factory:()=>AM().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var t$="h",n$="b";var xM=!1,RM=new ae("",{providedIn:"root",factory:()=>xM});var $0=new ae("");var r$=(n,e,t,r)=>{};function i$(n,e,t,r){r$(n,e,t,r)}function H0(n){return(n.flags&32)===32}var o$=()=>null;function PM(n,e,t=!1){return o$(n,e,t)}function MM(n,e){let t=n.contentQueries;if(t!==null){let r=Le(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],a=t[i+1];if(a!==-1){let c=n.data[a];Ug(o),c.contentQueries(2,e[a],a)}}}finally{Le(r)}}}function y0(n,e,t){Ug(0);let r=Le(null);try{e(n,t)}finally{Le(r)}}function z0(n,e,t){if(Pb(e)){let r=Le(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let a=i;a<o;a++){let c=n.data[a];if(c.contentQueries){let l=t[a];c.contentQueries(1,l,a)}}}finally{Le(r)}}}var So=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(So||{});var Zg;function s$(){if(Zg===void 0&&(Zg=null,To.trustedTypes))try{Zg=To.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Zg}function LP(n){return s$()?.createScriptURL(n)||n}var c_=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ag})`}};function Zh(n){return n instanceof c_?n.changingThisBreaksApplicationSecurity:n}function q0(n,e){let t=kM(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Ag})`)}return t===e}function kM(n){return n instanceof c_&&n.getTypeName()||null}var a$=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function NM(n){return n=String(n),n.match(a$)?n:"unsafe:"+n}var I_=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(I_||{});function Ao(n){let e=LM();return e?e.sanitize(I_.URL,n)||"":q0(n,"URL")?Zh(n):NM(Ds(n))}function OM(n){let e=LM();if(e)return LP(e.sanitize(I_.RESOURCE_URL,n)||"");if(q0(n,"ResourceURL"))return LP(Zh(n));throw new re(904,!1)}function c$(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?OM:Ao}function W0(n,e,t){return c$(e,t)(n)}function LM(){let n=Fe();return n&&n[Di].sanitizer}var u$=/^>|^->|<!--|-->|--!>|<!-$/g,l$=/(<|>)/g,d$="\u200B$1\u200B";function h$(n){return n.replace(u$,e=>e.replace(l$,d$))}function G0(n){return n.ownerDocument.defaultView}function FM(n){return n instanceof Function?n():n}function f$(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var VM="ng-template";function p$(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&f$(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(K0(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function K0(n){return n.type===4&&n.value!==VM}function m$(n,e,t){let r=n.type===4&&!t?VM:n.value;return e===r}function g$(n,e,t){let r=4,i=n.attrs,o=i!==null?y$(i):0,a=!1;for(let c=0;c<e.length;c++){let l=e[c];if(typeof l=="number"){if(!a&&!ri(r)&&!ri(l))return!1;if(a&&ri(l))continue;a=!1,r=l|r&1;continue}if(!a)if(r&4){if(r=2|r&1,l!==""&&!m$(n,l,t)||l===""&&e.length===1){if(ri(r))return!1;a=!0}}else if(r&8){if(i===null||!p$(n,i,l,t)){if(ri(r))return!1;a=!0}}else{let h=e[++c],p=_$(l,i,K0(n),t);if(p===-1){if(ri(r))return!1;a=!0;continue}if(h!==""){let _;if(p>o?_="":_=i[p+1].toLowerCase(),r&2&&h!==_){if(ri(r))return!1;a=!0}}}}return ri(r)||a}function ri(n){return(n&1)===0}function _$(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let a=e[i];if(a===n)return i;if(a===3||a===6)o=!0;else if(a===1||a===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(a===4)break;if(a===0){i+=4;continue}}i+=o?1:2}return-1}else return w$(e,n)}function v$(n,e,t=!1){for(let r=0;r<e.length;r++)if(g$(n,e[r],t))return!0;return!1}function y$(n){for(let e=0;e<n.length;e++){let t=n[e];if(fM(t))return e}return n.length}function w$(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function FP(n,e){return n?":not("+e.trim()+")":e}function E$(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let a=n[t];if(typeof a=="string")if(r&2){let c=n[++t];i+="["+a+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+a:r&4&&(i+=" "+a);else i!==""&&!ri(a)&&(e+=FP(o,i),i=""),r=a,o=o||!ri(r);t++}return i!==""&&(e+=FP(o,i)),e}function b$(n){return n.map(E$).join(",")}function I$(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!ri(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var mr={};function T$(n,e){return n.createText(e)}function C$(n,e,t){n.setValue(e,t)}function S$(n,e){return n.createComment(h$(e))}function jM(n,e,t){return n.createElement(e,t)}function u_(n,e,t,r,i){n.insertBefore(e,t,r,i)}function UM(n,e,t){n.appendChild(e,t)}function VP(n,e,t,r,i){r!==null?u_(n,e,t,r,i):UM(n,e,t)}function D$(n,e,t,r){n.removeChild(null,e,t,r)}function A$(n,e,t){n.setAttribute(e,"style",t)}function x$(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function BM(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&FB(n,e,r),i!==null&&x$(n,e,i),o!==null&&A$(n,e,o)}function Z0(n,e,t,r,i,o,a,c,l,h,p){let _=en+r,E=_+i,w=R$(_,E),C=typeof h=="function"?h():h;return w[Ee]={type:n,blueprint:w,template:t,queries:null,viewQuery:c,declTNode:e,data:w.slice().fill(null,_),bindingStartIndex:_,expandoStartIndex:E,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:l,consts:C,incompleteFirstPass:!1,ssrId:p}}function R$(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:mr);return t}function P$(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Z0(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Q0(n,e,t,r,i,o,a,c,l,h,p){let _=e.blueprint.slice();return _[ei]=i,_[Ce]=r|4|128|8|64|1024,(h!==null||n&&n[Ce]&2048)&&(_[Ce]|=2048),Ob(_),_[dn]=_[Ka]=n,_[Rn]=t,_[Di]=a||n&&n[Di],_[Pt]=c||n&&n[Pt],_[Rs]=l||n&&n[Rs]||null,_[Dr]=o,_[Oh]=JB(),_[Nh]=p,_[Rb]=h,_[Ar]=e.type==2?n[Ar]:_,_}function M$(n,e,t){let r=ni(e,n),i=P$(t),o=n[Di].rendererFactory,a=Y0(n,Q0(n,i,null,$M(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=a}function $M(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function HM(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Y0(n,e){return n[Gu]?n[xb][Sr]=e:n[Gu]=e,n[xb]=e,e}function ee(n=1){zM(En(),Fe(),Ns()+n,!1)}function zM(n,e,t,r){if(!r)if((e[Ce]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Jg(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Xg(e,o,0,t)}Os(t)}var T_=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(T_||{});function w0(n,e,t,r){let i=Le(null);try{let[o,a,c]=n.inputs[t],l=null;(a&T_.SignalBased)!==0&&(l=e[o][xn]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):c!==null&&(r=c.call(e,r)),n.setInput!==null?n.setInput(e,l,r,t,o):aM(e,l,o,r)}finally{Le(i)}}var Ni=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Ni||{}),k$;function J0(n,e){return k$(n,e)}var ol=new Set,C_=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(C_||{}),sc=new ae(""),jP=new Set;function ul(n){jP.has(n)||(jP.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var qM=!1,E0=class extends Lt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,nP()&&(this.destroyRef=H(Pi,{optional:!0})??void 0,this.pendingTasks=H(Mi,{optional:!0})??void 0)}emit(e){let t=Le(null);try{super.next(e)}finally{Le(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),a=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),a=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),a&&(a=this.wrapInTimeout(a)));let c=super.subscribe({next:i,error:o,complete:a});return e instanceof It&&e.add(c),c}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},He=E0;function WM(n){let e,t;function r(){n=Bh;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function UP(n){return queueMicrotask(()=>n()),()=>{n=Bh}}var X0="isAngularZone",l_=X0+"_ID",N$=0,Xe=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new He(!1);onMicrotaskEmpty=new He(!1);onStable=new He(!1);onError=new He(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=qM}=e;if(typeof Zone>"u")throw new re(908,!1);Zone.assertZonePatched();let a=this;a._nesting=0,a._outer=a._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!i&&r,a.shouldCoalesceRunChangeDetection=i,a.callbackScheduled=!1,a.scheduleInRootZone=o,F$(a)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(X0)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new re(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new re(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+i,e,O$,Bh,Bh);try{return o.runTask(a,t,r)}finally{o.cancelTask(a)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},O$={};function eI(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function L$(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){WM(()=>{n.callbackScheduled=!1,b0(n),n.isCheckStableRunning=!0,eI(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),b0(n)}function F$(n){let e=()=>{L$(n)},t=N$++;n._inner=n._inner.fork({name:"angular",properties:{[X0]:!0,[l_]:t,[l_+t]:!0},onInvokeTask:(r,i,o,a,c,l)=>{if(V$(l))return r.invokeTask(o,a,c,l);try{return BP(n),r.invokeTask(o,a,c,l)}finally{(n.shouldCoalesceEventChangeDetection&&a.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),$P(n)}},onInvoke:(r,i,o,a,c,l,h)=>{try{return BP(n),r.invoke(o,a,c,l,h)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!j$(l)&&e(),$P(n)}},onHasTask:(r,i,o,a)=>{r.hasTask(o,a),i===o&&(a.change=="microTask"?(n._hasPendingMicrotasks=a.microTask,b0(n),eI(n)):a.change=="macroTask"&&(n.hasPendingMacrotasks=a.macroTask))},onHandleError:(r,i,o,a)=>(r.handleError(o,a),n.runOutsideAngular(()=>n.onError.emit(a)),!1)})}function b0(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function BP(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function $P(n){n._nesting--,eI(n)}var d_=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new He;onMicrotaskEmpty=new He;onStable=new He;onError=new He;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function V$(n){return GM(n,"__ignore_ng_zone__")}function j$(n){return GM(n,"__scheduler_tick__")}function GM(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var tI=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=ie({token:n,providedIn:"root",factory:()=>new n})}return n})(),KM=[0,1,2,3],ZM=(()=>{class n{ngZone=H(Xe);scheduler=H(Io);errorHandler=H(Jr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){H(sc,{optional:!0})}execute(){let t=this.sequences.size>0;t&&ut(16),this.executing=!0;for(let r of KM)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&ut(17)}register(t){let{view:r}=t;r!==void 0?((r[Qa]??=[]).push(t),Qu(r),r[Ce]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(C_.AFTER_NEXT_RENDER,t):t()}static \u0275prov=ie({token:n,providedIn:"root",factory:()=>new n})}return n})(),h_=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,a=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=a,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Qa];e&&(this.view[Qa]=e.filter(t=>t!==this))}};function S_(n,e){let t=e?.injector??H(Nt);return ul("NgAfterNextRender"),B$(n,t,e,!0)}function U$(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function B$(n,e,t,r){let i=e.get(tI);i.impl??=e.get(ZM);let o=e.get(sc,null,{optional:!0}),a=t?.manualCleanup!==!0?e.get(Pi):null,c=e.get(Wg,null,{optional:!0}),l=new h_(i.impl,U$(n),c?.view,r,a,o?.snapshot(null));return i.impl.register(l),l}var $$=new ae("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function QM(n,e,t){let r=n.get($$);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function H$(n,e){for(let[t,r]of e)QM(n,r.animateFns)}function HP(n,e,t,r){let i=n?.[Fh]?.enter;e!==null&&i&&i.has(t.index)&&H$(r,i)}function tl(n,e,t,r,i,o,a,c){if(i!=null){let l,h=!1;ti(i)?l=i:xi(i)&&(h=!0,i=i[ei]);let p=xr(i);n===0&&r!==null?(HP(c,r,o,t),a==null?UM(e,r,p):u_(e,r,p,a||null,!0)):n===1&&r!==null?(HP(c,r,o,t),u_(e,r,p,a||null,!0)):n===2?zP(c,o,t,_=>{D$(e,p,h,_)}):n===3&&zP(c,o,t,()=>{e.destroyNode(p)}),l!=null&&nH(e,n,t,l,o,r,a)}}function z$(n,e){YM(n,e),e[ei]=null,e[Dr]=null}function q$(n,e,t,r,i,o){r[ei]=i,r[Dr]=e,D_(n,r,t,1,i,o)}function YM(n,e){e[Di].changeDetectionScheduler?.notify(9),D_(n,e,e[Pt],2,null,null)}function W$(n){let e=n[Gu];if(!e)return o0(n[Ee],n);for(;e;){let t=null;if(xi(e))t=e[Gu];else{let r=e[Hn];r&&(t=r)}if(!t){for(;e&&!e[Sr]&&e!==n;)xi(e)&&o0(e[Ee],e),e=e[dn];e===null&&(e=n),xi(e)&&o0(e[Ee],e),t=e&&e[Sr]}e=t}}function nI(n,e){let t=n[Ya],r=t.indexOf(e);t.splice(r,1)}function JM(n,e){if(Ja(e))return;let t=e[Pt];t.destroyNode&&D_(n,e,t,3,null,null),W$(e)}function o0(n,e){if(Ja(e))return;let t=Le(null);try{e[Ce]&=-129,e[Ce]|=256,e[pr]&&Eh(e[pr]),Z$(n,e),K$(n,e),e[Ee].type===1&&e[Pt].destroy();let r=e[Ps];if(r!==null&&ti(e[dn])){r!==e[dn]&&nI(r,e);let i=e[Ai];i!==null&&i.detachView(n)}_0(e)}finally{Le(t)}}function zP(n,e,t,r){let i=n?.[Fh];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&ol.add(n),QM(t,()=>{if(i.leave&&i.leave.has(e.index)){let a=i.leave.get(e.index),c=[];if(a){for(let l=0;l<a.animateFns.length;l++){let h=a.animateFns[l],{promise:p}=h();c.push(p)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(c),G$(n,r)}else n&&ol.delete(n),r(!1)},i)}function G$(n,e){let t=n[Fh]?.running;if(t){t.then(()=>{n[Fh].running=void 0,ol.delete(n),e(!0)});return}e(!1)}function K$(n,e){let t=n.cleanup,r=e[Wu];if(t!==null)for(let a=0;a<t.length-1;a+=2)if(typeof t[a]=="string"){let c=t[a+3];c>=0?r[c]():r[-c].unsubscribe(),a+=2}else{let c=r[t[a+1]];t[a].call(c)}r!==null&&(e[Wu]=null);let i=e[Eo];if(i!==null){e[Eo]=null;for(let a=0;a<i.length;a++){let c=i[a];c()}}let o=e[Lh];if(o!==null){e[Lh]=null;for(let a of o)a.destroy()}}function Z$(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof tc)){let o=t[r+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){let c=i[o[a]],l=o[a+1];ut(4,c,l);try{l.call(c)}finally{ut(5,c,l)}}else{ut(4,i,o);try{o.call(i)}finally{ut(5,i,o)}}}}}function Q$(n,e,t){return Y$(n,e.parent,t)}function Y$(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[ei];if(ks(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===So.None||i===So.Emulated)return null}return ni(r,t)}function J$(n,e,t){return eH(n,e,t)}function X$(n,e,t){return n.type&40?ni(n,t):null}var eH=X$,qP;function rI(n,e,t,r){let i=Q$(n,r,e),o=e[Pt],a=r.parent||e[Dr],c=J$(a,r,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)VP(o,i,t[l],c,!1);else VP(o,i,t,c,!1);qP!==void 0&&qP(o,r,e,t,i)}function $h(n,e){if(e!==null){let t=e.type;if(t&3)return ni(e,n);if(t&4)return I0(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return $h(n,r);{let i=n[e.index];return ti(i)?I0(-1,i):xr(i)}}else{if(t&128)return $h(n,e.next);if(t&32)return J0(e,n)()||xr(n[e.index]);{let r=XM(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Cs(n[Ar]);return $h(i,r)}else return $h(n,e.next)}}}return null}function XM(n,e){if(e!==null){let r=n[Ar][Dr],i=e.projection;return r.projection[i]}return null}function I0(n,e){let t=Hn+n+1;if(t<e.length){let r=e[t],i=r[Ee].firstChild;if(i!==null)return $h(r,i)}return e[Ms]}function iI(n,e,t,r,i,o,a){for(;t!=null;){let c=r[Rs];if(t.type===128){t=t.next;continue}let l=r[t.index],h=t.type;if(a&&e===0&&(l&&il(xr(l),r),t.flags|=2),!H0(t))if(h&8)iI(n,e,t.child,r,i,o,!1),tl(e,n,c,i,l,t,o,r);else if(h&32){let p=J0(t,r),_;for(;_=p();)tl(e,n,c,i,_,t,o,r);tl(e,n,c,i,l,t,o,r)}else h&16?tH(n,e,r,t,i,o):tl(e,n,c,i,l,t,o,r);t=a?t.projectionNext:t.next}}function D_(n,e,t,r,i,o){iI(t,r,n.firstChild,e,i,o,!1)}function tH(n,e,t,r,i,o){let a=t[Ar],l=a[Dr].projection[r.projection];if(Array.isArray(l))for(let h=0;h<l.length;h++){let p=l[h];tl(e,n,t[Rs],i,p,r,o,t)}else{let h=l,p=a[dn];IM(r)&&(h.flags|=128),iI(n,e,h,p,i,o,!0)}}function nH(n,e,t,r,i,o,a){let c=r[Ms],l=xr(r);c!==l&&tl(e,n,t,o,c,i,a);for(let h=Hn;h<r.length;h++){let p=r[h];D_(p[Ee],p,n,e,o,c)}}function rH(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Ni.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ni.Important),n.setStyle(t,r,i,o))}}function ek(n,e,t,r,i){let o=Ns(),a=r&2;try{Os(-1),a&&e.length>en&&zM(n,e,en,!1),ut(a?2:0,i,t),t(r,i)}finally{Os(o),ut(a?3:1,i,t)}}function A_(n,e,t){lH(n,e,t),(t.flags&64)===64&&dH(n,e,t)}function x_(n,e,t=ni){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let a=r[o+1],c=a===-1?t(e,n):n[a];n[i++]=c}}}function iH(n,e,t,r){let o=r.get(RM,xM)||t===So.ShadowDom,a=n.selectRootElement(e,o);return oH(a),a}function oH(n){sH(n)}var sH=()=>null;function aH(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function tk(n,e,t,r,i,o){let a=e[Ee];if(cI(n,a,e,t,r)){ks(n)&&uH(e,n.index);return}n.type&3&&(t=aH(t)),cH(n,e,t,r,i,o)}function cH(n,e,t,r,i,o){if(n.type&3){let a=ni(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(a,t,r)}else n.type&12}function uH(n,e){let t=Rr(e,n);t[Ce]&16||(t[Ce]|=64)}function lH(n,e,t){let r=t.directiveStart,i=t.directiveEnd;ks(t)&&M$(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||s_(t,e);let o=t.initialInputs;for(let a=r;a<i;a++){let c=n.data[a],l=zh(e,n,a,t);if(il(l,e),o!==null&&mH(e,a-r,l,c,t,o),Ri(c)){let h=Rr(t.index,e);h[Rn]=zh(e,n,a,t)}}}function dH(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,a=wP();try{Os(o);for(let c=r;c<i;c++){let l=n.data[c],h=e[c];jg(c),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&hH(l,h)}}finally{Os(-1),jg(a)}}function hH(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function oI(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];v$(e,o.selectors,!1)&&(r??=[],Ri(o)?r.unshift(o):r.push(o))}return r}function fH(n,e,t,r,i,o){let a=ni(n,e);pH(e[Pt],a,o,n.value,t,r,i)}function pH(n,e,t,r,i,o,a){if(o==null)n.removeAttribute(e,i,t);else{let c=a==null?Ds(o):a(o,r||"",i);n.setAttribute(e,i,c,t)}}function mH(n,e,t,r,i,o){let a=o[e];if(a!==null)for(let c=0;c<a.length;c+=2){let l=a[c],h=a[c+1];w0(r,t,l,h)}}function sI(n,e,t,r,i){let o=en+t,a=e[Ee],c=i(a,e,n,r,t);e[o]=c,Yu(n,!0);let l=n.type===2;return l?(BM(e[Pt],c,n),(lP()===0||Ku(n))&&il(c,e),dP()):il(c,e),qg()&&(!l||!H0(n))&&rI(a,e,c,n),n}function aI(n){let e=n;return zb()?pP():(e=e.parent,Yu(e,!1)),e}function gH(n,e){let t=n[Rs];if(!t)return;let r;try{r=t.get(zn,null)}catch{r=null}r?.(e)}function cI(n,e,t,r,i){let o=n.inputs?.[r],a=n.hostDirectiveInputs?.[r],c=!1;if(a)for(let l=0;l<a.length;l+=2){let h=a[l],p=a[l+1],_=e.data[h];w0(_,t[h],p,i),c=!0}if(o)for(let l of o){let h=t[l],p=e.data[l];w0(p,h,r,i),c=!0}return c}function _H(n,e){let t=Rr(e,n),r=t[Ee];vH(r,t);let i=t[ei];i!==null&&t[Nh]===null&&(t[Nh]=PM(i,t[Rs])),ut(18),uI(r,t,t[Rn]),ut(19,t[Rn])}function vH(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function uI(n,e,t){Bg(e);try{let r=n.viewQuery;r!==null&&y0(1,r,t);let i=n.template;i!==null&&ek(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ai]?.finishViewCreation(n),n.staticContentQueries&&MM(n,e),n.staticViewQueries&&y0(2,n.viewQuery,t);let o=n.components;o!==null&&yH(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Ce]&=-5,$g()}}function yH(n,e){for(let t=0;t<e.length;t++)_H(n,e[t])}function wH(n,e,t,r){let i=Le(null);try{let o=e.tView,c=n[Ce]&4096?4096:16,l=Q0(n,o,t,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),h=n[e.index];l[Ps]=h;let p=n[Ai];return p!==null&&(l[Ai]=p.createEmbeddedView(o)),uI(o,l,t),l}finally{Le(i)}}function WP(n,e){return!e||e.firstChild===null||IM(n)}function qh(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(xr(o)),ti(o)&&nk(o,r);let a=t.type;if(a&8)qh(n,e,t.child,r);else if(a&32){let c=J0(t,e),l;for(;l=c();)r.push(l)}else if(a&16){let c=XM(e,t);if(Array.isArray(c))r.push(...c);else{let l=Cs(e[Ar]);qh(l[Ee],l,c,r,!0)}}t=i?t.projectionNext:t.next}return r}function nk(n,e){for(let t=Hn;t<n.length;t++){let r=n[t],i=r[Ee].firstChild;i!==null&&qh(r[Ee],r,i,e)}n[Ms]!==n[ei]&&e.push(n[Ms])}function rk(n){if(n[Qa]!==null){for(let e of n[Qa])e.impl.addSequence(e);n[Qa].length=0}}var ik=[];function EH(n){return n[pr]??bH(n)}function bH(n){let e=ik.pop()??Object.create(TH);return e.lView=n,e}function IH(n){n.lView[pr]!==n&&(n.lView=null,ik.push(n))}var TH=_e(Y({},Du),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Qu(n.lView)},consumerOnSignalRead(){this.lView[pr]=this}});function CH(n){let e=n[pr]??Object.create(SH);return e.lView=n,e}var SH=_e(Y({},Du),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Cs(n.lView);for(;e&&!ok(e[Ee]);)e=Cs(e);e&&Lb(e)},consumerOnSignalRead(){this.lView[pr]=this}});function ok(n){return n.type!==2}function sk(n){if(n[Lh]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Lh])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Ce]&8192)}}var DH=100;function ak(n,e=0){let r=n[Di].rendererFactory,i=!1;i||r.begin?.();try{AH(n,e)}finally{i||r.end?.()}}function AH(n,e){let t=qb();try{Wb(!0),T0(n,e);let r=0;for(;jh(n);){if(r===DH)throw new re(103,!1);r++,T0(n,1)}}finally{Wb(t)}}function xH(n,e,t,r){if(Ja(e))return;let i=e[Ce],o=!1,a=!1;Bg(e);let c=!0,l=null,h=null;o||(ok(n)?(h=EH(e),l=xu(h)):Um()===null?(c=!1,h=CH(e),l=xu(h)):e[pr]&&(Eh(e[pr]),e[pr]=null));try{Ob(e),_P(n.bindingStartIndex),t!==null&&ek(n,e,t,2,r);let p=(i&3)===3;if(!o)if(p){let w=n.preOrderCheckHooks;w!==null&&Jg(e,w,null)}else{let w=n.preOrderHooks;w!==null&&Xg(e,w,0,null),r0(e,0)}if(a||RH(e),sk(e),ck(e,0),n.contentQueries!==null&&MM(n,e),!o)if(p){let w=n.contentCheckHooks;w!==null&&Jg(e,w)}else{let w=n.contentHooks;w!==null&&Xg(e,w,1),r0(e,1)}MH(n,e);let _=n.components;_!==null&&lk(e,_,0);let E=n.viewQuery;if(E!==null&&y0(2,E,r),!o)if(p){let w=n.viewCheckHooks;w!==null&&Jg(e,w)}else{let w=n.viewHooks;w!==null&&Xg(e,w,2),r0(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[kg]){for(let w of e[kg])w();e[kg]=null}o||(rk(e),e[Ce]&=-73)}catch(p){throw o||Qu(e),p}finally{h!==null&&(yh(h,l),c&&IH(h)),$g()}}function ck(n,e){for(let t=CM(n);t!==null;t=SM(t))for(let r=Hn;r<t.length;r++){let i=t[r];uk(i,e)}}function RH(n){for(let e=CM(n);e!==null;e=SM(e)){if(!(e[Ce]&2))continue;let t=e[Ya];for(let r=0;r<t.length;r++){let i=t[r];Lb(i)}}}function PH(n,e,t){ut(18);let r=Rr(e,n);uk(r,t),ut(19,r[Rn])}function uk(n,e){Lg(n)&&T0(n,e)}function T0(n,e){let r=n[Ee],i=n[Ce],o=n[pr],a=!!(e===0&&i&16);if(a||=!!(i&64&&e===0),a||=!!(i&1024),a||=!!(o?.dirty&&wh(o)),a||=!1,o&&(o.dirty=!1),n[Ce]&=-9217,a)xH(r,n,r.template,n[Rn]);else if(i&8192){let c=Le(null);try{sk(n),ck(n,1);let l=r.components;l!==null&&lk(n,l,1),rk(n)}finally{Le(c)}}}function lk(n,e,t){for(let r=0;r<e.length;r++)PH(n,e[r],t)}function MH(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Os(~i);else{let o=i,a=t[++r],c=t[++r];yP(a,o);let l=e[o];ut(24,l),c(2,l),ut(25,l)}}}finally{Os(-1)}}function lI(n,e){let t=qb()?64:1088;for(n[Di].changeDetectionScheduler?.notify(e);n;){n[Ce]|=t;let r=Cs(n);if(Zu(n)&&!r)return n;n=r}return null}function dk(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function kH(n,e,t,r=!0){let i=e[Ee];if(NH(i,e,n,t),r){let a=I0(t,n),c=e[Pt],l=c.parentNode(n[Ms]);l!==null&&q$(i,n[Dr],c,e,l,a)}let o=e[Nh];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function C0(n,e){if(n.length<=Hn)return;let t=Hn+e,r=n[t];if(r){let i=r[Ps];i!==null&&i!==n&&nI(i,r),e>0&&(n[t-1][Sr]=r[Sr]);let o=Ph(n,Hn+e);z$(r[Ee],r);let a=o[Ai];a!==null&&a.detachView(o[Ee]),r[dn]=null,r[Sr]=null,r[Ce]&=-129}return r}function NH(n,e,t,r){let i=Hn+r,o=t.length;r>0&&(t[i-1][Sr]=e),r<o-Hn?(e[Sr]=t[i],Eb(t,Hn+r,e)):(t.push(e),e[Sr]=null),e[dn]=t;let a=e[Ps];a!==null&&t!==a&&hk(a,e);let c=e[Ai];c!==null&&c.insertView(n),Fg(e),e[Ce]|=128}function hk(n,e){let t=n[Ya],r=e[dn];if(xi(r))n[Ce]|=2;else{let i=r[dn][Ar];e[Ar]!==i&&(n[Ce]|=2)}t===null?n[Ya]=[e]:t.push(e)}var Fs=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[Ee];return qh(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Rn]}set context(e){this._lView[Rn]=e}get destroyed(){return Ja(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[dn];if(ti(e)){let t=e[Vh],r=t?t.indexOf(this):-1;r>-1&&(C0(e,r),Ph(t,r))}this._attachedToViewContainer=!1}JM(this._lView[Ee],this._lView)}onDestroy(e){Fb(this._lView,e)}markForCheck(){lI(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Ce]&=-129}reattach(){Fg(this._lView),this._lView[Ce]|=128}detectChanges(){this._lView[Ce]|=1024,ak(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new re(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Zu(this._lView),t=this._lView[Ps];t!==null&&!e&&nI(t,this._lView),YM(this._lView[Ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new re(902,!1);this._appRef=e;let t=Zu(this._lView),r=this._lView[Ps];r!==null&&!t&&hk(r,this._lView),Fg(this._lView)}};var Vs=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=OH;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=wH(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Fs(o)}}return n})();function OH(){return R_(tn(),Fe())}function R_(n,e){return n.type&4?new Vs(e,n,cl(n,e)):null}function P_(n,e,t,r,i){let o=n.data[e];if(o===null)o=LH(n,e,t,r,i),vP()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let a=fP();o.injectorIndex=a===null?-1:a.injectorIndex}return Yu(o,!0),o}function LH(n,e,t,r,i){let o=Hb(),a=zb(),c=a?o:o&&o.parent,l=n.data[e]=VH(n,c,t,e,r,i);return FH(n,l,o,a),l}function FH(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function VH(n,e,t,r,i,o){let a=e?e.injectorIndex:-1,c=0;return hP()&&(c|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var die=new RegExp(`^(\\d+)*(${n$}|${t$})*(.*)`);var jH=()=>null;function GP(n,e){return jH(n,e)}var fk=class{},M_=class{},S0=class{resolveComponentFactory(e){throw new re(917,!1)}},Qh=class{static NULL=new S0},nc=class{},Oi=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>UH()}return n})();function UH(){let n=Fe(),e=tn(),t=Rr(e.index,n);return(xi(t)?t:n)[Pt]}var pk=(()=>{class n{static \u0275prov=ie({token:n,providedIn:"root",factory:()=>null})}return n})();var t_={},D0=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,t_,r);return i!==t_||t===t_?i:this.parentInjector.get(e,t,r)}};function f_(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number")o=c;else if(o==1)i=db(i,c);else if(o==2){let l=c,h=e[++a];r=db(r,l+": "+h+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function ce(n,e=0){let t=Fe();if(t===null)return ve(n,e);let r=tn();return wM(r,t,wn(n),e)}function dI(){let n="invalid";throw new Error(n)}function mk(n,e,t,r,i){let o=r===null?null:{"":-1},a=i(n,t);if(a!==null){let c=a,l=null,h=null;for(let p of a)if(p.resolveHostDirectives!==null){[c,l,h]=p.resolveHostDirectives(a);break}HH(n,e,t,c,o,l,h)}o!==null&&r!==null&&BH(t,r,o)}function BH(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new re(-301,!1);r.push(e[i],o)}}function $H(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function HH(n,e,t,r,i,o,a){let c=r.length,l=!1;for(let E=0;E<c;E++){let w=r[E];!l&&Ri(w)&&(l=!0,$H(n,t,E)),m0(s_(t,e),n,w.type)}ZH(t,n.data.length,c);for(let E=0;E<c;E++){let w=r[E];w.providersResolver&&w.providersResolver(w)}let h=!1,p=!1,_=HM(n,e,c,null);c>0&&(t.directiveToIndex=new Map);for(let E=0;E<c;E++){let w=r[E];if(t.mergedAttrs=rl(t.mergedAttrs,w.hostAttrs),qH(n,t,e,_,w),KH(_,w,i),a!==null&&a.has(w)){let[k,R]=a.get(w);t.directiveToIndex.set(w.type,[_,k+t.directiveStart,R+t.directiveStart])}else(o===null||!o.has(w))&&t.directiveToIndex.set(w.type,_);w.contentQueries!==null&&(t.flags|=4),(w.hostBindings!==null||w.hostAttrs!==null||w.hostVars!==0)&&(t.flags|=64);let C=w.type.prototype;!h&&(C.ngOnChanges||C.ngOnInit||C.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),h=!0),!p&&(C.ngOnChanges||C.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),p=!0),_++}zH(n,t,o)}function zH(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))KP(0,e,i,r),KP(1,e,i,r),QP(e,r,!1);else{let o=t.get(i);ZP(0,e,o,r),ZP(1,e,o,r),QP(e,r,!0)}}}function KP(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let a;n===0?a=e.inputs??={}:a=e.outputs??={},a[o]??=[],a[o].push(r),gk(e,o)}}function ZP(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let a=i[o],c;n===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[a]??=[],c[a].push(r,o),gk(e,a)}}function gk(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function QP(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||K0(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let a=null,c=0;for(;c<r.length;){let l=r[c];if(l===0){c+=4;continue}else if(l===5){c+=2;continue}else if(typeof l=="number")break;if(!t&&i.hasOwnProperty(l)){let h=i[l];for(let p of h)if(p===e){a??=[],a.push(l,r[c+1]);break}}else if(t&&o.hasOwnProperty(l)){let h=o[l];for(let p=0;p<h.length;p+=2)if(h[p]===e){a??=[],a.push(h[p+1],r[c+1]);break}}c+=2}n.initialInputs??=[],n.initialInputs.push(a)}function qH(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Ts(i.type,!0)),a=new tc(o,Ri(i),ce,null);n.blueprint[r]=a,t[r]=a,WH(n,e,r,HM(n,t,i.hostVars,mr),i)}function WH(n,e,t,r,i){let o=i.hostBindings;if(o){let a=n.hostBindingOpCodes;a===null&&(a=n.hostBindingOpCodes=[]);let c=~e.index;GH(a)!=c&&a.push(c),a.push(t,r,o)}}function GH(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function KH(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ri(e)&&(t[""]=n)}}function ZH(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function hI(n,e,t,r,i,o,a,c){let l=e[Ee],h=l.consts,p=Xa(h,a),_=P_(l,n,t,r,p);return o&&mk(l,e,_,Xa(h,c),i),_.mergedAttrs=rl(_.mergedAttrs,_.attrs),_.attrs!==null&&f_(_,_.attrs,!1),_.mergedAttrs!==null&&f_(_,_.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,_),_}function fI(n,e){dM(n,e),Pb(e)&&n.queries.elementEnd(e)}function QH(n,e,t,r,i,o){let a=e.consts,c=Xa(a,i),l=P_(e,n,t,r,c);if(l.mergedAttrs=rl(l.mergedAttrs,l.attrs),o!=null){let h=Xa(a,o);l.localNames=[];for(let p=0;p<h.length;p+=2)l.localNames.push(h[p],-1)}return l.attrs!==null&&f_(l,l.attrs,!1),l.mergedAttrs!==null&&f_(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function pI(n){return vk(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function _k(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function vk(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function mI(n,e,t){return n[e]=t}function YH(n,e){return n[e]}function Do(n,e,t){if(t===mr)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function yk(n,e,t,r){let i=Do(n,e,t);return Do(n,e+1,r)||i}function s0(n,e,t){return function r(i){let o=ks(n)?Rr(n.index,e):e;lI(o,5);let a=e[Rn],c=YP(e,a,t,i),l=r.__ngNextListenerFn__;for(;l;)c=YP(e,a,l,i)&&c,l=l.__ngNextListenerFn__;return c}}function YP(n,e,t,r){let i=Le(null);try{return ut(6,e,t),t(r)!==!1}catch(o){return gH(n,o),!1}finally{ut(7,e,t),Le(i)}}function JH(n,e,t,r,i,o,a,c){let l=Ku(n),h=!1,p=null;if(!r&&l&&(p=ez(e,t,o,n.index)),p!==null){let _=p.__ngLastListenerFn__||p;_.__ngNextListenerFn__=a,p.__ngLastListenerFn__=a,h=!0}else{let _=ni(n,t),E=r?r(_):_;i$(t,E,o,c);let w=i.listen(E,o,c);if(!XH(o)){let C=r?k=>r(xr(k[n.index])):n.index;wk(C,e,t,o,c,w,!1)}}return h}function XH(n){return n.startsWith("animation")||n.startsWith("transition")}function ez(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let a=i[o];if(a===t&&i[o+1]===r){let c=e[Wu],l=i[o+2];return c&&c.length>l?c[l]:null}typeof a=="string"&&(o+=2)}return null}function wk(n,e,t,r,i,o,a){let c=e.firstCreatePass?jb(e):null,l=Vb(t),h=l.length;l.push(i,o),c&&c.push(r,n,h,(h+1)*(a?-1:1))}function JP(n,e,t,r,i,o){let a=e[t],c=e[Ee],h=c.data[t].outputs[r],_=a[h].subscribe(o);wk(n.index,c,e,i,o,_,!0)}var A0=Symbol("BINDING");var p_=class extends Qh{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Co(e);return new rc(t,this.ngModule)}};function tz(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&T_.SignalBased)!==0};return i&&(o.transform=i),o})}function nz(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function rz(n,e,t){let r=e instanceof jt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new D0(t,r):t}function iz(n){let e=n.get(nc,null);if(e===null)throw new re(407,!1);let t=n.get(pk,null),r=n.get(Io,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function oz(n,e){let t=Ek(n);return jM(e,t,t==="svg"?Mb:t==="math"?iP:null)}function Ek(n){return(n.selectors[0][0]||"div").toLowerCase()}var rc=class extends M_{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=tz(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=nz(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=b$(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,a){ut(22);let c=Le(null);try{let l=this.componentDef,h=sz(r,l,a,o),p=rz(l,i||this.ngModule,e),_=iz(p),E=_.rendererFactory.createRenderer(null,l),w=r?iH(E,r,l.encapsulation,p):oz(l,E),C=a?.some(XP)||o?.some(j=>typeof j!="function"&&j.bindings.some(XP)),k=Q0(null,h,null,512|$M(l),null,null,_,E,p,null,PM(w,p,!0));k[en]=w,Bg(k);let R=null;try{let j=hI(en,k,2,"#host",()=>h.directiveRegistry,!0,0);BM(E,w,j),il(w,k),A_(h,k,j),z0(h,j,k),fI(h,j),t!==void 0&&cz(j,this.ngContentSelectors,t),R=Rr(j.index,k),k[Rn]=R[Rn],uI(h,k,null)}catch(j){throw R!==null&&_0(R),_0(k),j}finally{ut(23),$g()}return new m_(this.componentType,k,!!C)}finally{Le(c)}}};function sz(n,e,t,r){let i=n?["ng-version","20.3.13"]:I$(e.selectors[0]),o=null,a=null,c=0;if(t)for(let p of t)c+=p[A0].requiredVars,p.create&&(p.targetIdx=0,(o??=[]).push(p)),p.update&&(p.targetIdx=0,(a??=[]).push(p));if(r)for(let p=0;p<r.length;p++){let _=r[p];if(typeof _!="function")for(let E of _.bindings){c+=E[A0].requiredVars;let w=p+1;E.create&&(E.targetIdx=w,(o??=[]).push(E)),E.update&&(E.targetIdx=w,(a??=[]).push(E))}}let l=[e];if(r)for(let p of r){let _=typeof p=="function"?p:p.type,E=Cb(_);l.push(E)}return Z0(0,null,az(o,a),1,c,l,null,null,null,[i],null)}function az(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function XP(n){let e=n[A0].kind;return e==="input"||e==="twoWay"}var m_=class extends fk{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Ng(t[Ee],en),this.location=cl(this._tNode,t),this.instance=Rr(this._tNode.index,t)[Rn],this.hostView=this.changeDetectorRef=new Fs(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=cI(r,i[Ee],i,e,t);this.previousInputValues.set(e,t);let a=Rr(r.index,i);lI(a,1)}get injector(){return new ec(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function cz(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var xo=(()=>{class n{static __NG_ELEMENT_ID__=uz}return n})();function uz(){let n=tn();return Ik(n,Fe())}var lz=xo,bk=class extends lz{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return cl(this._hostTNode,this._hostLView)}get injector(){return new ec(this._hostTNode,this._hostLView)}get parentInjector(){let e=j0(this._hostTNode,this._hostLView);if(pM(e)){let t=i_(e,this._hostLView),r=r_(e),i=t[Ee].data[r+8];return new ec(i,t)}else return new ec(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=eM(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Hn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let a=GP(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(t||{},o,a);return this.insertImpl(c,i,WP(this._hostTNode,a)),c}createComponent(e,t,r,i,o,a,c){let l=e&&!xB(e),h;if(l)h=t;else{let R=t||{};h=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef,a=R.directives,c=R.bindings}let p=l?e:new rc(Co(e)),_=r||this.parentInjector;if(!o&&p.ngModule==null){let j=(l?_:this.parentInjector).get(jt,null);j&&(o=j)}let E=Co(p.componentType??{}),w=GP(this._lContainer,E?.id??null),C=w?.firstChild??null,k=p.create(_,i,C,o,a,c);return this.insertImpl(k.hostView,h,WP(this._hostTNode,w)),k}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(sP(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let l=i[dn],h=new bk(l,l[Dr],l[dn]);h.detach(h.indexOf(e))}}let o=this._adjustIndex(t),a=this._lContainer;return kH(a,i,o,r),e.attachToViewContainerRef(),Eb(a0(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=eM(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=C0(this._lContainer,t);r&&(Ph(a0(this._lContainer),t),JM(r[Ee],r))}detach(e){let t=this._adjustIndex(e,-1),r=C0(this._lContainer,t);return r&&Ph(a0(this._lContainer),t)!=null?new Fs(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function eM(n){return n[Vh]}function a0(n){return n[Vh]||(n[Vh]=[])}function Ik(n,e){let t,r=e[n.index];return ti(r)?t=r:(t=dk(r,e,null,n),e[n.index]=t,Y0(e,t)),hz(t,e,n,r),new bk(t,n,e)}function dz(n,e){let t=n[Pt],r=t.createComment(""),i=ni(e,n),o=t.parentNode(i);return u_(t,o,r,t.nextSibling(i),!1),r}var hz=mz,fz=()=>!1;function pz(n,e,t){return fz(n,e,t)}function mz(n,e,t,r){if(n[Ms])return;let i;t.type&8?i=xr(r):i=dz(e,t),n[Ms]=i}var x0=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},R0=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let a=t.getByIndex(o),c=this.queries[a.indexInDeclarationView];i.push(c.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)gI(e,t).matches!==null&&this.queries[t].setDirty()}},P0=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=Iz(e):this.predicate=e}},M0=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},k0=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,gz(t,o)),this.matchTNodeWithReadOption(e,t,e_(t,e,o,!1,!1))}else r===Vs?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,e_(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Pn||i===xo||i===Vs&&t.type&4)this.addMatch(t.index,-2);else{let o=e_(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function gz(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function _z(n,e){return n.type&11?cl(n,e):n.type&4?R_(n,e):null}function vz(n,e,t,r){return t===-1?_z(e,n):t===-2?yz(n,e,r):zh(n,n[Ee],t,e)}function yz(n,e,t){if(t===Pn)return cl(e,n);if(t===Vs)return R_(e,n);if(t===xo)return Ik(e,n)}function Tk(n,e,t,r){let i=e[Ai].queries[r];if(i.matches===null){let o=n.data,a=t.matches,c=[];for(let l=0;a!==null&&l<a.length;l+=2){let h=a[l];if(h<0)c.push(null);else{let p=o[h];c.push(vz(e,p,a[l+1],t.metadata.read))}}i.matches=c}return i.matches}function N0(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let a=Tk(n,e,i,t);for(let c=0;c<o.length;c+=2){let l=o[c];if(l>0)r.push(a[c/2]);else{let h=o[c+1],p=e[-l];for(let _=Hn;_<p.length;_++){let E=p[_];E[Ps]===E[dn]&&N0(E[Ee],E,h,r)}if(p[Ya]!==null){let _=p[Ya];for(let E=0;E<_.length;E++){let w=_[E];N0(w[Ee],w,h,r)}}}}}return r}function wz(n,e){return n[Ai].queries[e].queryList}function Ez(n,e,t){let r=new a_((t&4)===4);return uP(n,e,r,r.destroy),(e[Ai]??=new R0).queries.push(new x0(r))-1}function bz(n,e,t,r){let i=En();if(i.firstCreatePass){let o=tn();Tz(i,new P0(e,t,r),o.index),Cz(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return Ez(i,Fe(),t)}function Iz(n){return n.split(",").map(e=>e.trim())}function Tz(n,e,t){n.queries===null&&(n.queries=new M0),n.queries.track(new k0(e,t))}function Cz(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function gI(n,e){return n.queries.getByIndex(e)}function Sz(n,e){let t=n[Ee],r=gI(t,e);return r.crossesNgTemplate?N0(t,n,e,[]):Tk(t,n,r,e)}var ic=class{},k_=class{};var g_=class extends ic{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new p_(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=Tb(e);this._bootstrapComponents=FM(o.bootstrap),this._r3Injector=Yb(e,t,[{provide:ic,useValue:this},{provide:Qh,useValue:this.componentFactoryResolver},...r],bo(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},__=class extends k_{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new g_(this.moduleType,e,[])}};var Wh=class extends ic{injector;componentFactoryResolver=new p_(this);instance=null;constructor(e){super();let t=new Wa([...e.providers,{provide:ic,useValue:this},{provide:Qh,useValue:this.componentFactoryResolver}],e.parent||kh(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ll(n,e,t=null){return new Wh({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var Dz=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Sb(!1,t.type),i=r.length>0?ll([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ie({token:n,providedIn:"environment",factory:()=>new n(ve(jt))})}return n})();function nn(n){return al(()=>{let e=Ck(n),t=_e(Y({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===U0.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(Dz).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||So.Emulated,styles:n.styles||hr,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&ul("NgStandalone"),Sk(t);let r=n.dependencies;return t.directiveDefs=tM(r,Az),t.pipeDefs=tM(r,YR),t.id=Pz(t),t})}function Az(n){return Co(n)||Cb(n)}function kr(n){return al(()=>({type:n.type,bootstrap:n.bootstrap||hr,declarations:n.declarations||hr,imports:n.imports||hr,exports:n.exports||hr,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function xz(n,e){if(n==null)return As;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,a,c,l;Array.isArray(i)?(c=i[0],o=i[1],a=i[2]??o,l=i[3]||null):(o=i,a=i,c=T_.None,l=null),t[o]=[r,c,l],e[o]=a}return t}function Rz(n){if(n==null)return As;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function vt(n){return al(()=>{let e=Ck(n);return Sk(e),e})}function N_(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Ck(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||As,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||hr,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:xz(n.inputs,e),outputs:Rz(n.outputs),debugInfo:null}}function Sk(n){n.features?.forEach(e=>e(n))}function tM(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function Pz(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Mz(n){return Object.getPrototypeOf(n.prototype).constructor}function ii(n){let e=Mz(n.type),t=!0,r=[n];for(;e;){let i;if(Ri(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new re(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let a=n;a.inputs=c0(n.inputs),a.declaredInputs=c0(n.declaredInputs),a.outputs=c0(n.outputs);let c=i.hostBindings;c&&Fz(n,c);let l=i.viewQuery,h=i.contentQueries;if(l&&Oz(n,l),h&&Lz(n,h),kz(n,i),BR(n.outputs,i.outputs),Ri(i)&&i.data.animation){let p=n.data;p.animation=(p.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let a=0;a<o.length;a++){let c=o[a];c&&c.ngInherit&&c(n),c===ii&&(t=!1)}}e=Object.getPrototypeOf(e)}Nz(r)}function kz(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function Nz(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=rl(i.hostAttrs,t=rl(t,i.hostAttrs))}}function c0(n){return n===As?{}:n===hr?[]:n}function Oz(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function Lz(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function Fz(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function Vz(n,e,t,r,i,o,a,c){if(t.firstCreatePass){n.mergedAttrs=rl(n.mergedAttrs,n.attrs);let p=n.tView=Z0(2,n,i,o,a,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),p.queries=t.queries.embeddedTView(n))}c&&(n.flags|=c),Yu(n,!1);let l=Uz(t,e,n,r);qg()&&rI(t,e,l,n),il(l,e);let h=dk(l,e,l,n);e[r+en]=h,Y0(e,h),pz(h,n,e)}function jz(n,e,t,r,i,o,a,c,l,h,p){let _=t+en,E;return e.firstCreatePass?(E=P_(e,_,4,a||null,c||null),Vg()&&mk(e,n,E,Xa(e.consts,h),oI),dM(e,E)):E=e.data[_],Vz(E,n,e,t,r,i,o,l),Ku(E)&&A_(e,n,E),h!=null&&x_(n,E,p),E}function qe(n,e,t,r,i,o,a,c){let l=Fe(),h=En(),p=Xa(h.consts,o);return jz(l,h,n,e,t,r,i,p,void 0,a,c),qe}var Uz=Bz;function Bz(n,e,t,r){return Uh(!0),e[Pt].createComment("")}var _I=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var vI=new ae("");function Ro(n){return!!n&&typeof n.then=="function"}function O_(n){return!!n&&typeof n.subscribe=="function"}var yI=new ae("");function L_(n){return Xr([{provide:yI,multi:!0,useValue:n}])}var wI=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=H(yI,{optional:!0})??[];injector=H(Nt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=qt(this.injector,i);if(Ro(o))t.push(o);else if(O_(o)){let a=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});t.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Yh=new ae("");function Dk(){ME(()=>{let n="";throw new re(600,n)})}function Ak(n){return n.isBoundToModule}var $z=10;var Bs=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=H(zn);afterRenderManager=H(tI);zonelessEnabled=H(Gg);rootEffectScheduler=H(n0);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Lt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=H(Mi);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Ae(t=>!t))}constructor(){H(sc,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=H(jt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Nt.NULL){return this._injector.get(Xe).run(()=>{ut(10);let a=t instanceof M_;if(!this._injector.get(wI).done){let C="";throw new re(405,C)}let l;a?l=t:l=this._injector.get(Qh).resolveComponentFactory(t),this.componentTypes.push(l.componentType);let h=Ak(l)?void 0:this._injector.get(ic),p=r||l.selector,_=l.create(i,[],p,h),E=_.location.nativeElement,w=_.injector.get(vI,null);return w?.registerApplication(E),_.onDestroy(()=>{this.detachView(_.hostView),Hh(this.components,_),w?.unregisterApplication(E)}),this._loadComponent(_),ut(11,_),_})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ut(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(C_.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new re(101,!1);let t=Le(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Le(t),this.afterTick.next(),ut(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(nc,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<$z;)ut(14),this.synchronizeOnce(),ut(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!jh(i))continue;let o=r&&!this.zonelessEnabled?0:1;ak(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>jh(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Hh(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Yh,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Hh(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new re(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Hh(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function dl(n,e,t,r){let i=Fe(),o=Xu();if(Do(i,o,e)){let a=En(),c=Hg();fH(c,i,n,e,t,r)}return dl}var vie=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function le(n,e,t){let r=Fe(),i=Xu();if(Do(r,i,e)){let o=En(),a=Hg();tk(a,r,n,e,r[Pt],t)}return le}function nM(n,e,t,r,i){cI(e,n,t,i?"class":"style",r)}function z(n,e,t,r){let i=Fe(),o=i[Ee],a=n+en,c=o.firstCreatePass?hI(a,i,2,e,oI,Vg(),t,r):o.data[a];if(sI(c,i,n,e,xk),Ku(c)){let l=i[Ee];A_(l,i,c),z0(l,c,i)}return r!=null&&x_(i,c),z}function $(){let n=En(),e=tn(),t=aI(e);return n.firstCreatePass&&fI(n,t),Bb(t)&&$b(),Ub(),t.classesWithoutHost!=null&&OB(t)&&nM(n,t,Fe(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&LB(t)&&nM(n,t,Fe(),t.stylesWithoutHost,!1),$}function Ut(n,e,t,r){return z(n,e,t,r),$(),Ut}function hl(n,e,t,r){let i=Fe(),o=i[Ee],a=n+en,c=o.firstCreatePass?QH(a,o,2,e,t,r):o.data[a];return sI(c,i,n,e,xk),r!=null&&x_(i,c),hl}function fl(){let n=tn(),e=aI(n);return Bb(e)&&$b(),Ub(),fl}var xk=(n,e,t,r,i)=>(Uh(!0),jM(e[Pt],r,SP()));function pl(n,e,t){let r=Fe(),i=r[Ee],o=n+en,a=i.firstCreatePass?hI(o,r,8,"ng-container",oI,Vg(),e,t):i.data[o];if(sI(a,r,n,"ng-container",Hz),Ku(a)){let c=r[Ee];A_(c,r,a),z0(c,a,r)}return t!=null&&x_(r,a),pl}function ml(){let n=En(),e=tn(),t=aI(e);return n.firstCreatePass&&fI(n,t),ml}var Hz=(n,e,t,r,i)=>(Uh(!0),S$(e[Pt],""));function bn(){return Fe()}var Qg=void 0;function zz(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var qz=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Qg,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Qg,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Qg,"{1} 'at' {0}",Qg],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",zz],u0={};function F_(n){let e=Wz(n),t=rM(e);if(t)return t;let r=e.split("-")[0];if(t=rM(r),t)return t;if(r==="en")return qz;throw new re(701,!1)}function rM(n){return n in u0||(u0[n]=To.ng&&To.ng.common&&To.ng.common.locales&&To.ng.common.locales[n]),u0[n]}var ac=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(ac||{});function Wz(n){return n.toLowerCase().replace(/_/g,"-")}var Jh="en-US";var Gz=Jh;function Rk(n){typeof n=="string"&&(Gz=n.toLowerCase().replace(/_/g,"-"))}function Ue(n,e,t){let r=Fe(),i=En(),o=tn();return Pk(i,r,r[Pt],o,n,e,t),Ue}function Pk(n,e,t,r,i,o,a){let c=!0,l=null;if((r.type&3||a)&&(l??=s0(r,e,o),JH(r,n,e,a,t,i,o,l)&&(c=!1)),c){let h=r.outputs?.[i],p=r.hostDirectiveOutputs?.[i];if(p&&p.length)for(let _=0;_<p.length;_+=2){let E=p[_],w=p[_+1];l??=s0(r,e,o),JP(r,e,E,w,i,l)}if(h&&h.length)for(let _ of h)l??=s0(r,e,o),JP(r,e,_,i,i,l)}}function Ve(n=1){return CP(n)}function EI(n,e,t,r){bz(n,e,t,r)}function bI(n){let e=Fe(),t=En(),r=Kb();Ug(r+1);let i=gI(t,r);if(n.dirty&&oP(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=Sz(e,r);n.reset(o,ZB),n.notifyOnChanges()}return!0}return!1}function II(){return wz(Fe(),Kb())}function Li(n){let e=mP();return Og(e,en+n)}function Yg(n,e){return n<<17|e<<2}function oc(n){return n>>17&32767}function Kz(n){return(n&2)==2}function Zz(n,e){return n&131071|e<<17}function O0(n){return n|2}function sl(n){return(n&131068)>>2}function l0(n,e){return n&-131069|e<<2}function Qz(n){return(n&1)===1}function L0(n){return n|1}function Yz(n,e,t,r,i,o){let a=o?e.classBindings:e.styleBindings,c=oc(a),l=sl(a);n[r]=t;let h=!1,p;if(Array.isArray(t)){let _=t;p=_[1],(p===null||qu(_,p)>0)&&(h=!0)}else p=t;if(i)if(l!==0){let E=oc(n[c+1]);n[r+1]=Yg(E,c),E!==0&&(n[E+1]=l0(n[E+1],r)),n[c+1]=Zz(n[c+1],r)}else n[r+1]=Yg(c,0),c!==0&&(n[c+1]=l0(n[c+1],r)),c=r;else n[r+1]=Yg(l,0),c===0?c=r:n[l+1]=l0(n[l+1],r),l=r;h&&(n[r+1]=O0(n[r+1])),iM(n,p,r,!0),iM(n,p,r,!1),Jz(e,p,n,r,o),a=Yg(c,l),o?e.classBindings=a:e.styleBindings=a}function Jz(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&qu(o,e)>=0&&(t[r+1]=L0(t[r+1]))}function iM(n,e,t,r){let i=n[t+1],o=e===null,a=r?oc(i):sl(i),c=!1;for(;a!==0&&(c===!1||o);){let l=n[a],h=n[a+1];Xz(l,e)&&(c=!0,n[a+1]=r?L0(h):O0(h)),a=r?oc(h):sl(h)}c&&(n[t+1]=r?O0(i):L0(i))}function Xz(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?qu(n,e)>=0:!1}function Xh(n,e){return e4(n,e,null,!0),Xh}function e4(n,e,t,r){let i=Fe(),o=En(),a=Gb(2);if(o.firstUpdatePass&&n4(o,n,a,r),e!==mr&&Do(i,a,e)){let c=o.data[Ns()];a4(o,c,i,i[Pt],n,i[a+1]=c4(e,t),r,a)}}function t4(n,e){return e>=n.expandoStartIndex}function n4(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Ns()],a=t4(n,t);u4(o,r)&&e===null&&!a&&(e=!1),e=r4(i,o,e,r),Yz(i,o,e,t,a,r)}}function r4(n,e,t,r){let i=EP(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=d0(null,n,e,t,r),t=Gh(t,e.attrs,r),o=null);else{let a=e.directiveStylingLast;if(a===-1||n[a]!==i)if(t=d0(i,n,e,t,r),o===null){let l=i4(n,e,r);l!==void 0&&Array.isArray(l)&&(l=d0(null,n,e,l[1],r),l=Gh(l,e.attrs,r),o4(n,e,r,l))}else o=s4(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function i4(n,e,t){let r=t?e.classBindings:e.styleBindings;if(sl(r)!==0)return n[oc(r)]}function o4(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[oc(i)]=r}function s4(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let a=n[o].hostAttrs;r=Gh(r,a,t)}return Gh(r,e.attrs,t)}function d0(n,e,t,r,i){let o=null,a=t.directiveEnd,c=t.directiveStylingLast;for(c===-1?c=t.directiveStart:c++;c<a&&(o=e[c],r=Gh(r,o.hostAttrs,i),o!==n);)c++;return n!==null&&(t.directiveStylingLast=c),r}function Gh(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];typeof a=="number"?i=a:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),QR(n,a,t?!0:e[++o]))}return n===void 0?null:n}function a4(n,e,t,r,i,o,a,c){if(!(e.type&3))return;let l=n.data,h=l[c+1],p=Qz(h)?oM(l,e,t,i,sl(h),a):void 0;if(!v_(p)){v_(o)||Kz(h)&&(o=oM(l,null,t,i,c,a));let _=kb(Ns(),t);rH(r,a,_,i,o)}}function oM(n,e,t,r,i,o){let a=e===null,c;for(;i>0;){let l=n[i],h=Array.isArray(l),p=h?l[1]:l,_=p===null,E=t[i+1];E===mr&&(E=_?hr:void 0);let w=_?Mg(E,r):p===r?E:void 0;if(h&&!v_(w)&&(w=Mg(l,r)),v_(w)&&(c=w,a))return c;let C=n[i+1];i=a?oc(C):sl(C)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(c=Mg(l,r))}return c}function v_(n){return n!==void 0}function c4(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=bo(Zh(n)))),n}function u4(n,e){return(n.flags&(e?8:16))!==0}function J(n,e=""){let t=Fe(),r=En(),i=n+en,o=r.firstCreatePass?P_(r,i,1,e,null):r.data[i],a=l4(r,t,o,e,n);t[i]=a,qg()&&rI(r,t,a,o),Yu(o,!1)}var l4=(n,e,t,r,i)=>(Uh(!0),T$(e[Pt],r));function Mk(n,e,t,r=""){return Do(n,Xu(),t)?e+Ds(t)+r:mr}function d4(n,e,t,r,i,o=""){let a=gP(),c=yk(n,a,t,i);return Gb(2),c?e+Ds(t)+r+Ds(i)+o:mr}function Fi(n){return Tt("",n),Fi}function Tt(n,e,t){let r=Fe(),i=Mk(r,n,e,t);return i!==mr&&kk(r,Ns(),i),Tt}function V_(n,e,t,r,i){let o=Fe(),a=d4(o,n,e,t,r,i);return a!==mr&&kk(o,Ns(),a),V_}function kk(n,e,t){let r=kb(e,n);C$(n[Pt],r,t)}function Vi(n,e,t){Xb(e)&&(e=e());let r=Fe(),i=Xu();if(Do(r,i,e)){let o=En(),a=Hg();tk(a,r,n,e,r[Pt],t)}return Vi}function Po(n,e){let t=Xb(n);return t&&n.set(e),t}function ji(n,e){let t=Fe(),r=En(),i=tn();return Pk(r,t,t[Pt],i,n,e),ji}function ef(n){return Do(Fe(),Xu(),n)?Ds(n):mr}function TI(n,e,t=""){return Mk(Fe(),n,e,t)}function h4(n,e,t){let r=En();if(r.firstCreatePass){let i=Ri(n);F0(t,r.data,r.blueprint,i,!0),F0(e,r.data,r.blueprint,i,!1)}}function F0(n,e,t,r,i){if(n=wn(n),Array.isArray(n))for(let o=0;o<n.length;o++)F0(n[o],e,t,r,i);else{let o=En(),a=Fe(),c=tn(),l=qa(n)?n:wn(n.provide),h=Ab(n),p=c.providerIndexes&1048575,_=c.directiveStart,E=c.providerIndexes>>20;if(qa(n)||!n.multi){let w=new tc(h,i,ce,null),C=f0(l,e,i?p:p+E,_);C===-1?(m0(s_(c,a),o,l),h0(o,n,e.length),e.push(l),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(w),a.push(w)):(t[C]=w,a[C]=w)}else{let w=f0(l,e,p+E,_),C=f0(l,e,p,p+E),k=w>=0&&t[w],R=C>=0&&t[C];if(i&&!R||!i&&!k){m0(s_(c,a),o,l);let j=m4(i?p4:f4,t.length,i,r,h,n);!i&&R&&(t[C].providerFactory=j),h0(o,n,e.length,0),e.push(l),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(j),a.push(j)}else{let j=Nk(t[i?C:w],h,!i&&r);h0(o,n,w>-1?w:C,j)}!i&&r&&R&&t[C].componentProviders++}}}function h0(n,e,t,r){let i=qa(e),o=tP(e);if(i||o){let l=(o?wn(e.useClass):e).prototype.ngOnDestroy;if(l){let h=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let p=h.indexOf(t);p===-1?h.push(t,[r,l]):h[p+1].push(r,l)}else h.push(t,l)}}}function Nk(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function f0(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function f4(n,e,t,r,i){return V0(this.multi,[])}function p4(n,e,t,r,i){let o=this.multi,a;if(this.providerFactory){let c=this.providerFactory.componentProviders,l=zh(r,r[Ee],this.providerFactory.index,i);a=l.slice(0,c),V0(o,a);for(let h=c;h<l.length;h++)a.push(l[h])}else a=[],V0(o,a);return a}function V0(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function m4(n,e,t,r,i,o){let a=new tc(n,t,ce,null);return a.multi=[],a.index=e,a.componentProviders=0,Nk(a,i,r&&!t),a}function cc(n,e=[]){return t=>{t.providersResolver=(r,i)=>h4(r,i?i(n):n,e)}}function CI(n,e,t){let r=Ju()+n,i=Fe();return i[r]===mr?mI(i,r,t?e.call(t):e()):YH(i,r)}function SI(n,e,t,r){return Lk(Fe(),Ju(),n,e,t,r)}function DI(n,e,t,r,i){return Fk(Fe(),Ju(),n,e,t,r,i)}function Ok(n,e){let t=n[e];return t===mr?void 0:t}function Lk(n,e,t,r,i,o){let a=e+t;return Do(n,a,i)?mI(n,a+1,o?r.call(o,i):r(i)):Ok(n,a+1)}function Fk(n,e,t,r,i,o,a){let c=e+t;return yk(n,c,i,o)?mI(n,c+2,a?r.call(a,i,o):r(i,o)):Ok(n,c+2)}function Nr(n,e){let t=En(),r,i=n+en;t.firstCreatePass?(r=g4(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Ts(r.type,!0)),a,c=$n(ce);try{let l=o_(!1),h=o();return o_(l),Nb(t,Fe(),i,h),h}finally{$n(c)}}function g4(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function uc(n,e,t){let r=n+en,i=Fe(),o=Og(i,r);return Vk(i,r)?Lk(i,Ju(),e,o.transform,t,o):o.transform(t)}function lc(n,e,t,r){let i=n+en,o=Fe(),a=Og(o,i);return Vk(o,i)?Fk(o,Ju(),e,a.transform,t,r,a):a.transform(t,r)}function Vk(n,e){return n[Ee].data[e].pure}function dc(n,e){return R_(n,e)}var y_=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},AI=(()=>{class n{compileModuleSync(t){return new __(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Tb(t),o=FM(i.declarations).reduce((a,c)=>{let l=Co(c);return l&&a.push(new rc(l)),a},[]);return new y_(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var _4=(()=>{class n{zone=H(Xe);changeDetectionScheduler=H(Io);applicationRef=H(Bs);applicationErrorHandler=H(zn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function jk({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Xe(_e(Y({},Uk()),{scheduleInRootZone:t})),[{provide:Xe,useFactory:n},{provide:xs,multi:!0,useFactory:()=>{let r=H(_4,{optional:!0});return()=>r.initialize()}},{provide:xs,multi:!0,useFactory:()=>{let r=H(v4);return()=>{r.initialize()}}},e===!0?{provide:e0,useValue:!0}:[],{provide:t0,useValue:t??qM},{provide:zn,useFactory:()=>{let r=H(Xe),i=H(jt),o;return a=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw a}):(o??=i.get(Jr),o.handleError(a))})}}}]}function Uk(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var v4=(()=>{class n{subscription=new It;initialized=!1;zone=H(Xe);pendingTasks=H(Mi);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Xe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Xe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Bk=(()=>{class n{applicationErrorHandler=H(zn);appRef=H(Bs);taskService=H(Mi);ngZone=H(Xe);zonelessEnabled=H(Gg);tracing=H(sc,{optional:!0});disableScheduling=H(e0,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new It;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(l_):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(H(t0,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof d_||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?UP:WM;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(l_+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,UP(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function y4(){return typeof $localize<"u"&&$localize.locale||Jh}var tf=new ae("",{providedIn:"root",factory:()=>H(tf,{optional:!0,skipSelf:!0})||y4()});function Gt(n){return VR(n)}function gl(n,e){return zm(n,e?.equal)}var $k=class{[xn];constructor(e){this[xn]=e}destroy(){this[xn].destroy()}};var Gk=Symbol("InputSignalNode#UNSET"),P4=_e(Y({},qm),{transformFn:void 0,applyValueToInputSignal(n,e){Pu(n,e)}});function Kk(n,e){let t=Object.create(P4);t.value=n,t.transformFn=e?.transform;function r(){if(Au(t),t.value===Gk){let i=null;throw new re(-950,i)}return t.value}return r[xn]=t,r}var U_=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Kh(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},M4=new ae("");M4.__NG_ELEMENT_ID__=n=>{let e=tn();if(e===null)throw new re(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new re(204,!1)};function Hk(n,e){return Kk(n,e)}function k4(n){return Kk(Gk,n)}var Zk=(Hk.required=k4,Hk);var xI=new ae(""),N4=new ae("");function nf(n){return!n.moduleRef}function O4(n){let e=nf(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Xe);return t.run(()=>{nf(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(zn),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),nf(n)){let o=()=>e.destroy(),a=n.platformInjector.get(xI);a.add(o),e.onDestroy(()=>{i.unsubscribe(),a.delete(o)})}else{let o=()=>n.moduleRef.destroy(),a=n.platformInjector.get(xI);a.add(o),n.moduleRef.onDestroy(()=>{Hh(n.allPlatformModules,n.moduleRef),i.unsubscribe(),a.delete(o)})}return F4(r,t,()=>{let o=e.get(Mi),a=o.add(),c=e.get(wI);return c.runInitializers(),c.donePromise.then(()=>{let l=e.get(tf,Jh);if(Rk(l||Jh),!e.get(N4,!0))return nf(n)?e.get(Bs):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(nf(n)){let p=e.get(Bs);return n.rootComponent!==void 0&&p.bootstrap(n.rootComponent),p}else return L4?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(a))})})}var L4;function F4(n,e,t){try{let r=t();return Ro(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var j_=null;function V4(n=[],e){return Nt.create({name:e,providers:[{provide:Mh,useValue:"platform"},{provide:xI,useValue:new Set([()=>j_=null])},...n]})}function j4(n=[]){if(j_)return j_;let e=V4(n);return j_=e,Dk(),U4(e),e}function U4(n){let e=n.get(E_,null);qt(n,()=>{e?.forEach(t=>t())})}function $_(){return!1}var Mo=(()=>{class n{static __NG_ELEMENT_ID__=B4}return n})();function B4(n){return $4(tn(),Fe(),(n&16)===16)}function $4(n,e,t){if(ks(n)&&!t){let r=Rr(n.index,e);return new Fs(r,r)}else if(n.type&175){let r=e[Ar];return new Fs(r,e)}return null}var RI=class{constructor(){}supports(e){return pI(e)}create(e){return new PI(e)}},H4=(n,e)=>e,PI=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||H4}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let a=!r||t&&t.currentIndex<zk(r,i,o)?t:r,c=zk(a,i,o),l=a.currentIndex;if(a===r)i--,r=r._nextRemoved;else if(t=t._next,a.previousIndex==null)i++;else{o||(o=[]);let h=c-i,p=l-i;if(h!=p){for(let E=0;E<h;E++){let w=E<o.length?o[E]:o[E]=0,C=w+E;p<=C&&C<h&&(o[E]=w+1)}let _=a.previousIndex;o[_]=p-h}}c!==l&&e(a,c,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!pI(e))throw new re(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,a;if(Array.isArray(e)){this.length=e.length;for(let c=0;c<this.length;c++)o=e[c],a=this._trackByFn(c,o),t===null||!Object.is(t.trackById,a)?(t=this._mismatch(t,o,a,c),r=!0):(r&&(t=this._verifyReinsertion(t,o,a,c)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,_k(e,c=>{a=this._trackByFn(i,c),t===null||!Object.is(t.trackById,a)?(t=this._mismatch(t,c,a,i),r=!0):(r&&(t=this._verifyReinsertion(t,c,a,i)),Object.is(t.item,c)||this._addIdentityChange(t,c)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new MI(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new B_),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new B_),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},MI=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},kI=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},B_=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new kI,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function zk(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function qk(){return new rf([new RI])}var rf=(()=>{class n{factories;static \u0275prov=ie({token:n,providedIn:"root",factory:qk});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=H(n,{optional:!0,skipSelf:!0});return n.create(t,r||qk())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new re(901,!1)}}return n})();function Qk(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;ut(8);try{let o=i?.injector??j4(r),a=[jk({}),{provide:Io,useExisting:Bk},AP,...t||[]],c=new Wh({providers:a,parent:o,debugName:"",runEnvironmentInitializers:!1});return O4({r3Injector:c.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{ut(9)}}function Hs(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Yk(n){let e=Co(n);if(!e)return null;let t=new rc(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var eN=null;function Or(){return eN}function NI(n){eN??=n}var of=class{},sf=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:()=>H(tN),providedIn:"platform"})}return n})(),OI=new ae(""),tN=(()=>{class n extends sf{_location;_history;_doc=H(Wt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Or().getBaseHref(this._doc)}onPopState(t){let r=Or().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Or().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function H_(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function Jk(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function oi(n){return n&&n[0]!=="?"?`?${n}`:n}var si=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:()=>H(q_),providedIn:"root"})}return n})(),z_=new ae(""),q_=(()=>{class n extends si{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??H(Wt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return H_(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+oi(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let a=this.prepareExternalUrl(i+oi(o));this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,o){let a=this.prepareExternalUrl(i+oi(o));this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ve(sf),ve(z_,8))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zs=(()=>{class n{_subject=new Lt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=W4(Jk(Xk(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+oi(r))}normalize(t){return n.stripTrailingSlash(q4(this._basePath,Xk(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+oi(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+oi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=oi;static joinWithSlash=H_;static stripTrailingSlash=Jk;static \u0275fac=function(r){return new(r||n)(ve(si))};static \u0275prov=ie({token:n,factory:()=>z4(),providedIn:"root"})}return n})();function z4(){return new zs(ve(si))}function q4(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function Xk(n){return n.replace(/\/index.html$/,"")}function W4(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var BI=(()=>{class n extends si{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=H_(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let a=this.prepareExternalUrl(i+oi(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,o){let a=this.prepareExternalUrl(i+oi(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ve(sf),ve(z_,8))};static \u0275prov=ie({token:n,factory:n.\u0275fac})}return n})();var $I=(function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n})($I||{});var Ui={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function _l(n,e){let t=F_(n),r=t[ac.NumberSymbols][e];if(typeof r>"u"){if(e===Ui.CurrencyDecimal)return t[ac.NumberSymbols][Ui.Decimal];if(e===Ui.CurrencyGroup)return t[ac.NumberSymbols][Ui.Group]}return r}function sN(n,e){return F_(n)[ac.NumberFormats][e]}var K4=/^(\d+)?\.((\d+)(-(\d+))?)?$/,nN=22,W_=".",af="0",Z4=";",Q4=",",LI="#";function Y4(n,e,t,r,i,o,a=!1){let c="",l=!1;if(!isFinite(n))c=_l(t,Ui.Infinity);else{let h=e3(n);a&&(h=X4(h));let p=e.minInt,_=e.minFrac,E=e.maxFrac;if(o){let K=o.match(K4);if(K===null)throw new re(2306,!1);let q=K[1],Z=K[3],pe=K[5];q!=null&&(p=FI(q)),Z!=null&&(_=FI(Z)),pe!=null?E=FI(pe):Z!=null&&_>E&&(E=_)}t3(h,_,E);let w=h.digits,C=h.integerLen,k=h.exponent,R=[];for(l=w.every(K=>!K);C<p;C++)w.unshift(0);for(;C<0;C++)w.unshift(0);C>0?R=w.splice(C,w.length):(R=w,w=[0]);let j=[];for(w.length>=e.lgSize&&j.unshift(w.splice(-e.lgSize,w.length).join(""));w.length>e.gSize;)j.unshift(w.splice(-e.gSize,w.length).join(""));w.length&&j.unshift(w.join("")),c=j.join(_l(t,r)),R.length&&(c+=_l(t,i)+R.join("")),k&&(c+=_l(t,Ui.Exponential)+"+"+k)}return n<0&&!l?c=e.negPre+c+e.negSuf:c=e.posPre+c+e.posSuf,c}function aN(n,e,t){let r=sN(e,$I.Decimal),i=J4(r,_l(e,Ui.MinusSign));return Y4(n,i,e,Ui.Group,Ui.Decimal,t)}function J4(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(Z4),i=r[0],o=r[1],a=i.indexOf(W_)!==-1?i.split(W_):[i.substring(0,i.lastIndexOf(af)+1),i.substring(i.lastIndexOf(af)+1)],c=a[0],l=a[1]||"";t.posPre=c.substring(0,c.indexOf(LI));for(let p=0;p<l.length;p++){let _=l.charAt(p);_===af?t.minFrac=t.maxFrac=p+1:_===LI?t.maxFrac=p+1:t.posSuf+=_}let h=c.split(Q4);if(t.gSize=h[1]?h[1].length:0,t.lgSize=h[2]||h[1]?(h[2]||h[1]).length:0,o){let p=i.length-t.posPre.length-t.posSuf.length,_=o.indexOf(LI);t.negPre=o.substring(0,_).replace(/'/g,""),t.negSuf=o.slice(_+p).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function X4(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function e3(n){let e=Math.abs(n)+"",t=0,r,i,o,a,c;for((i=e.indexOf(W_))>-1&&(e=e.replace(W_,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===af;o++);if(o===(c=e.length))r=[0],i=1;else{for(c--;e.charAt(c)===af;)c--;for(i-=o,r=[],a=0;o<=c;o++,a++)r[a]=Number(e.charAt(o))}return i>nN&&(r=r.splice(0,nN-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function t3(n,e,t){if(e>t)throw new re(2307,!1);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(e,i),t),a=o+n.integerLen,c=r[a];if(a>0){r.splice(Math.max(n.integerLen,a));for(let _=a;_<r.length;_++)r[_]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,a=o+1),r[0]=0;for(let _=1;_<a;_++)r[_]=0}if(c>=5)if(a-1<0){for(let _=0;_>a;_--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[a-1]++;for(;i<Math.max(0,o);i++)r.push(0);let l=o!==0,h=e+n.integerLen,p=r.reduceRight(function(_,E,w,C){return E=E+_,C[w]=E<10?E:E-10,l&&(C[w]===0&&w>=h?C.pop():l=!1),E>=10?1:0},0);p&&(r.unshift(p),n.integerLen++)}function FI(n){let e=parseInt(n);if(isNaN(e))throw new re(2305,!1);return e}var VI=/\s+/,rN=[],HI=(()=>{class n{_ngEl;_renderer;initialClasses=rN;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(VI):rN}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(VI):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(VI).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(ce(Pn),ce(Oi))};static \u0275dir=vt({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var G_=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},qs=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,a)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new G_(i.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)r.remove(o===null?void 0:o);else if(o!==null){let c=r.get(o);r.move(c,a),iN(c,i)}});for(let i=0,o=r.length;i<o;i++){let c=r.get(i).context;c.index=i,c.count=o,c.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);iN(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ce(xo),ce(Vs),ce(rf))};static \u0275dir=vt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function iN(n,e){n.context.$implicit=e.item}var gr=(()=>{class n{_viewContainer;_context=new K_;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){oN(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){oN(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ce(xo),ce(Vs))};static \u0275dir=vt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),K_=class{$implicit=null;ngIf=null};function oN(n,e){if(n&&!n.createEmbeddedView)throw new re(2020,!1)}function cN(n,e){return new re(2100,!1)}var jI=class{createSubscription(e,t,r){return Gt(()=>e.subscribe({next:t,error:r}))}dispose(e){Gt(()=>e.unsubscribe())}},UI=class{createSubscription(e,t,r){return e.then(i=>t?.(i),i=>r?.(i)),{unsubscribe:()=>{t=null,r=null}}}dispose(e){e.unsubscribe()}},n3=new UI,r3=new jI,cf=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=H(zn);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r),r=>this.applicationErrorHandler(r))}_selectStrategy(t){if(Ro(t))return n3;if(O_(t))return r3;throw cN(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(ce(Mo,16))};static \u0275pipe=N_({name:"async",type:n,pure:!1})}return n})();var uf=(()=>{class n{_locale;constructor(t){this._locale=t}transform(t,r,i){if(!i3(t))return null;i||=this._locale;try{let o=o3(t);return aN(o,i,r)}catch(o){throw cN(n,o.message)}}static \u0275fac=function(r){return new(r||n)(ce(tf,16))};static \u0275pipe=N_({name:"number",type:n,pure:!0})}return n})();function i3(n){return!(n==null||n===""||n!==n)}function o3(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new re(2309,!1);return n}var Mn=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=kr({type:n});static \u0275inj=fr({})}return n})();function zI(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var lf=class{};var uN="browser";var lN=(()=>{class n{static \u0275prov=ie({token:n,providedIn:"root",factory:()=>new qI(H(Wt),window)})}return n})(),qI=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(_e(Y({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=s3(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(Ss(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(_e(Y({},t),{left:i-a[0],top:o-a[1]}))}};function s3(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let a=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(a)return a}i=r.nextNode()}}return null}var df=class{_doc;constructor(e){this._doc=e}manager},Z_=(()=>{class n extends df{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(ve(Wt))};static \u0275prov=ie({token:n,factory:n.\u0275fac})}return n})(),Y_=new ae(""),QI=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(a=>{a.manager=this});let i=t.filter(a=>!(a instanceof Z_));this._plugins=i.slice().reverse();let o=t.find(a=>a instanceof Z_);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new re(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(ve(Y_),ve(Xe))};static \u0275prov=ie({token:n,factory:n.\u0275fac})}return n})(),WI="ng-app-id";function dN(n){for(let e of n)e.remove()}function hN(n,e){let t=e.createElement("style");return t.textContent=n,t}function a3(n,e,t,r){let i=n.head?.querySelectorAll(`style[${WI}="${e}"],link[${WI}="${e}"]`);if(i)for(let o of i)o.removeAttribute(WI),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function KI(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var YI=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,a3(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,hN);r?.forEach(i=>this.addUsage(i,this.external,KI))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(a=>this.addElement(a,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(dN(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])dN(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,hN(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,KI(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(ve(Wt),ve(w_),ve(b_,8),ve(Us))};static \u0275prov=ie({token:n,factory:n.\u0275fac})}return n})(),GI={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},JI=/%COMP%/g;var pN="%COMP%",c3=`_nghost-${pN}`,u3=`_ngcontent-${pN}`,l3=!0,d3=new ae("",{providedIn:"root",factory:()=>l3});function h3(n){return u3.replace(JI,n)}function f3(n){return c3.replace(JI,n)}function mN(n,e){return e.map(t=>t.replace(JI,n))}var XI=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,a,c,l=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=a,this.ngZone=c,this.nonce=l,this.tracingService=h,this.platformIsServer=!1,this.defaultRenderer=new hf(t,a,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Q_?i.applyToHost(t):i instanceof ff&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,h=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,_=this.platformIsServer,E=this.tracingService;switch(r.encapsulation){case So.Emulated:o=new Q_(l,h,r,this.appId,p,a,c,_,E);break;case So.ShadowDom:return new ZI(l,h,t,r,a,c,this.nonce,_,E);default:o=new ff(l,h,r,p,a,c,_,E);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(ve(QI),ve(YI),ve(w_),ve(d3),ve(Wt),ve(Xe),ve(b_),ve(sc,8))};static \u0275prov=ie({token:n,factory:n.\u0275fac})}return n})(),hf=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(GI[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(fN(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(fN(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new re(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=GI[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=GI[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ni.DashCase|Ni.Important)?e.style.setProperty(t,r,i&Ni.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ni.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Or().getGlobalEventTarget(this.doc,e),!e))throw new re(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function fN(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var ZI=class extends hf{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,a,c,l,h){super(e,o,a,l,h),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let p=i.styles;p=mN(i.id,p);for(let E of p){let w=document.createElement("style");c&&w.setAttribute("nonce",c),w.textContent=E,this.shadowRoot.appendChild(w)}let _=i.getExternalStyles?.();if(_)for(let E of _){let w=KI(E,o);c&&w.setAttribute("nonce",c),this.shadowRoot.appendChild(w)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ff=class extends hf{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,a,c,l,h){super(e,o,a,c,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let p=r.styles;this.styles=h?mN(h,p):p,this.styleUrls=r.getExternalStyles?.(h)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&ol.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Q_=class extends ff{contentAttr;hostAttr;constructor(e,t,r,i,o,a,c,l,h){let p=i+"-"+r.id;super(e,t,r,o,a,c,l,h,p),this.contentAttr=h3(p),this.hostAttr=f3(p)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var J_=class n extends of{supportsDOMEvents=!0;static makeCurrent(){NI(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=p3();return t==null?null:m3(t)}resetBaseElement(){pf=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return zI(document.cookie,e)}},pf=null;function p3(){return pf=pf||document.head.querySelector("base"),pf?pf.getAttribute("href"):null}function m3(n){return new URL(n,document.baseURI).pathname}var g3=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac})}return n})(),gN=["alt","control","meta","shift"],_3={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},v3={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},_N=(()=>{class n extends df{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let a=n.parseEventName(r),c=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Or().onAndCancel(t,a.domEventName,c,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),gN.forEach(h=>{let p=r.indexOf(h);p>-1&&(r.splice(p,1),a+=h+".")}),a+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=a,l}static matchEventFullKeyCode(t,r){let i=_3[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),gN.forEach(a=>{if(a!==i){let c=v3[a];c(t)&&(o+=a+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(ve(Wt))};static \u0275prov=ie({token:n,factory:n.\u0275fac})}return n})();function eT(n,e,t){let r=Y({rootComponent:n,platformRef:t?.platformRef},y3(e));return Qk(r)}function y3(n){return{appProviders:[...T3,...n?.providers??[]],platformProviders:I3}}function w3(){J_.makeCurrent()}function E3(){return new Jr}function b3(){return B0(document),document}var I3=[{provide:Us,useValue:uN},{provide:E_,useValue:w3,multi:!0},{provide:Wt,useFactory:b3}];var T3=[{provide:Mh,useValue:"root"},{provide:Jr,useFactory:E3},{provide:Y_,useClass:Z_,multi:!0,deps:[Wt]},{provide:Y_,useClass:_N,multi:!0,deps:[Wt]},XI,YI,QI,{provide:nc,useExisting:XI},{provide:lf,useClass:g3},[]];var vN=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(ve(Wt))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var xe="primary",Df=Symbol("RouteTitle"),oT=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function mc(n){return new oT(n)}function SN(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let a=r[o],c=n[o];if(a[0]===":")i[a.substring(1)]=c;else if(a!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function S3(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Bi(n[t],e[t]))return!1;return!0}function Bi(n,e){let t=n?sT(n):void 0,r=e?sT(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!DN(n[i],e[i]))return!1;return!0}function sT(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function DN(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function AN(n){return n.length>0?n[n.length-1]:null}function ko(n){return ZE(n)?n:Ro(n)?ft(Promise.resolve(n)):he(n)}var D3={exact:RN,subset:PN},xN={exact:A3,subset:x3,ignored:()=>!0};function yN(n,e,t){return D3[t.paths](n.root,e.root,t.matrixParams)&&xN[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function A3(n,e){return Bi(n,e)}function RN(n,e,t){if(!fc(n.segments,e.segments)||!tv(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!RN(n.children[r],e.children[r],t))return!1;return!0}function x3(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>DN(n[t],e[t]))}function PN(n,e,t){return MN(n,e,e.segments,t)}function MN(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!fc(i,t)||e.hasChildren()||!tv(i,t,r))}else if(n.segments.length===t.length){if(!fc(n.segments,t)||!tv(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!PN(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!fc(n.segments,i)||!tv(n.segments,i,r)||!n.children[xe]?!1:MN(n.children[xe],e,o,r)}}function tv(n,e,t){return e.every((r,i)=>xN[t](n[i].parameters,r.parameters))}var Hi=class{root;queryParams;fragment;_queryParamMap;constructor(e=new it([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=mc(this.queryParams),this._queryParamMap}toString(){return M3.serialize(this)}},it=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return nv(this)}},Ws=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=mc(this.parameters),this._parameterMap}toString(){return NN(this)}};function R3(n,e){return fc(n,e)&&n.every((t,r)=>Bi(t.parameters,e[r].parameters))}function fc(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function P3(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===xe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==xe&&(t=t.concat(e(i,r)))}),t}var gc=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:()=>new Gs,providedIn:"root"})}return n})(),Gs=class{parse(e){let t=new cT(e);return new Hi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${mf(e.root,!0)}`,r=O3(e.queryParams),i=typeof e.fragment=="string"?`#${k3(e.fragment)}`:"";return`${t}${r}${i}`}},M3=new Gs;function nv(n){return n.segments.map(e=>NN(e)).join("/")}function mf(n,e){if(!n.hasChildren())return nv(n);if(e){let t=n.children[xe]?mf(n.children[xe],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==xe&&r.push(`${i}:${mf(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=P3(n,(r,i)=>i===xe?[mf(n.children[xe],!1)]:[`${i}:${mf(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[xe]!=null?`${nv(n)}/${t[0]}`:`${nv(n)}/(${t.join("//")})`}}function kN(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function X_(n){return kN(n).replace(/%3B/gi,";")}function k3(n){return encodeURI(n)}function aT(n){return kN(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rv(n){return decodeURIComponent(n)}function wN(n){return rv(n.replace(/\+/g,"%20"))}function NN(n){return`${aT(n.path)}${N3(n.parameters)}`}function N3(n){return Object.entries(n).map(([e,t])=>`;${aT(e)}=${aT(t)}`).join("")}function O3(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${X_(t)}=${X_(i)}`).join("&"):`${X_(t)}=${X_(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var L3=/^[^\/()?;#]+/;function tT(n){let e=n.match(L3);return e?e[0]:""}var F3=/^[^\/()?;=#]+/;function V3(n){let e=n.match(F3);return e?e[0]:""}var j3=/^[^=?&#]+/;function U3(n){let e=n.match(j3);return e?e[0]:""}var B3=/^[^&#]+/;function $3(n){let e=n.match(B3);return e?e[0]:""}var cT=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new it([],{}):new it([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[xe]=new it(e,t)),r}parseSegment(){let e=tT(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new re(4009,!1);return this.capture(e),new Ws(rv(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=V3(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=tT(this.remaining);i&&(r=i,this.capture(r))}e[rv(t)]=rv(r)}parseQueryParam(e){let t=U3(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let a=$3(this.remaining);a&&(r=a,this.capture(r))}let i=wN(t),o=wN(r);if(e.hasOwnProperty(i)){let a=e[i];Array.isArray(a)||(a=[a],e[i]=a),a.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=tT(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new re(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=xe);let a=this.parseChildren();t[o??xe]=Object.keys(a).length===1&&a[xe]?a[xe]:new it([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new re(4011,!1)}};function ON(n){return n.segments.length>0?new it([],{[xe]:n}):n}function LN(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=LN(i);if(r===xe&&o.segments.length===0&&o.hasChildren())for(let[a,c]of Object.entries(o.children))e[a]=c;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new it(n.segments,e);return H3(t)}function H3(n){if(n.numberOfChildren===1&&n.children[xe]){let e=n.children[xe];return new it(n.segments.concat(e.segments),e.children)}return n}function Ks(n){return n instanceof Hi}function FN(n,e,t=null,r=null){let i=VN(n);return jN(i,e,t,r)}function VN(n){let e;function t(o){let a={};for(let l of o.children){let h=t(l);a[l.outlet]=h}let c=new it(o.url,a);return o===n&&(e=c),c}let r=t(n.root),i=ON(r);return e??i}function jN(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return nT(i,i,i,t,r);let o=z3(e);if(o.toRoot())return nT(i,i,new it([],{}),t,r);let a=q3(o,i,n),c=a.processChildren?_f(a.segmentGroup,a.index,o.commands):BN(a.segmentGroup,a.index,o.commands);return nT(i,a.segmentGroup,c,t,r)}function iv(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function yf(n){return typeof n=="object"&&n!=null&&n.outlets}function nT(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([l,h])=>{o[l]=Array.isArray(h)?h.map(p=>`${p}`):`${h}`});let a;n===e?a=t:a=UN(n,e,t);let c=ON(LN(a));return new Hi(c,o,i)}function UN(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=UN(o,e,t)}),new it(n.segments,r)}var ov=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&iv(r[0]))throw new re(4003,!1);let i=r.find(yf);if(i&&i!==AN(r))throw new re(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function z3(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new ov(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let c={};return Object.entries(o.outlets).forEach(([l,h])=>{c[l]=typeof h=="string"?h.split("/"):h}),[...i,{outlets:c}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:a===0?(o.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?t=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,o]},[]);return new ov(t,e,r)}var wl=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function q3(n,e,t){if(n.isAbsolute)return new wl(e,!0,0);if(!t)return new wl(e,!1,NaN);if(t.parent===null)return new wl(t,!0,0);let r=iv(n.commands[0])?0:1,i=t.segments.length-1+r;return W3(t,i,n.numberOfDoubleDots)}function W3(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new re(4005,!1);i=r.segments.length}return new wl(r,!1,i-o)}function G3(n){return yf(n[0])?n[0].outlets:{[xe]:n}}function BN(n,e,t){if(n??=new it([],{}),n.segments.length===0&&n.hasChildren())return _f(n,e,t);let r=K3(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new it(n.segments.slice(0,r.pathIndex),{});return o.children[xe]=new it(n.segments.slice(r.pathIndex),n.children),_f(o,0,i)}else return r.match&&i.length===0?new it(n.segments,{}):r.match&&!n.hasChildren()?uT(n,e,t):r.match?_f(n,0,i):uT(n,e,t)}function _f(n,e,t){if(t.length===0)return new it(n.segments,{});{let r=G3(t),i={};if(Object.keys(r).some(o=>o!==xe)&&n.children[xe]&&n.numberOfChildren===1&&n.children[xe].segments.length===0){let o=_f(n.children[xe],e,t);return new it(n.segments,o.children)}return Object.entries(r).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(i[o]=BN(n.children[o],e,a))}),Object.entries(n.children).forEach(([o,a])=>{r[o]===void 0&&(i[o]=a)}),new it(n.segments,i)}}function K3(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let a=n.segments[i],c=t[r];if(yf(c))break;let l=`${c}`,h=r<t.length-1?t[r+1]:null;if(i>0&&l===void 0)break;if(l&&h&&typeof h=="object"&&h.outlets===void 0){if(!bN(l,h,a))return o;r+=2}else{if(!bN(l,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function uT(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(yf(o)){let l=Z3(o.outlets);return new it(r,l)}if(i===0&&iv(t[0])){let l=n.segments[e];r.push(new Ws(l.path,EN(t[0]))),i++;continue}let a=yf(o)?o.outlets[xe]:`${o}`,c=i<t.length-1?t[i+1]:null;a&&c&&iv(c)?(r.push(new Ws(a,EN(c))),i+=2):(r.push(new Ws(a,{})),i++)}return new it(r,{})}function Z3(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=uT(new it([],{}),0,r))}),e}function EN(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function bN(n,e,t){return n==t.path&&Bi(e,t.parameters)}var El="imperative",rn=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(rn||{}),vr=class{id;url;constructor(e,t){this.id=e,this.url=t}},Zs=class extends vr{type=rn.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},yr=class extends vr{urlAfterRedirects;type=rn.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},qn=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(qn||{}),Il=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Il||{}),$i=class extends vr{reason;code;type=rn.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},zi=class extends vr{reason;code;type=rn.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Tl=class extends vr{error;target;type=rn.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},wf=class extends vr{urlAfterRedirects;state;type=rn.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sv=class extends vr{urlAfterRedirects;state;type=rn.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},av=class extends vr{urlAfterRedirects;state;shouldActivate;type=rn.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},cv=class extends vr{urlAfterRedirects;state;type=rn.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},uv=class extends vr{urlAfterRedirects;state;type=rn.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},lv=class{route;type=rn.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},dv=class{route;type=rn.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},hv=class{snapshot;type=rn.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fv=class{snapshot;type=rn.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pv=class{snapshot;type=rn.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},mv=class{snapshot;type=rn.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cl=class{routerEvent;position;anchor;type=rn.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Ef=class{},Sl=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function Q3(n){return!(n instanceof Ef)&&!(n instanceof Sl)}function Y3(n,e){return n.providers&&!n._injector&&(n._injector=ll(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ai(n){return n.outlet||xe}function J3(n,e){let t=n.filter(r=>ai(r)===e);return t.push(...n.filter(r=>ai(r)!==e)),t}function xl(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var gv=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return xl(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new _c(this.rootInjector)}},_c=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new gv(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(ve(jt))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_v=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=lT(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=lT(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=dT(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return dT(e,this._root).map(t=>t.value)}};function lT(n,e){if(n===e.value)return e;for(let t of e.children){let r=lT(n,t);if(r)return r}return null}function dT(n,e){if(n===e.value)return[e];for(let t of e.children){let r=dT(n,t);if(r.length)return r.unshift(e),r}return[]}var _r=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function yl(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var bf=class extends _v{snapshot;constructor(e,t){super(e),this.snapshot=t,yT(this,e)}toString(){return this.snapshot.toString()}};function $N(n){let e=X3(n),t=new yn([new Ws("",{})]),r=new yn({}),i=new yn({}),o=new yn({}),a=new yn(""),c=new Lr(t,r,o,a,i,xe,n,e.root);return c.snapshot=e.root,new bf(new _r(c,[]),e)}function X3(n){let e={},t={},r={},o=new pc([],e,r,"",t,xe,n,null,{});return new If("",new _r(o,[]))}var Lr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,a,c,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=a,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Ae(h=>h[Df]))??he(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ae(e=>mc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ae(e=>mc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function vv(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:Y(Y({},e.params),n.params),data:Y(Y({},e.data),n.data),resolve:Y(Y(Y(Y({},n.data),e.data),i?.data),n._resolvedData)}:r={params:Y({},n.params),data:Y({},n.data),resolve:Y(Y({},n.data),n._resolvedData??{})},i&&zN(i)&&(r.resolve[Df]=i.title),r}var pc=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Df]}constructor(e,t,r,i,o,a,c,l,h){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=c,this.routeConfig=l,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=mc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=mc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},If=class extends _v{url;constructor(e,t){super(t),this.url=e,yT(this,t)}toString(){return HN(this._root)}};function yT(n,e){e.value._routerState=n,e.children.forEach(t=>yT(n,t))}function HN(n){let e=n.children.length>0?` { ${n.children.map(HN).join(", ")} } `:"";return`${n.value}${e}`}function rT(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Bi(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Bi(e.params,t.params)||n.paramsSubject.next(t.params),S3(e.url,t.url)||n.urlSubject.next(t.url),Bi(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function hT(n,e){let t=Bi(n.params,e.params)&&R3(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||hT(n.parent,e.parent))}function zN(n){return typeof n.title=="string"||n.title===null}var qN=new ae(""),Af=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=xe;activateEvents=new He;deactivateEvents=new He;attachEvents=new He;detachEvents=new He;routerOutletData=Zk();parentContexts=H(_c);location=H(xo);changeDetector=H(Mo);inputBinder=H(xf,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new re(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new re(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new re(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new re(4013,!1);this._activatedRoute=t;let i=this.location,a=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new fT(t,c,i.injector,this.routerOutletData);this.activated=i.createComponent(a,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=vt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Mr]})}return n})(),fT=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Lr?this.route:e===_c?this.childContexts:e===qN?this.outletData:this.parent.get(e,t)}},xf=new ae(""),wT=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Th([r.queryParams,r.params,r.data]).pipe(Vt(([o,a,c],l)=>(c=Y(Y(Y({},o),a),c),l===0?he(c):Promise.resolve(c)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let a=Yk(r.component);if(!a){this.unsubscribeFromRouteData(t);return}for(let{templateName:c}of a.inputs)t.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac})}return n})(),ET=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=nn({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Ut(0,"router-outlet")},dependencies:[Af],encapsulation:2})}return n})();function bT(n){let e=n.children&&n.children.map(bT),t=e?_e(Y({},n),{children:e}):Y({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==xe&&(t.component=ET),t}function eq(n,e,t){let r=Tf(n,e._root,t?t._root:void 0);return new bf(r,e)}function Tf(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=tq(n,e,t);return new _r(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(c=>Tf(n,c)),a}}let r=nq(e.value),i=e.children.map(o=>Tf(n,o));return new _r(r,i)}}function tq(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Tf(n,r,i);return Tf(n,r)})}function nq(n){return new Lr(new yn(n.url),new yn(n.params),new yn(n.queryParams),new yn(n.fragment),new yn(n.data),n.outlet,n.component,n)}var Dl=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},WN="ngNavigationCancelingError";function yv(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Ks(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=GN(!1,qn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function GN(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[WN]=!0,t.cancellationCode=e,t}function rq(n){return KN(n)&&Ks(n.url)}function KN(n){return!!n&&n[WN]}var iq=(n,e,t,r)=>Ae(i=>(new pT(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),pT=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),rT(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=yl(t);e.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,i[a],r),delete i[a]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=yl(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);if(r&&r.outlet){let a=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=yl(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=yl(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new mv(o.value.snapshot))}),e.children.length&&this.forwardEvent(new fv(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(rT(i),i===o)if(i.component){let a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(c.contexts),a.attachRef=c.componentRef,a.route=c.route.value,a.outlet&&a.outlet.attach(c.componentRef,c.route.value),rT(c.route.value),this.activateChildRoutes(e,null,a.children)}else a.attachRef=null,a.route=i,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(e,null,a.children)}else this.activateChildRoutes(e,null,r)}},wv=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},bl=class{component;route;constructor(e,t){this.component=e,this.route=t}};function oq(n,e,t){let r=n._root,i=e?e._root:null;return gf(r,i,t,[r.value])}function sq(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Rl(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!fb(n)?n:e.get(n):r}function gf(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=yl(e);return n.children.forEach(a=>{aq(a,o[a.value.outlet],t,r.concat([a.value]),i),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,c])=>vf(c,t.getContext(a),i)),i}function aq(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,a=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let l=cq(a,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new wv(r)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?gf(n,e,c?c.children:null,r,i):gf(n,e,t,r,i),l&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new bl(c.outlet.component,a))}else a&&vf(e,c,i),i.canActivateChecks.push(new wv(r)),o.component?gf(n,null,c?c.children:null,r,i):gf(n,null,t,r,i);return i}function cq(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!fc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!fc(n.url,e.url)||!Bi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!hT(n,e)||!Bi(n.queryParams,e.queryParams);case"paramsChange":default:return!hT(n,e)}}function vf(n,e,t){let r=yl(n),i=n.value;Object.entries(r).forEach(([o,a])=>{i.component?e?vf(a,e.children.getContext(o),t):vf(a,null,t):vf(a,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new bl(e.outlet.component,i)):t.canDeactivateChecks.push(new bl(null,i)):t.canDeactivateChecks.push(new bl(null,i))}function Rf(n){return typeof n=="function"}function uq(n){return typeof n=="boolean"}function lq(n){return n&&Rf(n.canLoad)}function dq(n){return n&&Rf(n.canActivate)}function hq(n){return n&&Rf(n.canActivateChild)}function fq(n){return n&&Rf(n.canDeactivate)}function pq(n){return n&&Rf(n.canMatch)}function ZN(n){return n instanceof Yr||n?.name==="EmptyError"}var ev=Symbol("INITIAL_VALUE");function Al(){return Vt(n=>Th(n.map(e=>e.pipe(dr(1),bg(ev)))).pipe(Ae(e=>{for(let t of e)if(t!==!0){if(t===ev)return ev;if(t===!1||mq(t))return t}return!0}),Bn(e=>e!==ev),dr(1)))}function mq(n){return Ks(n)||n instanceof Dl}function gq(n,e){return Ft(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:a}}=t;return a.length===0&&o.length===0?he(_e(Y({},t),{guardsResult:!0})):_q(a,r,i,n).pipe(Ft(c=>c&&uq(c)?vq(r,o,n,e):he(c)),Ae(c=>_e(Y({},t),{guardsResult:c})))})}function _q(n,e,t,r){return ft(n).pipe(Ft(i=>Iq(i.component,i.route,t,e,r)),wo(i=>i!==!0,!0))}function vq(n,e,t,r){return ft(e).pipe(Es(i=>$u(wq(i.route.parent,r),yq(i.route,r),bq(n,i.path,t),Eq(n,i.route,t))),wo(i=>i!==!0,!0))}function yq(n,e){return n!==null&&e&&e(new pv(n)),he(!0)}function wq(n,e){return n!==null&&e&&e(new hv(n)),he(!0)}function Eq(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return he(!0);let i=r.map(o=>Ch(()=>{let a=xl(e)??t,c=Rl(o,a),l=dq(c)?c.canActivate(e,n):qt(a,()=>c(e,n));return ko(l).pipe(wo())}));return he(i).pipe(Al())}function bq(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(a=>sq(a)).filter(a=>a!==null).map(a=>Ch(()=>{let c=a.guards.map(l=>{let h=xl(a.node)??t,p=Rl(l,h),_=hq(p)?p.canActivateChild(r,n):qt(h,()=>p(r,n));return ko(_).pipe(wo())});return he(c).pipe(Al())}));return he(o).pipe(Al())}function Iq(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return he(!0);let a=o.map(c=>{let l=xl(e)??i,h=Rl(c,l),p=fq(h)?h.canDeactivate(n,e,t,r):qt(l,()=>h(n,e,t,r));return ko(p).pipe(wo())});return he(a).pipe(Al())}function Tq(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return he(!0);let o=i.map(a=>{let c=Rl(a,n),l=lq(c)?c.canLoad(e,t):qt(n,()=>c(e,t));return ko(l)});return he(o).pipe(Al(),QN(r))}function QN(n){return Qm(Rt(e=>{if(typeof e!="boolean")throw yv(n,e)}),Ae(e=>e===!0))}function Cq(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return he(!0);let o=i.map(a=>{let c=Rl(a,n),l=pq(c)?c.canMatch(e,t):qt(n,()=>c(e,t));return ko(l)});return he(o).pipe(Al(),QN(r))}var Cf=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Sf=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function vl(n){return Bu(new Cf(n))}function Sq(n){return Bu(new re(4e3,!1))}function Dq(n){return Bu(GN(!1,qn.GuardRejected))}var mT=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return he(r);if(i.numberOfChildren>1||!i.children[xe])return Sq(`${e.redirectTo}`);i=i.children[xe]}}applyRedirectCommands(e,t,r,i,o){return Aq(t,i,o).pipe(Ae(a=>{if(a instanceof Hi)throw new Sf(a);let c=this.applyRedirectCreateUrlTree(a,this.urlSerializer.parse(a),e,r);if(a[0]==="/")throw new Sf(c);return c}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Hi(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let c=o.substring(1);r[i]=t[c]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),a={};return Object.entries(t.children).forEach(([c,l])=>{a[c]=this.createSegmentGroup(e,l,r,i)}),new it(o,a)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new re(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function Aq(n,e,t){if(typeof n=="string")return he(n);let r=n,{queryParams:i,fragment:o,routeConfig:a,url:c,outlet:l,params:h,data:p,title:_}=e;return ko(qt(t,()=>r({params:h,data:p,queryParams:i,fragment:o,routeConfig:a,url:c,outlet:l,title:_})))}var gT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function xq(n,e,t,r,i){let o=YN(n,e,t);return o.matched?(r=Y3(e,r),Cq(r,e,t,i).pipe(Ae(a=>a===!0?o:Y({},gT)))):he(o)}function YN(n,e,t){if(e.path==="**")return Rq(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?Y({},gT):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||SN)(t,n,e);if(!i)return Y({},gT);let o={};Object.entries(i.posParams??{}).forEach(([c,l])=>{o[c]=l.path});let a=i.consumed.length>0?Y(Y({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function Rq(n){return{matched:!0,parameters:n.length>0?AN(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function IN(n,e,t,r){return t.length>0&&kq(n,t,r)?{segmentGroup:new it(e,Mq(r,new it(t,n.children))),slicedSegments:[]}:t.length===0&&Nq(n,t,r)?{segmentGroup:new it(n.segments,Pq(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new it(n.segments,n.children),slicedSegments:t}}function Pq(n,e,t,r){let i={};for(let o of t)if(bv(n,e,o)&&!r[ai(o)]){let a=new it([],{});i[ai(o)]=a}return Y(Y({},r),i)}function Mq(n,e){let t={};t[xe]=e;for(let r of n)if(r.path===""&&ai(r)!==xe){let i=new it([],{});t[ai(r)]=i}return t}function kq(n,e,t){return t.some(r=>bv(n,e,r)&&ai(r)!==xe)}function Nq(n,e,t){return t.some(r=>bv(n,e,r))}function bv(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Oq(n,e,t){return e.length===0&&!n.children[t]}var _T=class{};function Lq(n,e,t,r,i,o,a="emptyOnly"){return new vT(n,e,t,r,i,a,o).recognize()}var Fq=31,vT=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=c,this.applyRedirects=new mT(this.urlSerializer,this.urlTree)}noMatchError(e){return new re(4002,`'${e.segmentGroup}'`)}recognize(){let e=IN(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Ae(({children:t,rootSnapshot:r})=>{let i=new _r(r,t),o=new If("",i),a=FN(r,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),{state:o,tree:a}}))}match(e){let t=new pc([],Object.freeze({}),Object.freeze(Y({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),xe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,xe,t).pipe(Ae(r=>({children:r,rootSnapshot:t})),yo(r=>{if(r instanceof Sf)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Cf?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(Ae(a=>a instanceof _r?[a]:[]))}processChildren(e,t,r,i){let o=[];for(let a of Object.keys(r.children))a==="primary"?o.unshift(a):o.push(a);return ft(o).pipe(Es(a=>{let c=r.children[a],l=J3(t,a);return this.processSegmentGroup(e,l,c,a,i)}),Eg((a,c)=>(a.push(...c),a)),bs(null),JE(),Ft(a=>{if(a===null)return vl(r);let c=JN(a);return Vq(c),he(c)}))}processSegment(e,t,r,i,o,a,c){return ft(t).pipe(Es(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,r,i,o,a,c).pipe(yo(h=>{if(h instanceof Cf)return he(null);throw h}))),wo(l=>!!l),yo(l=>{if(ZN(l))return Oq(r,i,o)?he(new _T):vl(r);throw l}))}processSegmentAgainstRoute(e,t,r,i,o,a,c,l){return ai(r)!==a&&(a===xe||!bv(i,o,r))?vl(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,a,l):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,a,l):vl(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,a,c){let{matched:l,parameters:h,consumedSegments:p,positionalParamSegments:_,remainingSegments:E}=YN(t,i,o);if(!l)return vl(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Fq&&(this.allowRedirects=!1));let w=new pc(o,h,Object.freeze(Y({},this.urlTree.queryParams)),this.urlTree.fragment,TN(i),ai(i),i.component??i._loadedComponent??null,i,CN(i)),C=vv(w,c,this.paramsInheritanceStrategy);return w.params=Object.freeze(C.params),w.data=Object.freeze(C.data),this.applyRedirects.applyRedirectCommands(p,i.redirectTo,_,w,e).pipe(Vt(R=>this.applyRedirects.lineralizeSegments(i,R)),Ft(R=>this.processSegment(e,r,t,R.concat(E),a,!1,c)))}matchSegmentAgainstRoute(e,t,r,i,o,a){let c=xq(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),c.pipe(Vt(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Vt(({routes:h})=>{let p=r._loadedInjector??e,{parameters:_,consumedSegments:E,remainingSegments:w}=l,C=new pc(E,_,Object.freeze(Y({},this.urlTree.queryParams)),this.urlTree.fragment,TN(r),ai(r),r.component??r._loadedComponent??null,r,CN(r)),k=vv(C,a,this.paramsInheritanceStrategy);C.params=Object.freeze(k.params),C.data=Object.freeze(k.data);let{segmentGroup:R,slicedSegments:j}=IN(t,E,w,h);if(j.length===0&&R.hasChildren())return this.processChildren(p,h,R,C).pipe(Ae(q=>new _r(C,q)));if(h.length===0&&j.length===0)return he(new _r(C,[]));let K=ai(r)===o;return this.processSegment(p,h,R,j,K?xe:o,!0,C).pipe(Ae(q=>new _r(C,q instanceof _r?[q]:[])))}))):vl(t)))}getChildConfig(e,t,r){return t.children?he({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?he({routes:t._loadedRoutes,injector:t._loadedInjector}):Tq(e,t,r,this.urlSerializer).pipe(Ft(i=>i?this.configLoader.loadChildren(e,t).pipe(Rt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):Dq(t))):he({routes:[],injector:e})}};function Vq(n){n.sort((e,t)=>e.value.outlet===xe?-1:t.value.outlet===xe?1:e.value.outlet.localeCompare(t.value.outlet))}function jq(n){let e=n.value.routeConfig;return e&&e.path===""}function JN(n){let e=[],t=new Set;for(let r of n){if(!jq(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=JN(r.children);e.push(new _r(r.value,i))}return e.filter(r=>!t.has(r))}function TN(n){return n.data||{}}function CN(n){return n.resolve||{}}function Uq(n,e,t,r,i,o){return Ft(a=>Lq(n,e,t,r,a.extractedUrl,i,o).pipe(Ae(({state:c,tree:l})=>_e(Y({},a),{targetSnapshot:c,urlAfterRedirects:l}))))}function Bq(n,e){return Ft(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return he(t);let o=new Set(i.map(l=>l.route)),a=new Set;for(let l of o)if(!a.has(l))for(let h of XN(l))a.add(h);let c=0;return ft(a).pipe(Es(l=>o.has(l)?$q(l,r,n,e):(l.data=vv(l,l.parent,n).resolve,he(void 0))),Rt(()=>c++),Hu(1),Ft(l=>c===a.size?he(t):Zn))})}function XN(n){let e=n.children.map(t=>XN(t)).flat();return[n,...e]}function $q(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!zN(i)&&(o[Df]=i.title),Ch(()=>(n.data=vv(n,n.parent,t).resolve,Hq(o,n,e,r).pipe(Ae(a=>(n._resolvedData=a,n.data=Y(Y({},n.data),a),null)))))}function Hq(n,e,t,r){let i=sT(n);if(i.length===0)return he({});let o={};return ft(i).pipe(Ft(a=>zq(n[a],e,t,r).pipe(wo(),Rt(c=>{if(c instanceof Dl)throw yv(new Gs,c);o[a]=c}))),Hu(1),Ae(()=>o),yo(a=>ZN(a)?Zn:Bu(a)))}function zq(n,e,t,r){let i=xl(e)??r,o=Rl(n,i),a=o.resolve?o.resolve(e,t):qt(i,()=>o(e,t));return ko(a)}function iT(n){return Vt(e=>{let t=n(e);return t?ft(t).pipe(Ae(()=>e)):he(e)})}var IT=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===xe);return r}getResolvedTitleForRoute(t){return t.data[Df]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:()=>H(eO),providedIn:"root"})}return n})(),eO=(()=>{class n extends IT{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(ve(vN))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Qs=new ae("",{providedIn:"root",factory:()=>({})}),vc=new ae(""),Iv=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=H(AI);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return he(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=ko(qt(t,()=>r.loadComponent())).pipe(Ae(nO),Vt(rO),Rt(a=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=a}),Sh(()=>{this.componentLoaders.delete(r)})),o=new Fu(i,()=>new Lt).pipe(Lu());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return he({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=tO(r,this.compiler,t,this.onLoadEndListener).pipe(Sh(()=>{this.childrenLoaders.delete(r)})),a=new Fu(o,()=>new Lt).pipe(Lu());return this.childrenLoaders.set(r,a),a}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function tO(n,e,t,r){return ko(qt(t,()=>n.loadChildren())).pipe(Ae(nO),Vt(rO),Ft(i=>i instanceof k_||Array.isArray(i)?he(i):ft(e.compileModuleAsync(i))),Ae(i=>{r&&r(n);let o,a,c=!1;return Array.isArray(i)?(a=i,c=!0):(o=i.create(t).injector,a=o.get(vc,[],{optional:!0,self:!0}).flat()),{routes:a.map(bT),injector:o}}))}function qq(n){return n&&typeof n=="object"&&"default"in n}function nO(n){return qq(n)?n.default:n}function rO(n){return he(n)}var Tv=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:()=>H(Wq),providedIn:"root"})}return n})(),Wq=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),TT=new ae(""),CT=new ae("");function iO(n,e,t){let r=n.get(CT),i=n.get(Wt);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(h=>setTimeout(h));let o,a=new Promise(h=>{o=h}),c=i.startViewTransition(()=>(o(),Gq(n)));c.ready.catch(h=>{});let{onViewTransitionCreated:l}=r;return l&&qt(n,()=>l({transition:c,from:e,to:t})),a}function Gq(n){return new Promise(e=>{S_({read:()=>setTimeout(e)},{injector:n})})}var ST=new ae(""),Cv=(()=>{class n{currentNavigation=Pr(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Lt;transitionAbortWithErrorSubject=new Lt;configLoader=H(Iv);environmentInjector=H(jt);destroyRef=H(Pi);urlSerializer=H(gc);rootContexts=H(_c);location=H(zs);inputBindingEnabled=H(xf,{optional:!0})!==null;titleStrategy=H(IT);options=H(Qs,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=H(Tv);createViewTransition=H(TT,{optional:!0});navigationErrorHandler=H(ST,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>he(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new lv(i)),r=i=>this.events.next(new dv(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;Gt(()=>{this.transitions?.next(_e(Y({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new yn(null),this.transitions.pipe(Bn(r=>r!==null),Vt(r=>{let i=!1;return he(r).pipe(Vt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",qn.SupersededByNewNavigation),Zn;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?_e(Y({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&c!=="reload")return this.events.next(new zi(o.id,this.urlSerializer.serialize(o.rawUrl),"",Il.IgnoredSameUrlNavigation)),o.resolve(!1),Zn;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return he(o).pipe(Vt(l=>(this.events.next(new Zs(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?Zn:Promise.resolve(l))),Uq(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Rt(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation.update(p=>(p.finalUrl=l.urlAfterRedirects,p));let h=new wf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:l,extractedUrl:h,source:p,restoredState:_,extras:E}=o,w=new Zs(l,this.urlSerializer.serialize(h),p,_);this.events.next(w);let C=$N(this.rootComponentType).snapshot;return this.currentTransition=r=_e(Y({},o),{targetSnapshot:C,urlAfterRedirects:h,extras:_e(Y({},E),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(k=>(k.finalUrl=h,k)),he(r)}else return this.events.next(new zi(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Il.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Zn}),Rt(o=>{let a=new sv(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),Ae(o=>(this.currentTransition=r=_e(Y({},o),{guards:oq(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),gq(this.environmentInjector,o=>this.events.next(o)),Rt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw yv(this.urlSerializer,o.guardsResult);let a=new av(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),Bn(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",qn.GuardRejected),!1)),iT(o=>{if(o.guards.canActivateChecks.length!==0)return he(o).pipe(Rt(a=>{let c=new cv(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),Vt(a=>{let c=!1;return he(a).pipe(Bq(this.paramsInheritanceStrategy,this.environmentInjector),Rt({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",qn.NoDataFromResolver)}}))}),Rt(a=>{let c=new uv(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),iT(o=>{let a=c=>{let l=[];if(c.routeConfig?.loadComponent){let h=xl(c)??this.environmentInjector;l.push(this.configLoader.loadComponent(h,c.routeConfig).pipe(Rt(p=>{c.component=p}),Ae(()=>{})))}for(let h of c.children)l.push(...a(h));return l};return Th(a(o.targetSnapshot.root)).pipe(bs(null),dr(1))}),iT(()=>this.afterPreactivation()),Vt(()=>{let{currentSnapshot:o,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return c?ft(c).pipe(Ae(()=>r)):he(r)}),Ae(o=>{let a=eq(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=_e(Y({},o),{targetRouterState:a}),this.currentNavigation.update(c=>(c.targetRouterState=a,c)),r}),Rt(()=>{this.events.next(new Ef)}),iq(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),dr(1),Ig(new De(o=>{let a=r.abortController.signal,c=()=>o.next();return a.addEventListener("abort",c),()=>a.removeEventListener("abort",c)}).pipe(Bn(()=>!i&&!r.targetRouterState),Rt(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",qn.Aborted)}))),Rt({next:o=>{i=!0,this.lastSuccessfulNavigation=Gt(this.currentNavigation),this.events.next(new yr(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Ig(this.transitionAbortWithErrorSubject.pipe(Rt(o=>{throw o}))),Sh(()=>{i||this.cancelNavigationTransition(r,"",qn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),yo(o=>{if(this.destroyed)return r.resolve(!1),Zn;if(i=!0,KN(o))this.events.next(new $i(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),rq(o)?this.events.next(new Sl(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Tl(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let c=qt(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof Dl){let{message:l,cancellationCode:h}=yv(this.urlSerializer,c);this.events.next(new $i(r.id,this.urlSerializer.serialize(r.extractedUrl),l,h)),this.events.next(new Sl(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return Zn}))}))}cancelNavigationTransition(t,r,i){let o=new $i(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Gt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Kq(n){return n!==El}var oO=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:()=>H(Zq),providedIn:"root"})}return n})(),Ev=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Zq=(()=>{class n extends Ev{static \u0275fac=(()=>{let t;return function(i){return(t||(t=js(n)))(i||n)}})();static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),sO=(()=>{class n{urlSerializer=H(gc);options=H(Qs,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=H(zs);urlHandlingStrategy=H(Tv);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Hi;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,a=i??o;return a instanceof Hi?this.urlSerializer.serialize(a):a}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=$N(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:()=>H(Qq),providedIn:"root"})}return n})(),Qq=(()=>{class n extends sO{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Zs?this.updateStateMemento():t instanceof zi?this.commitTransition(r):t instanceof wf?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Ef?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof $i&&t.code!==qn.SupersededByNewNavigation&&t.code!==qn.Redirect?this.restoreHistory(r):t instanceof Tl?this.restoreHistory(r,!0):t instanceof yr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:a}=r;if(this.location.isCurrentPathEqualTo(t)||o){let c=this.browserPageId,l=Y(Y({},a),this.generateNgRouterState(i,c));this.location.replaceState(t,"",l)}else{let c=Y(Y({},a),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",c)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=js(n)))(i||n)}})();static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Sv(n,e){n.events.pipe(Bn(t=>t instanceof yr||t instanceof $i||t instanceof Tl||t instanceof zi),Ae(t=>t instanceof yr||t instanceof zi?0:(t instanceof $i?t.code===qn.Redirect||t.code===qn.SupersededByNewNavigation:!1)?2:1),Bn(t=>t!==2),dr(1)).subscribe(()=>{e()})}var Yq={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Jq={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},yt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=H(_I);stateManager=H(sO);options=H(Qs,{optional:!0})||{};pendingTasks=H(Mi);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=H(Cv);urlSerializer=H(gc);location=H(zs);urlHandlingStrategy=H(Tv);injector=H(jt);_events=new Lt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=H(oO);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=H(vc,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!H(xf,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new It;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Gt(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof $i&&r.code!==qn.Redirect&&r.code!==qn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof yr)this.navigated=!0;else if(r instanceof Sl){let a=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=Y({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Kq(i.source)},a);this.scheduleNavigation(c,El,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Q3(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),El,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},a=i?.navigationId?i:null;if(i){let l=Y({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(t);this.scheduleNavigation(c,r,a,o).catch(l=>{this.disposed||this.injector.get(zn)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Gt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(bT),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=r,h=l?this.currentUrlTree.fragment:a,p=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":p=Y(Y({},this.currentUrlTree.queryParams),o);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}p!==null&&(p=this.removeEmptyProps(p));let _;try{let E=i?i.snapshot:this.routerState.snapshot.root;_=VN(E)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),_=this.currentUrlTree.root}return jN(_,t,p,h??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Ks(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,El,null,r)}navigate(t,r={skipLocationChange:!1}){return Xq(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(Ss(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=Y({},Yq):r===!1?i=Y({},Jq):i=r,Ks(t))return yN(this.currentUrlTree,t,i);let o=this.parseUrl(t);return yN(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,h;a?(c=a.resolve,l=a.reject,h=a.promise):h=new Promise((_,E)=>{c=_,l=E});let p=this.pendingTasks.add();return Sv(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:c,reject:l,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(_=>Promise.reject(_))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Xq(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new re(4008,!1)}var qi=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Pr(null);get href(){return Gt(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Lt;applicationErrorHandler=H(zn);options=H(Qs,{optional:!0});constructor(t,r,i,o,a,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=a,this.locationStrategy=c,this.reactiveHref.set(H(new U_("href"),{optional:!0}));let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area"||!!(typeof customElements=="object"&&customElements.get(l)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof yr&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ks(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(t!==0||r||i||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l)?.catch(h=>{this.applicationErrorHandler(h)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Ks(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(ce(yt),ce(Lr),Kh("tabindex"),ce(Oi),ce(Pn),ce(si))};static \u0275dir=vt({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Ue("click",function(a){return i.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),r&2&&dl("href",i.reactiveHref(),W0)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Hs],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Hs],replaceUrl:[2,"replaceUrl","replaceUrl",Hs],routerLink:"routerLink"},features:[Mr]})}return n})(),AT=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new He;constructor(t,r,i,o,a){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=a,this.routerEventsSubscription=t.events.subscribe(c=>{c instanceof yr&&this.update()})}ngAfterContentInit(){he(this.links.changes,he(null)).pipe(ws()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=ft(t).pipe(ws()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=e6(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(ce(yt),ce(Pn),ce(Oi),ce(Mo),ce(qi,8))};static \u0275dir=vt({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&EI(o,qi,5),r&2){let a;bI(a=II())&&(i.links=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Mr]})}return n})();function e6(n){return!!n.paths}var Pf=class{};var aO=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Bn(t=>t instanceof yr),Es(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=ll(o.providers,t,`Route: ${o.path}`));let a=o._injector??t,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(c,o.children??o._loadedRoutes))}return ft(i).pipe(ws())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=he(null);let o=i.pipe(Ft(a=>a===null?he(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??t,a.routes))));if(r.loadComponent&&!r._loadedComponent){let a=this.loader.loadComponent(t,r);return ft([o,a]).pipe(ws())}else return o})}static \u0275fac=function(r){return new(r||n)(ve(yt),ve(jt),ve(Pf),ve(Iv))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cO=new ae(""),t6=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=El;restoredId=0;store={};constructor(t,r,i,o,a={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=a,a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Zs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof yr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof zi&&t.code===Il.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{if(!(t instanceof Cl))return;let r={behavior:"instant"};t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],r):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position,r):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>b(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new Cl(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){dI()};static \u0275prov=ie({token:n,factory:n.\u0275fac})}return n})();function xT(n,...e){return Xr([{provide:vc,multi:!0,useValue:n},[],{provide:Lr,useFactory:uO,deps:[yt]},{provide:Yh,multi:!0,useFactory:lO},e.map(t=>t.\u0275providers)])}function uO(n){return n.routerState.root}function Mf(n,e){return{\u0275kind:n,\u0275providers:e}}function lO(){let n=H(Nt);return e=>{let t=n.get(Bs);if(e!==t.components[0])return;let r=n.get(yt),i=n.get(dO);n.get(RT)===1&&r.initialNavigation(),n.get(pO,null,{optional:!0})?.setUpPreloading(),n.get(cO,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var dO=new ae("",{factory:()=>new Lt}),RT=new ae("",{providedIn:"root",factory:()=>1});function hO(){let n=[{provide:$0,useValue:!0},{provide:RT,useValue:0},L_(()=>{let e=H(Nt);return e.get(OI,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(yt),o=e.get(dO);Sv(i,()=>{r(!0)}),e.get(Cv).afterPreactivation=()=>(r(!0),o.closed?he(void 0):o),i.initialNavigation()}))})];return Mf(2,n)}function fO(){let n=[L_(()=>{H(yt).setUpLocationChangeListener()}),{provide:RT,useValue:2}];return Mf(3,n)}var pO=new ae("");function mO(n){return Mf(0,[{provide:pO,useExisting:aO},{provide:Pf,useExisting:n}])}function Dv(){return Mf(8,[wT,{provide:xf,useExisting:wT}])}function gO(n){ul("NgRouterViewTransitions");let e=[{provide:TT,useValue:iO},{provide:CT,useValue:Y({skipNextTransition:!!n?.skipInitialTransition},n)}];return Mf(9,e)}var _O=[zs,{provide:gc,useClass:Gs},yt,_c,{provide:Lr,useFactory:uO,deps:[yt]},Iv,[]],yc=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[_O,[],{provide:vc,multi:!0,useValue:t},[],r?.errorHandler?{provide:ST,useValue:r.errorHandler}:[],{provide:Qs,useValue:r||{}},r?.useHash?r6():i6(),n6(),r?.preloadingStrategy?mO(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?o6(r):[],r?.bindToComponentInputs?Dv().\u0275providers:[],r?.enableViewTransitions?gO().\u0275providers:[],s6()]}}static forChild(t){return{ngModule:n,providers:[{provide:vc,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=kr({type:n});static \u0275inj=fr({})}return n})();function n6(){return{provide:cO,useFactory:()=>{let n=H(lN),e=H(Xe),t=H(Qs),r=H(Cv),i=H(gc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new t6(i,r,n,e,t)}}}function r6(){return{provide:si,useClass:BI}}function i6(){return{provide:si,useClass:q_}}function o6(n){return[n.initialNavigation==="disabled"?fO().\u0275providers:[],n.initialNavigation==="enabledBlocking"?hO().\u0275providers:[]]}var DT=new ae("");function s6(){return[{provide:DT,useFactory:lO},{provide:Yh,multi:!0,useExisting:DT}]}var XT={};jx(XT,{FirebaseError:()=>Jn,SDK_VERSION:()=>ci,_DEFAULT_ENTRY_NAME:()=>Ki,_addComponent:()=>Ol,_addOrOverwriteComponent:()=>JT,_apps:()=>Js,_clearComponents:()=>uW,_components:()=>Nl,_getProvider:()=>Xs,_isFirebaseApp:()=>KO,_isFirebaseServerApp:()=>tr,_registerComponent:()=>er,_removeServiceInstance:()=>GO,_serverApps:()=>kl,deleteApp:()=>$f,getApp:()=>ea,getApps:()=>Bf,initializeApp:()=>Ll,initializeServerApp:()=>ZO,onLog:()=>Lv,registerVersion:()=>lt,setLogLevel:()=>Fv});var vO=()=>{};var EO=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},a6=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],a=n[t++],c=n[t++],l=((i&7)<<18|(o&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let o=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return e.join("")},Av={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],a=i+1<n.length,c=a?n[i+1]:0,l=i+2<n.length,h=l?n[i+2]:0,p=o>>2,_=(o&3)<<4|c>>4,E=(c&15)<<2|h>>6,w=h&63;l||(w=64,a||(E=64)),r.push(t[p],t[_],t[E],t[w])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(EO(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):a6(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let h=i<n.length?t[n.charAt(i)]:64;++i;let _=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||c==null||h==null||_==null)throw new MT;let E=o<<2|c>>4;if(r.push(E),h!==64){let w=c<<4&240|h>>2;if(r.push(w),_!==64){let C=h<<6&192|_;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},MT=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},c6=function(n){let e=EO(n);return Av.encodeByteArray(e,!0)},Nf=function(n){return c6(n).replace(/\./g,"")},Of=function(n){try{return Av.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Lf(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(let t in e)!e.hasOwnProperty(t)||!u6(t)||(n[t]=Lf(n[t],e[t]));return n}function u6(n){return n!=="__proto__"}function Ff(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var l6=()=>Ff().__FIREBASE_DEFAULTS__,d6=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},h6=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Of(n[1]);return e&&JSON.parse(e)},xv=()=>{try{return vO()||l6()||d6()||h6()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},NT=n=>{var e,t;return(t=(e=xv())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},bO=n=>{let e=NT(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},OT=()=>{var n;return(n=xv())===null||n===void 0?void 0:n.config},LT=n=>{var e;return(e=xv())===null||e===void 0?void 0:e[`_${n}`]};var wc=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Ys(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Rv(n){return b(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function IO(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Nf(JSON.stringify(t)),Nf(JSON.stringify(a)),""].join(".")}var kf={};function f6(){let n={prod:[],emulator:[]};for(let e of Object.keys(kf))kf[e]?n.emulator.push(e):n.prod.push(e);return n}function p6(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var yO=!1;function Pv(n,e){if(typeof window>"u"||typeof document>"u"||!Ys(window.location.host)||kf[n]===e||kf[n]||yO)return;kf[n]=e;function t(E){return`__firebase__banner__${E}`}let r="__firebase__banner",o=f6().prod.length>0;function a(){let E=document.getElementById(r);E&&E.remove()}function c(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function l(E,w){E.setAttribute("width","24"),E.setAttribute("id",w),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function h(){let E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{yO=!0,a()},E}function p(E,w){E.setAttribute("id",w),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function _(){let E=p6(r),w=t("text"),C=document.getElementById(w)||document.createElement("span"),k=t("learnmore"),R=document.getElementById(k)||document.createElement("a"),j=t("preprendIcon"),K=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){let q=E.element;c(q),p(R,k);let Z=h();l(K,j),q.append(K,C,R,Z),document.body.appendChild(q)}o?(C.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function TO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function m6(){var n;let e=(n=xv())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function CO(){return typeof window<"u"||FT()}function FT(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function SO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function DO(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function AO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xO(){let n=hn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function RO(){return!m6()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Vf(){try{return typeof indexedDB=="object"}catch{return!1}}function PO(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var g6="FirebaseError",Jn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=g6,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xn.prototype.create)}},Xn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],a=o?_6(o,r):"Error",c=`${this.serviceName}: ${a} (${i}).`;return new Jn(i,c,r)}};function _6(n,e){return n.replace(v6,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var v6=/\{\$([^}]+)}/g;function VT(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function MO(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Wi(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],a=e[i];if(wO(o)&&wO(a)){if(!Wi(o,a))return!1}else if(o!==a)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function wO(n){return n!==null&&typeof n=="object"}function Ml(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Mv(n,e){let t=new kT(n,e);return t.subscribe.bind(t)}var kT=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");y6(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=PT),i.error===void 0&&(i.error=PT),i.complete===void 0&&(i.complete=PT);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function y6(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function PT(){}var Afe=14400*1e3;function Bt(n){return n&&n._delegate?n._delegate:n}var In=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ec="[DEFAULT]";var jT=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new wc;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(E6(e))try{this.getOrInitializeService({instanceIdentifier:Ec})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ec){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return b(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ec){return this.instances.has(e)}getOptions(e=Ec){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,a]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&a.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:w6(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ec){return this.component?this.component.multipleInstances?e:Ec:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function w6(n){return n===Ec?void 0:n}function E6(n){return n.instantiationMode==="EAGER"}var jf=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new jT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var UT=[],ze=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(ze||{}),kO={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},b6=ze.INFO,I6={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},T6=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=I6[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Fr=class{constructor(e){this.name=e,this._logLevel=b6,this._logHandler=T6,this._userLogHandler=null,UT.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}};function NO(n){UT.forEach(e=>{e.setLogLevel(n)})}function OO(n,e){for(let t of UT){let r=null;e&&e.level&&(r=kO[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(i,o,...a)=>{let c=a.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");o>=(r??i.logLevel)&&n({level:ze[o].toLowerCase(),message:c,args:a,type:i.name})}}}var C6=(n,e)=>e.some(t=>n instanceof t),LO,FO;function S6(){return LO||(LO=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function D6(){return FO||(FO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var VO=new WeakMap,$T=new WeakMap,jO=new WeakMap,BT=new WeakMap,zT=new WeakMap;function A6(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{t(Gi(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&VO.set(t,n)}).catch(()=>{}),zT.set(e,n),e}function x6(n){if($T.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});$T.set(n,e)}var HT={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return $T.get(n);if(e==="objectStoreNames")return n.objectStoreNames||jO.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Gi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function UO(n){HT=n(HT)}function R6(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(kv(this),e,...t);return jO.set(r,e.sort?e.sort():[e]),Gi(r)}:D6().includes(n)?function(...e){return n.apply(kv(this),e),Gi(VO.get(this))}:function(...e){return Gi(n.apply(kv(this),e))}}function P6(n){return typeof n=="function"?R6(n):(n instanceof IDBTransaction&&x6(n),C6(n,S6())?new Proxy(n,HT):n)}function Gi(n){if(n instanceof IDBRequest)return A6(n);if(BT.has(n))return BT.get(n);let e=P6(n);return e!==n&&(BT.set(n,e),zT.set(e,n)),e}var kv=n=>zT.get(n);function $O(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let a=indexedDB.open(n,e),c=Gi(a);return r&&a.addEventListener("upgradeneeded",l=>{r(Gi(a.result),l.oldVersion,l.newVersion,Gi(a.transaction),l)}),t&&a.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),c.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}var M6=["get","getKey","getAll","getAllKeys","count"],k6=["put","add","delete","clear"],qT=new Map;function BO(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(qT.get(e))return qT.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=k6.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||M6.includes(t)))return;let o=function(a,...c){return b(this,null,function*(){let l=this.transaction(a,i?"readwrite":"readonly"),h=l.store;return r&&(h=h.index(c.shift())),(yield Promise.all([h[t](...c),i&&l.done]))[0]})};return qT.set(e,o),o}UO(n=>_e(Y({},n),{get:(e,t,r)=>BO(e,t)||n.get(e,t,r),has:(e,t)=>!!BO(e,t)||n.has(e,t)}));var GT=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(N6(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function N6(n){let e=n.getComponent();return e?.type==="VERSION"}var Nv="@firebase/app",KT="0.13.2";var No=new Fr("@firebase/app"),O6="@firebase/app-compat",L6="@firebase/analytics-compat",F6="@firebase/analytics",V6="@firebase/app-check-compat",j6="@firebase/app-check",U6="@firebase/auth",B6="@firebase/auth-compat",$6="@firebase/database",H6="@firebase/data-connect",z6="@firebase/database-compat",q6="@firebase/functions",W6="@firebase/functions-compat",G6="@firebase/installations",K6="@firebase/installations-compat",Z6="@firebase/messaging",Q6="@firebase/messaging-compat",Y6="@firebase/performance",J6="@firebase/performance-compat",X6="@firebase/remote-config",eW="@firebase/remote-config-compat",tW="@firebase/storage",nW="@firebase/storage-compat",rW="@firebase/firestore",iW="@firebase/ai",oW="@firebase/firestore-compat",sW="firebase",aW="11.10.0";var Ki="[DEFAULT]",cW={[Nv]:"fire-core",[O6]:"fire-core-compat",[F6]:"fire-analytics",[L6]:"fire-analytics-compat",[j6]:"fire-app-check",[V6]:"fire-app-check-compat",[U6]:"fire-auth",[B6]:"fire-auth-compat",[$6]:"fire-rtdb",[H6]:"fire-data-connect",[z6]:"fire-rtdb-compat",[q6]:"fire-fn",[W6]:"fire-fn-compat",[G6]:"fire-iid",[K6]:"fire-iid-compat",[Z6]:"fire-fcm",[Q6]:"fire-fcm-compat",[Y6]:"fire-perf",[J6]:"fire-perf-compat",[X6]:"fire-rc",[eW]:"fire-rc-compat",[tW]:"fire-gcs",[nW]:"fire-gcs-compat",[rW]:"fire-fst",[oW]:"fire-fst-compat",[iW]:"fire-vertex","fire-js":"fire-js",[sW]:"fire-js-all"};var Js=new Map,kl=new Map,Nl=new Map;function Ol(n,e){try{n.container.addComponent(e)}catch(t){No.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function JT(n,e){n.container.addOrOverwriteComponent(e)}function er(n){let e=n.name;if(Nl.has(e))return No.debug(`There were multiple attempts to register component ${e}.`),!1;Nl.set(e,n);for(let t of Js.values())Ol(t,n);for(let t of kl.values())Ol(t,n);return!0}function Xs(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function GO(n,e,t=Ki){Xs(n,e).clearInstance(t)}function KO(n){return n.options!==void 0}function tr(n){return n==null?!1:n.settings!==void 0}function uW(){Nl.clear()}var lW={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vr=new Xn("app","Firebase",lW);var Ov=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new In("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vr.create("app-deleted",{appName:this._name})}};function HO(n,e){let t=Of(n.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}let i=JSON.parse(t).exp*1e3,o=new Date().getTime();i-o<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}var ZT=class extends Ov{constructor(e,t,r,i){let o=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!0,a={name:r,automaticDataCollectionEnabled:o};if(e.apiKey!==void 0)super(e,a,i);else{let c=e;super(c.options,a,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:o},t),this._serverConfig.authIdToken&&HO(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&HO(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,lt(Nv,KT,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){$f(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Vr.create("server-app-deleted")}};var ci=aW;function Ll(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Ki,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Vr.create("bad-app-name",{appName:String(i)});if(t||(t=OT()),!t)throw Vr.create("no-options");let o=Js.get(i);if(o){if(Wi(t,o.options)&&Wi(r,o.config))return o;throw Vr.create("duplicate-app",{appName:i})}let a=new jf(i);for(let l of Nl.values())a.addComponent(l);let c=new Ov(t,r,a);return Js.set(i,c),c}function ZO(n,e){if(CO()&&!FT())throw Vr.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!0);let t;KO(n)?t=n.options:t=n;let r=Object.assign(Object.assign({},e),t);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;let i=h=>[...h].reduce((p,_)=>Math.imul(31,p)+_.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Vr.create("finalization-registry-not-supported",{});let o=""+i(JSON.stringify(r)),a=kl.get(o);if(a)return a.incRefCount(e.releaseOnDeref),a;let c=new jf(o);for(let h of Nl.values())c.addComponent(h);let l=new ZT(t,e,o,c);return kl.set(o,l),l}function ea(n=Ki){let e=Js.get(n);if(!e&&n===Ki&&OT())return Ll();if(!e)throw Vr.create("no-app",{appName:n});return e}function Bf(){return Array.from(Js.values())}function $f(n){return b(this,null,function*(){let e=!1,t=n.name;Js.has(t)?(e=!0,Js.delete(t)):kl.has(t)&&n.decRefCount()<=0&&(kl.delete(t),e=!0),e&&(yield Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)})}function lt(n,e,t){var r;let i=(r=cW[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){let c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),No.warn(c.join(" "));return}er(new In(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function Lv(n,e){if(n!==null&&typeof n!="function")throw Vr.create("invalid-log-argument");OO(n,e)}function Fv(n){NO(n)}var dW="firebase-heartbeat-database",hW=1,Uf="firebase-heartbeat-store",WT=null;function QO(){return WT||(WT=$O(dW,hW,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Uf)}catch(t){console.warn(t)}}}}).catch(n=>{throw Vr.create("idb-open",{originalErrorMessage:n.message})})),WT}function fW(n){return b(this,null,function*(){try{let t=(yield QO()).transaction(Uf),r=yield t.objectStore(Uf).get(YO(n));return yield t.done,r}catch(e){if(e instanceof Jn)No.warn(e.message);else{let t=Vr.create("idb-get",{originalErrorMessage:e?.message});No.warn(t.message)}}})}function zO(n,e){return b(this,null,function*(){try{let r=(yield QO()).transaction(Uf,"readwrite");yield r.objectStore(Uf).put(e,YO(n)),yield r.done}catch(t){if(t instanceof Jn)No.warn(t.message);else{let r=Vr.create("idb-set",{originalErrorMessage:t?.message});No.warn(r.message)}}})}function YO(n){return`${n.name}!${n.options.appId}`}var pW=1024,mW=30,QT=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new YT(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return b(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=qO();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>mW){let a=_W(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){No.warn(r)}})}getHeartbeatsHeader(){return b(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=qO(),{heartbeatsToSend:r,unsentEntries:i}=gW(this._heartbeatsCache.heartbeats),o=Nf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return No.warn(t),""}})}};function qO(){return new Date().toISOString().substring(0,10)}function gW(n,e=pW){let t=[],r=n.slice();for(let i of n){let o=t.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),WO(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),WO(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var YT=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return b(this,null,function*(){return Vf()?PO().then(()=>!0).catch(()=>!1):!1})}read(){return b(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield fW(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return zO(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return zO(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function WO(n){return Nf(JSON.stringify({version:2,heartbeats:n})).length}function _W(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function vW(n){er(new In("platform-logger",e=>new GT(e),"PRIVATE")),er(new In("heartbeat",e=>new QT(e),"PRIVATE")),lt(Nv,KT,n),lt(Nv,KT,"esm2017"),lt("fire-js","")}vW("");var yW="firebase",wW="11.10.0";lt(yW,wW,"app");function JO(n){n===void 0&&(n=H(Nt));let e=n.get(el);return t=>new De(r=>{let i=e.add(),o=!1;function a(){o||(i(),o=!0)}let c=t.subscribe({next:l=>{r.next(l),a()},complete:()=>{r.complete(),a()},error:l=>{r.error(l),a()}});return c.add(()=>{r.unsubscribe(),a()}),c})}var ta=new Is("ANGULARFIRE2_VERSION");function Hf(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(a=>a.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Vl=(n,e)=>{let t=e?[e]:Bf(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(a=>{r.includes(a)||r.push(a)})}),r},Fl=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(Fl||{}),XO=$_()&&typeof Zone<"u"?Fl.WARN:Fl.SILENT;var Vv=class{zone;delegate;constructor(e,t=qE){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(a){i?i.runGuarded(()=>{e.apply(this,[a])}):e.apply(this,[a])};return this.delegate.schedule(o,t,r)}},na=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=H(Xe);this.outsideAngular=t.runOutsideAngular(()=>new Vv(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Vv(typeof Zone>"u"?void 0:Zone.current,zE))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),e1=!1;function EW(n,e){!e1&&(XO>Fl.SILENT||$_())&&(e1=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),XO>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function bW(n){let e=H(Xe,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function bc(n){let e=H(Xe,{optional:!0});return e?e.run(()=>n()):n()}var IW=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),qt(t,()=>bc(()=>n.apply(void 0,r)))),$t=(n,e,t)=>(t||=e?Fl.WARN:Fl.VERBOSE,function(){let r,i=arguments,o,a,c;try{o=H(na),a=H(el),c=H(jt)}catch{return EW(n,t),n.apply(this,i)}for(let h=0;h<arguments.length;h++)typeof i[h]=="function"&&(e&&(r||=bc(()=>a.add())),i[h]=IW(i[h],r,c));let l=bW(()=>n.apply(this,i));return e?l instanceof De?l.pipe(ys(o.outsideAngular),vs(o.insideAngular),JO(c)):l instanceof Promise?bc(()=>{let h=a.add();return new Promise((p,_)=>{l.then(E=>qt(c,()=>bc(()=>p(E))),E=>qt(c,()=>bc(()=>_(E)))).finally(h)})}):typeof l=="function"&&r?function(){return setTimeout(r,0),l.apply(this,arguments)}:bc(()=>l):l instanceof De?l.pipe(ys(o.outsideAngular),vs(o.insideAngular)):bc(()=>l)});var Oo=class{constructor(e){return e}},Ic=class{constructor(){return Bf()}};function TW(n){return n&&n.length===1?n[0]:new Oo(ea())}var eC=new ae("angularfire2._apps"),CW={provide:Oo,useFactory:TW,deps:[[new Yn,eC]]},SW={provide:Ic,deps:[[new Yn,eC]]};function DW(n){return(e,t)=>{let r=t.get(Us);lt("angularfire",ta.full,"core"),lt("angularfire",ta.full,"app"),lt("angular",Dg.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Oo(i)}}function t1(n,...e){return Xr([CW,SW,{provide:eC,useFactory:DW(n),multi:!0,deps:[Xe,Nt,na,...e]}])}var n1=$t(Ll,!0);var AW=new Map,xW={activated:!1,tokenObservers:[]},RW={initialized:!1,enabled:!1};function ui(n){return AW.get(n)||Object.assign({},xW)}function s1(){return RW}var PW="https://content-firebaseappcheck.googleapis.com/v1";var MW="exchangeDebugToken",r1={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},bpe=1440*60*1e3;var rC=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return b(this,null,function*(){this.stop();try{this.pending=new wc,this.pending.promise.catch(t=>{}),yield kW(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new wc,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function kW(n){return new Promise(e=>{setTimeout(e,n)})}var NW={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},ra=new Xn("appCheck","AppCheck",NW);function a1(n){if(!ui(n).activated)throw ra.create("use-before-activation",{appName:n.name})}function c1(r,i){return b(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},a=t.getImmediate({optional:!0});if(a){let w=yield a.getHeartbeatsHeader();w&&(o["X-Firebase-Client"]=w)}let c={method:"POST",body:JSON.stringify(e),headers:o},l;try{l=yield fetch(n,c)}catch(w){throw ra.create("fetch-network-error",{originalErrorMessage:w?.message})}if(l.status!==200)throw ra.create("fetch-status-error",{httpStatus:l.status});let h;try{h=yield l.json()}catch(w){throw ra.create("fetch-parse-error",{originalErrorMessage:w?.message})}let p=h.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw ra.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});let _=Number(p[1])*1e3,E=Date.now();return{token:h.token,expireTimeMillis:E+_,issuedAtTimeMillis:E}})}function u1(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${PW}/projects/${t}/apps/${r}:${MW}?key=${i}`,body:{debug_token:e}}}var OW="firebase-app-check-database",LW=1,iC="firebase-app-check-store";var jv=null;function FW(){return jv||(jv=new Promise((n,e)=>{try{let t=indexedDB.open(OW,LW);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ra.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(iC,{keyPath:"compositeKey"})}}}catch(t){e(ra.create("storage-open",{originalErrorMessage:t?.message}))}}),jv)}function VW(n,e){return jW(UW(n),e)}function jW(n,e){return b(this,null,function*(){let r=(yield FW()).transaction(iC,"readwrite"),o=r.objectStore(iC).put({compositeKey:n,value:e});return new Promise((a,c)=>{o.onsuccess=l=>{a()},r.onerror=l=>{var h;c(ra.create("storage-set",{originalErrorMessage:(h=l.target.error)===null||h===void 0?void 0:h.message}))}})})}function UW(n){return`${n.options.appId}-${n.name}`}var zf=new Fr("@firebase/app-check");function tC(n,e){return Vf()?VW(n,e).catch(t=>{zf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function l1(){return s1().enabled}function d1(){return b(this,null,function*(){let n=s1();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var BW={error:"UNKNOWN_ERROR"};function $W(n){return Av.encodeString(JSON.stringify(n),!1)}function oC(n,e=!1,t=!1){return b(this,null,function*(){let r=n.app;a1(r);let i=ui(r),o=i.token,a;if(o&&!qf(o)&&(i.token=void 0,o=void 0),!o){let h=yield i.cachedTokenPromise;h&&(qf(h)?o=h:yield tC(r,void 0))}if(!e&&o&&qf(o))return{token:o.token};let c=!1;if(l1())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=c1(u1(r,yield d1()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),c=!0);let h=yield i.exchangeTokenPromise;return yield tC(r,h),i.token=h,{token:h.token}}catch(h){return h.code==="appCheck/throttled"||h.code==="appCheck/initial-throttle"?zf.warn(h.message):t&&zf.error(h),nC(h)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),c=!0),o=yield ui(r).exchangeTokenPromise}catch(h){h.code==="appCheck/throttled"||h.code==="appCheck/initial-throttle"?zf.warn(h.message):t&&zf.error(h),a=h}let l;return o?a?qf(o)?l={token:o.token,internalError:a}:l=nC(a):(l={token:o.token},i.token=o,yield tC(r,o)):l=nC(a),c&&WW(r,l),l})}function HW(n){return b(this,null,function*(){let e=n.app;a1(e);let{provider:t}=ui(e);if(l1()){let r=yield d1(),{token:i}=yield c1(u1(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function zW(n,e,t,r){let{app:i}=n,o=ui(i),a={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,a],o.token&&qf(o.token)){let c=o.token;Promise.resolve().then(()=>{t({token:c.token}),i1(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>i1(n))}function h1(n,e){let t=ui(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function i1(n){let{app:e}=n,t=ui(e),r=t.tokenRefresher;r||(r=qW(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function qW(n){let{app:e}=n;return new rC(()=>b(null,null,function*(){let t=ui(e),r;if(t.token?r=yield oC(n,!0):r=yield oC(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=ui(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},r1.RETRIAL_MIN_WAIT,r1.RETRIAL_MAX_WAIT)}function WW(n,e){let t=ui(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function qf(n){return n.expireTimeMillis-Date.now()>0}function nC(n){return{token:$W(BW),error:n}}var sC=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=ui(this.app);for(let t of e)h1(this.app,t.next);return Promise.resolve()}};function GW(n,e){return new sC(n,e)}function KW(n){return{getToken:e=>oC(n,e),getLimitedUseToken:()=>HW(n),addTokenListener:e=>zW(n,"INTERNAL",e),removeTokenListener:e=>h1(n.app,e)}}var ZW="@firebase/app-check",QW="0.10.1";var YW="app-check",o1="app-check-internal";function JW(){er(new In(YW,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return GW(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(o1).initialize()})),er(new In(o1,n=>{let e=n.getProvider("app-check").getImmediate();return KW(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),lt(ZW,QW)}JW();var XW="app-check";var jl=class{constructor(){return Vl(XW)}};var eG=["localhost","0.0.0.0","127.0.0.1"],Ope=typeof window<"u"&&eG.includes(window.location.hostname);_t();function D1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var A1=D1,x1=new Xn("auth","Firebase",D1());var qv=new Fr("@firebase/auth");function tG(n,...e){qv.logLevel<=ze.WARN&&qv.warn(`Auth (${ci}): ${n}`,...e)}function Bv(n,...e){qv.logLevel<=ze.ERROR&&qv.error(`Auth (${ci}): ${n}`,...e)}function Qi(n,...e){throw TC(n,...e)}function li(n,...e){return TC(n,...e)}function IC(n,e,t){let r=Object.assign(Object.assign({},A1()),{[e]:t});return new Xn("auth","Firebase",r).create(e,{appName:n.name})}function Tc(n){return IC(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nG(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Qi(n,"argument-error"),IC(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function TC(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return x1.create(n,...e)}function be(n,e,...t){if(!n)throw TC(e,...t)}function Lo(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Bv(e),new Error(e)}function Vo(n,e){n||Lo(e)}function uC(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function rG(){return f1()==="http:"||f1()==="https:"}function f1(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function iG(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rG()||DO()||"connection"in navigator)?navigator.onLine:!0}function oG(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Cc=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Vo(t>e,"Short delay should be less than long delay!"),this.isMobile=TO()||AO()}get(){return iG()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function CC(n,e){Vo(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Wv=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Lo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Lo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Lo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var sG={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var aG=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cG=new Cc(3e4,6e4);function SC(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Bl(o,a,c,l){return b(this,arguments,function*(n,e,t,r,i={}){return R1(n,i,()=>b(null,null,function*(){let h={},p={};r&&(e==="GET"?p=r:h={body:JSON.stringify(r)});let _=Ml(Object.assign({key:n.config.apiKey},p)).slice(1),E=yield n._getAdditionalHeaders();E["Content-Type"]="application/json",n.languageCode&&(E["X-Firebase-Locale"]=n.languageCode);let w=Object.assign({method:e,headers:E},h);return SO()||(w.referrerPolicy="no-referrer"),n.emulatorConfig&&Ys(n.emulatorConfig.host)&&(w.credentials="include"),Wv.fetch()(yield P1(n,n.config.apiHost,t,_),w)}))})}function R1(n,e,t){return b(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},sG),e);try{let i=new lC(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let a=yield o.json();if("needConfirmation"in a)throw Uv(n,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{let c=o.ok?a.errorMessage:a.error.message,[l,h]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Uv(n,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Uv(n,"email-already-in-use",a);if(l==="USER_DISABLED")throw Uv(n,"user-disabled",a);let p=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw IC(n,p,h);Qi(n,p)}}catch(i){if(i instanceof Jn)throw i;Qi(n,"network-request-failed",{message:String(i)})}})}function uG(o,a,c,l){return b(this,arguments,function*(n,e,t,r,i={}){let h=yield Bl(n,e,t,r,i);return"mfaPendingCredential"in h&&Qi(n,"multi-factor-auth-required",{_serverResponse:h}),h})}function P1(n,e,t,r){return b(this,null,function*(){let i=`${e}${t}?${r}`,o=n,a=o.config.emulator?CC(n.config,i):`${n.config.apiScheme}://${i}`;return aG.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a})}var lC=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(li(this.auth,"network-request-failed")),cG.get())})}};function Uv(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=li(n,e,r);return i.customData._tokenResponse=t,i}function lG(n,e){return b(this,null,function*(){return Bl(n,"POST","/v1/accounts:delete",e)})}function Gv(n,e){return b(this,null,function*(){return Bl(n,"POST","/v1/accounts:lookup",e)})}function Wf(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function iy(n,e=!1){return b(this,null,function*(){let t=Bt(n),r=yield t.getIdToken(e),i=DC(r);be(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,a=o?.sign_in_provider;return{claims:i,token:r,authTime:Wf(aC(i.auth_time)),issuedAtTime:Wf(aC(i.iat)),expirationTime:Wf(aC(i.exp)),signInProvider:a||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function aC(n){return Number(n)*1e3}function DC(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Bv("JWT malformed, contained fewer than 3 sections"),null;try{let i=Of(t);return i?JSON.parse(i):(Bv("Failed to decode base64 JWT payload"),null)}catch(i){return Bv("Caught error parsing JWT payload as JSON",i?.toString()),null}}function p1(n){let e=DC(n);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Kf(n,e,t=!1){return b(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Jn&&dG(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function dG({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var dC=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>b(this,null,function*(){yield this.iteration()}),t)}iteration(){return b(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Zf=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wf(this.lastLoginAt),this.creationTime=Wf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Kv(n){return b(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Kf(n,Gv(t,{idToken:r}));be(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?M1(o.providerUserInfo):[],c=hG(n.providerData,a),l=n.isAnonymous,h=!(n.email&&o.passwordHash)&&!c?.length,p=l?h:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Zf(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(n,_)})}function AC(n){return b(this,null,function*(){let e=Bt(n);yield Kv(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function hG(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function M1(n){return n.map(e=>{var{providerId:t}=e,r=lr(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function fG(n,e){return b(this,null,function*(){let t=yield R1(n,{},()=>b(null,null,function*(){let r=Ml({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,a=yield P1(n,i,"/v1/token",`key=${o}`),c=yield n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";let l={method:"POST",headers:c,body:r};return n.emulatorConfig&&Ys(n.emulatorConfig.host)&&(l.credentials="include"),Wv.fetch()(a,l)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function pG(n,e){return b(this,null,function*(){return Bl(n,"POST","/v2/accounts:revokeToken",SC(n,e))})}var Gf=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):p1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){be(e.length!==0,"internal-error");let t=p1(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return b(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return b(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield fG(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,a=new n;return r&&(be(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(be(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),o&&(be(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Lo("not implemented")}};function ia(n,e){be(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var oa=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=lr(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Zf(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return b(this,null,function*(){let t=yield Kf(this,this.stsTokenManager.getToken(this.auth,e));return be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return iy(this,e)}reload(){return AC(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return b(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Kv(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return b(this,null,function*(){if(tr(this.auth.app))return Promise.reject(Tc(this.auth));let e=yield this.getIdToken();return yield Kf(this,lG(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,a,c,l,h,p;let _=(r=t.displayName)!==null&&r!==void 0?r:void 0,E=(i=t.email)!==null&&i!==void 0?i:void 0,w=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,C=(a=t.photoURL)!==null&&a!==void 0?a:void 0,k=(c=t.tenantId)!==null&&c!==void 0?c:void 0,R=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,j=(h=t.createdAt)!==null&&h!==void 0?h:void 0,K=(p=t.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:q,emailVerified:Z,isAnonymous:pe,providerData:Pe,stsTokenManager:M}=t;be(q&&M,e,"internal-error");let S=Gf.fromJSON(this.name,M);be(typeof q=="string",e,"internal-error"),ia(_,e.name),ia(E,e.name),be(typeof Z=="boolean",e,"internal-error"),be(typeof pe=="boolean",e,"internal-error"),ia(w,e.name),ia(C,e.name),ia(k,e.name),ia(R,e.name),ia(j,e.name),ia(K,e.name);let D=new n({uid:q,auth:e,email:E,emailVerified:Z,displayName:_,isAnonymous:pe,photoURL:C,phoneNumber:w,tenantId:k,stsTokenManager:S,createdAt:j,lastLoginAt:K});return Pe&&Array.isArray(Pe)&&(D.providerData=Pe.map(P=>Object.assign({},P))),R&&(D._redirectEventId=R),D}static _fromIdTokenResponse(e,t,r=!1){return b(this,null,function*(){let i=new Gf;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Kv(o),o})}static _fromGetAccountInfoResponse(e,t,r){return b(this,null,function*(){let i=t.users[0];be(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?M1(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!o?.length,c=new Gf;c.updateFromIdToken(r);let l=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:a}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Zf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(l,h),l})}};var m1=new Map;function Fo(n){Vo(n instanceof Function,"Expected a class definition");let e=m1.get(n);return e?(Vo(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,m1.set(n,e),e)}var mG=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return b(this,null,function*(){return!0})}_set(t,r){return b(this,null,function*(){this.storage[t]=r})}_get(t){return b(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return b(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),hC=mG;function $v(n,e,t){return`firebase:${n}:${e}:${t}`}var Zv=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=$v(this.userKey,i.apiKey,o),this.fullPersistenceKey=$v("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return b(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield Gv(this.auth,{idToken:e}).catch(()=>{});return t?oa._fromGetAccountInfoResponse(this.auth,t,e):null}return oa._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return b(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return b(this,null,function*(){if(!t.length)return new n(Fo(hC),e,r);let i=(yield Promise.all(t.map(h=>b(null,null,function*(){if(yield h._isAvailable())return h})))).filter(h=>h),o=i[0]||Fo(hC),a=$v(r,e.config.apiKey,e.name),c=null;for(let h of t)try{let p=yield h._get(a);if(p){let _;if(typeof p=="string"){let E=yield Gv(e,{idToken:p}).catch(()=>{});if(!E)break;_=yield oa._fromGetAccountInfoResponse(e,E,p)}else _=oa._fromJSON(e,p);h!==o&&(c=_),o=h;break}}catch{}let l=i.filter(h=>h._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new n(o,e,r):(o=l[0],c&&(yield o._set(a,c.toJSON())),yield Promise.all(t.map(h=>b(null,null,function*(){if(h!==o)try{yield h._remove(a)}catch{}}))),new n(o,e,r))})}};function g1(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(L1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(k1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(V1(e))return"Blackberry";if(j1(e))return"Webos";if(N1(e))return"Safari";if((e.includes("chrome/")||O1(e))&&!e.includes("edge/"))return"Chrome";if(F1(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function k1(n=hn()){return/firefox\//i.test(n)}function N1(n=hn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function O1(n=hn()){return/crios\//i.test(n)}function L1(n=hn()){return/iemobile/i.test(n)}function F1(n=hn()){return/android/i.test(n)}function V1(n=hn()){return/blackberry/i.test(n)}function j1(n=hn()){return/webos/i.test(n)}function xC(n=hn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function gG(n=hn()){var e;return xC(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _G(){return xO()&&document.documentMode===10}function U1(n=hn()){return xC(n)||F1(n)||j1(n)||V1(n)||/windows phone/i.test(n)||L1(n)}function B1(n,e=[]){let t;switch(n){case"Browser":t=g1(hn());break;case"Worker":t=`${g1(hn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ci}/${r}`}var fC=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((a,c)=>{try{let l=e(o);a(l)}catch(l){c(l)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return b(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function vG(t){return b(this,arguments,function*(n,e={}){return Bl(n,"GET","/v2/passwordPolicy",SC(n,e))})}var yG=6,pC=class{constructor(e){var t,r,i,o;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:yG,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,a,c;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsUppercaseLetter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var mC=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qv(this),this.idTokenSubscription=new Qv(this),this.beforeStateQueue=new fC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=x1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Fo(t)),this._initializationPromise=this.queue(()=>b(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield Zv.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return b(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return b(this,null,function*(){try{let t=yield Gv(this,{idToken:e}),r=yield oa._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return b(this,null,function*(){var t;if(tr(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!a||a===c)&&l?.user&&(i=l.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return b(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return b(this,null,function*(){try{yield Kv(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=oG()}_delete(){return b(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return b(this,null,function*(){if(tr(this.app))return Promise.reject(Tc(this));let t=e?Bt(e):null;return t&&be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return b(this,null,function*(){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>b(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return b(this,null,function*(){return tr(this.app)?Promise.reject(Tc(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return tr(this.app)?Promise.reject(Tc(this)):this.queue(()=>b(this,null,function*(){yield this.assertedPersistence.setPersistence(Fo(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return b(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return b(this,null,function*(){let e=yield vG(this),t=new pC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return b(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield pG(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return b(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return b(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Fo(e)||this._popupRedirectResolver;be(t,this,"argument-error"),this.redirectPersistenceManager=yield Zv.create(this,[Fo(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return b(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>b(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return b(this,null,function*(){if(e===this.currentUser)return this.queue(()=>b(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),a=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(c,this,"internal-error"),c.then(()=>{a||o(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,r,i);return()=>{a=!0,l()}}else{let l=e.addObserver(t);return()=>{a=!0,l()}}}directlySetCurrentUser(e){return b(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=B1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return b(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return b(this,null,function*(){var e;if(tr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&tG(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function oy(n){return Bt(n)}var Qv=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Mv(t=>this.observer=t)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var RC={loadJS(){return b(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wG(n){RC=n}function EG(n){return RC.loadJS(n)}function bG(){return RC.gapiScript}function $1(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function PC(n,e){let t=Xs(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Wi(o,e??{}))return i;Qi(i,"already-initialized")}return t.initialize({options:e})}function IG(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Fo);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function MC(n,e,t){let r=oy(n);be(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=H1(e),{host:a,port:c}=TG(e),l=c===null?"":`:${c}`,h={url:`${o}//${a}${l}/`},p=Object.freeze({host:a,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){be(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),be(Wi(h,r.config.emulator)&&Wi(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,Ys(a)?(Rv(`${o}//${a}${l}`),Pv("Auth",!0)):i||CG()}function H1(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function TG(n){let e=H1(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:_1(r.substr(o.length+1))}}else{let[o,a]=r.split(":");return{host:o,port:_1(a)}}}function _1(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function CG(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Qf=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Lo("not implemented")}_getIdTokenResponse(e){return Lo("not implemented")}_linkToIdToken(e,t){return Lo("not implemented")}_getReauthenticationResolver(e){return Lo("not implemented")}};function Ul(n,e){return b(this,null,function*(){return uG(n,"POST","/v1/accounts:signInWithIdp",SC(n,e))})}var SG="http://localhost",Yv=class n extends Qf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Qi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=lr(t,["providerId","signInMethod"]);if(!r||!i)return null;let a=new n(r,i);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){let t=this.buildRequest();return Ul(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,Ul(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Ul(e,t)}buildRequest(){let e={requestUri:SG,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ml(t)}return e}};var Yf=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Jv=class extends Yf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var kC=(()=>{class n extends Jv{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Yv._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var Jf=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return b(this,null,function*(){let o=yield oa._fromIdTokenResponse(e,r,i),a=v1(r);return new n({user:o,providerId:a,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return b(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=v1(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function v1(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var gC=class n extends Jn{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function z1(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?gC._fromErrorAndOperation(n,o,e,r):o})}function DG(n,e,t=!1){return b(this,null,function*(){let r=yield Kf(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Jf._forOperation(n,"link",r)})}function AG(n,e,t=!1){return b(this,null,function*(){let{auth:r}=n;if(tr(r.app))return Promise.reject(Tc(r));let i="reauthenticate";try{let o=yield Kf(n,z1(r,i,e,n),t);be(o.idToken,r,"internal-error");let a=DC(o.idToken);be(a,r,"internal-error");let{sub:c}=a;return be(n.uid===c,r,"user-mismatch"),Jf._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Qi(r,"user-mismatch"),o}})}function xG(n,e,t=!1){return b(this,null,function*(){if(tr(n.app))return Promise.reject(Tc(n));let r="signIn",i=yield z1(n,r,e),o=yield Jf._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function sy(n,e,t,r){return Bt(n).onIdTokenChanged(e,t,r)}function NC(n,e,t){return Bt(n).beforeAuthStateChanged(e,t)}function ay(n,e,t,r){return Bt(n).onAuthStateChanged(e,t,r)}function OC(n){return Bt(n).signOut()}var Xv="__sak";var ey=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Xv,"1"),this.storage.removeItem(Xv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var RG=1e3,PG=10,MG=(()=>{class n extends ey{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=U1(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((c,l,h)=>{this.notifyListeners(c,h)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},a=this.storage.getItem(i);_G()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,PG):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},RG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return b(this,null,function*(){yield ms(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return b(this,null,function*(){let r=yield ms(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return b(this,null,function*(){yield ms(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),q1=MG;var kG=(()=>{class n extends ey{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),LC=kG;function NG(n){return Promise.all(n.map(e=>b(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var OG=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return b(this,null,function*(){let r=t,{eventId:i,eventType:o,data:a}=r.data,c=this.handlersMap[o];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let l=Array.from(c).map(p=>b(this,null,function*(){return p(r.origin,a)})),h=yield NG(l);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:h})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function FC(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var _C=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return b(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,a;return new Promise((c,l)=>{let h=FC("",20);i.port1.start();let p=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(_){let E=_;if(E.data.eventId===h)switch(E.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(E.data.response);break;default:clearTimeout(p),clearTimeout(o),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})})}};function Zi(){return window}function LG(n){Zi().location.href=n}function W1(){return typeof Zi().WorkerGlobalScope<"u"&&typeof Zi().importScripts=="function"}function FG(){return b(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function VG(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function jG(){return W1()?self:null}var G1="firebaseLocalStorageDb",UG=1,ty="firebaseLocalStorage",K1="fbase_key",Sc=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function cy(n,e){return n.transaction([ty],e?"readwrite":"readonly").objectStore(ty)}function BG(){let n=indexedDB.deleteDatabase(G1);return new Sc(n).toPromise()}function vC(){let n=indexedDB.open(G1,UG);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(ty,{keyPath:K1})}catch(i){t(i)}}),n.addEventListener("success",()=>b(null,null,function*(){let r=n.result;r.objectStoreNames.contains(ty)?e(r):(r.close(),yield BG(),e(yield vC()))}))})}function y1(n,e,t){return b(this,null,function*(){let r=cy(n,!0).put({[K1]:e,value:t});return new Sc(r).toPromise()})}function $G(n,e){return b(this,null,function*(){let t=cy(n,!1).get(e),r=yield new Sc(t).toPromise();return r===void 0?null:r.value})}function w1(n,e){let t=cy(n,!0).delete(e);return new Sc(t).toPromise()}var HG=800,zG=3,qG=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return b(this,null,function*(){return this.db?this.db:(this.db=yield vC(),this.db)})}_withRetries(t){return b(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>zG)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return b(this,null,function*(){return W1()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return b(this,null,function*(){this.receiver=OG._getInstance(jG()),this.receiver._subscribe("keyChanged",(t,r)=>b(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>b(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return b(this,null,function*(){var t,r;if(this.activeServiceWorker=yield FG(),!this.activeServiceWorker)return;this.sender=new _C(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return b(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||VG()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return b(this,null,function*(){try{if(!indexedDB)return!1;let t=yield vC();return yield y1(t,Xv,"1"),yield w1(t,Xv),!0}catch{}return!1})}_withPendingWrite(t){return b(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return b(this,null,function*(){return this._withPendingWrite(()=>b(this,null,function*(){return yield this._withRetries(i=>y1(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return b(this,null,function*(){let r=yield this._withRetries(i=>$G(i,t));return this.localCache[t]=r,r})}_remove(t){return b(this,null,function*(){return this._withPendingWrite(()=>b(this,null,function*(){return yield this._withRetries(r=>w1(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return b(this,null,function*(){let t=yield this._withRetries(o=>{let a=cy(o,!1).getAll();return new Sc(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:a}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>b(this,null,function*(){return this._poll()}),HG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),Z1=qG;var qpe=$1("rcb"),Wpe=new Cc(3e4,6e4);function Q1(n,e){return e?Fo(e):(be(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Xf=class extends Qf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ul(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ul(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ul(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function WG(n){return xG(n.auth,new Xf(n),n.bypassAuthState)}function GG(n){let{auth:e,user:t}=n;return be(t,e,"internal-error"),AG(t,new Xf(n),n.bypassAuthState)}function KG(n){return b(this,null,function*(){let{auth:e,user:t}=n;return be(t,e,"internal-error"),DG(t,new Xf(n),n.bypassAuthState)})}var ny=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>b(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return b(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:a,type:c}=e;if(a){this.reject(a);return}let l={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(l))}catch(h){this.reject(h)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return WG;case"linkViaPopup":case"linkViaRedirect":return KG;case"reauthViaPopup":case"reauthViaRedirect":return GG;default:Qi(this.auth,"internal-error")}}resolve(e){Vo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var ZG=new Cc(2e3,1e4);function VC(n,e,t){return b(this,null,function*(){if(tr(n.app))return Promise.reject(li(n,"operation-not-supported-in-this-environment"));let r=oy(n);nG(n,e,Yf);let i=Q1(r,t);return new QG(r,"signInViaPopup",e,i).executeNotNull()})}var QG=(()=>{class n extends ny{constructor(t,r,i,o,a){super(t,r,o,a),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return b(this,null,function*(){let t=yield this.execute();return be(t,this.auth,"internal-error"),t})}onExecution(){return b(this,null,function*(){Vo(this.filter.length===1,"Popup operations only handle one event");let t=FC();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(li(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(li(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(li(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,ZG.get())};t()}}n.currentPopupAction=null;return n})(),YG="pendingRedirect",Hv=new Map,yC=class n extends ny{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return b(this,null,function*(){let e=Hv.get(this.auth._key());if(!e){try{let r=(yield JG(this.resolver,this.auth))?yield ms(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Hv.set(this.auth._key(),e)}return this.bypassAuthState||Hv.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return b(this,null,function*(){if(e.type==="signInViaRedirect")return ms(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,ms(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return b(this,null,function*(){})}cleanUp(){}};function JG(n,e){return b(this,null,function*(){let t=t8(e),r=e8(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function XG(n,e){Hv.set(n._key(),e)}function e8(n){return Fo(n._redirectPersistence)}function t8(n){return $v(YG,n.config.apiKey,n.name)}function n8(n,e,t=!1){return b(this,null,function*(){if(tr(n.app))return Promise.reject(Tc(n));let r=oy(n),i=Q1(r,e),a=yield new yC(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,yield r._persistUserIfCurrent(a.user),yield r._setRedirectUser(null,e)),a})}var r8=600*1e3,wC=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!i8(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Y1(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(li(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=r8&&this.cachedEventUids.clear(),this.cachedEventUids.has(E1(e))}saveEventToCache(e){this.cachedEventUids.add(E1(e)),this.lastProcessedEventTime=Date.now()}};function E1(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Y1({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function i8(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Y1(n);default:return!1}}function o8(t){return b(this,arguments,function*(n,e={}){return Bl(n,"GET","/v1/projects",e)})}var s8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,a8=/^https?/;function c8(n){return b(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield o8(n);for(let t of e)try{if(u8(t))return}catch{}Qi(n,"unauthorized-domain")})}function u8(n){let e=uC(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!a8.test(t))return!1;if(s8.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var l8=new Cc(3e4,6e4);function b1(){let n=Zi().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function d8(n){return new Promise((e,t)=>{var r,i,o;function a(){b1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{b1(),t(li(n,"network-request-failed"))},timeout:l8.get()})}if(!((i=(r=Zi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Zi().gapi)===null||o===void 0)&&o.load)a();else{let c=$1("iframefcb");return Zi()[c]=()=>{gapi.load?a():t(li(n,"network-request-failed"))},EG(`${bG()}?onload=${c}`).catch(l=>t(l))}}).catch(e=>{throw zv=null,e})}var zv=null;function h8(n){return zv=zv||d8(n),zv}var f8=new Cc(5e3,15e3),p8="__/auth/iframe",m8="emulator/auth/iframe",g8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function v8(n){let e=n.config;be(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?CC(e,m8):`https://${n.config.authDomain}/${p8}`,r={apiKey:e.apiKey,appName:n.name,v:ci},i=_8.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Ml(r).slice(1)}`}function y8(n){return b(this,null,function*(){let e=yield h8(n),t=Zi().gapi;return be(t,n,"internal-error"),e.open({where:document.body,url:v8(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:g8,dontclear:!0},r=>new Promise((i,o)=>b(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let a=li(n,"network-request-failed"),c=Zi().setTimeout(()=>{o(a)},f8.get());function l(){Zi().clearTimeout(c),i(r)}r.ping(l).then(l,()=>{o(a)})})))})}var w8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},E8=500,b8=600,I8="_blank",T8="http://localhost",ry=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function C8(n,e,t,r=E8,i=b8){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",l=Object.assign(Object.assign({},w8),{width:r.toString(),height:i.toString(),top:o,left:a}),h=hn().toLowerCase();t&&(c=O1(h)?I8:t),k1(h)&&(e=e||T8,l.scrollbars="yes");let p=Object.entries(l).reduce((E,[w,C])=>`${E}${w}=${C},`,"");if(gG(h)&&c!=="_self")return S8(e||"",c),new ry(null);let _=window.open(e||"",c,p);be(_,n,"popup-blocked");try{_.focus()}catch{}return new ry(_)}function S8(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var D8="__/auth/handler",A8="emulator/auth/handler",x8=encodeURIComponent("fac");function I1(n,e,t,r,i,o){return b(this,null,function*(){be(n.config.authDomain,n,"auth-domain-config-required"),be(n.config.apiKey,n,"invalid-api-key");let a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ci,eventId:i};if(e instanceof Yf){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",MO(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(let[p,_]of Object.entries(o||{}))a[p]=_}if(e instanceof Jv){let p=e.getScopes().filter(_=>_!=="");p.length>0&&(a.scopes=p.join(","))}n.tenantId&&(a.tid=n.tenantId);let c=a;for(let p of Object.keys(c))c[p]===void 0&&delete c[p];let l=yield n._getAppCheckToken(),h=l?`#${x8}=${encodeURIComponent(l)}`:"";return`${R8(n)}?${Ml(c).slice(1)}${h}`})}function R8({config:n}){return n.emulator?CC(n,A8):`https://${n.authDomain}/${D8}`}var cC="webStorageSupport",EC=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=LC,this._completeRedirectFn=n8,this._overrideRedirectResult=XG}_openPopup(e,t,r,i){return b(this,null,function*(){var o;Vo((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let a=yield I1(e,t,r,uC(),i);return C8(e,a,FC())})}_openRedirect(e,t,r,i){return b(this,null,function*(){yield this._originValidation(e);let o=yield I1(e,t,r,uC(),i);return LG(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Vo(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return b(this,null,function*(){let t=yield y8(e),r=new wC(e);return t.register("authEvent",i=>(be(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(cC,{type:cC},i=>{var o;let a=(o=i?.[0])===null||o===void 0?void 0:o[cC];a!==void 0&&t(!!a),Qi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=c8(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return U1()||N1()||xC()}},J1=EC;var T1="@firebase/auth",C1="1.10.8";var bC=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return b(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function P8(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function M8(n){er(new In("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;be(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});let l={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:B1(n)},h=new mC(r,i,o,l);return IG(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),er(new In("auth-internal",e=>{let t=oy(e.getProvider("auth").getImmediate());return(r=>new bC(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),lt(T1,C1,P8(n)),lt(T1,C1,"esm2017")}var k8=300,N8=LT("authIdTokenMaxAge")||k8,S1=null,O8=n=>e=>b(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>N8)return;let i=t?.token;S1!==i&&(S1=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function jC(n=ea()){let e=Xs(n,"auth");if(e.isInitialized())return e.getImmediate();let t=PC(n,{popupRedirectResolver:J1,persistence:[Z1,q1,LC]}),r=LT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let a=O8(o.toString());NC(t,a,()=>a(t.currentUser)),sy(t,c=>a(c))}}let i=NT("auth");return i&&MC(t,`http://${i}`),t}function L8(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}wG({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=li("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",L8().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});M8("Browser");function eL(n){return new De(function(e){var t=ay(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var tL="auth",jo=class{constructor(e){return e}},ep=class{constructor(){return Vl(tL)}};var UC=new ae("angularfire2.auth-instances");function C5(n,e){let t=Hf(tL,n,e);return t&&new jo(t)}function S5(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new jo(r)}}var D5={provide:ep,deps:[[new Yn,UC]]},A5={provide:jo,useFactory:C5,deps:[[new Yn,UC],Oo]};function nL(n,...e){return lt("angularfire",ta.full,"auth"),Xr([A5,D5,{provide:UC,useFactory:S5(n),multi:!0,deps:[Xe,Nt,na,Ic,[new Yn,jl],...e]}])}var uy=$t(eL,!0);var rL=$t(jC,!0);var iL=$t(iy,!0);var oL=$t(VC,!0,2);var sL=$t(OC,!0,2);var aL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cL={};var Uo,BC;(function(){var n;function e(M,S){function D(){}D.prototype=S.prototype,M.D=S.prototype,M.prototype=new D,M.prototype.constructor=M,M.C=function(P,N,F){for(var x=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)x[Dt-2]=arguments[Dt];return S.prototype[N].apply(P,x)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,S,D){D||(D=0);var P=Array(16);if(typeof S=="string")for(var N=0;16>N;++N)P[N]=S.charCodeAt(D++)|S.charCodeAt(D++)<<8|S.charCodeAt(D++)<<16|S.charCodeAt(D++)<<24;else for(N=0;16>N;++N)P[N]=S[D++]|S[D++]<<8|S[D++]<<16|S[D++]<<24;S=M.g[0],D=M.g[1],N=M.g[2];var F=M.g[3],x=S+(F^D&(N^F))+P[0]+3614090360&4294967295;S=D+(x<<7&4294967295|x>>>25),x=F+(N^S&(D^N))+P[1]+3905402710&4294967295,F=S+(x<<12&4294967295|x>>>20),x=N+(D^F&(S^D))+P[2]+606105819&4294967295,N=F+(x<<17&4294967295|x>>>15),x=D+(S^N&(F^S))+P[3]+3250441966&4294967295,D=N+(x<<22&4294967295|x>>>10),x=S+(F^D&(N^F))+P[4]+4118548399&4294967295,S=D+(x<<7&4294967295|x>>>25),x=F+(N^S&(D^N))+P[5]+1200080426&4294967295,F=S+(x<<12&4294967295|x>>>20),x=N+(D^F&(S^D))+P[6]+2821735955&4294967295,N=F+(x<<17&4294967295|x>>>15),x=D+(S^N&(F^S))+P[7]+4249261313&4294967295,D=N+(x<<22&4294967295|x>>>10),x=S+(F^D&(N^F))+P[8]+1770035416&4294967295,S=D+(x<<7&4294967295|x>>>25),x=F+(N^S&(D^N))+P[9]+2336552879&4294967295,F=S+(x<<12&4294967295|x>>>20),x=N+(D^F&(S^D))+P[10]+4294925233&4294967295,N=F+(x<<17&4294967295|x>>>15),x=D+(S^N&(F^S))+P[11]+2304563134&4294967295,D=N+(x<<22&4294967295|x>>>10),x=S+(F^D&(N^F))+P[12]+1804603682&4294967295,S=D+(x<<7&4294967295|x>>>25),x=F+(N^S&(D^N))+P[13]+4254626195&4294967295,F=S+(x<<12&4294967295|x>>>20),x=N+(D^F&(S^D))+P[14]+2792965006&4294967295,N=F+(x<<17&4294967295|x>>>15),x=D+(S^N&(F^S))+P[15]+1236535329&4294967295,D=N+(x<<22&4294967295|x>>>10),x=S+(N^F&(D^N))+P[1]+4129170786&4294967295,S=D+(x<<5&4294967295|x>>>27),x=F+(D^N&(S^D))+P[6]+3225465664&4294967295,F=S+(x<<9&4294967295|x>>>23),x=N+(S^D&(F^S))+P[11]+643717713&4294967295,N=F+(x<<14&4294967295|x>>>18),x=D+(F^S&(N^F))+P[0]+3921069994&4294967295,D=N+(x<<20&4294967295|x>>>12),x=S+(N^F&(D^N))+P[5]+3593408605&4294967295,S=D+(x<<5&4294967295|x>>>27),x=F+(D^N&(S^D))+P[10]+38016083&4294967295,F=S+(x<<9&4294967295|x>>>23),x=N+(S^D&(F^S))+P[15]+3634488961&4294967295,N=F+(x<<14&4294967295|x>>>18),x=D+(F^S&(N^F))+P[4]+3889429448&4294967295,D=N+(x<<20&4294967295|x>>>12),x=S+(N^F&(D^N))+P[9]+568446438&4294967295,S=D+(x<<5&4294967295|x>>>27),x=F+(D^N&(S^D))+P[14]+3275163606&4294967295,F=S+(x<<9&4294967295|x>>>23),x=N+(S^D&(F^S))+P[3]+4107603335&4294967295,N=F+(x<<14&4294967295|x>>>18),x=D+(F^S&(N^F))+P[8]+1163531501&4294967295,D=N+(x<<20&4294967295|x>>>12),x=S+(N^F&(D^N))+P[13]+2850285829&4294967295,S=D+(x<<5&4294967295|x>>>27),x=F+(D^N&(S^D))+P[2]+4243563512&4294967295,F=S+(x<<9&4294967295|x>>>23),x=N+(S^D&(F^S))+P[7]+1735328473&4294967295,N=F+(x<<14&4294967295|x>>>18),x=D+(F^S&(N^F))+P[12]+2368359562&4294967295,D=N+(x<<20&4294967295|x>>>12),x=S+(D^N^F)+P[5]+4294588738&4294967295,S=D+(x<<4&4294967295|x>>>28),x=F+(S^D^N)+P[8]+2272392833&4294967295,F=S+(x<<11&4294967295|x>>>21),x=N+(F^S^D)+P[11]+1839030562&4294967295,N=F+(x<<16&4294967295|x>>>16),x=D+(N^F^S)+P[14]+4259657740&4294967295,D=N+(x<<23&4294967295|x>>>9),x=S+(D^N^F)+P[1]+2763975236&4294967295,S=D+(x<<4&4294967295|x>>>28),x=F+(S^D^N)+P[4]+1272893353&4294967295,F=S+(x<<11&4294967295|x>>>21),x=N+(F^S^D)+P[7]+4139469664&4294967295,N=F+(x<<16&4294967295|x>>>16),x=D+(N^F^S)+P[10]+3200236656&4294967295,D=N+(x<<23&4294967295|x>>>9),x=S+(D^N^F)+P[13]+681279174&4294967295,S=D+(x<<4&4294967295|x>>>28),x=F+(S^D^N)+P[0]+3936430074&4294967295,F=S+(x<<11&4294967295|x>>>21),x=N+(F^S^D)+P[3]+3572445317&4294967295,N=F+(x<<16&4294967295|x>>>16),x=D+(N^F^S)+P[6]+76029189&4294967295,D=N+(x<<23&4294967295|x>>>9),x=S+(D^N^F)+P[9]+3654602809&4294967295,S=D+(x<<4&4294967295|x>>>28),x=F+(S^D^N)+P[12]+3873151461&4294967295,F=S+(x<<11&4294967295|x>>>21),x=N+(F^S^D)+P[15]+530742520&4294967295,N=F+(x<<16&4294967295|x>>>16),x=D+(N^F^S)+P[2]+3299628645&4294967295,D=N+(x<<23&4294967295|x>>>9),x=S+(N^(D|~F))+P[0]+4096336452&4294967295,S=D+(x<<6&4294967295|x>>>26),x=F+(D^(S|~N))+P[7]+1126891415&4294967295,F=S+(x<<10&4294967295|x>>>22),x=N+(S^(F|~D))+P[14]+2878612391&4294967295,N=F+(x<<15&4294967295|x>>>17),x=D+(F^(N|~S))+P[5]+4237533241&4294967295,D=N+(x<<21&4294967295|x>>>11),x=S+(N^(D|~F))+P[12]+1700485571&4294967295,S=D+(x<<6&4294967295|x>>>26),x=F+(D^(S|~N))+P[3]+2399980690&4294967295,F=S+(x<<10&4294967295|x>>>22),x=N+(S^(F|~D))+P[10]+4293915773&4294967295,N=F+(x<<15&4294967295|x>>>17),x=D+(F^(N|~S))+P[1]+2240044497&4294967295,D=N+(x<<21&4294967295|x>>>11),x=S+(N^(D|~F))+P[8]+1873313359&4294967295,S=D+(x<<6&4294967295|x>>>26),x=F+(D^(S|~N))+P[15]+4264355552&4294967295,F=S+(x<<10&4294967295|x>>>22),x=N+(S^(F|~D))+P[6]+2734768916&4294967295,N=F+(x<<15&4294967295|x>>>17),x=D+(F^(N|~S))+P[13]+1309151649&4294967295,D=N+(x<<21&4294967295|x>>>11),x=S+(N^(D|~F))+P[4]+4149444226&4294967295,S=D+(x<<6&4294967295|x>>>26),x=F+(D^(S|~N))+P[11]+3174756917&4294967295,F=S+(x<<10&4294967295|x>>>22),x=N+(S^(F|~D))+P[2]+718787259&4294967295,N=F+(x<<15&4294967295|x>>>17),x=D+(F^(N|~S))+P[9]+3951481745&4294967295,M.g[0]=M.g[0]+S&4294967295,M.g[1]=M.g[1]+(N+(x<<21&4294967295|x>>>11))&4294967295,M.g[2]=M.g[2]+N&4294967295,M.g[3]=M.g[3]+F&4294967295}r.prototype.u=function(M,S){S===void 0&&(S=M.length);for(var D=S-this.blockSize,P=this.B,N=this.h,F=0;F<S;){if(N==0)for(;F<=D;)i(this,M,F),F+=this.blockSize;if(typeof M=="string"){for(;F<S;)if(P[N++]=M.charCodeAt(F++),N==this.blockSize){i(this,P),N=0;break}}else for(;F<S;)if(P[N++]=M[F++],N==this.blockSize){i(this,P),N=0;break}}this.h=N,this.o+=S},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var S=1;S<M.length-8;++S)M[S]=0;var D=8*this.o;for(S=M.length-8;S<M.length;++S)M[S]=D&255,D/=256;for(this.u(M),M=Array(16),S=D=0;4>S;++S)for(var P=0;32>P;P+=8)M[D++]=this.g[S]>>>P&255;return M};function o(M,S){var D=c;return Object.prototype.hasOwnProperty.call(D,M)?D[M]:D[M]=S(M)}function a(M,S){this.h=S;for(var D=[],P=!0,N=M.length-1;0<=N;N--){var F=M[N]|0;P&&F==S||(D[N]=F,P=!1)}this.g=D}var c={};function l(M){return-128<=M&&128>M?o(M,function(S){return new a([S|0],0>S?-1:0)}):new a([M|0],0>M?-1:0)}function h(M){if(isNaN(M)||!isFinite(M))return _;if(0>M)return R(h(-M));for(var S=[],D=1,P=0;M>=D;P++)S[P]=M/D|0,D*=4294967296;return new a(S,0)}function p(M,S){if(M.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(M.charAt(0)=="-")return R(p(M.substring(1),S));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=h(Math.pow(S,8)),P=_,N=0;N<M.length;N+=8){var F=Math.min(8,M.length-N),x=parseInt(M.substring(N,N+F),S);8>F?(F=h(Math.pow(S,F)),P=P.j(F).add(h(x))):(P=P.j(D),P=P.add(h(x)))}return P}var _=l(0),E=l(1),w=l(16777216);n=a.prototype,n.m=function(){if(k(this))return-R(this).m();for(var M=0,S=1,D=0;D<this.g.length;D++){var P=this.i(D);M+=(0<=P?P:4294967296+P)*S,S*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(C(this))return"0";if(k(this))return"-"+R(this).toString(M);for(var S=h(Math.pow(M,6)),D=this,P="";;){var N=Z(D,S).g;D=j(D,N.j(S));var F=((0<D.g.length?D.g[0]:D.h)>>>0).toString(M);if(D=N,C(D))return F+P;for(;6>F.length;)F="0"+F;P=F+P}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function C(M){if(M.h!=0)return!1;for(var S=0;S<M.g.length;S++)if(M.g[S]!=0)return!1;return!0}function k(M){return M.h==-1}n.l=function(M){return M=j(this,M),k(M)?-1:C(M)?0:1};function R(M){for(var S=M.g.length,D=[],P=0;P<S;P++)D[P]=~M.g[P];return new a(D,~M.h).add(E)}n.abs=function(){return k(this)?R(this):this},n.add=function(M){for(var S=Math.max(this.g.length,M.g.length),D=[],P=0,N=0;N<=S;N++){var F=P+(this.i(N)&65535)+(M.i(N)&65535),x=(F>>>16)+(this.i(N)>>>16)+(M.i(N)>>>16);P=x>>>16,F&=65535,x&=65535,D[N]=x<<16|F}return new a(D,D[D.length-1]&-2147483648?-1:0)};function j(M,S){return M.add(R(S))}n.j=function(M){if(C(this)||C(M))return _;if(k(this))return k(M)?R(this).j(R(M)):R(R(this).j(M));if(k(M))return R(this.j(R(M)));if(0>this.l(w)&&0>M.l(w))return h(this.m()*M.m());for(var S=this.g.length+M.g.length,D=[],P=0;P<2*S;P++)D[P]=0;for(P=0;P<this.g.length;P++)for(var N=0;N<M.g.length;N++){var F=this.i(P)>>>16,x=this.i(P)&65535,Dt=M.i(N)>>>16,qr=M.i(N)&65535;D[2*P+2*N]+=x*qr,K(D,2*P+2*N),D[2*P+2*N+1]+=F*qr,K(D,2*P+2*N+1),D[2*P+2*N+1]+=x*Dt,K(D,2*P+2*N+1),D[2*P+2*N+2]+=F*Dt,K(D,2*P+2*N+2)}for(P=0;P<S;P++)D[P]=D[2*P+1]<<16|D[2*P];for(P=S;P<2*S;P++)D[P]=0;return new a(D,0)};function K(M,S){for(;(M[S]&65535)!=M[S];)M[S+1]+=M[S]>>>16,M[S]&=65535,S++}function q(M,S){this.g=M,this.h=S}function Z(M,S){if(C(S))throw Error("division by zero");if(C(M))return new q(_,_);if(k(M))return S=Z(R(M),S),new q(R(S.g),R(S.h));if(k(S))return S=Z(M,R(S)),new q(R(S.g),S.h);if(30<M.g.length){if(k(M)||k(S))throw Error("slowDivide_ only works with positive integers.");for(var D=E,P=S;0>=P.l(M);)D=pe(D),P=pe(P);var N=Pe(D,1),F=Pe(P,1);for(P=Pe(P,2),D=Pe(D,2);!C(P);){var x=F.add(P);0>=x.l(M)&&(N=N.add(D),F=x),P=Pe(P,1),D=Pe(D,1)}return S=j(M,N.j(S)),new q(N,S)}for(N=_;0<=M.l(S);){for(D=Math.max(1,Math.floor(M.m()/S.m())),P=Math.ceil(Math.log(D)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),F=h(D),x=F.j(S);k(x)||0<x.l(M);)D-=P,F=h(D),x=F.j(S);C(F)&&(F=E),N=N.add(F),M=j(M,x)}return new q(N,M)}n.A=function(M){return Z(this,M).h},n.and=function(M){for(var S=Math.max(this.g.length,M.g.length),D=[],P=0;P<S;P++)D[P]=this.i(P)&M.i(P);return new a(D,this.h&M.h)},n.or=function(M){for(var S=Math.max(this.g.length,M.g.length),D=[],P=0;P<S;P++)D[P]=this.i(P)|M.i(P);return new a(D,this.h|M.h)},n.xor=function(M){for(var S=Math.max(this.g.length,M.g.length),D=[],P=0;P<S;P++)D[P]=this.i(P)^M.i(P);return new a(D,this.h^M.h)};function pe(M){for(var S=M.g.length+1,D=[],P=0;P<S;P++)D[P]=M.i(P)<<1|M.i(P-1)>>>31;return new a(D,M.h)}function Pe(M,S){var D=S>>5;S%=32;for(var P=M.g.length-D,N=[],F=0;F<P;F++)N[F]=0<S?M.i(F+D)>>>S|M.i(F+D+1)<<32-S:M.i(F+D);return new a(N,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,BC=cL.Md5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=p,Uo=cL.Integer=a}).apply(typeof aL<"u"?aL:typeof self<"u"?self:typeof window<"u"?window:{});var ly=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Bo={};var $C,x5,$l,HC,tp,dy,zC,qC,WC;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,y){return d==Array.prototype||d==Object.prototype||(d[g]=y.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof ly=="object"&&ly];for(var g=0;g<d.length;++g){var y=d[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=t(this);function i(d,g){if(g)e:{var y=r;d=d.split(".");for(var T=0;T<d.length-1;T++){var O=d[T];if(!(O in y))break e;y=y[O]}d=d[d.length-1],T=y[d],g=g(T),g!=T&&g!=null&&e(y,d,{configurable:!0,writable:!0,value:g})}}function o(d,g){d instanceof String&&(d+="");var y=0,T=!1,O={next:function(){if(!T&&y<d.length){var B=y++;return{value:g(B,d[B]),done:!1}}return T=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}i("Array.prototype.values",function(d){return d||function(){return o(this,function(g,y){return y})}});var a=a||{},c=this||self;function l(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function h(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function p(d,g,y){return d.call.apply(d.bind,arguments)}function _(d,g,y){if(!d)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,T),d.apply(g,O)}}return function(){return d.apply(g,arguments)}}function E(d,g,y){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:_,E.apply(null,arguments)}function w(d,g){var y=Array.prototype.slice.call(arguments,1);return function(){var T=y.slice();return T.push.apply(T,arguments),d.apply(this,T)}}function C(d,g){function y(){}y.prototype=g.prototype,d.aa=g.prototype,d.prototype=new y,d.prototype.constructor=d,d.Qb=function(T,O,B){for(var X=Array(arguments.length-2),je=2;je<arguments.length;je++)X[je-2]=arguments[je];return g.prototype[O].apply(T,X)}}function k(d){let g=d.length;if(0<g){let y=Array(g);for(let T=0;T<g;T++)y[T]=d[T];return y}return[]}function R(d,g){for(let y=1;y<arguments.length;y++){let T=arguments[y];if(l(T)){let O=d.length||0,B=T.length||0;d.length=O+B;for(let X=0;X<B;X++)d[O+X]=T[X]}else d.push(T)}}class j{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function K(d){return/^[\s\xa0]*$/.test(d)}function q(){var d=c.navigator;return d&&(d=d.userAgent)?d:""}function Z(d){return Z[" "](d),d}Z[" "]=function(){};var pe=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function Pe(d,g,y){for(let T in d)g.call(y,d[T],T,d)}function M(d,g){for(let y in d)g.call(void 0,d[y],y,d)}function S(d){let g={};for(let y in d)g[y]=d[y];return g}let D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(d,g){let y,T;for(let O=1;O<arguments.length;O++){T=arguments[O];for(y in T)d[y]=T[y];for(let B=0;B<D.length;B++)y=D[B],Object.prototype.hasOwnProperty.call(T,y)&&(d[y]=T[y])}}function N(d){var g=1;d=d.split(":");let y=[];for(;0<g&&d.length;)y.push(d.shift()),g--;return d.length&&y.push(d.join(":")),y}function F(d){c.setTimeout(()=>{throw d},0)}function x(){var d=ht;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class Dt{constructor(){this.h=this.g=null}add(g,y){let T=qr.get();T.set(g,y),this.h?this.h.next=T:this.g=T,this.h=T}}var qr=new j(()=>new Se,d=>d.reset());class Se{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let es,ge=!1,ht=new Dt,gn=()=>{let d=c.Promise.resolve(void 0);es=()=>{d.then(Sn)}};var Sn=()=>{for(var d;d=x();){try{d.h.call(d.g)}catch(y){F(y)}var g=qr;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}ge=!1};function at(){this.s=this.s,this.C=this.C}at.prototype.s=!1,at.prototype.ma=function(){this.s||(this.s=!0,this.N())},at.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ie(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}Ie.prototype.h=function(){this.defaultPrevented=!0};var We=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{let y=()=>{};c.addEventListener("test",y,g),c.removeEventListener("test",y,g)}catch{}return d})();function Fn(d,g){if(Ie.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var y=this.type=d.type,T=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(pe){e:{try{Z(g.nodeName);var O=!0;break e}catch{}O=!1}O||(g=null)}}else y=="mouseover"?g=d.fromElement:y=="mouseout"&&(g=d.toElement);this.relatedTarget=g,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:pi[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Fn.aa.h.call(this)}}C(Fn,Ie);var pi={2:"touch",3:"pen",4:"mouse"};Fn.prototype.h=function(){Fn.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ts="closure_listenable_"+(1e6*Math.random()|0),Ld=0;function Fd(d,g,y,T,O){this.listener=d,this.proxy=null,this.src=g,this.type=y,this.capture=!!T,this.ha=O,this.key=++Ld,this.da=this.fa=!1}function mi(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function ns(d){this.src=d,this.g={},this.h=0}ns.prototype.add=function(d,g,y,T,O){var B=d.toString();d=this.g[B],d||(d=this.g[B]=[],this.h++);var X=tu(d,g,T,O);return-1<X?(g=d[X],y||(g.fa=!1)):(g=new Fd(g,this.src,B,!!T,O),g.fa=y,d.push(g)),g};function Vd(d,g){var y=g.type;if(y in d.g){var T=d.g[y],O=Array.prototype.indexOf.call(T,g,void 0),B;(B=0<=O)&&Array.prototype.splice.call(T,O,1),B&&(mi(g),d.g[y].length==0&&(delete d.g[y],d.h--))}}function tu(d,g,y,T){for(var O=0;O<d.length;++O){var B=d[O];if(!B.da&&B.listener==g&&B.capture==!!y&&B.ha==T)return O}return-1}var nu="closure_lm_"+(1e6*Math.random()|0),Ea={};function ba(d,g,y,T,O){if(T&&T.once)return ru(d,g,y,T,O);if(Array.isArray(g)){for(var B=0;B<g.length;B++)ba(d,g[B],y,T,O);return null}return y=su(y),d&&d[ts]?d.K(g,y,h(T)?!!T.capture:!!T,O):Jp(d,g,y,!1,T,O)}function Jp(d,g,y,T,O,B){if(!g)throw Error("Invalid event type");var X=h(O)?!!O.capture:!!O,je=Ia(d);if(je||(d[nu]=je=new ns(d)),y=je.add(g,y,T,X,B),y.proxy)return y;if(T=Xp(),y.proxy=T,T.src=d,T.listener=y,d.addEventListener)We||(O=X),O===void 0&&(O=!1),d.addEventListener(g.toString(),T,O);else if(d.attachEvent)d.attachEvent(em(g.toString()),T);else if(d.addListener&&d.removeListener)d.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Xp(){function d(y){return g.call(d.src,d.listener,y)}let g=vE;return d}function ru(d,g,y,T,O){if(Array.isArray(g)){for(var B=0;B<g.length;B++)ru(d,g[B],y,T,O);return null}return y=su(y),d&&d[ts]?d.L(g,y,h(T)?!!T.capture:!!T,O):Jp(d,g,y,!0,T,O)}function jd(d,g,y,T,O){if(Array.isArray(g))for(var B=0;B<g.length;B++)jd(d,g[B],y,T,O);else T=h(T)?!!T.capture:!!T,y=su(y),d&&d[ts]?(d=d.i,g=String(g).toString(),g in d.g&&(B=d.g[g],y=tu(B,y,T,O),-1<y&&(mi(B[y]),Array.prototype.splice.call(B,y,1),B.length==0&&(delete d.g[g],d.h--)))):d&&(d=Ia(d))&&(g=d.g[g.toString()],d=-1,g&&(d=tu(g,y,T,O)),(y=-1<d?g[d]:null)&&iu(y))}function iu(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[ts])Vd(g.i,d);else{var y=d.type,T=d.proxy;g.removeEventListener?g.removeEventListener(y,T,d.capture):g.detachEvent?g.detachEvent(em(y),T):g.addListener&&g.removeListener&&g.removeListener(T),(y=Ia(g))?(Vd(y,d),y.h==0&&(y.src=null,g[nu]=null)):mi(d)}}}function em(d){return d in Ea?Ea[d]:Ea[d]="on"+d}function vE(d,g){if(d.da)d=!0;else{g=new Fn(g,this);var y=d.listener,T=d.ha||d.src;d.fa&&iu(d),d=y.call(T,g)}return d}function Ia(d){return d=d[nu],d instanceof ns?d:null}var ou="__closure_events_fn_"+(1e9*Math.random()>>>0);function su(d){return typeof d=="function"?d:(d[ou]||(d[ou]=function(g){return d.handleEvent(g)}),d[ou])}function an(){at.call(this),this.i=new ns(this),this.M=this,this.F=null}C(an,at),an.prototype[ts]=!0,an.prototype.removeEventListener=function(d,g,y,T){jd(this,d,g,y,T)};function cn(d,g){var y,T=d.F;if(T)for(y=[];T;T=T.F)y.push(T);if(d=d.M,T=g.type||g,typeof g=="string")g=new Ie(g,d);else if(g instanceof Ie)g.target=g.target||d;else{var O=g;g=new Ie(T,d),P(g,O)}if(O=!0,y)for(var B=y.length-1;0<=B;B--){var X=g.g=y[B];O=Ta(X,T,!0,g)&&O}if(X=g.g=d,O=Ta(X,T,!0,g)&&O,O=Ta(X,T,!1,g)&&O,y)for(B=0;B<y.length;B++)X=g.g=y[B],O=Ta(X,T,!1,g)&&O}an.prototype.N=function(){if(an.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var y=d.g[g],T=0;T<y.length;T++)mi(y[T]);delete d.g[g],d.h--}}this.F=null},an.prototype.K=function(d,g,y,T){return this.i.add(String(d),g,!1,y,T)},an.prototype.L=function(d,g,y,T){return this.i.add(String(d),g,!0,y,T)};function Ta(d,g,y,T){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var O=!0,B=0;B<g.length;++B){var X=g[B];if(X&&!X.da&&X.capture==y){var je=X.listener,bt=X.ha||X.src;X.fa&&Vd(d.i,X),O=je.call(bt,T)!==!1&&O}}return O&&!T.defaultPrevented}function tm(d,g,y){if(typeof d=="function")y&&(d=E(d,y));else if(d&&typeof d.handleEvent=="function")d=E(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:c.setTimeout(d,g||0)}function Ud(d){d.g=tm(()=>{d.g=null,d.i&&(d.i=!1,Ud(d))},d.l);let g=d.h;d.h=null,d.m.apply(null,g)}class Bd extends at{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Ud(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rs(d){at.call(this),this.h=d,this.g={}}C(rs,at);var nm=[];function is(d){Pe(d.g,function(g,y){this.g.hasOwnProperty(y)&&iu(g)},d),d.g={}}rs.prototype.N=function(){rs.aa.N.call(this),is(this)},rs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $d=c.JSON.stringify,yE=c.JSON.parse,rm=class{stringify(d){return c.JSON.stringify(d,void 0)}parse(d){return c.JSON.parse(d,void 0)}};function au(){}au.prototype.h=null;function Hd(d){return d.h||(d.h=d.i())}function im(){}var Ca={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function zd(){Ie.call(this,"d")}C(zd,Ie);function qd(){Ie.call(this,"c")}C(qd,Ie);var co={},om=null;function os(){return om=om||new an}co.La="serverreachability";function sm(d){Ie.call(this,co.La,d)}C(sm,Ie);function Sa(d){let g=os();cn(g,new sm(g))}co.STAT_EVENT="statevent";function am(d,g){Ie.call(this,co.STAT_EVENT,d),this.stat=g}C(am,Ie);function _n(d){let g=os();cn(g,new am(g,d))}co.Ma="timingevent";function rr(d,g){Ie.call(this,co.Ma,d),this.size=g}C(rr,Ie);function ue(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){d()},g)}function ss(){this.g=!0}ss.prototype.xa=function(){this.g=!1};function cm(d,g,y,T,O,B){d.info(function(){if(d.g)if(B)for(var X="",je=B.split("&"),bt=0;bt<je.length;bt++){var Ye=je[bt].split("=");if(1<Ye.length){var mt=Ye[0];Ye=Ye[1];var un=mt.split("_");X=2<=un.length&&un[1]=="type"?X+(mt+"="+Ye+"&"):X+(mt+"=redacted&")}}else X=null;else X=B;return"XMLHTTP REQ ("+T+") [attempt "+O+"]: "+g+`
`+y+`
`+X})}function um(d,g,y,T,O,B,X){d.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+O+"]: "+g+`
`+y+`
`+B+" "+X})}function uo(d,g,y,T){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+lm(d,y)+(T?" "+T:"")})}function Wd(d,g){d.info(function(){return"TIMEOUT: "+g})}ss.prototype.info=function(){};function lm(d,g){if(!d.g)return g;if(!g)return null;try{var y=JSON.parse(g);if(y){for(d=0;d<y.length;d++)if(Array.isArray(y[d])){var T=y[d];if(!(2>T.length)){var O=T[1];if(Array.isArray(O)&&!(1>O.length)){var B=O[0];if(B!="noop"&&B!="stop"&&B!="close")for(var X=1;X<O.length;X++)O[X]=""}}}}return $d(y)}catch{return g}}var Wr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gd={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Kd;function cu(){}C(cu,au),cu.prototype.g=function(){return new XMLHttpRequest},cu.prototype.i=function(){return{}},Kd=new cu;function gi(d,g,y,T){this.j=d,this.i=g,this.l=y,this.R=T||1,this.U=new rs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new dm}function dm(){this.i=null,this.g="",this.h=!1}var Zd={},Qd={};function as(d,g,y){d.L=1,d.v=us(vn(g)),d.m=y,d.P=!0,hm(d,null)}function hm(d,g){d.F=Date.now(),uu(d),d.A=vn(d.v);var y=d.A,T=d.R;Array.isArray(T)||(T=[String(T)]),ct(y.i,"t",T),d.C=0,y=d.j.J,d.h=new dm,d.g=Va(d.j,y?g:null,!d.m),0<d.O&&(d.M=new Bd(E(d.Y,d,d.g),d.O)),g=d.U,y=d.g,T=d.ca;var O="readystatechange";Array.isArray(O)||(O&&(nm[0]=O.toString()),O=nm);for(var B=0;B<O.length;B++){var X=ba(y,O[B],T||g.handleEvent,!1,g.h||g);if(!X)break;g.g[X.key]=X}g=d.H?S(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),Sa(),cm(d.i,d.u,d.A,d.l,d.R,d.m)}gi.prototype.ca=function(d){d=d.target;let g=this.M;g&&or(d)==3?g.j():this.Y(d)},gi.prototype.Y=function(d){try{if(d==this.g)e:{let un=or(this.g);var g=this.g.Ba();let ar=this.g.Z();if(!(3>un)&&(un!=3||this.g&&(this.h.h||this.g.oa()||ym(this.g)))){this.J||un!=4||g==7||(g==8||0>=ar?Sa(3):Sa(2)),Da(this);var y=this.g.Z();this.X=y;t:if(fm(this)){var T=ym(this.g);d="";var O=T.length,B=or(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_i(this),Gr(this);var X="";break t}this.h.i=new c.TextDecoder}for(g=0;g<O;g++)this.h.h=!0,d+=this.h.i.decode(T[g],{stream:!(B&&g==O-1)});T.length=0,this.h.g+=d,this.C=0,X=this.h.g}else X=this.g.oa();if(this.o=y==200,um(this.i,this.u,this.A,this.l,this.R,un,y),this.o){if(this.T&&!this.K){t:{if(this.g){var je,bt=this.g;if((je=bt.g?bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(je)){var Ye=je;break t}}Ye=null}if(y=Ye)uo(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,lu(this,y);else{this.o=!1,this.s=3,_n(12),_i(this),Gr(this);break e}}if(this.P){y=!0;let cr;for(;!this.J&&this.C<X.length;)if(cr=wE(this,X),cr==Qd){un==4&&(this.s=4,_n(14),y=!1),uo(this.i,this.l,null,"[Incomplete Response]");break}else if(cr==Zd){this.s=4,_n(15),uo(this.i,this.l,X,"[Invalid Chunk]"),y=!1;break}else uo(this.i,this.l,cr,null),lu(this,cr);if(fm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),un!=4||X.length!=0||this.h.h||(this.s=1,_n(16),y=!1),this.o=this.o&&y,!y)uo(this.i,this.l,X,"[Invalid Chunked Response]"),_i(this),Gr(this);else if(0<X.length&&!this.W){this.W=!0;var mt=this.j;mt.g==this&&mt.ba&&!mt.M&&(mt.j.info("Great, no buffering proxy detected. Bytes received: "+X.length),gu(mt),mt.M=!0,_n(11))}}else uo(this.i,this.l,X,null),lu(this,X);un==4&&_i(this),this.o&&!this.J&&(un==4?Im(this.j,this):(this.o=!1,uu(this)))}else wm(this.g),y==400&&0<X.indexOf("Unknown SID")?(this.s=3,_n(12)):(this.s=0,_n(13)),_i(this),Gr(this)}}}catch{}finally{}};function fm(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function wE(d,g){var y=d.C,T=g.indexOf(`
`,y);return T==-1?Qd:(y=Number(g.substring(y,T)),isNaN(y)?Zd:(T+=1,T+y>g.length?Qd:(g=g.slice(T,T+y),d.C=T+y,g)))}gi.prototype.cancel=function(){this.J=!0,_i(this)};function uu(d){d.S=Date.now()+d.I,pm(d,d.I)}function pm(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=ue(E(d.ba,d),g)}function Da(d){d.B&&(c.clearTimeout(d.B),d.B=null)}gi.prototype.ba=function(){this.B=null;let d=Date.now();0<=d-this.S?(Wd(this.i,this.A),this.L!=2&&(Sa(),_n(17)),_i(this),this.s=2,Gr(this)):pm(this,this.S-d)};function Gr(d){d.j.G==0||d.J||Im(d.j,d)}function _i(d){Da(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,is(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function lu(d,g){try{var y=d.j;if(y.G!=0&&(y.g==d||vi(y.h,d))){if(!d.K&&vi(y.h,d)&&y.G==3){try{var T=y.Da.g.parse(g)}catch{T=null}if(Array.isArray(T)&&T.length==3){var O=T;if(O[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<d.F)_u(y),fu(y);else break e;ch(y),_n(18)}}else y.za=O[1],0<y.za-y.T&&37500>O[2]&&y.F&&y.v==0&&!y.C&&(y.C=ue(E(y.Za,y),6e3));if(1>=xa(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else po(y,11)}else if((d.K||y.g==d)&&_u(y),!K(g))for(O=y.Da.g.parse(g),g=0;g<O.length;g++){let Ye=O[g];if(y.T=Ye[0],Ye=Ye[1],y.G==2)if(Ye[0]=="c"){y.K=Ye[1],y.ia=Ye[2];let mt=Ye[3];mt!=null&&(y.la=mt,y.j.info("VER="+y.la));let un=Ye[4];un!=null&&(y.Aa=un,y.j.info("SVER="+y.Aa));let ar=Ye[5];ar!=null&&typeof ar=="number"&&0<ar&&(T=1.5*ar,y.L=T,y.j.info("backChannelRequestTimeoutMs_="+T)),T=y;let cr=d.g;if(cr){let bi=cr.g?cr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bi){var B=T.h;B.g||bi.indexOf("spdy")==-1&&bi.indexOf("quic")==-1&&bi.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(yi(B,B.h),B.h=null))}if(T.D){let wu=cr.g?cr.g.getResponseHeader("X-HTTP-Session-Id"):null;wu&&(T.ya=wu,tt(T.I,T.D,wu))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-d.F,y.j.info("Handshake RTT: "+y.R+"ms")),T=y;var X=d;if(T.qa=dh(T,T.J?T.ia:null,T.W),X.K){du(T.h,X);var je=X,bt=T.L;bt&&(je.I=bt),je.B&&(Da(je),uu(je)),T.g=X}else mu(T);0<y.i.length&&pu(y)}else Ye[0]!="stop"&&Ye[0]!="close"||po(y,7);else y.G==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?po(y,7):Fa(y):Ye[0]!="noop"&&y.l&&y.l.ta(Ye),y.v=0)}}Sa(4)}catch{}}var Aa=class{constructor(d,g){this.g=d,this.map=g}};function Qe(d){this.l=d||10,c.PerformanceNavigationTiming?(d=c.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pt(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function xa(d){return d.h?1:d.g?d.g.size:0}function vi(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function yi(d,g){d.g?d.g.add(g):d.h=g}function du(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}Qe.prototype.cancel=function(){if(this.i=Me(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let d of this.g.values())d.cancel();this.g.clear()}};function Me(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(let y of d.g.values())g=g.concat(y.D);return g}return k(d.i)}function At(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var g=[],y=d.length,T=0;T<y;T++)g.push(d[T]);return g}g=[],y=0;for(T in d)g[y++]=d[T];return g}function Yd(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var g=[];d=d.length;for(var y=0;y<d;y++)g.push(y);return g}g=[],y=0;for(let T in d)g[y++]=T;return g}}}function Ra(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var y=Yd(d),T=At(d),O=T.length,B=0;B<O;B++)g.call(void 0,T[B],y&&y[B],d)}var Vn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function EE(d,g){if(d){d=d.split("&");for(var y=0;y<d.length;y++){var T=d[y].indexOf("="),O=null;if(0<=T){var B=d[y].substring(0,T);O=d[y].substring(T+1)}else B=d[y];g(B,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function br(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof br){this.h=d.h,gt(this,d.j),this.o=d.o,this.g=d.g,Ir(this,d.s),this.l=d.l;var g=d.i,y=new ho;y.i=g.i,g.g&&(y.g=new Map(g.g),y.h=g.h),cs(this,y),this.m=d.m}else d&&(g=String(d).match(Vn))?(this.h=!1,gt(this,g[1]||"",!0),this.o=Kr(g[2]||""),this.g=Kr(g[3]||"",!0),Ir(this,g[4]),this.l=Kr(g[5]||"",!0),cs(this,g[6]||"",!0),this.m=Kr(g[7]||"")):(this.h=!1,this.i=new ho(null,this.h))}br.prototype.toString=function(){var d=[],g=this.j;g&&d.push(lo(g,Pa,!0),":");var y=this.g;return(y||g=="file")&&(d.push("//"),(g=this.o)&&d.push(lo(g,Pa,!0),"@"),d.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&d.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&d.push("/"),d.push(lo(y,y.charAt(0)=="/"?eh:Xd,!0))),(y=this.i.toString())&&d.push("?",y),(y=this.m)&&d.push("#",lo(y,mm)),d.join("")};function vn(d){return new br(d)}function gt(d,g,y){d.j=y?Kr(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function Ir(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function cs(d,g,y){g instanceof ho?(d.i=g,th(d.i,d.h)):(y||(g=lo(g,hu)),d.i=new ho(g,d.h))}function tt(d,g,y){d.i.set(g,y)}function us(d){return tt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Kr(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function lo(d,g,y){return typeof d=="string"?(d=encodeURI(d).replace(g,Jd),y&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Jd(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Pa=/[#\/\?@]/g,Xd=/[#\?:]/g,eh=/[#\?]/g,hu=/[#\?@]/g,mm=/#/g;function ho(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function wi(d){d.g||(d.g=new Map,d.h=0,d.i&&EE(d.i,function(g,y){d.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}n=ho.prototype,n.add=function(d,g){wi(this),this.i=null,d=fo(this,d);var y=this.g.get(d);return y||this.g.set(d,y=[]),y.push(g),this.h+=1,this};function Te(d,g){wi(d),g=fo(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function ir(d,g){return wi(d),g=fo(d,g),d.g.has(g)}n.forEach=function(d,g){wi(this),this.g.forEach(function(y,T){y.forEach(function(O){d.call(g,O,T,this)},this)},this)},n.na=function(){wi(this);let d=Array.from(this.g.values()),g=Array.from(this.g.keys()),y=[];for(let T=0;T<g.length;T++){let O=d[T];for(let B=0;B<O.length;B++)y.push(g[T])}return y},n.V=function(d){wi(this);let g=[];if(typeof d=="string")ir(this,d)&&(g=g.concat(this.g.get(fo(this,d))));else{d=Array.from(this.g.values());for(let y=0;y<d.length;y++)g=g.concat(d[y])}return g},n.set=function(d,g){return wi(this),this.i=null,d=fo(this,d),ir(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},n.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function ct(d,g,y){Te(d,g),0<y.length&&(d.i=null,d.g.set(fo(d,g),k(y)),d.h+=y.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let d=[],g=Array.from(this.g.keys());for(var y=0;y<g.length;y++){var T=g[y];let B=encodeURIComponent(String(T)),X=this.V(T);for(T=0;T<X.length;T++){var O=B;X[T]!==""&&(O+="="+encodeURIComponent(String(X[T]))),d.push(O)}}return this.i=d.join("&")};function fo(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function th(d,g){g&&!d.j&&(wi(d),d.i=null,d.g.forEach(function(y,T){var O=T.toLowerCase();T!=O&&(Te(this,T),ct(this,O,y))},d)),d.j=g}function nh(d,g){let y=new ss;if(c.Image){let T=new Image;T.onload=w(Dn,y,"TestLoadImage: loaded",!0,g,T),T.onerror=w(Dn,y,"TestLoadImage: error",!1,g,T),T.onabort=w(Dn,y,"TestLoadImage: abort",!1,g,T),T.ontimeout=w(Dn,y,"TestLoadImage: timeout",!1,g,T),c.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=d}else g(!1)}function rh(d,g){let y=new ss,T=new AbortController,O=setTimeout(()=>{T.abort(),Dn(y,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:T.signal}).then(B=>{clearTimeout(O),B.ok?Dn(y,"TestPingServer: ok",!0,g):Dn(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(O),Dn(y,"TestPingServer: error",!1,g)})}function Dn(d,g,y,T,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),T(y)}catch{}}function ih(){this.g=new rm}function Ma(d,g,y){let T=y||"";try{Ra(d,function(O,B){let X=O;h(O)&&(X=$d(O)),g.push(T+B+"="+encodeURIComponent(X))})}catch(O){throw g.push(T+"type="+encodeURIComponent("_badmap")),O}}function xt(d){this.l=d.Ub||null,this.j=d.eb||!1}C(xt,au),xt.prototype.g=function(){return new Tr(this.l,this.j)},xt.prototype.i=(function(d){return function(){return d}})({});function Tr(d,g){an.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Tr,an),n=Tr.prototype,n.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,ka(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||c).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ls(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,ka(this)),this.g&&(this.readyState=3,ka(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;oh(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function oh(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?ls(this):ka(this),this.readyState==3&&oh(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,ls(this))},n.Qa=function(d){this.g&&(this.response=d,ls(this))},n.ga=function(){this.g&&ls(this)};function ls(d){d.readyState=4,d.l=null,d.j=null,d.v=null,ka(d)}n.setRequestHeader=function(d,g){this.u.append(d,g)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let d=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,d.push(y[0]+": "+y[1]),y=g.next();return d.join(`\r
`)};function ka(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Tr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function sh(d){let g="";return Pe(d,function(y,T){g+=T,g+=":",g+=y,g+=`\r
`}),g}function Na(d,g,y){e:{for(T in y){var T=!1;break e}T=!0}T||(y=sh(y),typeof d=="string"?y!=null&&encodeURIComponent(String(y)):tt(d,g,y))}function Et(d){an.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Et,an);var gm=/^https?$/i,Ge=["POST","PUT"];n=Et.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,g,y,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Kd.g(),this.v=this.o?Hd(this.o):Hd(Kd),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(B){_m(this,B);return}if(d=y||"",y=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var O in T)y.set(O,T[O]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(let B of T.keys())y.set(B,T.get(B));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(y.keys()).find(B=>B.toLowerCase()=="content-type"),O=c.FormData&&d instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Ge,g,void 0))||T||O||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[B,X]of y)this.g.setRequestHeader(B,X);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{vm(this),this.u=!0,this.g.send(d),this.u=!1}catch(B){_m(this,B)}};function _m(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,Gn(d),Oa(d)}function Gn(d){d.A||(d.A=!0,cn(d,"complete"),cn(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,cn(this,"complete"),cn(this,"abort"),Oa(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oa(this,!0)),Et.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ds(this):this.bb())},n.bb=function(){ds(this)};function ds(d){if(d.h&&typeof a<"u"&&(!d.v[1]||or(d)!=4||d.Z()!=2)){if(d.u&&or(d)==4)tm(d.Ea,0,d);else if(cn(d,"readystatechange"),or(d)==4){d.h=!1;try{let X=d.Z();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var T;if(T=X===0){var O=String(d.D).match(Vn)[1]||null;!O&&c.self&&c.self.location&&(O=c.self.location.protocol.slice(0,-1)),T=!gm.test(O?O.toLowerCase():"")}y=T}if(y)cn(d,"complete"),cn(d,"success");else{d.m=6;try{var B=2<or(d)?d.g.statusText:""}catch{B=""}d.l=B+" ["+d.Z()+"]",Gn(d)}}finally{Oa(d)}}}}function Oa(d,g){if(d.g){vm(d);let y=d.g,T=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||cn(d,"ready");try{y.onreadystatechange=T}catch{}}}function vm(d){d.I&&(c.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function or(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<or(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),yE(g)}};function ym(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function wm(d){let g={};d=(d.g&&2<=or(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<d.length;T++){if(K(d[T]))continue;var y=N(d[T]);let O=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();let B=g[O]||[];g[O]=B,B.push(y)}M(g,function(T){return T.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function La(d,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[d]||g}function Em(d){this.Aa=0,this.i=[],this.j=new ss,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=La("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=La("baseRetryDelayMs",5e3,d),this.cb=La("retryDelaySeedMs",1e4,d),this.Wa=La("forwardChannelMaxRetries",2,d),this.wa=La("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Qe(d&&d.concurrentRequestLimit),this.Da=new ih,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Em.prototype,n.la=8,n.G=1,n.connect=function(d,g,y,T){_n(0),this.W=d,this.H=g||{},y&&T!==void 0&&(this.H.OSID=y,this.H.OAID=T),this.F=this.X,this.I=dh(this,null,this.W),pu(this)};function Fa(d){if(sr(d),d.G==3){var g=d.U++,y=vn(d.I);if(tt(y,"SID",d.K),tt(y,"RID",g),tt(y,"TYPE","terminate"),hs(d,y),g=new gi(d,d.j,g),g.L=2,g.v=us(vn(y)),y=!1,c.navigator&&c.navigator.sendBeacon)try{y=c.navigator.sendBeacon(g.v.toString(),"")}catch{}!y&&c.Image&&(new Image().src=g.v,y=!0),y||(g.g=Va(g.j,null),g.g.ea(g.v)),g.F=Date.now(),uu(g)}lh(d)}function fu(d){d.g&&(gu(d),d.g.cancel(),d.g=null)}function sr(d){fu(d),d.u&&(c.clearTimeout(d.u),d.u=null),_u(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&c.clearTimeout(d.s),d.s=null)}function pu(d){if(!pt(d.h)&&!d.s){d.s=!0;var g=d.Ga;es||gn(),ge||(es(),ge=!0),ht.add(g,d),d.B=0}}function bm(d,g){return xa(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=ue(E(d.Ga,d,g),vu(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;let O=new gi(this,this.j,d),B=this.o;if(this.S&&(B?(B=S(B),P(B,this.S)):B=this.S),this.m!==null||this.O||(O.H=B,B=null),this.P)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var T=this.i[y];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(g+=T,4096<g){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=ah(this,O,g),y=vn(this.I),tt(y,"RID",d),tt(y,"CVER",22),this.D&&tt(y,"X-HTTP-Session-Id",this.D),hs(this,y),B&&(this.O?g="headers="+encodeURIComponent(String(sh(B)))+"&"+g:this.m&&Na(y,this.m,B)),yi(this.h,O),this.Ua&&tt(y,"TYPE","init"),this.P?(tt(y,"$req",g),tt(y,"SID","null"),O.T=!0,as(O,y,null)):as(O,y,g),this.G=2}}else this.G==3&&(d?Zr(this,d):this.i.length==0||pt(this.h)||Zr(this))};function Zr(d,g){var y;g?y=g.l:y=d.U++;let T=vn(d.I);tt(T,"SID",d.K),tt(T,"RID",y),tt(T,"AID",d.T),hs(d,T),d.m&&d.o&&Na(T,d.m,d.o),y=new gi(d,d.j,y,d.B+1),d.m===null&&(y.H=d.o),g&&(d.i=g.D.concat(d.i)),g=ah(d,y,1e3),y.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),yi(d.h,y),as(y,T,g)}function hs(d,g){d.H&&Pe(d.H,function(y,T){tt(g,T,y)}),d.l&&Ra({},function(y,T){tt(g,T,y)})}function ah(d,g,y){y=Math.min(d.i.length,y);var T=d.l?E(d.l.Na,d.l,d):null;e:{var O=d.i;let B=-1;for(;;){let X=["count="+y];B==-1?0<y?(B=O[0].g,X.push("ofs="+B)):B=0:X.push("ofs="+B);let je=!0;for(let bt=0;bt<y;bt++){let Ye=O[bt].g,mt=O[bt].map;if(Ye-=B,0>Ye)B=Math.max(0,O[bt].g-100),je=!1;else try{Ma(mt,X,"req"+Ye+"_")}catch{T&&T(mt)}}if(je){T=X.join("&");break e}}}return d=d.i.splice(0,y),g.D=d,T}function mu(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;es||gn(),ge||(es(),ge=!0),ht.add(g,d),d.v=0}}function ch(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=ue(E(d.Fa,d),vu(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,uh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=ue(E(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_n(10),fu(this),uh(this))};function gu(d){d.A!=null&&(c.clearTimeout(d.A),d.A=null)}function uh(d){d.g=new gi(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=vn(d.qa);tt(g,"RID","rpc"),tt(g,"SID",d.K),tt(g,"AID",d.T),tt(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&tt(g,"TO",d.ja),tt(g,"TYPE","xmlhttp"),hs(d,g),d.m&&d.o&&Na(g,d.m,d.o),d.L&&(d.g.I=d.L);var y=d.g;d=d.ia,y.L=1,y.v=us(vn(g)),y.m=null,y.P=!0,hm(y,d)}n.Za=function(){this.C!=null&&(this.C=null,fu(this),ch(this),_n(19))};function _u(d){d.C!=null&&(c.clearTimeout(d.C),d.C=null)}function Im(d,g){var y=null;if(d.g==g){_u(d),gu(d),d.g=null;var T=2}else if(vi(d.h,g))y=g.D,du(d.h,g),T=1;else return;if(d.G!=0){if(g.o)if(T==1){y=g.m?g.m.length:0,g=Date.now()-g.F;var O=d.B;T=os(),cn(T,new rr(T,y)),pu(d)}else mu(d);else if(O=g.s,O==3||O==0&&0<g.X||!(T==1&&bm(d,g)||T==2&&ch(d)))switch(y&&0<y.length&&(g=d.h,g.i=g.i.concat(y)),O){case 1:po(d,5);break;case 4:po(d,10);break;case 3:po(d,6);break;default:po(d,2)}}}function vu(d,g){let y=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(y*=2),y*g}function po(d,g){if(d.j.info("Error code "+g),g==2){var y=E(d.fb,d),T=d.Xa;let O=!T;T=new br(T||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||gt(T,"https"),us(T),O?nh(T.toString(),y):rh(T.toString(),y)}else _n(2);d.G=0,d.l&&d.l.sa(g),lh(d),sr(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),_n(2)):(this.j.info("Failed to ping google.com"),_n(1))};function lh(d){if(d.G=0,d.ka=[],d.l){let g=Me(d.h);(g.length!=0||d.i.length!=0)&&(R(d.ka,g),R(d.ka,d.i),d.h.i.length=0,k(d.i),d.i.length=0),d.l.ra()}}function dh(d,g,y){var T=y instanceof br?vn(y):new br(y);if(T.g!="")g&&(T.g=g+"."+T.g),Ir(T,T.s);else{var O=c.location;T=O.protocol,g=g?g+"."+O.hostname:O.hostname,O=+O.port;var B=new br(null);T&&gt(B,T),g&&(B.g=g),O&&Ir(B,O),y&&(B.l=y),T=B}return y=d.D,g=d.ya,y&&g&&tt(T,y,g),tt(T,"VER",d.la),hs(d,T),T}function Va(d,g,y){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new Et(new xt({eb:y})):new Et(d.pa),g.Ha(d.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ei(){}n=Ei.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function yu(){}yu.prototype.g=function(d,g){return new Xt(d,g)};function Xt(d,g){an.call(this),this.g=new Em(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!K(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!K(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new mo(this)}C(Xt,an),Xt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Xt.prototype.close=function(){Fa(this.g)},Xt.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var y={};y.__data__=d,d=y}else this.u&&(y={},y.__data__=$d(d),d=y);g.i.push(new Aa(g.Ya++,d)),g.G==3&&pu(g)},Xt.prototype.N=function(){this.g.l=null,delete this.j,Fa(this.g),delete this.g,Xt.aa.N.call(this)};function jn(d){zd.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(let y in g){d=y;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}C(jn,zd);function hh(){qd.call(this),this.status=1}C(hh,qd);function mo(d){this.g=d}C(mo,Ei),mo.prototype.ua=function(){cn(this.g,"a")},mo.prototype.ta=function(d){cn(this.g,new jn(d))},mo.prototype.sa=function(d){cn(this.g,new hh)},mo.prototype.ra=function(){cn(this.g,"b")},yu.prototype.createWebChannel=yu.prototype.g,Xt.prototype.send=Xt.prototype.o,Xt.prototype.open=Xt.prototype.m,Xt.prototype.close=Xt.prototype.close,WC=Bo.createWebChannelTransport=function(){return new yu},qC=Bo.getStatEventTarget=function(){return os()},zC=Bo.Event=co,dy=Bo.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Wr.NO_ERROR=0,Wr.TIMEOUT=8,Wr.HTTP_ERROR=6,tp=Bo.ErrorCode=Wr,Gd.COMPLETE="complete",HC=Bo.EventType=Gd,im.EventType=Ca,Ca.OPEN="a",Ca.CLOSE="b",Ca.ERROR="c",Ca.MESSAGE="d",an.prototype.listen=an.prototype.K,$l=Bo.WebChannel=im,x5=Bo.FetchXmlHttpFactory=xt,Et.prototype.listenOnce=Et.prototype.L,Et.prototype.getLastError=Et.prototype.Ka,Et.prototype.getLastErrorCode=Et.prototype.Ba,Et.prototype.getStatus=Et.prototype.Z,Et.prototype.getResponseJson=Et.prototype.Oa,Et.prototype.getResponseText=Et.prototype.oa,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Ha,$C=Bo.XhrIo=Et}).apply(typeof ly<"u"?ly:typeof self<"u"?self:typeof window<"u"?window:{});var uL="@firebase/firestore",lL="4.8.0";var fn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");var dd="11.10.0";var Pc=new Fr("@firebase/firestore");function Hl(){return Pc.logLevel}function se(n,...e){if(Pc.logLevel<=ze.DEBUG){let t=e.map(LD);Pc.debug(`Firestore (${dd}): ${n}`,...t)}}function Ho(n,...e){if(Pc.logLevel<=ze.ERROR){let t=e.map(LD);Pc.error(`Firestore (${dd}): ${n}`,...t)}}function la(n,...e){if(Pc.logLevel<=ze.WARN){let t=e.map(LD);Pc.warn(`Firestore (${dd}): ${n}`,...t)}}function LD(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function ye(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,rF(n,r,t)}function rF(n,e,t){let r=`FIRESTORE (${dd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ho(r),new Error(r)}function st(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||rF(e,i,r)}function Re(n,e){return n}var W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},oe=class extends Jn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var $o=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var vy=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},YC=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(fn.UNAUTHENTICATED))}shutdown(){}},JC=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},XC=class{constructor(e){this.t=e,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){st(this.o===void 0,42304);let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),o=new $o;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new $o,e.enqueueRetryable(()=>i(this.currentUser))};let a=()=>{let l=o;e.enqueueRetryable(()=>b(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},c=l=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new $o)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(st(typeof r.accessToken=="string",31837,{l:r}),new vy(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return st(e===null||typeof e=="string",2055,{h:e}),new fn(e)}},eS=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},tS=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new eS(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(fn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},yy=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},nS=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){st(this.o===void 0,3512);let r=o=>{o.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let a=o.token!==this.m;return this.m=o.token,se("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new yy(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(st(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new yy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function R5(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function iF(){return new TextEncoder}var ap=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=R5(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function Be(n,e){return n<e?-1:n>e?1:0}function rS(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Be(r,i);{let o=iF(),a=P5(o.encode(dL(n,t)),o.encode(dL(e,t)));return a!==0?a:Be(r,i)}}t+=r>65535?2:1}return Be(n.length,e.length)}function dL(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function P5(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Be(n[t],e[t]);return Be(n.length,e.length)}function Yl(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var hL="__name__",wy=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ye(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ye(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Be(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):rS(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Uo.fromString(e.substring(4,e.length-2))}},St=class n extends wy{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new oe(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},M5=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Er=class n extends wy{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return M5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===hL}static keyField(){return new n([hL])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new oe(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},a=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new oe(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new oe(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else c==="`"?(a=!a,i++):c!=="."||a?(r+=c,i++):(o(),i++)}if(o(),a)throw new oe(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var fe=class n{constructor(e){this.path=e}static fromPath(e){return new n(St.fromString(e))}static fromName(e){return new n(St.fromString(e).popFirst(5))}static empty(){return new n(St.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&St.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return St.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new St(e.slice()))}};function oF(n,e,t){if(!t)throw new oe(W.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function k5(n,e,t,r){if(e===!0&&r===!0)throw new oe(W.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function fL(n){if(!fe.isDocumentKey(n))throw new oe(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function pL(n){if(fe.isDocumentKey(n))throw new oe(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function sF(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Yy(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ye(12329,{type:typeof n})}function Yi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new oe(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Yy(n);throw new oe(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Yt(n,e){let t={typeString:n};return e&&(t.value=e),t}function yp(n,e){if(!sF(n))throw new oe(W.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let a=n[r];if(i&&typeof a!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&a!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new oe(W.INVALID_ARGUMENT,t);return!0}var mL=-62135596800,gL=1e6,Jt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*gL);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new oe(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new oe(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<mL)throw new oe(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/gL}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(yp(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-mL;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Jt._jsonSchemaVersion="firestore/timestamp/1.0",Jt._jsonSchema={type:Yt("string",Jt._jsonSchemaVersion),seconds:Yt("number"),nanoseconds:Yt("number")};var Ne=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Jt(0,0))}static max(){return new n(new Jt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var cp=-1,iS=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};iS.UNKNOWN_ID=-1;function N5(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ne.fromTimestamp(r===1e9?new Jt(t+1,0):new Jt(t,r));return new Mc(i,fe.empty(),e)}function O5(n){return new Mc(n.readTime,n.key,cp)}var Mc=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Ne.min(),fe.empty(),cp)}static max(){return new n(Ne.max(),fe.empty(),cp)}};function L5(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=fe.comparator(n.documentKey,e.documentKey),t!==0?t:Be(n.largestBatchId,e.largestBatchId))}var F5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",oS=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function hd(n){return b(this,null,function*(){if(n.code!==W.FAILED_PRECONDITION||n.message!==F5)throw n;se("LocalStore","Unexpectedly lost primary lease")})}var Q=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,a=!1;e.forEach(c=>{++i,c.next(()=>{++o,a&&o===i&&t()},l=>r(l))}),a=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,a=new Array(o),c=0;for(let l=0;l<o;l++){let h=l;t(e[h]).next(p=>{a[h]=p,++c,c===o&&r(a)},p=>i(p))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function V5(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function fd(n){return n.name==="IndexedDbTransactionError"}var FD=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),VD=-1;function Jy(n){return n==null}function up(n){return n===0&&1/n==-1/0}function j5(n){return typeof n=="number"&&Number.isInteger(n)&&!up(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var aF="";function U5(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=_L(e)),e=B5(n.get(t),e);return _L(e)}function B5(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case aF:t+="";break;default:t+=o}}return t}function _L(n){return n+aF+""}var $5="remoteDocuments",cF="owner";var uF="mutationQueues";var lF="mutations";var dF="documentMutations",H5="remoteDocumentsV14";var hF="remoteDocumentGlobal";var fF="targets";var pF="targetDocuments";var mF="targetGlobal",gF="collectionParents";var _F="clientMetadata";var vF="bundles";var yF="namedQueries";var z5="indexConfiguration";var q5="indexState";var W5="indexEntries";var wF="documentOverlays";var G5="globals";var K5=[uF,lF,dF,$5,fF,cF,mF,pF,_F,hF,gF,vF,yF],Jme=[...K5,wF],Z5=[uF,lF,dF,H5,fF,cF,mF,pF,_F,hF,gF,vF,yF,wF],Q5=Z5,Y5=[...Q5,z5,q5,W5];var Xme=[...Y5,G5];function vL(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function pa(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function EF(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ot=class n{constructor(e,t){this.comparator=e,this.root=t||Ji.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ji.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ji.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gl(this.root,e,this.comparator,!0)}},Gl=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ji=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ye(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw ye(27949);return e+(this.isRed()?0:1)}};Ji.EMPTY=null,Ji.RED=!0,Ji.BLACK=!1;Ji.EMPTY=new class{constructor(){this.size=0}get key(){throw ye(57766)}get value(){throw ye(16141)}get color(){throw ye(16727)}get left(){throw ye(29726)}get right(){throw ye(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Ji(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var pn=class n{constructor(e){this.comparator=e,this.data=new Ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ey(this.data.getIterator())}getIteratorFrom(e){return new Ey(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Ey=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ur=class n{constructor(e){this.fields=e,e.sort(Er.comparator)}static empty(){return new n([])}unionWith(e){let t=new pn(Er.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Yl(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var by=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Nn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new by("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let a=0;a<i.length;++a)o+=String.fromCharCode(i[a]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Nn.EMPTY_BYTE_STRING=new Nn("");var J5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zo(n){if(st(!!n,39018),typeof n=="string"){let e=0,t=J5.exec(n);if(st(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ct(n.seconds),nanos:Ct(n.nanos)}}function Ct(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function qo(n){return typeof n=="string"?Nn.fromBase64String(n):Nn.fromUint8Array(n)}var bF="server_timestamp",IF="__type__",TF="__previous_value__",CF="__local_write_time__";function jD(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[IF])===null||t===void 0?void 0:t.stringValue)===bF}function Xy(n){let e=n.mapValue.fields[TF];return jD(e)?Xy(e):e}function lp(n){let e=zo(n.mapValue.fields[CF].timestampValue);return new Jt(e.seconds,e.nanos)}var sS=class{constructor(e,t,r,i,o,a,c,l,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=h,this.isUsingEmulator=p}},Iy="(default)",Ty=class n{constructor(e,t){this.projectId=e,this.database=t||Iy}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Iy}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var UD="__type__",SF="__max__",hy={mapValue:{fields:{__type__:{stringValue:SF}}}},BD="__vector__",Jl="value";function da(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?jD(n)?4:AF(n)?9007199254740991:DF(n)?10:11:ye(28295,{value:n})}function no(n,e){if(n===e)return!0;let t=da(n);if(t!==da(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return lp(n).isEqual(lp(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let a=zo(i.timestampValue),c=zo(o.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return qo(i.bytesValue).isEqual(qo(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return Ct(i.geoPointValue.latitude)===Ct(o.geoPointValue.latitude)&&Ct(i.geoPointValue.longitude)===Ct(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Ct(i.integerValue)===Ct(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let a=Ct(i.doubleValue),c=Ct(o.doubleValue);return a===c?up(a)===up(c):isNaN(a)&&isNaN(c)}return!1})(n,e);case 9:return Yl(n.arrayValue.values||[],e.arrayValue.values||[],no);case 10:case 11:return(function(i,o){let a=i.mapValue.fields||{},c=o.mapValue.fields||{};if(vL(a)!==vL(c))return!1;for(let l in a)if(a.hasOwnProperty(l)&&(c[l]===void 0||!no(a[l],c[l])))return!1;return!0})(n,e);default:return ye(52216,{left:n})}}function dp(n,e){return(n.values||[]).find(t=>no(t,e))!==void 0}function Xl(n,e){if(n===e)return 0;let t=da(n),r=da(e);if(t!==r)return Be(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Be(n.booleanValue,e.booleanValue);case 2:return(function(o,a){let c=Ct(o.integerValue||o.doubleValue),l=Ct(a.integerValue||a.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1})(n,e);case 3:return yL(n.timestampValue,e.timestampValue);case 4:return yL(lp(n),lp(e));case 5:return rS(n.stringValue,e.stringValue);case 6:return(function(o,a){let c=qo(o),l=qo(a);return c.compareTo(l)})(n.bytesValue,e.bytesValue);case 7:return(function(o,a){let c=o.split("/"),l=a.split("/");for(let h=0;h<c.length&&h<l.length;h++){let p=Be(c[h],l[h]);if(p!==0)return p}return Be(c.length,l.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,a){let c=Be(Ct(o.latitude),Ct(a.latitude));return c!==0?c:Be(Ct(o.longitude),Ct(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return wL(n.arrayValue,e.arrayValue);case 10:return(function(o,a){var c,l,h,p;let _=o.fields||{},E=a.fields||{},w=(c=_[Jl])===null||c===void 0?void 0:c.arrayValue,C=(l=E[Jl])===null||l===void 0?void 0:l.arrayValue,k=Be(((h=w?.values)===null||h===void 0?void 0:h.length)||0,((p=C?.values)===null||p===void 0?void 0:p.length)||0);return k!==0?k:wL(w,C)})(n.mapValue,e.mapValue);case 11:return(function(o,a){if(o===hy.mapValue&&a===hy.mapValue)return 0;if(o===hy.mapValue)return 1;if(a===hy.mapValue)return-1;let c=o.fields||{},l=Object.keys(c),h=a.fields||{},p=Object.keys(h);l.sort(),p.sort();for(let _=0;_<l.length&&_<p.length;++_){let E=rS(l[_],p[_]);if(E!==0)return E;let w=Xl(c[l[_]],h[p[_]]);if(w!==0)return w}return Be(l.length,p.length)})(n.mapValue,e.mapValue);default:throw ye(23264,{le:t})}}function yL(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Be(n,e);let t=zo(n),r=zo(e),i=Be(t.seconds,r.seconds);return i!==0?i:Be(t.nanos,r.nanos)}function wL(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Xl(t[i],r[i]);if(o)return o}return Be(t.length,r.length)}function ed(n){return aS(n)}function aS(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=zo(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return qo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return fe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=aS(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let a of r)o?o=!1:i+=",",i+=`${a}:${aS(t.fields[a])}`;return i+"}"})(n.mapValue):ye(61005,{value:n})}function my(n){switch(da(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Xy(n);return e?16+my(e):16;case 5:return 2*n.stringValue.length;case 6:return qo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+my(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return pa(r.fields,(o,a)=>{i+=o.length+my(a)}),i})(n.mapValue);default:throw ye(13486,{value:n})}}function EL(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function cS(n){return!!n&&"integerValue"in n}function $D(n){return!!n&&"arrayValue"in n}function bL(n){return!!n&&"nullValue"in n}function IL(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gy(n){return!!n&&"mapValue"in n}function DF(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[UD])===null||t===void 0?void 0:t.stringValue)===BD}function rp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return pa(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=rp(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=rp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function AF(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===SF}var tge={mapValue:{fields:{[UD]:{stringValue:BD},[Jl]:{arrayValue:{}}}}};var wr=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!gy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=rp(t)}setAll(e){let t=Er.emptyPath(),r={},i=[];e.forEach((a,c)=>{if(!t.isImmediateParentOf(c)){let l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=c.popLast()}a?r[c.lastSegment()]=rp(a):i.push(c.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());gy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return no(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];gy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){pa(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(rp(this.value))}};function xF(n){let e=[];return pa(n.fields,(t,r)=>{let i=new Er([t]);if(gy(r)){let o=xF(r.mapValue).fields;if(o.length===0)e.push(i);else for(let a of o)e.push(i.child(a))}else e.push(i)}),new Ur(e)}var di=class n{constructor(e,t,r,i,o,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=a,this.documentState=c}static newInvalidDocument(e){return new n(e,0,Ne.min(),Ne.min(),Ne.min(),wr.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Ne.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Ne.min(),Ne.min(),wr.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Ne.min(),Ne.min(),wr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var td=class{constructor(e,t){this.position=e,this.inclusive=t}};function TL(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],a=n.position[i];if(o.field.isKeyField()?r=fe.comparator(fe.fromName(a.referenceValue),t.key):r=Xl(a,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function CL(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!no(n.position[t],e.position[t]))return!1;return!0}var nd=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function X5(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Cy=class{},Qt=class n extends Cy{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new lS(e,t,r):t==="array-contains"?new fS(e,r):t==="in"?new pS(e,r):t==="not-in"?new mS(e,r):t==="array-contains-any"?new gS(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new dS(e,r):new hS(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Xl(t,this.value)):t!==null&&da(this.value)===da(t)&&this.matchesComparison(Xl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},hi=class n extends Cy{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return RF(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function RF(n){return n.op==="and"}function PF(n){return e9(n)&&RF(n)}function e9(n){for(let e of n.filters)if(e instanceof hi)return!1;return!0}function uS(n){if(n instanceof Qt)return n.field.canonicalString()+n.op.toString()+ed(n.value);if(PF(n))return n.filters.map(e=>uS(e)).join(",");{let e=n.filters.map(t=>uS(t)).join(",");return`${n.op}(${e})`}}function MF(n,e){return n instanceof Qt?(function(r,i){return i instanceof Qt&&r.op===i.op&&r.field.isEqual(i.field)&&no(r.value,i.value)})(n,e):n instanceof hi?(function(r,i){return i instanceof hi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,a,c)=>o&&MF(a,i.filters[c]),!0):!1})(n,e):void ye(19439)}function kF(n){return n instanceof Qt?(function(t){return`${t.field.canonicalString()} ${t.op} ${ed(t.value)}`})(n):n instanceof hi?(function(t){return t.op.toString()+" {"+t.getFilters().map(kF).join(" ,")+"}"})(n):"Filter"}var lS=class extends Qt{constructor(e,t,r){super(e,t,r),this.key=fe.fromName(r.referenceValue)}matches(e){let t=fe.comparator(e.key,this.key);return this.matchesComparison(t)}},dS=class extends Qt{constructor(e,t){super(e,"in",t),this.keys=NF("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},hS=class extends Qt{constructor(e,t){super(e,"not-in",t),this.keys=NF("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function NF(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>fe.fromName(r.referenceValue))}var fS=class extends Qt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return $D(t)&&dp(t.arrayValue,this.value)}},pS=class extends Qt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&dp(this.value.arrayValue,t)}},mS=class extends Qt{constructor(e,t){super(e,"not-in",t)}matches(e){if(dp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!dp(this.value.arrayValue,t)}},gS=class extends Qt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!$D(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>dp(this.value.arrayValue,r))}};var _S=class{constructor(e,t=null,r=[],i=[],o=null,a=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=a,this.endAt=c,this.Pe=null}};function SL(n,e=null,t=[],r=[],i=null,o=null,a=null){return new _S(n,e,t,r,i,o,a)}function HD(n){let e=Re(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>uS(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Jy(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ed(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ed(r)).join(",")),e.Pe=t}return e.Pe}function zD(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!X5(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!MF(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!CL(n.startAt,e.startAt)&&CL(n.endAt,e.endAt)}function vS(n){return fe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var kc=class{constructor(e,t=null,r=[],i=[],o=null,a="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=c,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function t9(n,e,t,r,i,o,a,c){return new kc(n,e,t,r,i,o,a,c)}function qD(n){return new kc(n)}function DL(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function OF(n){return n.collectionGroup!==null}function ip(n){let e=Re(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new pn(Er.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new nd(o,r))}),t.has(Er.keyField().canonicalString())||e.Te.push(new nd(Er.keyField(),r))}return e.Te}function Xi(n){let e=Re(n);return e.Ie||(e.Ie=n9(e,ip(n))),e.Ie}function n9(n,e){if(n.limitType==="F")return SL(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new nd(i.field,o)});let t=n.endAt?new td(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new td(n.startAt.position,n.startAt.inclusive):null;return SL(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function yS(n,e){let t=n.filters.concat([e]);return new kc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function wS(n,e,t){return new kc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ew(n,e){return zD(Xi(n),Xi(e))&&n.limitType===e.limitType}function LF(n){return`${HD(Xi(n))}|lt:${n.limitType}`}function zl(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>kF(i)).join(", ")}]`),Jy(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ed(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ed(i)).join(",")),`Target(${r})`})(Xi(n))}; limitType=${n.limitType})`}function tw(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):fe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of ip(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(a,c,l){let h=TL(a,c,l);return a.inclusive?h<=0:h<0})(r.startAt,ip(r),i)||r.endAt&&!(function(a,c,l){let h=TL(a,c,l);return a.inclusive?h>=0:h>0})(r.endAt,ip(r),i))})(n,e)}function r9(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function FF(n){return(e,t)=>{let r=!1;for(let i of ip(n)){let o=i9(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function i9(n,e,t){let r=n.field.isKeyField()?fe.comparator(e.key,t.key):(function(o,a,c){let l=a.data.field(o),h=c.data.field(o);return l!==null&&h!==null?Xl(l,h):ye(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ye(19790,{direction:n.dir})}}var Wo=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){pa(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return EF(this.inner)}size(){return this.innerSize}};var o9=new Ot(fe.comparator);function Go(){return o9}var VF=new Ot(fe.comparator);function np(...n){let e=VF;for(let t of n)e=e.insert(t.key,t);return e}function jF(n){let e=VF;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Dc(){return op()}function UF(){return op()}function op(){return new Wo(n=>n.toString(),(n,e)=>n.isEqual(e))}var s9=new Ot(fe.comparator),a9=new pn(fe.comparator);function Ze(...n){let e=a9;for(let t of n)e=e.add(t);return e}var c9=new pn(Be);function u9(){return c9}function WD(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:up(e)?"-0":e}}function BF(n){return{integerValue:""+n}}function l9(n,e){return j5(e)?BF(e):WD(n,e)}var rd=class{constructor(){this._=void 0}};function d9(n,e,t){return n instanceof id?(function(i,o){let a={fields:{[IF]:{stringValue:bF},[CF]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&jD(o)&&(o=Xy(o)),o&&(a.fields[TF]=o),{mapValue:a}})(t,e):n instanceof Nc?HF(n,e):n instanceof Oc?zF(n,e):(function(i,o){let a=$F(i,o),c=AL(a)+AL(i.Ee);return cS(a)&&cS(i.Ee)?BF(c):WD(i.serializer,c)})(n,e)}function h9(n,e,t){return n instanceof Nc?HF(n,e):n instanceof Oc?zF(n,e):t}function $F(n,e){return n instanceof od?(function(r){return cS(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var id=class extends rd{},Nc=class extends rd{constructor(e){super(),this.elements=e}};function HF(n,e){let t=qF(e);for(let r of n.elements)t.some(i=>no(i,r))||t.push(r);return{arrayValue:{values:t}}}var Oc=class extends rd{constructor(e){super(),this.elements=e}};function zF(n,e){let t=qF(e);for(let r of n.elements)t=t.filter(i=>!no(i,r));return{arrayValue:{values:t}}}var od=class extends rd{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function AL(n){return Ct(n.integerValue||n.doubleValue)}function qF(n){return $D(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function f9(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Nc&&i instanceof Nc||r instanceof Oc&&i instanceof Oc?Yl(r.elements,i.elements,no):r instanceof od&&i instanceof od?no(r.Ee,i.Ee):r instanceof id&&i instanceof id})(n.transform,e.transform)}var ES=class{constructor(e,t){this.version=e,this.transformResults=t}},eo=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function _y(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var sd=class{};function WF(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new hp(n.key,eo.none()):new Lc(n.key,n.data,eo.none());{let t=n.data,r=wr.empty(),i=new pn(Er.comparator);for(let o of e.fields)if(!i.has(o)){let a=t.field(o);a===null&&o.length>1&&(o=o.popLast(),a=t.field(o)),a===null?r.delete(o):r.set(o,a),i=i.add(o)}return new ro(n.key,r,new Ur(i.toArray()),eo.none())}}function p9(n,e,t){n instanceof Lc?(function(i,o,a){let c=i.value.clone(),l=RL(i.fieldTransforms,o,a.transformResults);c.setAll(l),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()})(n,e,t):n instanceof ro?(function(i,o,a){if(!_y(i.precondition,o))return void o.convertToUnknownDocument(a.version);let c=RL(i.fieldTransforms,o,a.transformResults),l=o.data;l.setAll(GF(i)),l.setAll(c),o.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(n,e,t):(function(i,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function sp(n,e,t,r){return n instanceof Lc?(function(o,a,c,l){if(!_y(o.precondition,a))return c;let h=o.value.clone(),p=PL(o.fieldTransforms,l,a);return h.setAll(p),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null})(n,e,t,r):n instanceof ro?(function(o,a,c,l){if(!_y(o.precondition,a))return c;let h=PL(o.fieldTransforms,l,a),p=a.data;return p.setAll(GF(o)),p.setAll(h),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(_=>_.field))})(n,e,t,r):(function(o,a,c){return _y(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c})(n,e,t)}function m9(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=$F(r.transform,i||null);o!=null&&(t===null&&(t=wr.empty()),t.set(r.field,o))}return t||null}function xL(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Yl(r,i,(o,a)=>f9(o,a))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Lc=class extends sd{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},ro=class extends sd{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function GF(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function RL(n,e,t){let r=new Map;st(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],a=o.transform,c=e.data.field(o.field);r.set(o.field,h9(a,c,t[i]))}return r}function PL(n,e,t){let r=new Map;for(let i of n){let o=i.transform,a=t.data.field(i.field);r.set(i.field,d9(o,a,e))}return r}var hp=class extends sd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},bS=class extends sd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var IS=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&p9(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=sp(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=sp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=UF();return this.mutations.forEach(i=>{let o=e.get(i.key),a=o.overlayedDocument,c=this.applyToLocalView(a,o.mutatedFields);c=t.has(i.key)?null:c;let l=WF(a,c);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(Ne.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ze())}isEqual(e){return this.batchId===e.batchId&&Yl(this.mutations,e.mutations,(t,r)=>xL(t,r))&&Yl(this.baseMutations,e.baseMutations,(t,r)=>xL(t,r))}},TS=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){st(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return s9})(),o=e.mutations;for(let a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new n(e,t,r,i)}};var CS=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var SS=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Kt,et;function g9(n){switch(n){case W.OK:return ye(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return ye(15467,{code:n})}}function KF(n){if(n===void 0)return Ho("GRPC error has no .code"),W.UNKNOWN;switch(n){case Kt.OK:return W.OK;case Kt.CANCELLED:return W.CANCELLED;case Kt.UNKNOWN:return W.UNKNOWN;case Kt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case Kt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case Kt.INTERNAL:return W.INTERNAL;case Kt.UNAVAILABLE:return W.UNAVAILABLE;case Kt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case Kt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case Kt.NOT_FOUND:return W.NOT_FOUND;case Kt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case Kt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case Kt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case Kt.ABORTED:return W.ABORTED;case Kt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case Kt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case Kt.DATA_LOSS:return W.DATA_LOSS;default:return ye(39323,{code:n})}}(et=Kt||(Kt={}))[et.OK=0]="OK",et[et.CANCELLED=1]="CANCELLED",et[et.UNKNOWN=2]="UNKNOWN",et[et.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",et[et.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",et[et.NOT_FOUND=5]="NOT_FOUND",et[et.ALREADY_EXISTS=6]="ALREADY_EXISTS",et[et.PERMISSION_DENIED=7]="PERMISSION_DENIED",et[et.UNAUTHENTICATED=16]="UNAUTHENTICATED",et[et.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",et[et.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",et[et.ABORTED=10]="ABORTED",et[et.OUT_OF_RANGE=11]="OUT_OF_RANGE",et[et.UNIMPLEMENTED=12]="UNIMPLEMENTED",et[et.INTERNAL=13]="INTERNAL",et[et.UNAVAILABLE=14]="UNAVAILABLE",et[et.DATA_LOSS=15]="DATA_LOSS";var ML=null;var _9=new Uo([4294967295,4294967295],0);function kL(n){let e=iF().encode(n),t=new BC;return t.update(e),new Uint8Array(t.digest())}function NL(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Uo([t,r],0),new Uo([i,o],0)]}var DS=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ac(`Invalid padding: ${t}`);if(r<0)throw new Ac(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ac(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ac(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Uo.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(Uo.fromNumber(r)));return i.compare(_9)===1&&(i=new Uo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=kL(e),[r,i]=NL(t);for(let o=0;o<this.hashCount;o++){let a=this.pe(r,i,o);if(!this.ye(a))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new n(o,i,t);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.fe===0)return;let t=kL(e),[r,i]=NL(t);for(let o=0;o<this.hashCount;o++){let a=this.pe(r,i,o);this.we(a)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Ac=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Sy=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,fp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Ne.min(),i,new Ot(Be),Go(),Ze())}},fp=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Ze(),Ze(),Ze())}};var Kl=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},Dy=class{constructor(e,t){this.targetId=e,this.De=t}},Ay=class{constructor(e,t,r=Nn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},xy=class{constructor(){this.ve=0,this.Ce=OL(),this.Fe=Nn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ze(),t=Ze(),r=Ze();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ye(38017,{changeType:o})}}),new fp(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=OL()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,st(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},AS=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Go(),this.je=fy(),this.Je=fy(),this.He=new Ot(Be)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:ye(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(vS(o))if(r===0){let a=new fe(o.path);this.Xe(t,a,di.newNoDocument(a,Ne.min()))}else st(r===1,20013,{expectedCount:r});else{let a=this.ot(t);if(a!==r){let c=this._t(e),l=c?this.ut(c,e,a):1;if(l!==0){this.rt(t);let h=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,h)}ML?.ct((function(p,_,E,w,C){var k,R,j,K,q,Z;let pe={localCacheCount:p,existenceFilterCount:_.count,databaseId:E.database,projectId:E.projectId},Pe=_.unchangedNames;return Pe&&(pe.bloomFilter={applied:C===0,hashCount:(k=Pe?.hashCount)!==null&&k!==void 0?k:0,bitmapLength:(K=(j=(R=Pe?.bits)===null||R===void 0?void 0:R.bitmap)===null||j===void 0?void 0:j.length)!==null&&K!==void 0?K:0,padding:(Z=(q=Pe?.bits)===null||q===void 0?void 0:q.padding)!==null&&Z!==void 0?Z:0,mightContain:M=>{var S;return(S=w?.mightContain(M))!==null&&S!==void 0&&S}}),pe})(a,e.De,this.We.lt(),c,l))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,a,c;try{a=qo(r).toUint8Array()}catch(l){if(l instanceof by)return la("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new DS(a,i,o)}catch(l){return la(l instanceof Ac?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.fe===0?null:c}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let a=this.We.lt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,a)=>{let c=this.st(a);if(c){if(o.current&&vS(c.target)){let l=new fe(c.target.path);this.Tt(l).has(a)||this.It(a,l)||this.Xe(a,l,di.newNoDocument(l,e))}o.Ne&&(t.set(a,o.Le()),o.ke())}});let r=Ze();this.Je.forEach((o,a)=>{let c=!0;a.forEachWhile(l=>{let h=this.st(l);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.ze.forEach((o,a)=>a.setReadTime(e));let i=new Sy(e,t,this.He,this.ze,r);return this.ze=Go(),this.je=fy(),this.Je=fy(),this.He=new Ot(Be),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new xy,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new pn(Be),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new pn(Be),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||se("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new xy),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function fy(){return new Ot(fe.comparator)}function OL(){return new Ot(fe.comparator)}var v9={asc:"ASCENDING",desc:"DESCENDING"},y9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},w9={and:"AND",or:"OR"},xS=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function RS(n,e){return n.useProto3Json||Jy(e)?e:{value:e}}function Ry(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ZF(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function E9(n,e){return Ry(n,e.toTimestamp())}function to(n){return st(!!n,49232),Ne.fromTimestamp((function(t){let r=zo(t);return new Jt(r.seconds,r.nanos)})(n))}function GD(n,e){return PS(n,e).canonicalString()}function PS(n,e){let t=(function(i){return new St(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function QF(n){let e=St.fromString(n);return st(tV(e),10190,{key:e.toString()}),e}function MS(n,e){return GD(n.databaseId,e.path)}function GC(n,e){let t=QF(e);if(t.get(1)!==n.databaseId.projectId)throw new oe(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new oe(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new fe(JF(t))}function YF(n,e){return GD(n.databaseId,e)}function b9(n){let e=QF(n);return e.length===4?St.emptyPath():JF(e)}function kS(n){return new St(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function JF(n){return st(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function LL(n,e,t){return{name:MS(n,e),fields:t.value.mapValue.fields}}function I9(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ye(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(h,p){return h.useProto3Json?(st(p===void 0||typeof p=="string",58123),Nn.fromBase64String(p||"")):(st(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),Nn.fromUint8Array(p||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&(function(h){let p=h.code===void 0?W.UNKNOWN:KF(h.code);return new oe(p,h.message||"")})(a);t=new Ay(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=GC(n,r.document.name),o=to(r.document.updateTime),a=r.document.createTime?to(r.document.createTime):Ne.min(),c=new wr({mapValue:{fields:r.document.fields}}),l=di.newFoundDocument(i,o,a,c),h=r.targetIds||[],p=r.removedTargetIds||[];t=new Kl(h,p,l.key,l)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=GC(n,r.document),o=r.readTime?to(r.readTime):Ne.min(),a=di.newNoDocument(i,o),c=r.removedTargetIds||[];t=new Kl([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=GC(n,r.document),o=r.removedTargetIds||[];t=new Kl([],o,i,null)}else{if(!("filter"in e))return ye(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,a=new SS(i,o),c=r.targetId;t=new Dy(c,a)}}return t}function T9(n,e){let t;if(e instanceof Lc)t={update:LL(n,e.key,e.value)};else if(e instanceof hp)t={delete:MS(n,e.key)};else if(e instanceof ro)t={update:LL(n,e.key,e.data),updateMask:k9(e.fieldMask)};else{if(!(e instanceof bS))return ye(16599,{Rt:e.type});t={verify:MS(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,a){let c=a.transform;if(c instanceof id)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Nc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Oc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof od)return{fieldPath:a.field.canonicalString(),increment:c.Ee};throw ye(20930,{transform:a.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:E9(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ye(27497)})(n,e.precondition)),t}function C9(n,e){return n&&n.length>0?(st(e!==void 0,14353),n.map(t=>(function(i,o){let a=i.updateTime?to(i.updateTime):to(o);return a.isEqual(Ne.min())&&(a=to(o)),new ES(a,i.transformResults||[])})(t,e))):[]}function S9(n,e){return{documents:[YF(n,e.path)]}}function D9(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=YF(n,i);let o=(function(h){if(h.length!==0)return eV(hi.create(h,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let a=(function(h){if(h.length!==0)return h.map(p=>(function(E){return{field:ql(E.field),direction:R9(E.dir)}})(p))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);let c=RS(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{Vt:t,parent:i}}function A9(n){let e=b9(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){st(r===1,65062);let p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let o=[];t.where&&(o=(function(_){let E=XF(_);return E instanceof hi&&PF(E)?E.getFilters():[E]})(t.where));let a=[];t.orderBy&&(a=(function(_){return _.map(E=>(function(C){return new nd(Wl(C.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(E))})(t.orderBy));let c=null;t.limit&&(c=(function(_){let E;return E=typeof _=="object"?_.value:_,Jy(E)?null:E})(t.limit));let l=null;t.startAt&&(l=(function(_){let E=!!_.before,w=_.values||[];return new td(w,E)})(t.startAt));let h=null;return t.endAt&&(h=(function(_){let E=!_.before,w=_.values||[];return new td(w,E)})(t.endAt)),t9(e,i,a,o,c,"F",l,h)}function x9(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function XF(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Wl(t.unaryFilter.field);return Qt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Wl(t.unaryFilter.field);return Qt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Wl(t.unaryFilter.field);return Qt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=Wl(t.unaryFilter.field);return Qt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ye(61313);default:return ye(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Qt.create(Wl(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ye(58110);default:return ye(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return hi.create(t.compositeFilter.filters.map(r=>XF(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ye(1026)}})(t.compositeFilter.op))})(n):ye(30097,{filter:n})}function R9(n){return v9[n]}function P9(n){return y9[n]}function M9(n){return w9[n]}function ql(n){return{fieldPath:n.canonicalString()}}function Wl(n){return Er.fromServerFormat(n.fieldPath)}function eV(n){return n instanceof Qt?(function(t){if(t.op==="=="){if(IL(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NAN"}};if(bL(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(IL(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NOT_NAN"}};if(bL(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ql(t.field),op:P9(t.op),value:t.value}}})(n):n instanceof hi?(function(t){let r=t.getFilters().map(i=>eV(i));return r.length===1?r[0]:{compositeFilter:{op:M9(t.op),filters:r}}})(n):ye(54877,{filter:n})}function k9(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function tV(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var pp=class n{constructor(e,t,r,i,o=Ne.min(),a=Ne.min(),c=Nn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var NS=class{constructor(e){this.gt=e}};function N9(n){let e=A9({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?wS(e,e.limit,"L"):e}var Py=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Ct(e.integerValue));else if("doubleValue"in e){let r=Ct(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),up(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=zo(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(qo(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?AF(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):DF(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):ye(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let a=Jl,c=((i=(r=o[a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Ct(c)),this.xt(a,t),this.Dt(o[a],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),fe.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Py.Ut=new Py;var OS=class{constructor(){this.Dn=new LS}addToCollectionParentIndex(e,t){return this.Dn.add(t),Q.resolve()}getCollectionParents(e,t){return Q.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return Q.resolve()}deleteFieldIndex(e,t){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,t){return Q.resolve()}getDocumentsMatchingTarget(e,t){return Q.resolve(null)}getIndexType(e,t){return Q.resolve(0)}getFieldIndexes(e,t){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,t){return Q.resolve(Mc.min())}getMinOffsetFromCollectionGroup(e,t){return Q.resolve(Mc.min())}updateCollectionGroup(e,t,r){return Q.resolve()}updateIndexEntries(e,t){return Q.resolve()}},LS=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new pn(St.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new pn(St.comparator)).toArray()}};var nge=new Uint8Array(0);var FL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},nV=41943040,jr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};jr.DEFAULT_COLLECTION_PERCENTILE=10,jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jr.DEFAULT=new jr(nV,jr.DEFAULT_COLLECTION_PERCENTILE,jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jr.DISABLED=new jr(-1,0,0);var mp=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var VL="LruGarbageCollector",O9=1048576;function jL([n,e],[t,r]){let i=Be(n,t);return i===0?Be(e,r):i}var FS=class{constructor(e){this.Tr=e,this.buffer=new pn(jL),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();jL(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},VS=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){se(VL,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>b(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){fd(t)?se(VL,"Ignoring IndexedDB error during garbage collection: ",t):yield hd(t)}yield this.Rr(3e5)}))}},jS=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return Q.resolve(FD.ue);let r=new FS(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(FL)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),FL):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,a,c,l,h,p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(_=>(_>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),i=this.params.maximumSequenceNumbersToCollect):i=_,a=Date.now(),this.nthSequenceNumber(e,i))).next(_=>(r=_,c=Date.now(),this.removeTargets(e,r,t))).next(_=>(o=_,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(_=>(h=Date.now(),Hl()<=ze.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${i} in `+(c-a)+`ms
	Removed ${o} targets in `+(l-c)+`ms
	Removed ${_} documents in `+(h-l)+`ms
Total Duration: ${h-p}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:_})))}};function L9(n,e){return new jS(n,e)}var US=class{constructor(){this.changes=new Wo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,di.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?Q.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var BS=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var $S=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&sp(r.mutation,i,Ur.empty(),Jt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ze()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ze()){let i=Dc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let a=np();return o.forEach((c,l)=>{a=a.insert(c,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){let r=Dc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ze()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((a,c)=>{t.set(a,c)})})}computeViews(e,t,r,i){let o=Go(),a=op(),c=(function(){return op()})();return t.forEach((l,h)=>{let p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof ro)?o=o.insert(h.key,h):p!==void 0?(a.set(h.key,p.mutation.getFieldMask()),sp(p.mutation,h,p.mutation.getFieldMask(),Jt.now())):a.set(h.key,Ur.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((h,p)=>a.set(h,p)),t.forEach((h,p)=>{var _;return c.set(h,new BS(p,(_=a.get(h))!==null&&_!==void 0?_:null))}),c))}recalculateAndSaveOverlays(e,t){let r=op(),i=new Ot((a,c)=>a-c),o=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(let c of a)c.keys().forEach(l=>{let h=t.get(l);if(h===null)return;let p=r.get(l)||Ur.empty();p=c.applyToLocalView(h,p),r.set(l,p);let _=(i.get(c.batchId)||Ze()).add(l);i=i.insert(c.batchId,_)})}).next(()=>{let a=[],c=i.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),h=l.key,p=l.value,_=UF();p.forEach(E=>{if(!o.has(E)){let w=WF(t.get(E),r.get(E));w!==null&&_.set(E,w),o=o.add(E)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,_))}return Q.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(a){return fe.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):OF(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let a=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):Q.resolve(Dc()),c=cp,l=o;return a.next(h=>Q.forEach(h,(p,_)=>(c<_.largestBatchId&&(c=_.largestBatchId),o.get(p)?Q.resolve():this.remoteDocumentCache.getEntry(e,p).next(E=>{l=l.insert(p,E)}))).next(()=>this.populateOverlays(e,h,o)).next(()=>this.computeViews(e,l,h,Ze())).next(p=>({batchId:c,changes:jF(p)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new fe(t)).next(r=>{let i=np();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,a=np();return this.indexManager.getCollectionParents(e,o).next(c=>Q.forEach(c,l=>{let h=(function(_,E){return new kc(E,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(p=>{p.forEach((_,E)=>{a=a.insert(_,E)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(a=>{o.forEach((l,h)=>{let p=h.getKey();a.get(p)===null&&(a=a.insert(p,di.newInvalidDocument(p)))});let c=np();return a.forEach((l,h)=>{let p=o.get(l);p!==void 0&&sp(p.mutation,h,Ur.empty(),Jt.now()),tw(t,h)&&(c=c.insert(l,h))}),c})}};var HS=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return Q.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:to(i.createTime)}})(t)),Q.resolve()}getNamedQuery(e,t){return Q.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:N9(i.bundledQuery),readTime:to(i.readTime)}})(t)),Q.resolve()}};var zS=class{constructor(){this.overlays=new Ot(fe.comparator),this.kr=new Map}getOverlay(e,t){return Q.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Dc();return Q.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),Q.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),Q.resolve()}getOverlaysForCollection(e,t,r){let i=Dc(),o=t.length+1,a=new fe(t.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){let l=c.getNext().value,h=l.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Q.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ot((h,p)=>h-p),a=this.overlays.getIterator();for(;a.hasNext();){let h=a.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let p=o.get(h.largestBatchId);p===null&&(p=Dc(),o=o.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}let c=Dc(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((h,p)=>c.set(h,p)),!(c.size()>=i)););return Q.resolve(c)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let a=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new CS(t,r));let o=this.kr.get(t);o===void 0&&(o=Ze(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var qS=class{constructor(){this.sessionToken=Nn.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Q.resolve()}};var gp=class{constructor(){this.qr=new pn(Zt.Qr),this.$r=new pn(Zt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Zt(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Zt(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new fe(new St([])),r=new Zt(t,e),i=new Zt(t,e+1),o=[];return this.$r.forEachInRange([r,i],a=>{this.Wr(a),o.push(a.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new fe(new St([])),r=new Zt(t,e),i=new Zt(t,e+1),o=Ze();return this.$r.forEachInRange([r,i],a=>{o=o.add(a.key)}),o}containsKey(e){let t=new Zt(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Zt=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return fe.comparator(e.key,t.key)||Be(e.Hr,t.Hr)}static Ur(e,t){return Be(e.Hr,t.Hr)||fe.comparator(e.key,t.key)}};var WS=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new pn(Zt.Qr)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new IS(o,t,r,i);this.mutationQueue.push(a);for(let c of i)this.Yr=this.Yr.add(new Zt(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return Q.resolve(a)}lookupMutationBatch(e,t){return Q.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return Q.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?VD:this.er-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Zt(t,0),i=new Zt(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],a=>{let c=this.Zr(a.Hr);o.push(c)}),Q.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new pn(Be);return t.forEach(i=>{let o=new Zt(i,0),a=new Zt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,a],c=>{r=r.add(c.Hr)})}),Q.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;fe.isDocumentKey(o)||(o=o.child(""));let a=new Zt(new fe(o),0),c=new pn(Be);return this.Yr.forEachWhile(l=>{let h=l.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(c=c.add(l.Hr)),!0)},a),Q.resolve(this.ei(c))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){st(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return Q.forEach(t.mutations,i=>{let o=new Zt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Zt(t,0),i=this.Yr.firstAfterOrEqual(r);return Q.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var GS=class{constructor(e){this.ni=e,this.docs=(function(){return new Ot(fe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return Q.resolve(r?r.document.mutableCopy():di.newInvalidDocument(t))}getEntries(e,t){let r=Go();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():di.newInvalidDocument(i))}),Q.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Go(),a=t.path,c=new fe(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:h,value:{document:p}}=l.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||L5(O5(p),r)<=0||(i.has(p.key)||tw(t,p))&&(o=o.insert(p.key,p.mutableCopy()))}return Q.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ye(9500)}ri(e,t){return Q.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new KS(this)}getSize(e){return Q.resolve(this.size)}},KS=class extends US{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),Q.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var ZS=class{constructor(e){this.persistence=e,this.ii=new Wo(t=>HD(t),zD),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.si=0,this.oi=new gp,this.targetCount=0,this._i=mp.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),Q.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new mp(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,Q.resolve()}updateTargetData(e,t){return this.hr(t),Q.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((a,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.ii.delete(a),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),Q.waitFor(o).next(()=>i)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return Q.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),Q.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(a=>{o.push(i.markPotentiallyOrphaned(e,a))}),Q.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),Q.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return Q.resolve(r)}containsKey(e,t){return Q.resolve(this.oi.containsKey(t))}};var My=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new FD(0),this.ci=!1,this.ci=!0,this.li=new qS,this.referenceDelegate=e(this),this.hi=new ZS(this),this.indexManager=new OS,this.remoteDocumentCache=(function(i){return new GS(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new NS(t),this.Ti=new HS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new zS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new WS(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){se("MemoryPersistence","Starting transaction:",e);let i=new QS(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return Q.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},QS=class extends oS{constructor(e){super(),this.currentSequenceNumber=e}},YS=class n{constructor(e){this.persistence=e,this.Ai=new gp,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw ye(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),Q.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),Q.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),Q.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.mi,r=>{let i=fe.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,Ne.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return Q.or([()=>Q.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},ky=class n{constructor(e,t){this.persistence=e,this.gi=new Wo(r=>U5(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=L9(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return Q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return Q.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?Q.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,a=>this.Sr(e,a,t).next(c=>{c||(r++,o.removeEntry(a,Ne.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),Q.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),Q.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),Q.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),Q.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=my(e.data.value)),t}Sr(e,t,r){return Q.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return Q.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var JS=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=Ze(),i=Ze();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var XS=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var eD=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return RO()?8:V5(hn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(a=>{o.result=a})}).next(()=>{if(o.result)return;let a=new XS;return this.ws(e,t,a).next(c=>{if(o.result=c,this.Rs)return this.Ss(e,t,a,c.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Hl()<=ze.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",zl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Q.resolve()):(Hl()<=ze.DEBUG&&se("QueryEngine","Query:",zl(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Hl()<=ze.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",zl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xi(t))):Q.resolve())}ps(e,t){if(DL(t))return Q.resolve(null);let r=Xi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=wS(t,null,"F"),r=Xi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let a=Ze(...o);return this.gs.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(l=>{let h=this.bs(t,c);return this.Ds(t,h,a,l.readTime)?this.ps(e,wS(t,null,"F")):this.vs(e,h,t,l)}))})))}ys(e,t,r,i){return DL(t)||i.isEqual(Ne.min())?Q.resolve(null):this.gs.getDocuments(e,r).next(o=>{let a=this.bs(t,o);return this.Ds(t,a,r,i)?Q.resolve(null):(Hl()<=ze.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),zl(t)),this.vs(e,a,t,N5(i,cp)).next(c=>c))})}bs(e,t){let r=new pn(FF(e));return t.forEach((i,o)=>{tw(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return Hl()<=ze.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",zl(t)),this.gs.getDocumentsMatchingQuery(e,t,Mc.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(a=>{o=o.insert(a.key,a)}),o))}};var KD="LocalStore",F9=3e8,tD=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Ot(Be),this.Ms=new Wo(o=>HD(o),zD),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $S(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function V9(n,e,t,r){return new tD(n,e,t,r)}function rV(n,e){return b(this,null,function*(){let t=Re(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let a=[],c=[],l=Ze();for(let h of i){a.push(h.batchId);for(let p of h.mutations)l=l.add(p.key)}for(let h of o){c.push(h.batchId);for(let p of h.mutations)l=l.add(p.key)}return t.localDocuments.getDocuments(r,l).next(h=>({Bs:h,removedBatchIds:a,addedBatchIds:c}))})})})}function j9(n,e){let t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(c,l,h,p){let _=h.batch,E=_.keys(),w=Q.resolve();return E.forEach(C=>{w=w.next(()=>p.getEntry(l,C)).next(k=>{let R=h.docVersions.get(C);st(R!==null,48541),k.version.compareTo(R)<0&&(_.applyToRemoteDocument(k,h),k.isValidDocument()&&(k.setReadTime(h.commitVersion),p.addEntry(k)))})}),w.next(()=>c.mutationQueue.removeMutationBatch(l,_))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let l=Ze();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(l=l.add(c.batch.mutations[h].key));return l})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function iV(n){let e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function U9(n,e){let t=Re(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let a=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let c=[];e.targetChanges.forEach((p,_)=>{let E=i.get(_);if(!E)return;c.push(t.hi.removeMatchingKeys(o,p.removedDocuments,_).next(()=>t.hi.addMatchingKeys(o,p.addedDocuments,_)));let w=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(_)!==null?w=w.withResumeToken(Nn.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):p.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(p.resumeToken,r)),i=i.insert(_,w),(function(k,R,j){return k.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=F9?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(E,w,p)&&c.push(t.hi.updateTargetData(o,w))});let l=Go(),h=Ze();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,p))}),c.push(B9(o,a,e.documentUpdates).next(p=>{l=p.Ls,h=p.ks})),!r.isEqual(Ne.min())){let p=t.hi.getLastRemoteSnapshotVersion(o).next(_=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(p)}return Q.waitFor(c).next(()=>a.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,l,h)).next(()=>l)}).then(o=>(t.Fs=i,o))}function B9(n,e,t){let r=Ze(),i=Ze();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let a=Go();return t.forEach((c,l)=>{let h=o.get(c);l.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(c)),l.isNoDocument()&&l.version.isEqual(Ne.min())?(e.removeEntry(c,l.readTime),a=a.insert(c,l)):!h.isValidDocument()||l.version.compareTo(h.version)>0||l.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(l),a=a.insert(c,l)):se(KD,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",l.version)}),{Ls:a,ks:i}})}function $9(n,e){let t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=VD),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function H9(n,e){let t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,Q.resolve(i)):t.hi.allocateTargetId(r).next(a=>(i=new pp(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function nD(n,e,t){return b(this,null,function*(){let r=Re(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!fd(a))throw a;se(KD,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function UL(n,e,t){let r=Re(n),i=Ne.min(),o=Ze();return r.persistence.runTransaction("Execute query","readwrite",a=>(function(l,h,p){let _=Re(l),E=_.Ms.get(p);return E!==void 0?Q.resolve(_.Fs.get(E)):_.hi.getTargetData(h,p)})(r,a,Xi(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(a,c.targetId).next(l=>{o=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(a,e,t?i:Ne.min(),t?o:Ze())).next(c=>(z9(r,r9(e),c),{documents:c,qs:o})))}function z9(n,e,t){let r=n.xs.get(e)||Ne.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var Ny=class{constructor(){this.activeTargetIds=u9()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var rD=class{constructor(){this.Fo=new Ny,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Ny,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var iD=class{xo(e){}shutdown(){}};var BL="ConnectivityMonitor",Oy=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){se(BL,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){se(BL,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var py=null;function oD(){return py===null?py=(function(){return 268435456+Math.round(2147483648*Math.random())})():py++,"0x"+py.toString(16)}var KC="RestConnection",q9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},sD=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Iy?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let a=oD(),c=this.Go(e,t.toUriEncodedString());se(KC,`Sending RPC '${e}' ${a}:`,c,r);let l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,i,o);let{host:h}=new URL(c),p=Ys(h);return this.jo(e,c,l,r,p).then(_=>(se(KC,`Received RPC '${e}' ${a}: `,_),_),_=>{throw la(KC,`RPC '${e}' ${a} failed with error: `,_,"url: ",c,"request:",r),_})}Jo(e,t,r,i,o,a){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+dd})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=q9[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var aD=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var kn="WebChannelConnection",cD=class extends sD{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let a=oD();return new Promise((c,l)=>{let h=new $C;h.setWithCredentials(!0),h.listenOnce(HC.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case tp.NO_ERROR:let _=h.getResponseJson();se(kn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(_)),c(_);break;case tp.TIMEOUT:se(kn,`RPC '${e}' ${a} timed out`),l(new oe(W.DEADLINE_EXCEEDED,"Request time out"));break;case tp.HTTP_ERROR:let E=h.getStatus();if(se(kn,`RPC '${e}' ${a} failed with status:`,E,"response text:",h.getResponseText()),E>0){let w=h.getResponseJson();Array.isArray(w)&&(w=w[0]);let C=w?.error;if(C&&C.status&&C.message){let k=(function(j){let K=j.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(K)>=0?K:W.UNKNOWN})(C.status);l(new oe(k,C.message))}else l(new oe(W.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new oe(W.UNAVAILABLE,"Connection failed."));break;default:ye(9055,{c_:e,streamId:a,l_:h.getLastErrorCode(),h_:h.getLastError()})}}finally{se(kn,`RPC '${e}' ${a} completed.`)}});let p=JSON.stringify(i);se(kn,`RPC '${e}' ${a} sending request:`,i),h.send(t,"POST",p,r,15)})}P_(e,t,r){let i=oD(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=WC(),c=qC(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(l.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;let p=o.join("");se(kn,`Creating RPC '${e}' stream ${i}: ${p}`,l);let _=a.createWebChannel(p,l);this.T_(_);let E=!1,w=!1,C=new aD({Ho:R=>{w?se(kn,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(E||(se(kn,`Opening RPC '${e}' stream ${i} transport.`),_.open(),E=!0),se(kn,`RPC '${e}' stream ${i} sending:`,R),_.send(R))},Yo:()=>_.close()}),k=(R,j,K)=>{R.listen(j,q=>{try{K(q)}catch(Z){setTimeout(()=>{throw Z},0)}})};return k(_,$l.EventType.OPEN,()=>{w||(se(kn,`RPC '${e}' stream ${i} transport opened.`),C.s_())}),k(_,$l.EventType.CLOSE,()=>{w||(w=!0,se(kn,`RPC '${e}' stream ${i} transport closed`),C.__(),this.I_(_))}),k(_,$l.EventType.ERROR,R=>{w||(w=!0,la(kn,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),C.__(new oe(W.UNAVAILABLE,"The operation could not be completed")))}),k(_,$l.EventType.MESSAGE,R=>{var j;if(!w){let K=R.data[0];st(!!K,16349);let q=K,Z=q?.error||((j=q[0])===null||j===void 0?void 0:j.error);if(Z){se(kn,`RPC '${e}' stream ${i} received error:`,Z);let pe=Z.status,Pe=(function(D){let P=Kt[D];if(P!==void 0)return KF(P)})(pe),M=Z.message;Pe===void 0&&(Pe=W.INTERNAL,M="Unknown error status: "+pe+" with message "+Z.message),w=!0,C.__(new oe(Pe,M)),_.close()}else se(kn,`RPC '${e}' stream ${i} received:`,K),C.a_(K)}}),k(c,zC.STAT_EVENT,R=>{R.stat===dy.PROXY?se(kn,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===dy.NOPROXY&&se(kn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.o_()},0),C}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function ZC(){return typeof document<"u"?document:null}function nw(n){return new xS(n,!0)}var Ly=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var $L="PersistentStream",Fy=class{constructor(e,t,r,i,o,a,c,l){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Ly(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return b(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return b(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return b(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(Ho(t.toString()),Ho("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new oe(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>b(this,null,function*(){this.state=0,this.start()}))}G_(e){return se($L,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(se($L,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},uD=class extends Fy{constructor(e,t,r,i,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=I9(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Ne.min();let a=o.targetChange;return a.targetIds&&a.targetIds.length?Ne.min():a.readTime?to(a.readTime):Ne.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=kS(this.serializer),t.addTarget=(function(o,a){let c,l=a.target;if(c=vS(l)?{documents:S9(o,l)}:{query:D9(o,l).Vt},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=ZF(o,a.resumeToken);let h=RS(o,a.expectedCount);h!==null&&(c.expectedCount=h)}else if(a.snapshotVersion.compareTo(Ne.min())>0){c.readTime=Ry(o,a.snapshotVersion.toTimestamp());let h=RS(o,a.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);let r=x9(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=kS(this.serializer),t.removeTarget=e,this.k_(t)}},lD=class extends Fy{constructor(e,t,r,i,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return st(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,st(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){st(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=C9(e.writeResults,e.commitTime),r=to(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=kS(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>T9(this.serializer,r))};this.k_(t)}};var dD=class{},hD=class extends dD{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new oe(W.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Wo(e,PS(t,r),i,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new oe(W.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Jo(e,PS(t,r),i,a,c,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new oe(W.UNKNOWN,a.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},fD=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ho(t),this._a=!1):se("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Fc="RemoteStore",pD=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(a=>{r.enqueueAndForget(()=>b(this,null,function*(){Vc(this)&&(se(Fc,"Restarting streams for network reachability change."),yield(function(l){return b(this,null,function*(){let h=Re(l);h.Ia.add(4),yield wp(h),h.Aa.set("Unknown"),h.Ia.delete(4),yield rw(h)})})(this))}))}),this.Aa=new fD(r,i)}};function rw(n){return b(this,null,function*(){if(Vc(n))for(let e of n.da)yield e(!0)})}function wp(n){return b(this,null,function*(){for(let e of n.da)yield e(!1)})}function oV(n,e){let t=Re(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),JD(t)?YD(t):pd(t).x_()&&QD(t,e))}function ZD(n,e){let t=Re(n),r=pd(t);t.Ta.delete(e),r.x_()&&sV(t,e),t.Ta.size===0&&(r.x_()?r.B_():Vc(t)&&t.Aa.set("Unknown"))}function QD(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}pd(n).H_(e)}function sV(n,e){n.Ra.$e(e),pd(n).Y_(e)}function YD(n){n.Ra=new AS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),pd(n).start(),n.Aa.aa()}function JD(n){return Vc(n)&&!pd(n).M_()&&n.Ta.size>0}function Vc(n){return Re(n).Ia.size===0}function aV(n){n.Ra=void 0}function W9(n){return b(this,null,function*(){n.Aa.set("Online")})}function G9(n){return b(this,null,function*(){n.Ta.forEach((e,t)=>{QD(n,e)})})}function K9(n,e){return b(this,null,function*(){aV(n),JD(n)?(n.Aa.la(e),YD(n)):n.Aa.set("Unknown")})}function Z9(n,e,t){return b(this,null,function*(){if(n.Aa.set("Online"),e instanceof Ay&&e.state===2&&e.cause)try{yield(function(i,o){return b(this,null,function*(){let a=o.cause;for(let c of o.targetIds)i.Ta.has(c)&&(yield i.remoteSyncer.rejectListen(c,a),i.Ta.delete(c),i.Ra.removeTarget(c))})})(n,e)}catch(r){se(Fc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Vy(n,r)}else if(e instanceof Kl?n.Ra.Ye(e):e instanceof Dy?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Ne.min()))try{let r=yield iV(n.localStore);t.compareTo(r)>=0&&(yield(function(o,a){let c=o.Ra.Pt(a);return c.targetChanges.forEach((l,h)=>{if(l.resumeToken.approximateByteSize()>0){let p=o.Ta.get(h);p&&o.Ta.set(h,p.withResumeToken(l.resumeToken,a))}}),c.targetMismatches.forEach((l,h)=>{let p=o.Ta.get(l);if(!p)return;o.Ta.set(l,p.withResumeToken(Nn.EMPTY_BYTE_STRING,p.snapshotVersion)),sV(o,l);let _=new pp(p.target,l,h,p.sequenceNumber);QD(o,_)}),o.remoteSyncer.applyRemoteEvent(c)})(n,t))}catch(r){se(Fc,"Failed to raise snapshot:",r),yield Vy(n,r)}})}function Vy(n,e,t){return b(this,null,function*(){if(!fd(e))throw e;n.Ia.add(1),yield wp(n),n.Aa.set("Offline"),t||(t=()=>iV(n.localStore)),n.asyncQueue.enqueueRetryable(()=>b(null,null,function*(){se(Fc,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield rw(n)}))})}function cV(n,e){return e().catch(t=>Vy(n,t,e))}function iw(n){return b(this,null,function*(){let e=Re(n),t=ha(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:VD;for(;Q9(e);)try{let i=yield $9(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,Y9(e,i)}catch(i){yield Vy(e,i)}uV(e)&&lV(e)})}function Q9(n){return Vc(n)&&n.Pa.length<10}function Y9(n,e){n.Pa.push(e);let t=ha(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function uV(n){return Vc(n)&&!ha(n).M_()&&n.Pa.length>0}function lV(n){ha(n).start()}function J9(n){return b(this,null,function*(){ha(n).na()})}function X9(n){return b(this,null,function*(){let e=ha(n);for(let t of n.Pa)e.X_(t.mutations)})}function e7(n,e,t){return b(this,null,function*(){let r=n.Pa.shift(),i=TS.from(r,e,t);yield cV(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield iw(n)})}function t7(n,e){return b(this,null,function*(){e&&ha(n).Z_&&(yield(function(r,i){return b(this,null,function*(){if((function(a){return g9(a)&&a!==W.ABORTED})(i.code)){let o=r.Pa.shift();ha(r).N_(),yield cV(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield iw(r)}})})(n,e)),uV(n)&&lV(n)})}function HL(n,e){return b(this,null,function*(){let t=Re(n);t.asyncQueue.verifyOperationInProgress(),se(Fc,"RemoteStore received new credentials");let r=Vc(t);t.Ia.add(3),yield wp(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield rw(t)})}function n7(n,e){return b(this,null,function*(){let t=Re(n);e?(t.Ia.delete(2),yield rw(t)):e||(t.Ia.add(2),yield wp(t),t.Aa.set("Unknown"))})}function pd(n){return n.Va||(n.Va=(function(t,r,i){let o=Re(t);return o.ia(),new uD(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:W9.bind(null,n),e_:G9.bind(null,n),n_:K9.bind(null,n),J_:Z9.bind(null,n)}),n.da.push(e=>b(null,null,function*(){e?(n.Va.N_(),JD(n)?YD(n):n.Aa.set("Unknown")):(yield n.Va.stop(),aV(n))}))),n.Va}function ha(n){return n.ma||(n.ma=(function(t,r,i){let o=Re(t);return o.ia(),new lD(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:J9.bind(null,n),n_:t7.bind(null,n),ea:X9.bind(null,n),ta:e7.bind(null,n)}),n.da.push(e=>b(null,null,function*(){e?(n.ma.N_(),yield iw(n)):(yield n.ma.stop(),n.Pa.length>0&&(se(Fc,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var mD=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new $o,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let a=Date.now()+r,c=new n(e,t,a,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function XD(n,e){if(Ho("AsyncQueue",`${e}: ${n}`),fd(n))return new oe(W.UNAVAILABLE,`${e}: ${n}`);throw n}var jy=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||fe.comparator(t.key,r.key):(t,r)=>fe.comparator(t.key,r.key),this.keyedMap=np(),this.sortedSet=new Ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Uy=class{constructor(){this.fa=new Ot(fe.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):ye(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},ad=class n{constructor(e,t,r,i,o,a,c,l,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,i,o){let a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new n(e,t,jy.emptySet(t),a,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ew(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var gD=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},_D=class{constructor(){this.queries=zL(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=Re(t),o=i.queries;i.queries=zL(),o.forEach((a,c)=>{for(let l of c.wa)l.onError(r)})})(this,new oe(W.ABORTED,"Firestore shutting down"))}};function zL(){return new Wo(n=>LF(n),ew)}function r7(n,e){return b(this,null,function*(){let t=Re(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new gD,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(a){let c=XD(a,`Initialization of query '${zl(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&eA(t)})}function i7(n,e){return b(this,null,function*(){let t=Re(n),r=e.query,i=3,o=t.queries.get(r);if(o){let a=o.wa.indexOf(e);a>=0&&(o.wa.splice(a,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function o7(n,e){let t=Re(n),r=!1;for(let i of e){let o=i.query,a=t.queries.get(o);if(a){for(let c of a.wa)c.Ca(i)&&(r=!0);a.ya=i}}r&&eA(t)}function s7(n,e,t){let r=Re(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function eA(n){n.Da.forEach(e=>{e.next()})}var vD,qL;(qL=vD||(vD={})).Fa="default",qL.Cache="cache";var yD=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ad(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=ad.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==vD.Cache}};var By=class{constructor(e){this.key=e}},$y=class{constructor(e){this.key=e}},wD=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ze(),this.mutatedKeys=Ze(),this.Xa=FF(e),this.eu=new jy(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new Uy,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,a=i,c=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,_)=>{let E=i.get(p),w=tw(this.query,_)?_:null,C=!!E&&this.mutatedKeys.has(E.key),k=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations),R=!1;E&&w?E.data.isEqual(w.data)?C!==k&&(r.track({type:3,doc:w}),R=!0):this.iu(E,w)||(r.track({type:2,doc:w}),R=!0,(l&&this.Xa(w,l)>0||h&&this.Xa(w,h)<0)&&(c=!0)):!E&&w?(r.track({type:0,doc:w}),R=!0):E&&!w&&(r.track({type:1,doc:E}),R=!0,(l||h)&&(c=!0)),R&&(w?(a=a.add(w),o=k?o.add(p):o.delete(p)):(a=a.delete(p),o=o.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),o=o.delete(p.key),r.track({type:1,doc:p})}return{eu:a,ru:r,Ds:c,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let a=e.ru.pa();a.sort((p,_)=>(function(w,C){let k=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye(20277,{At:R})}};return k(w)-k(C)})(p.type,_.type)||this.Xa(p.doc,_.doc)),this.su(r),i=i!=null&&i;let c=t&&!i?this.ou():[],l=this.Za.size===0&&this.current&&!i?1:0,h=l!==this.Ya;return this.Ya=l,a.length!==0||h?{snapshot:new ad(this.query,e.eu,o,a,e.mutatedKeys,l===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Uy,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=Ze(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new $y(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new By(r))}),t}uu(e){this.Ha=e.qs,this.Za=Ze();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return ad.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},tA="SyncEngine",ED=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},bD=class{constructor(e){this.key=e,this.lu=!1}},ID=class{constructor(e,t,r,i,o,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new Wo(c=>LF(c),ew),this.Tu=new Map,this.Iu=new Set,this.du=new Ot(fe.comparator),this.Eu=new Map,this.Au=new gp,this.Ru={},this.Vu=new Map,this.mu=mp.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function a7(n,e,t=!0){return b(this,null,function*(){let r=gV(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield dV(r,e,t,!0),i})}function c7(n,e){return b(this,null,function*(){let t=gV(n);yield dV(t,e,!0,!1)})}function dV(n,e,t,r){return b(this,null,function*(){let i=yield H9(n.localStore,Xi(e)),o=i.targetId,a=n.sharedClientState.addLocalQueryTarget(o,t),c;return r&&(c=yield u7(n,e,o,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&oV(n.remoteStore,i),c})}function u7(n,e,t,r,i){return b(this,null,function*(){n.gu=(_,E,w)=>(function(k,R,j,K){return b(this,null,function*(){let q=R.view.nu(j);q.Ds&&(q=yield UL(k.localStore,R.query,!1).then(({documents:M})=>R.view.nu(M,q)));let Z=K&&K.targetChanges.get(R.targetId),pe=K&&K.targetMismatches.get(R.targetId)!=null,Pe=R.view.applyChanges(q,k.isPrimaryClient,Z,pe);return GL(k,R.targetId,Pe._u),Pe.snapshot})})(n,_,E,w);let o=yield UL(n.localStore,e,!0),a=new wD(e,o.qs),c=a.nu(o.documents),l=fp.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),h=a.applyChanges(c,n.isPrimaryClient,l);GL(n,t,h._u);let p=new ED(e,t,a);return n.Pu.set(e,p),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),h.snapshot})}function l7(n,e,t){return b(this,null,function*(){let r=Re(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(a=>!ew(a,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield nD(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ZD(r.remoteStore,i.targetId),TD(r,i.targetId)}).catch(hd))):(TD(r,i.targetId),yield nD(r.localStore,i.targetId,!0))})}function d7(n,e){return b(this,null,function*(){let t=Re(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ZD(t.remoteStore,r.targetId))})}function h7(n,e,t){return b(this,null,function*(){let r=y7(n);try{let i=yield(function(a,c){let l=Re(a),h=Jt.now(),p=c.reduce((w,C)=>w.add(C.key),Ze()),_,E;return l.persistence.runTransaction("Locally write mutations","readwrite",w=>{let C=Go(),k=Ze();return l.Os.getEntries(w,p).next(R=>{C=R,C.forEach((j,K)=>{K.isValidDocument()||(k=k.add(j))})}).next(()=>l.localDocuments.getOverlayedDocuments(w,C)).next(R=>{_=R;let j=[];for(let K of c){let q=m9(K,_.get(K.key).overlayedDocument);q!=null&&j.push(new ro(K.key,q,xF(q.value.mapValue),eo.exists(!0)))}return l.mutationQueue.addMutationBatch(w,h,j,c)}).next(R=>{E=R;let j=R.applyToLocalDocumentSet(_,k);return l.documentOverlayCache.saveOverlays(w,R.batchId,j)})}).then(()=>({batchId:E.batchId,changes:jF(_)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(a,c,l){let h=a.Ru[a.currentUser.toKey()];h||(h=new Ot(Be)),h=h.insert(c,l),a.Ru[a.currentUser.toKey()]=h})(r,i.batchId,t),yield Ep(r,i.changes),yield iw(r.remoteStore)}catch(i){let o=XD(i,"Failed to persist write");t.reject(o)}})}function hV(n,e){return b(this,null,function*(){let t=Re(n);try{let r=yield U9(t.localStore,e);e.targetChanges.forEach((i,o)=>{let a=t.Eu.get(o);a&&(st(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.lu=!0:i.modifiedDocuments.size>0?st(a.lu,14607):i.removedDocuments.size>0&&(st(a.lu,42227),a.lu=!1))}),yield Ep(t,r,e)}catch(r){yield hd(r)}})}function WL(n,e,t){let r=Re(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,a)=>{let c=a.view.va(e);c.snapshot&&i.push(c.snapshot)}),(function(a,c){let l=Re(a);l.onlineState=c;let h=!1;l.queries.forEach((p,_)=>{for(let E of _.wa)E.va(c)&&(h=!0)}),h&&eA(l)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function f7(n,e,t){return b(this,null,function*(){let r=Re(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let a=new Ot(fe.comparator);a=a.insert(o,di.newNoDocument(o,Ne.min()));let c=Ze().add(o),l=new Sy(Ne.min(),new Map,new Ot(Be),a,c);yield hV(r,l),r.du=r.du.remove(o),r.Eu.delete(e),nA(r)}else yield nD(r.localStore,e,!1).then(()=>TD(r,e,t)).catch(hd)})}function p7(n,e){return b(this,null,function*(){let t=Re(n),r=e.batch.batchId;try{let i=yield j9(t.localStore,e);pV(t,r,null),fV(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ep(t,i)}catch(i){yield hd(i)}})}function m7(n,e,t){return b(this,null,function*(){let r=Re(n);try{let i=yield(function(a,c){let l=Re(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return l.mutationQueue.lookupMutationBatch(h,c).next(_=>(st(_!==null,37113),p=_.keys(),l.mutationQueue.removeMutationBatch(h,_))).next(()=>l.mutationQueue.performConsistencyCheck(h)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(h,p,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>l.localDocuments.getDocuments(h,p))})})(r.localStore,e);pV(r,e,t),fV(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ep(r,i)}catch(i){yield hd(i)}})}function fV(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function pV(n,e,t){let r=Re(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function TD(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||mV(n,r)})}function mV(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(ZD(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),nA(n))}function GL(n,e,t){for(let r of t)r instanceof By?(n.Au.addReference(r.key,e),g7(n,r)):r instanceof $y?(se(tA,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||mV(n,r.key)):ye(19791,{yu:r})}function g7(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(se(tA,"New document in limbo: "+t),n.Iu.add(r),nA(n))}function nA(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new fe(St.fromString(e)),r=n.mu.next();n.Eu.set(r,new bD(t)),n.du=n.du.insert(t,r),oV(n.remoteStore,new pp(Xi(qD(t.path)),r,"TargetPurposeLimboResolution",FD.ue))}}function Ep(n,e,t){return b(this,null,function*(){let r=Re(n),i=[],o=[],a=[];r.Pu.isEmpty()||(r.Pu.forEach((c,l)=>{a.push(r.gu(l,e,t).then(h=>{var p;if((h||t)&&r.isPrimaryClient){let _=h?!h.fromCache:(p=t?.targetChanges.get(l.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(l.targetId,_?"current":"not-current")}if(h){i.push(h);let _=JS.Es(l.targetId,h);o.push(_)}}))}),yield Promise.all(a),r.hu.J_(i),yield(function(l,h){return b(this,null,function*(){let p=Re(l);try{yield p.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>Q.forEach(h,E=>Q.forEach(E.Is,w=>p.persistence.referenceDelegate.addReference(_,E.targetId,w)).next(()=>Q.forEach(E.ds,w=>p.persistence.referenceDelegate.removeReference(_,E.targetId,w)))))}catch(_){if(!fd(_))throw _;se(KD,"Failed to update sequence numbers: "+_)}for(let _ of h){let E=_.targetId;if(!_.fromCache){let w=p.Fs.get(E),C=w.snapshotVersion,k=w.withLastLimboFreeSnapshotVersion(C);p.Fs=p.Fs.insert(E,k)}}})})(r.localStore,o))})}function _7(n,e){return b(this,null,function*(){let t=Re(n);if(!t.currentUser.isEqual(e)){se(tA,"User change. New user:",e.toKey());let r=yield rV(t.localStore,e);t.currentUser=e,(function(o,a){o.Vu.forEach(c=>{c.forEach(l=>{l.reject(new oe(W.CANCELLED,a))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ep(t,r.Bs)}})}function v7(n,e){let t=Re(n),r=t.Eu.get(e);if(r&&r.lu)return Ze().add(r.key);{let i=Ze(),o=t.Tu.get(e);if(!o)return i;for(let a of o){let c=t.Pu.get(a);i=i.unionWith(c.view.tu)}return i}}function gV(n){let e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=hV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=v7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=f7.bind(null,e),e.hu.J_=o7.bind(null,e.eventManager),e.hu.pu=s7.bind(null,e.eventManager),e}function y7(n){let e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=p7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=m7.bind(null,e),e}var _V=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return b(this,null,function*(){this.serializer=nw(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return V9(this.persistence,new eD,t.initialUser,this.serializer)}Du(t){return new My(YS.Vi,this.serializer)}bu(t){return new rD}terminate(){return b(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),CD=class extends _V{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){st(this.persistence.referenceDelegate instanceof ky,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new VS(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?jr.withCacheSize(this.cacheSizeBytes):jr.DEFAULT;return new My(r=>ky.Vi(r,t),this.serializer)}};var w7=(()=>{class n{initialize(t,r){return b(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>WL(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=_7.bind(null,this.syncEngine),yield n7(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new _D})()}createDatastore(t){let r=nw(t.databaseInfo.databaseId),i=(function(a){return new cD(a)})(t.databaseInfo);return(function(a,c,l,h){return new hD(a,c,l,h)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,a,c,l){return new pD(i,o,a,c,l)})(this.localStore,this.datastore,t.asyncQueue,r=>WL(this.syncEngine,r,0),(function(){return Oy.C()?new Oy:new iD})())}createSyncEngine(t,r){return(function(o,a,c,l,h,p,_){let E=new ID(o,a,c,l,h,p);return _&&(E.fu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return b(this,null,function*(){var t,r;yield(function(o){return b(this,null,function*(){let a=Re(o);se(Fc,"RemoteStore shutting down."),a.Ia.add(5),yield wp(a),a.Ea.shutdown(),a.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var SD=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ho("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var fa="FirestoreClient",DD=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=fn.UNAUTHENTICATED,this.clientId=ap.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,a=>b(this,null,function*(){se(fa,"Received user=",a.uid),yield this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,a=>(se(fa,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new $o;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>b(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=XD(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function QC(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),se(fa,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>b(null,null,function*(){r.isEqual(i)||(yield rV(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{la("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{se("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{la("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function KL(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield E7(n);se(fa,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>HL(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>HL(e.remoteStore,i)),n._onlineComponents=e})}function E7(n){return b(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){se(fa,"Using user provided OfflineComponentProvider");try{yield QC(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===W.FAILED_PRECONDITION||i.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;la("Error using user provided cache. Falling back to memory cache: "+t),yield QC(n,new _V)}}else se(fa,"Using default OfflineComponentProvider"),yield QC(n,new CD(void 0));return n._offlineComponents})}function vV(n){return b(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(se(fa,"Using user provided OnlineComponentProvider"),yield KL(n,n._uninitializedComponentsProvider._online)):(se(fa,"Using default OnlineComponentProvider"),yield KL(n,new w7))),n._onlineComponents})}function b7(n){return vV(n).then(e=>e.syncEngine)}function ZL(n){return b(this,null,function*(){let e=yield vV(n),t=e.eventManager;return t.onListen=a7.bind(null,e.syncEngine),t.onUnlisten=l7.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=c7.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=d7.bind(null,e.syncEngine),t})}function yV(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var QL=new Map;var wV="firestore.googleapis.com",YL=!0,Hy=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new oe(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=wV,this.ssl=YL}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:YL;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=nV;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<O9)throw new oe(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}k5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yV((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new oe(W.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new oe(W.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new oe(W.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},cd=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new YC;switch(r.type){case"firstParty":return new tS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new oe(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return b(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=QL.get(t);r&&(se("ComponentProvider","Removing Datastore"),QL.delete(t),r.terminate())})(this),Promise.resolve()}};function EV(n,e,t,r={}){var i;n=Yi(n,cd);let o=Ys(e),a=n._getSettings(),c=Object.assign(Object.assign({},a),{emulatorOptions:n._getEmulatorOptions()}),l=`${e}:${t}`;o&&(Rv(`https://${l}`),Pv("Firestore",!0)),a.host!==wV&&a.host!==l&&la("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let h=Object.assign(Object.assign({},a),{host:l,ssl:o,emulatorOptions:r});if(!Wi(h,c)&&(n._setSettings(h),r.mockUserToken)){let p,_;if(typeof r.mockUserToken=="string")p=r.mockUserToken,_=fn.MOCK_USER;else{p=IO(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new oe(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new fn(E)}n._authCredentials=new JC(new vy(p,_))}}var ud=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},mn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(yp(t,n._jsonSchema))return new n(e,r||null,new fe(St.fromString(t.referencePath)))}};mn._jsonSchemaVersion="firestore/documentReference/1.0",mn._jsonSchema={type:Yt("string",mn._jsonSchemaVersion),referencePath:Yt("string")};var sa=class n extends ud{constructor(e,t,r){super(e,t,qD(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new mn(this.firestore,null,new fe(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function bV(n,e,...t){if(n=Bt(n),oF("collection","path",e),n instanceof cd){let r=St.fromString(e,...t);return pL(r),new sa(n,null,r)}{if(!(n instanceof mn||n instanceof sa))throw new oe(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(St.fromString(e,...t));return pL(r),new sa(n.firestore,null,r)}}function rA(n,e,...t){if(n=Bt(n),arguments.length===1&&(e=ap.newId()),oF("doc","path",e),n instanceof cd){let r=St.fromString(e,...t);return fL(r),new mn(n,null,new fe(r))}{if(!(n instanceof mn||n instanceof sa))throw new oe(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(St.fromString(e,...t));return fL(r),new mn(n.firestore,n instanceof sa?n.converter:null,new fe(r))}}var JL="AsyncQueue",zy=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Ly(this,"async_queue_retry"),this.oc=()=>{let r=ZC();r&&se(JL,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=ZC();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=ZC();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new $o;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return b(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!fd(e))throw e;se(JL,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Ho("INTERNAL UNHANDLED ERROR: ",XL(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=mD.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&ye(47125,{hc:XL(this.tc)})}verifyOperationInProgress(){}Pc(){return b(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function XL(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function eF(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var Ko=class extends cd{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new zy,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return b(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new zy(e),this._firestoreClient=void 0,yield e}})}};function IV(n,e){let t=typeof n=="object"?n:ea(),r=typeof n=="string"?n:e||Iy,i=Xs(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=bO("firestore");o&&EV(i,...o)}return i}function TV(n){if(n._terminated)throw new oe(W.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||I7(n),n._firestoreClient}function I7(n){var e,t,r;let i=n._freezeSettings(),o=(function(c,l,h,p){return new sS(c,l,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,yV(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new DD(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(c){let l=c?._online.build();return{_offline:c?._offline.build(l),_online:l}})(n._componentsProvider))}var aa=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Nn.fromBase64String(e))}catch(t){throw new oe(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(yp(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};aa._jsonSchemaVersion="firestore/bytes/1.0",aa._jsonSchema={type:Yt("string",aa._jsonSchemaVersion),bytes:Yt("string")};var ld=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new oe(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Er(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var _p=class{constructor(e){this._methodName=e}};var ca=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new oe(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new oe(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(yp(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};ca._jsonSchemaVersion="firestore/geoPoint/1.0",ca._jsonSchema={type:Yt("string",ca._jsonSchemaVersion),latitude:Yt("number"),longitude:Yt("number")};var ua=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(yp(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new oe(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};ua._jsonSchemaVersion="firestore/vectorValue/1.0",ua._jsonSchema={type:Yt("string",ua._jsonSchemaVersion),vectorValues:Yt("object")};var T7=/^__.*__$/,AD=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ro(e,this.data,this.fieldMask,t,this.fieldTransforms):new Lc(e,this.data,t,this.fieldTransforms)}},qy=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ro(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function CV(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye(40011,{Ec:n})}}var xD=class n{constructor(e,t,r,i,o,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Gy(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(CV(this.Ec)&&T7.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},RD=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||nw(e)}Dc(e,t,r,i=!1){return new xD({Ec:e,methodName:t,bc:r,path:Er.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ow(n){let e=n._freezeSettings(),t=nw(n._databaseId);return new RD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function SV(n,e,t,r,i,o={}){let a=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);iA("Data must be an object, but it was:",a,r);let c=DV(r,a),l,h;if(o.merge)l=new Ur(a.fieldMask),h=a.fieldTransforms;else if(o.mergeFields){let p=[];for(let _ of o.mergeFields){let E=PD(e,_,t);if(!a.contains(E))throw new oe(W.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);xV(p,E)||p.push(E)}l=new Ur(p),h=a.fieldTransforms.filter(_=>l.covers(_.field))}else l=null,h=a.fieldTransforms;return new AD(new wr(c),l,h)}var Wy=class n extends _p{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function C7(n,e,t,r){let i=n.Dc(1,e,t);iA("Data must be an object, but it was:",i,r);let o=[],a=wr.empty();pa(r,(l,h)=>{let p=oA(e,l,t);h=Bt(h);let _=i.gc(p);if(h instanceof Wy)o.push(p);else{let E=bp(h,_);E!=null&&(o.push(p),a.set(p,E))}});let c=new Ur(o);return new qy(a,c,i.fieldTransforms)}function S7(n,e,t,r,i,o){let a=n.Dc(1,e,t),c=[PD(e,r,t)],l=[i];if(o.length%2!=0)throw new oe(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<o.length;E+=2)c.push(PD(e,o[E])),l.push(o[E+1]);let h=[],p=wr.empty();for(let E=c.length-1;E>=0;--E)if(!xV(h,c[E])){let w=c[E],C=l[E];C=Bt(C);let k=a.gc(w);if(C instanceof Wy)h.push(w);else{let R=bp(C,k);R!=null&&(h.push(w),p.set(w,R))}}let _=new Ur(h);return new qy(p,_,a.fieldTransforms)}function D7(n,e,t,r=!1){return bp(t,n.Dc(r?4:3,e))}function bp(n,e){if(AV(n=Bt(n)))return iA("Unsupported field value:",e,n),DV(n,e);if(n instanceof _p)return(function(r,i){if(!CV(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],a=0;for(let c of r){let l=bp(c,i.yc(a));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),a++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=Bt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return l9(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Jt.fromDate(r);return{timestampValue:Ry(i.serializer,o)}}if(r instanceof Jt){let o=new Jt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ry(i.serializer,o)}}if(r instanceof ca)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof aa)return{bytesValue:ZF(i.serializer,r._byteString)};if(r instanceof mn){let o=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(o))throw i.wc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:GD(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ua)return(function(a,c){return{mapValue:{fields:{[UD]:{stringValue:BD},[Jl]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw c.wc("VectorValues must only contain numeric values.");return WD(c.serializer,h)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${Yy(r)}`)})(n,e)}function DV(n,e){let t={};return EF(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pa(n,(r,i)=>{let o=bp(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function AV(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Jt||n instanceof ca||n instanceof aa||n instanceof mn||n instanceof _p||n instanceof ua)}function iA(n,e,t){if(!AV(t)||!sF(t)){let r=Yy(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function PD(n,e,t){if((e=Bt(e))instanceof ld)return e._internalPath;if(typeof e=="string")return oA(n,e);throw Gy("Field path arguments must be of type string or ",n,!1,void 0,t)}var A7=new RegExp("[~\\*/\\[\\]]");function oA(n,e,t){if(e.search(A7)>=0)throw Gy(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ld(...e.split("."))._internalPath}catch{throw Gy(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Gy(n,e,t,r,i){let o=r&&!r.isEmpty(),a=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(o||a)&&(l+=" (found",o&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new oe(W.INVALID_ARGUMENT,c+n+l)}function xV(n,e){return n.some(t=>t.isEqual(e))}var Ky=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new MD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(sA("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},MD=class extends Ky{data(){return super.data()}};function sA(n,e){return typeof e=="string"?oA(n,e):e instanceof ld?e._internalPath:e._delegate._internalPath}function x7(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new oe(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var vp=class{},kD=class extends vp{};function RV(n,e,...t){let r=[];e instanceof vp&&r.push(e),r=r.concat(t),(function(o){let a=o.filter(l=>l instanceof ND).length,c=o.filter(l=>l instanceof Zy).length;if(a>1||a>0&&c>0)throw new oe(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var Zy=class n extends kD{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return MV(e._query,t),new ud(e.firestore,e.converter,yS(e._query,t))}_parse(e){let t=ow(e.firestore);return(function(o,a,c,l,h,p,_){let E;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new oe(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){nF(_,p);let C=[];for(let k of _)C.push(tF(l,o,k));E={arrayValue:{values:C}}}else E=tF(l,o,_)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||nF(_,p),E=D7(c,a,_,p==="in"||p==="not-in");return Qt.create(h,p,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function PV(n,e,t){let r=e,i=sA("where",n);return Zy._create(i,r,t)}var ND=class n extends vp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:hi.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let a=i,c=o.getFlattenedFilters();for(let l of c)MV(a,l),a=yS(a,l)})(e._query,t),new ud(e.firestore,e.converter,yS(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function tF(n,e,t){if(typeof(t=Bt(t))=="string"){if(t==="")throw new oe(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!OF(e)&&t.indexOf("/")!==-1)throw new oe(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(St.fromString(t));if(!fe.isDocumentKey(r))throw new oe(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return EL(n,new fe(r))}if(t instanceof mn)return EL(n,t._key);throw new oe(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yy(t)}.`)}function nF(n,e){if(!Array.isArray(n)||n.length===0)throw new oe(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function MV(n,e){let t=(function(i,o){for(let a of i)for(let c of a.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new oe(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var OD=class{convertValue(e,t="none"){switch(da(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ye(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return pa(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Jl].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>Ct(a.doubleValue));return new ua(o)}convertGeoPoint(e){return new ca(Ct(e.latitude),Ct(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Xy(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(lp(e));default:return null}}convertTimestamp(e){let t=zo(e);return new Jt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=St.fromString(e);st(tV(r),9688,{name:e});let i=new Ty(r.get(1),r.get(3)),o=new fe(r.popFirst(5));return i.isEqual(t)||Ho(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function kV(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var xc=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Rc=class n extends Ky{constructor(e,t,r,i,o,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Zl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(sA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Rc._jsonSchemaVersion="firestore/documentSnapshot/1.0",Rc._jsonSchema={type:Yt("string",Rc._jsonSchemaVersion),bundleSource:Yt("string","DocumentSnapshot"),bundleName:Yt("string"),bundle:Yt("string")};var Zl=class extends Rc{data(e={}){return super.data(e)}},Ql=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new xc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Zl(this._firestore,this._userDataWriter,r.key,r,new xc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new oe(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(c=>{let l=new Zl(i._firestore,i._userDataWriter,c.doc.key,c.doc,new xc(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let l=new Zl(i._firestore,i._userDataWriter,c.doc.key,c.doc,new xc(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),h=-1,p=-1;return c.type!==0&&(h=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),p=a.indexOf(c.doc.key)),{type:R7(c.type),doc:l,oldIndex:h,newIndex:p}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ap.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function R7(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye(61501,{type:n})}}Ql._jsonSchemaVersion="firestore/querySnapshot/1.0",Ql._jsonSchema={type:Yt("string",Ql._jsonSchemaVersion),bundleSource:Yt("string","QuerySnapshot"),bundleName:Yt("string"),bundle:Yt("string")};var Qy=class extends OD{constructor(e){super(),this.firestore=e}convertBytes(e){return new aa(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new mn(this.firestore,null,t)}};function NV(n,e,t){n=Yi(n,mn);let r=Yi(n.firestore,Ko),i=kV(n.converter,e,t);return sw(r,[SV(ow(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,eo.none())])}function OV(n,e,t,...r){n=Yi(n,mn);let i=Yi(n.firestore,Ko),o=ow(i),a;return a=typeof(e=Bt(e))=="string"||e instanceof ld?S7(o,"updateDoc",n._key,e,t,r):C7(o,"updateDoc",n._key,e),sw(i,[a.toMutation(n._key,eo.exists(!0))])}function LV(n){return sw(Yi(n.firestore,Ko),[new hp(n._key,eo.none())])}function FV(n,e){let t=Yi(n.firestore,Ko),r=rA(n),i=kV(n.converter,e);return sw(t,[SV(ow(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,eo.exists(!1))]).then(()=>r)}function aA(n,...e){var t,r,i;n=Bt(n);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||eF(e[a])||(o=e[a++]);let c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(eF(e[a])){let _=e[a];e[a]=(t=_.next)===null||t===void 0?void 0:t.bind(_),e[a+1]=(r=_.error)===null||r===void 0?void 0:r.bind(_),e[a+2]=(i=_.complete)===null||i===void 0?void 0:i.bind(_)}let l,h,p;if(n instanceof mn)h=Yi(n.firestore,Ko),p=qD(n._key.path),l={next:_=>{e[a]&&e[a](P7(h,n,_))},error:e[a+1],complete:e[a+2]};else{let _=Yi(n,ud);h=Yi(_.firestore,Ko),p=_._query;let E=new Qy(h);l={next:w=>{e[a]&&e[a](new Ql(h,E,_,w))},error:e[a+1],complete:e[a+2]},x7(n._query)}return(function(E,w,C,k){let R=new SD(k),j=new yD(w,R,C);return E.asyncQueue.enqueueAndForget(()=>b(null,null,function*(){return r7(yield ZL(E),j)})),()=>{R.Ou(),E.asyncQueue.enqueueAndForget(()=>b(null,null,function*(){return i7(yield ZL(E),j)}))}})(TV(h),p,c,l)}function sw(n,e){return(function(r,i){let o=new $o;return r.asyncQueue.enqueueAndForget(()=>b(null,null,function*(){return h7(yield b7(r),i,o)})),o.promise})(TV(n),e)}function P7(n,e,t){let r=t.docs.get(e._key),i=new Qy(n);return new Rc(n,i,e._key,r,new xc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){dd=i})(ci),er(new In("firestore",(r,{instanceIdentifier:i,options:o})=>{let a=r.getProvider("app").getImmediate(),c=new Ko(new XC(r.getProvider("auth-internal")),new nS(a,r.getProvider("app-check-internal")),(function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new oe(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ty(h.options.projectId,p)})(a,i),a);return o=Object.assign({useFetchStreams:t},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),lt(uL,lL,e),lt(uL,lL,"esm2017")})();var aw=function(){return aw=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},aw.apply(this,arguments)};var N7={includeMetadataChanges:!1};function cA(n,e){return e===void 0&&(e=N7),new De(function(t){var r=aA(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function VV(n){return cA(n,{includeMetadataChanges:!0})}function jV(n,e){return e===void 0&&(e={}),VV(n).pipe(Ae(function(t){return uA(t,e)}))}function uA(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:aw(aw({},r),(t={},t[e.idField]=n.id,t))}function UV(n){return cA(n,{includeMetadataChanges:!0}).pipe(Ae(function(e){return e.docs}))}function BV(n,e){return e===void 0&&(e={}),UV(n).pipe(Ae(function(t){return t.map(function(r){return uA(r,e)})}))}var Zo=class{constructor(e){return e}},$V="firestore",lA=class{constructor(){return Vl($V)}};var dA=new ae("angularfire2.firestore-instances");function O7(n,e){let t=Hf($V,n,e);return t&&new Zo(t)}function L7(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Zo(r)}}var F7={provide:lA,deps:[[new Yn,dA]]},V7={provide:Zo,useFactory:O7,deps:[[new Yn,dA],Oo]};function HV(n,...e){return lt("angularfire",ta.full,"fst"),Xr([V7,F7,{provide:dA,useFactory:L7(n),multi:!0,deps:[Xe,Nt,na,Ic,[new Yn,ep],[new Yn,jl],...e]}])}var hA=$t(BV,!0);var cw=$t(jV,!0);var zV=$t(FV,!0,2);var uw=$t(bV,!0,2);var qV=$t(LV,!0,2);var jc=$t(rA,!0,2);var WV=$t(IV,!0);var fA=$t(RV,!0,2);var GV=$t(NV,!0,2);var KV=$t(OV,!0,2);var pA=$t(PV,!0,2);var Br=class n{auth=H(jo);firestore=H(Zo);user$;constructor(){this.user$=uy(this.auth).pipe(Vt(e=>{if(e){let t=jc(this.firestore,`users/${e.uid}`);return cw(t)}else return he(null)}))}googleSignin(){return b(this,null,function*(){let e=new kC;try{let t=yield oL(this.auth,e);yield this.updateUserData(t.user)}catch(t){throw console.error("Erreur AuthService (Modulaire):",t),t}})}signOut(){return b(this,null,function*(){yield sL(this.auth)})}updateUserData(e){return b(this,null,function*(){let t=jc(this.firestore,`users/${e.uid}`),r={uid:e.uid,email:e.email||"",displayName:e.displayName||"",roles:["admin"],createdAt:new Date};yield GV(t,r,{merge:!0})})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})};var j7=()=>({exact:!0});function U7(n,e){n&1&&(pl(0),z(1,"a",18),J(2,"Ajouter un lieu"),$(),z(3,"a",19),J(4,"Admin"),$(),ml())}function B7(n,e){if(n&1){let t=bn();pl(0),z(1,"div",20)(2,"div",21),J(3),$(),z(4,"span",22),J(5),$()(),z(6,"button",23),Ue("click",function(){nt(t);let i=Ve();return rt(i.logout())}),J(7," D\xE9connexion "),$(),ml()}if(n&2){let t=e.ngIf;ee(3),Tt(" ",t.email?t.email.charAt(0).toUpperCase():"U"," "),ee(),le("title",ef(t.email)),ee(),Tt(" ",t.email," ")}}function $7(n,e){n&1&&(z(0,"a",24),J(1," Connexion "),$())}function H7(n,e){n&1&&(Ls(),Ut(0,"path",25))}function z7(n,e){n&1&&(Ls(),Ut(0,"path",26))}function q7(n,e){if(n&1){let t=bn();pl(0),z(1,"a",29),Ue("click",function(){nt(t);let i=Ve(2);return rt(i.isMobileMenuOpen=!1)}),J(2,"Ajouter un lieu"),$(),z(3,"a",30),Ue("click",function(){nt(t);let i=Ve(2);return rt(i.isMobileMenuOpen=!1)}),J(4,"Administration"),$(),z(5,"div",31)(6,"p",32),J(7,"Connect\xE9 en tant que"),$(),z(8,"p",33),J(9),$(),z(10,"button",34),Ue("click",function(){nt(t);let i=Ve(2);return rt(i.logout())}),J(11,"D\xE9connexion"),$()(),ml()}if(n&2){let t=e.ngIf;ee(9),Fi(t.email)}}function W7(n,e){if(n&1){let t=bn();z(0,"a",35),Ue("click",function(){nt(t);let i=Ve(2);return rt(i.isMobileMenuOpen=!1)}),J(1," Connexion "),$()}}function G7(n,e){if(n&1){let t=bn();z(0,"div",27)(1,"a",28),Ue("click",function(){nt(t);let i=Ve();return rt(i.isMobileMenuOpen=!1)}),J(2,"Carte"),$(),qe(3,q7,12,1,"ng-container",12),Nr(4,"async"),qe(5,W7,2,0,"ng-template",null,1,dc),$()}if(n&2){let t=Li(6),r=Ve();ee(3),le("ngIf",uc(4,2,r.user$))("ngIfElse",t)}}var dw=class n{constructor(e,t){this.auth=e;this.router=t;this.user$=this.auth.user$}user$;isMobileMenuOpen=!1;toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen}logout(){return b(this,null,function*(){yield this.auth.signOut(),this.router.navigate(["/login"]),this.isMobileMenuOpen=!1})}static \u0275fac=function(t){return new(t||n)(ce(Br),ce(yt))};static \u0275cmp=nn({type:n,selectors:[["app-header"]],decls:23,vars:12,consts:[["loginBtn",""],["mobileLogin",""],[1,"bg-blue-900","text-white","shadow-md","sticky","top-0","z-50"],[1,"container","mx-auto","px-4","py-3"],[1,"flex","justify-between","items-center"],["routerLink","/",1,"flex","items-center","gap-2","text-xl","font-bold","tracking-wider","hover:text-blue-200","transition"],[1,"text-2xl"],[1,"hidden","sm:inline"],[1,"hidden","md:flex","items-center","space-x-6"],["routerLink","/","routerLinkActive","text-yellow-400",1,"hover:text-blue-200","font-medium","transition",3,"routerLinkActiveOptions"],[4,"ngIf"],[1,"hidden","md:flex","items-center","gap-4"],[4,"ngIf","ngIfElse"],[1,"md:hidden","text-white","focus:outline-none","p-1","rounded","hover:bg-blue-800",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12",4,"ngIf"],["class","md:hidden mt-4 pb-4 border-t border-blue-800 pt-4 space-y-2 animate-fade-in",4,"ngIf"],["routerLink","/add-place","routerLinkActive","text-yellow-400",1,"hover:text-blue-200","transition"],["routerLink","/admin","routerLinkActive","text-yellow-400",1,"hover:text-blue-200","transition"],[1,"flex","items-center","gap-3","bg-blue-800","rounded-full","pr-4","pl-2","py-1","border","border-blue-700"],[1,"h-8","w-8","rounded-full","bg-blue-500","flex","items-center","justify-center","text-sm","font-bold","border","border-blue-400","shadow-sm"],[1,"text-sm","truncate","max-w-[150px]","text-blue-100",3,"title"],[1,"text-sm","text-red-300","hover:text-red-100","font-medium","transition",3,"click"],["routerLink","/login",1,"bg-yellow-500","hover:bg-yellow-400","text-blue-900","px-4","py-2","rounded","font-bold","transition","shadow-sm","hover:shadow-md"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"md:hidden","mt-4","pb-4","border-t","border-blue-800","pt-4","space-y-2","animate-fade-in"],["routerLink","/",1,"block","py-2","hover:bg-blue-800","px-3","rounded","transition",3,"click"],["routerLink","/add-place",1,"block","py-2","hover:bg-blue-800","px-3","rounded","transition",3,"click"],["routerLink","/admin",1,"block","py-2","hover:bg-blue-800","px-3","rounded","transition",3,"click"],[1,"border-t","border-blue-800","mt-3","pt-3","px-3"],[1,"text-xs","text-blue-400","mb-1"],[1,"text-sm","text-white","mb-3","font-medium"],[1,"w-full","text-center","py-2","bg-red-600/20","text-red-200","rounded","hover:bg-red-600/40","transition","font-bold",3,"click"],["routerLink","/login",1,"block","w-full","text-center","bg-yellow-500","text-blue-900","py-2","rounded","font-bold","mt-4","shadow-sm",3,"click"]],template:function(t,r){if(t&1){let i=bn();z(0,"header",2)(1,"div",3)(2,"div",4)(3,"a",5)(4,"span",6),J(5,"\u{1F3DD}\uFE0F"),$(),z(6,"span",7),J(7,"Kerkennah Map"),$()(),z(8,"nav",8)(9,"a",9),J(10,"Carte"),$(),qe(11,U7,5,0,"ng-container",10),Nr(12,"async"),$(),z(13,"div",11),qe(14,B7,8,4,"ng-container",12),Nr(15,"async"),qe(16,$7,2,0,"ng-template",null,0,dc),$(),z(18,"button",13),Ue("click",function(){return nt(i),rt(r.toggleMobileMenu())}),Ls(),z(19,"svg",14),qe(20,H7,1,0,"path",15)(21,z7,1,0,"path",16),$()()(),qe(22,G7,7,4,"div",17),$()()}if(t&2){let i=Li(17);ee(9),le("routerLinkActiveOptions",CI(11,j7)),ee(2),le("ngIf",uc(12,7,r.user$)),ee(3),le("ngIf",uc(15,9,r.user$))("ngIfElse",i),ee(6),le("ngIf",!r.isMobileMenuOpen),ee(),le("ngIf",r.isMobileMenuOpen),ee(),le("ngIf",r.isMobileMenuOpen)}},dependencies:[Mn,gr,yc,qi,AT,cf],encapsulation:2})};var hw=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=nn({type:n,selectors:[["app-footer"]],decls:9,vars:0,consts:[[1,"bg-gray-800","text-gray-300","text-sm","py-4"],[1,"container","mx-auto","px-4","text-center"],[1,"mt-2","space-x-4"],["href","#",1,"hover:text-white"]],template:function(t,r){t&1&&(hl(0,"footer",0)(1,"div",1)(2,"p"),J(3,"\xA9 2025 Kerkennah Map. Tous droits r\xE9serv\xE9s."),fl(),hl(4,"div",2)(5,"a",3),J(6,"Mentions l\xE9gales"),fl(),hl(7,"a",3),J(8,"Contact"),fl()()()())},dependencies:[Mn],encapsulation:2})};var fw=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=nn({type:n,selectors:[["app-root"]],decls:5,vars:0,consts:[[1,"flex","flex-col","h-screen"],[1,"z-50"],[1,"flex-grow","relative","bg-gray-100"]],template:function(t,r){t&1&&(z(0,"div",0),Ut(1,"app-header",1),z(2,"main",2),Ut(3,"router-outlet"),$(),Ut(4,"app-footer",1),$())},dependencies:[Af,dw,hw],encapsulation:2})};var md=_h(Ip(),1),Tn=class{static mapToArray(e){let t=[];for(let r in e)e.hasOwnProperty(r)&&t.push(e[r]);return t}static handleEvent(e,t,r){0<t.observers.length&&e.run(()=>{t.emit(r)})}},Uc=(()=>{let e=class e{constructor(r,i){this.element=r,this.zone=i,this.DEFAULT_ZOOM=1,this.DEFAULT_CENTER=(0,md.latLng)(38.907192,-77.036871),this.DEFAULT_FPZ_OPTIONS={},this.fitBoundsOptions=this.DEFAULT_FPZ_OPTIONS,this.panOptions=this.DEFAULT_FPZ_OPTIONS,this.zoomOptions=this.DEFAULT_FPZ_OPTIONS,this.zoomPanOptions=this.DEFAULT_FPZ_OPTIONS,this.options={},this.mapReady=new He,this.zoomChange=new He,this.centerChange=new He,this.onClick=new He,this.onDoubleClick=new He,this.onMouseDown=new He,this.onMouseUp=new He,this.onMouseMove=new He,this.onMouseOver=new He,this.onMouseOut=new He,this.onMapMove=new He,this.onMapMoveStart=new He,this.onMapMoveEnd=new He,this.onMapZoom=new He,this.onMapZoomStart=new He,this.onMapZoomEnd=new He}ngOnInit(){this.zone.runOutsideAngular(()=>{this.map=(0,md.map)(this.element.nativeElement,this.options),this.addMapEventListeners()}),this.center!=null&&this.zoom!=null&&this.setView(this.center,this.zoom),this.fitBounds!=null&&this.setFitBounds(this.fitBounds),this.maxBounds!=null&&this.setMaxBounds(this.maxBounds),this.minZoom!=null&&this.setMinZoom(this.minZoom),this.maxZoom!=null&&this.setMaxZoom(this.maxZoom),this.doResize(),this.mapReady.emit(this.map)}ngOnChanges(r){r.zoom&&r.center&&this.zoom!=null&&this.center!=null?this.setView(r.center.currentValue,r.zoom.currentValue):r.zoom?this.setZoom(r.zoom.currentValue):r.center&&this.setCenter(r.center.currentValue),r.fitBounds&&this.setFitBounds(r.fitBounds.currentValue),r.maxBounds&&this.setMaxBounds(r.maxBounds.currentValue),r.minZoom&&this.setMinZoom(r.minZoom.currentValue),r.maxZoom&&this.setMaxZoom(r.maxZoom.currentValue)}ngOnDestroy(){this.map!=null&&this.map.remove()}getMap(){return this.map}onResize(){this.delayResize()}addMapEventListeners(){let r=(o,a)=>{this.map.on(o,a)};r("click",o=>Tn.handleEvent(this.zone,this.onClick,o)),r("dblclick",o=>Tn.handleEvent(this.zone,this.onDoubleClick,o)),r("mousedown",o=>Tn.handleEvent(this.zone,this.onMouseDown,o)),r("mouseup",o=>Tn.handleEvent(this.zone,this.onMouseUp,o)),r("mouseover",o=>Tn.handleEvent(this.zone,this.onMouseOver,o)),r("mouseout",o=>Tn.handleEvent(this.zone,this.onMouseOut,o)),r("mousemove",o=>Tn.handleEvent(this.zone,this.onMouseMove,o)),r("zoomstart",o=>Tn.handleEvent(this.zone,this.onMapZoomStart,o)),r("zoom",o=>Tn.handleEvent(this.zone,this.onMapZoom,o)),r("zoomend",o=>Tn.handleEvent(this.zone,this.onMapZoomEnd,o)),r("movestart",o=>Tn.handleEvent(this.zone,this.onMapMoveStart,o)),r("move",o=>Tn.handleEvent(this.zone,this.onMapMove,o)),r("moveend",o=>Tn.handleEvent(this.zone,this.onMapMoveEnd,o));let i=()=>{let o=this.map.getZoom();o!==this.zoom&&(this.zoom=o,Tn.handleEvent(this.zone,this.zoomChange,o));let a=this.map.getCenter();(a!=null||this.center!=null)&&((a==null||this.center==null)&&a!==this.center||a.lat!==this.center.lat||a.lng!==this.center.lng)&&(this.center=a,Tn.handleEvent(this.zone,this.centerChange,a))};r("moveend",i),r("zoomend",i)}doResize(){this.zone.runOutsideAngular(()=>{this.map!=null&&this.map.invalidateSize({})})}delayResize(){this.resizeTimer!=null&&clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(this.doResize.bind(this),200)}setView(r,i){this.map!=null&&r!=null&&i!=null&&this.map.setView(r,i,this.zoomPanOptions)}setZoom(r){this.map!=null&&r!=null&&this.map.setZoom(r,this.zoomOptions)}setCenter(r){this.map!=null&&r!=null&&this.map.panTo(r,this.panOptions)}setFitBounds(r){this.map!=null&&r!=null&&this.map.fitBounds(r,this.fitBoundsOptions)}setMaxBounds(r){this.map!=null&&r!=null&&this.map.setMaxBounds(r)}setMinZoom(r){this.map!=null&&r!=null&&this.map.setMinZoom(r)}setMaxZoom(r){this.map!=null&&r!=null&&this.map.setMaxZoom(r)}};e.\u0275fac=function(i){return new(i||e)(ce(Pn),ce(Xe))},e.\u0275dir=vt({type:e,selectors:[["","leaflet",""]],hostBindings:function(i,o){i&1&&Ue("resize",function(){return o.onResize()},G0)},inputs:{fitBoundsOptions:[0,"leafletFitBoundsOptions","fitBoundsOptions"],panOptions:[0,"leafletPanOptions","panOptions"],zoomOptions:[0,"leafletZoomOptions","zoomOptions"],zoomPanOptions:[0,"leafletZoomPanOptions","zoomPanOptions"],options:[0,"leafletOptions","options"],zoom:[0,"leafletZoom","zoom"],center:[0,"leafletCenter","center"],fitBounds:[0,"leafletFitBounds","fitBounds"],maxBounds:[0,"leafletMaxBounds","maxBounds"],minZoom:[0,"leafletMinZoom","minZoom"],maxZoom:[0,"leafletMaxZoom","maxZoom"]},outputs:{mapReady:"leafletMapReady",zoomChange:"leafletZoomChange",centerChange:"leafletCenterChange",onClick:"leafletClick",onDoubleClick:"leafletDoubleClick",onMouseDown:"leafletMouseDown",onMouseUp:"leafletMouseUp",onMouseMove:"leafletMouseMove",onMouseOver:"leafletMouseOver",onMouseOut:"leafletMouseOut",onMapMove:"leafletMapMove",onMapMoveStart:"leafletMapMoveStart",onMapMoveEnd:"leafletMapMoveEnd",onMapZoom:"leafletMapZoom",onMapZoomStart:"leafletMapZoomStart",onMapZoomEnd:"leafletMapZoomEnd"},features:[Mr]});let n=e;return n})(),mA=class{constructor(e){this.leafletDirective=e}init(){}getMap(){return this.leafletDirective.getMap()}};var gd=(()=>{let e=class e{set layers(r){this.layersValue=r,this.updateLayers()}get layers(){return this.layersValue}constructor(r,i,o){this.differs=i,this.zone=o,this.leafletDirective=new mA(r),this.layersDiffer=this.differs.find([]).create()}ngDoCheck(){this.updateLayers()}ngOnInit(){this.leafletDirective.init(),this.updateLayers()}ngOnDestroy(){this.layers=[]}updateLayers(){let r=this.leafletDirective.getMap();if(r!=null&&this.layersDiffer!=null){let i=this.layersDiffer.diff(this.layersValue);i!=null&&this.zone.runOutsideAngular(()=>{i.forEachRemovedItem(o=>{r.removeLayer(o.item)}),i.forEachAddedItem(o=>{r.addLayer(o.item)})})}}};e.\u0275fac=function(i){return new(i||e)(ce(Uc),ce(rf),ce(Xe))},e.\u0275dir=vt({type:e,selectors:[["","leafletLayers",""]],inputs:{layers:[0,"leafletLayers","layers"]}});let n=e;return n})();var _d=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=kr({type:e}),e.\u0275inj=fr({});let n=e;return n})();var ma=_h(Ip());var io=class n{firestore=H(Zo);constructor(){}getApprovedPlaces(){let e=uw(this.firestore,"places"),t=fA(e,pA("status","==","approved"));return hA(t,{idField:"id"})}getPlaceById(e){let t=jc(this.firestore,`places/${e}`);return cw(t,{idField:"id"})}updatePlace(e,t){let r=jc(this.firestore,`places/${e}`);return KV(r,t)}deletePlace(e){let t=jc(this.firestore,`places/${e}`);return qV(t)}addPlace(e){let t=uw(this.firestore,"places");return zV(t,e)}getPendingPlaces(){let e=uw(this.firestore,"places"),t=fA(e,pA("status","==","pending"));return hA(t,{idField:"id"})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})};var K7=n=>["/place",n];function Z7(n,e){if(n&1&&(z(0,"span",19),J(1),$()),n&2){let t=e.$implicit;ee(),Tt(" ",t," ")}}function Q7(n,e){if(n&1&&(z(0,"li",13)(1,"div",14)(2,"div")(3,"h3",15),J(4),$(),z(5,"div",16),qe(6,Z7,2,1,"span",17),$()(),z(7,"span",18),J(8,"\u203A"),$()()()),n&2){let t=e.$implicit;le("routerLink",SI(3,K7,t.id)),ee(4),Fi(t.name),ee(2),le("ngForOf",t.categories)}}function Y7(n,e){n&1&&(z(0,"li",20),J(1," Chargement des lieux... "),$())}var mw=class n{constructor(e,t){this.placesService=e;this.router=t}options={layers:[ma.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18})],zoom:11,center:ma.latLng(34.71,11.15)};places=[];layers=[];sub=new It;ngOnInit(){this.sub=this.placesService.getApprovedPlaces().subscribe(e=>{this.places=e,this.updateMarkers()})}ngOnDestroy(){this.sub.unsubscribe()}getIcon(e){let t="default",r="\u{1F4CD}",i=e.map(o=>o.toLowerCase()).join(" ");return i.includes("pharmacie")||i.includes("h\xF4pital")||i.includes("sant\xE9")||i.includes("urgences")?(t="sante",r="\u{1F3E5}"):i.includes("\xE9cole")||i.includes("lyc\xE9e")||i.includes("coll\xE8ge")||i.includes("poste")||i.includes("mairie")||i.includes("ville")?(t="ecole",r="\u{1F393}",(i.includes("poste")||i.includes("mairie"))&&(r="\u{1F3E2}")):i.includes("restaurant")||i.includes("snack")||i.includes("pizzeria")||i.includes("fast food")?(t="restaurant",r="\u{1F374}"):i.includes("caf\xE9")||i.includes("salon de th\xE9")||i.includes("buvette")?(t="cafe",r="\u2615"):i.includes("h\xF4tel")||i.includes("hotel")||i.includes("r\xE9sidence")||i.includes("maison d'h\xF4tes")?(t="hotel",r="\u{1F3E8}"):i.includes("plage")||i.includes("baignade")||i.includes("mer")?(t="plage",r="\u{1F3D6}\uFE0F"):i.includes("port")||i.includes("p\xEAche")||i.includes("bateau")?(t="port",r="\u2693"):i.includes("mosqu\xE9e")||i.includes("zaouia")?(t="culture",r="\u{1F54C}"):i.includes("histoire")||i.includes("mus\xE9e")||i.includes("ruine")||i.includes("site")?(t="culture",r="\u{1F3DB}\uFE0F"):(i.includes("commerce")||i.includes("\xE9picerie")||i.includes("magasin")||i.includes("march\xE9"))&&(t="ecole",r="\u{1F6D2}"),ma.divIcon({className:"custom-div-icon",html:`<div class="marker-pin ${t}"><span>${r}</span></div>`,iconSize:[42,42],iconAnchor:[21,42],popupAnchor:[0,-45]})}updateMarkers(){this.layers=this.places.map(e=>{let t=ma.marker([e.latitude,e.longitude],{icon:this.getIcon(e.categories||[])}),r=e.images&&e.images.length>0?e.images[0]:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/No_image_available.svg/300px-No_image_available.svg.png";return t.bindPopup(`
        <div class="text-center font-sans">
          <h3 class="font-bold text-base text-gray-800 mb-2 truncate">${e.name}</h3>
          <div class="relative">
             <img src="${r}" class="popup-image" onerror="this.src='https://via.placeholder.com/300?text=Image+Indisponible'">
             <span class="absolute bottom-3 right-1 bg-white/80 px-1 rounded text-[10px] font-bold text-gray-600">
               ${e.categories[0]||"Lieu"}
             </span>
          </div>
          <button id="btn-${e.id}" 
            class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-full text-xs font-bold w-full transition shadow-sm flex items-center justify-center gap-1">
            <span>\u{1F441}\uFE0F</span> Voir D\xE9tails
          </button>
        </div>
      `),t.on("popupopen",()=>{let i=document.getElementById(`btn-${e.id}`);i&&i.addEventListener("click",()=>this.router.navigate(["/place",e.id]))}),t})}onMapReady(e){}static \u0275fac=function(t){return new(t||n)(ce(io),ce(yt))};static \u0275cmp=nn({type:n,selectors:[["app-map-page"]],decls:16,vars:5,consts:[[1,"flex","h-full","relative"],[1,"w-full","md:w-1/3","lg:w-1/4","bg-white","shadow-xl","z-20","overflow-y-auto","hidden","md:flex","flex-col","border-r","border-gray-200"],[1,"p-4","bg-blue-50","border-b","border-blue-100","sticky","top-0","z-10"],[1,"text-xl","font-bold","text-blue-900"],[1,"text-sm","text-gray-600"],[1,"flex-grow","overflow-y-auto"],[1,"divide-y","divide-gray-100"],["class","p-4 hover:bg-blue-50 cursor-pointer transition duration-150 group",3,"routerLink",4,"ngFor","ngForOf"],["class","p-8 text-center text-gray-500",4,"ngIf"],[1,"p-4","border-t","border-gray-100","bg-gray-50"],["routerLink","/add-place",1,"block","w-full","text-center","bg-blue-600","text-white","py-2","rounded","hover:bg-blue-700","transition","shadow-sm","font-medium"],[1,"flex-grow","relative","z-10","h-full","w-full"],["leaflet","",1,"h-full","w-full",3,"leafletMapReady","leafletOptions","leafletLayers"],[1,"p-4","hover:bg-blue-50","cursor-pointer","transition","duration-150","group",3,"routerLink"],[1,"flex","justify-between","items-start"],[1,"font-semibold","text-gray-800","group-hover:text-blue-600"],[1,"flex","flex-wrap","gap-1","mt-1"],["class","text-xs bg-gray-200 text-gray-700 px-2 py-0.5 rounded-full",4,"ngFor","ngForOf"],[1,"text-gray-300","text-lg"],[1,"text-xs","bg-gray-200","text-gray-700","px-2","py-0.5","rounded-full"],[1,"p-8","text-center","text-gray-500"]],template:function(t,r){t&1&&(z(0,"div",0)(1,"aside",1)(2,"div",2)(3,"h2",3),J(4,"Lieux \xE0 d\xE9couvrir"),$(),z(5,"p",4),J(6),$()(),z(7,"div",5)(8,"ul",6),qe(9,Q7,9,5,"li",7)(10,Y7,2,0,"li",8),$()(),z(11,"div",9)(12,"a",10),J(13," + Ajouter un lieu "),$()()(),z(14,"div",11)(15,"div",12),Ue("leafletMapReady",function(o){return r.onMapReady(o)}),$()()()),t&2&&(ee(6),Tt("",r.places.length," lieux trouv\xE9s"),ee(3),le("ngForOf",r.places),ee(),le("ngIf",r.places.length===0),ee(5),le("leafletOptions",r.options)("leafletLayers",r.layers))},dependencies:[Mn,qs,gr,_d,Uc,gd,yc,qi],styles:["[_nghost-%COMP%]{display:block;height:100%}  .popup-image{width:100%!important;height:130px!important;object-fit:cover;border-radius:6px;background-color:#f3f4f6;margin-bottom:10px;border:1px solid #e5e7eb}  .leaflet-popup-content{width:220px!important;margin:12px!important}  .leaflet-popup-content-wrapper{border-radius:10px;overflow:hidden;padding:0}  .custom-div-icon{background:transparent;border:none}  .marker-pin{width:42px;height:42px;border-radius:50% 50% 50% 0;position:absolute;transform:rotate(-45deg);left:50%;top:50%;margin:-21px 0 0 -21px;box-shadow:2px 4px 8px #0006;display:flex;align-items:center;justify-content:center;border:3px solid white;transition:transform .2s ease}  .marker-pin:hover{transform:rotate(-45deg) scale(1.1);z-index:1000}  .marker-pin.restaurant{background:#ef4444}  .marker-pin.hotel{background:#6366f1}  .marker-pin.plage{background:#f59e0b}  .marker-pin.cafe{background:#78350f}  .marker-pin.port{background:#06b6d4}  .marker-pin.culture{background:#10b981}  .marker-pin.ecole{background:#2563eb}  .marker-pin.sante{background:#e11d48}  .marker-pin.default{background:#64748b}  .marker-pin span{transform:rotate(45deg);font-size:22px;line-height:1;filter:drop-shadow(0 1px 1px rgba(0,0,0,.1))}"]})};var fi=_h(Ip());var o2=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(ce(Oi),ce(Pn))};static \u0275dir=vt({type:n})}return n})(),s2=(()=>{class n extends o2{static \u0275fac=(()=>{let t;return function(i){return(t||(t=js(n)))(i||n)}})();static \u0275dir=vt({type:n,features:[ii]})}return n})(),yA=new ae("");var J7={provide:yA,useExisting:Si(()=>Ed),multi:!0};function X7(){let n=Or()?Or().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var eK=new ae(""),Ed=(()=>{class n extends o2{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!X7())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(ce(Oi),ce(Pn),ce(eK,8))};static \u0275dir=vt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Ue("input",function(a){return i._handleInput(a.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(a){return i._compositionEnd(a.target.value)})},standalone:!1,features:[cc([J7]),ii]})}return n})();function tK(n){return n==null||nK(n)===0}function nK(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var wA=new ae(""),a2=new ae("");function rK(n){return tK(n.value)?{required:!0}:null}function YV(n){return null}function c2(n){return n!=null}function u2(n){return Ro(n)?ft(n):n}function l2(n){let e={};return n.forEach(t=>{e=t!=null?Y(Y({},e),t):e}),Object.keys(e).length===0?null:e}function d2(n,e){return e.map(t=>t(n))}function iK(n){return!n.validate}function h2(n){return n.map(e=>iK(e)?e:t=>e.validate(t))}function oK(n){if(!n)return null;let e=n.filter(c2);return e.length==0?null:function(t){return l2(d2(t,e))}}function EA(n){return n!=null?oK(h2(n)):null}function sK(n){if(!n)return null;let e=n.filter(c2);return e.length==0?null:function(t){let r=d2(t,e).map(u2);return YE(r).pipe(Ae(l2))}}function bA(n){return n!=null?sK(h2(n)):null}function JV(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function aK(n){return n._rawValidators}function cK(n){return n._rawAsyncValidators}function _A(n){return n?Array.isArray(n)?n:[n]:[]}function _w(n,e){return Array.isArray(n)?n.includes(e):n===e}function XV(n,e){let t=_A(e);return _A(n).forEach(i=>{_w(t,i)||t.push(i)}),t}function e2(n,e){return _A(e).filter(t=>!_w(n,t))}var vw=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=EA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=bA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},wd=class extends vw{name;get formDirective(){return null}get path(){return null}},xp=class extends vw{_parent=null;name=null;valueAccessor=null},yw=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},uK={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},_ve=_e(Y({},uK),{"[class.ng-submitted]":"isSubmitted"}),Tw=(()=>{class n extends yw{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ce(xp,2))};static \u0275dir=vt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Xh("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[ii]})}return n})(),Cw=(()=>{class n extends yw{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ce(wd,10))};static \u0275dir=vt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Xh("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[ii]})}return n})();var Tp="VALID",gw="INVALID",vd="PENDING",Cp="DISABLED",ga=class{},ww=class extends ga{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Dp=class extends ga{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Ap=class extends ga{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},yd=class extends ga{status;source;constructor(e,t){super(),this.status=e,this.source=t}},vA=class extends ga{source;constructor(e){super(),this.source=e}},Ew=class extends ga{source;constructor(e){super(),this.source=e}};function f2(n){return(Sw(n)?n.validators:n)||null}function lK(n){return Array.isArray(n)?EA(n):n||null}function p2(n,e){return(Sw(e)?e.asyncValidators:n)||null}function dK(n){return Array.isArray(n)?bA(n):n||null}function Sw(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function hK(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new re(1e3,"");if(!r[t])throw new re(1001,"")}function fK(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new re(1002,"")})}var bw=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Gt(this.statusReactive)}set status(e){Gt(()=>this.statusReactive.set(e))}_status=gl(()=>this.statusReactive());statusReactive=Pr(void 0);get valid(){return this.status===Tp}get invalid(){return this.status===gw}get pending(){return this.status==vd}get disabled(){return this.status===Cp}get enabled(){return this.status!==Cp}errors;get pristine(){return Gt(this.pristineReactive)}set pristine(e){Gt(()=>this.pristineReactive.set(e))}_pristine=gl(()=>this.pristineReactive());pristineReactive=Pr(!0);get dirty(){return!this.pristine}get touched(){return Gt(this.touchedReactive)}set touched(e){Gt(()=>this.touchedReactive.set(e))}_touched=gl(()=>this.touchedReactive());touchedReactive=Pr(!1);get untouched(){return!this.touched}_events=new Lt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(XV(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(XV(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(e2(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(e2(e,this._rawAsyncValidators))}hasValidator(e){return _w(this._rawValidators,e)}hasAsyncValidator(e){return _w(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(_e(Y({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ap(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ap(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(_e(Y({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Dp(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Dp(!0,r))}markAsPending(e={}){this.status=vd;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new yd(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(_e(Y({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Cp,this.errors=null,this._forEachChild(i=>{i.disable(_e(Y({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ww(this.value,r)),this._events.next(new yd(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(_e(Y({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Tp,this._forEachChild(r=>{r.enable(_e(Y({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(_e(Y({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Tp||this.status===vd)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ww(this.value,t)),this._events.next(new yd(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(_e(Y({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Cp:Tp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=vd,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=u2(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new yd(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new He,this.statusChanges=new He}_calculateStatus(){return this._allControlsDisabled()?Cp:this.errors?gw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(vd)?vd:this._anyControlsHaveStatus(gw)?gw:Tp}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Dp(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Ap(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Sw(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=lK(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=dK(this._rawAsyncValidators)}},Iw=class extends bw{constructor(e,t,r){super(f2(t),p2(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){fK(this,!0,e),Object.keys(e).forEach(r=>{hK(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Ew(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var IA=new ae("",{providedIn:"root",factory:()=>TA}),TA="always";function pK(n,e){return[...e.path,n]}function m2(n,e,t=TA){g2(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),gK(n,e),vK(n,e),_K(n,e),mK(n,e)}function t2(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function mK(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function g2(n,e){let t=aK(n);e.validator!==null?n.setValidators(JV(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=cK(n);e.asyncValidator!==null?n.setAsyncValidators(JV(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();t2(e._rawValidators,i),t2(e._rawAsyncValidators,i)}function gK(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&_2(n,e)})}function _K(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&_2(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function _2(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function vK(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function yK(n,e){n==null,g2(n,e)}function wK(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function EK(n){return Object.getPrototypeOf(n.constructor)===s2}function bK(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function IK(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Ed?t=o:EK(o)?r=o:i=o}),i||r||t||null}var TK={provide:wd,useExisting:Si(()=>Rp)},Sp=Promise.resolve(),Rp=(()=>{class n extends wd{callSetDisabledState;get submitted(){return Gt(this.submittedReactive)}_submitted=gl(()=>this.submittedReactive());submittedReactive=Pr(!1);_directives=new Set;form;ngSubmit=new He;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Iw({},EA(t),bA(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Sp.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),m2(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Sp.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Sp.then(()=>{let r=this._findContainer(t.path),i=new Iw({});yK(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Sp.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Sp.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),bK(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new vA(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(ce(wA,10),ce(a2,10),ce(IA,8))};static \u0275dir=vt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Ue("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[cc([TK]),ii]})}return n})();function n2(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function r2(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var CK=class extends bw{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(f2(t),p2(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Sw(t)&&(t.nonNullable||t.initialValueIsDefault)&&(r2(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new Ew(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){n2(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){n2(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){r2(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var SK={provide:xp,useExisting:Si(()=>Pp)},i2=Promise.resolve(),Pp=(()=>{class n extends xp{_changeDetectorRef;callSetDisabledState;control=new CK;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new He;constructor(t,r,i,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=IK(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),wK(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){m2(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){i2.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Hs(r);i2.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?pK(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(ce(wd,9),ce(wA,10),ce(a2,10),ce(yA,10),ce(Mo,8),ce(IA,8))};static \u0275dir=vt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[cc([SK]),ii,Mr]})}return n})();var Dw=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=vt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),DK={provide:yA,useExisting:Si(()=>CA),multi:!0},CA=(()=>{class n extends s2{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=js(n)))(i||n)}})();static \u0275dir=vt({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Ue("input",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[cc([DK]),ii]})}return n})();var AK=(()=>{class n{_validator=YV;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):YV,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=vt({type:n,features:[Mr]})}return n})();var xK={provide:wA,useExisting:Si(()=>SA),multi:!0};var SA=(()=>{class n extends AK{required;inputName="required";normalizeInput=Hs;createValidator=t=>rK;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=js(n)))(i||n)}})();static \u0275dir=vt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&dl("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[cc([xK]),ii]})}return n})();var RK=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=kr({type:n});static \u0275inj=fr({})}return n})();var Aw=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:IA,useValue:t.callSetDisabledState??TA}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=kr({type:n});static \u0275inj=fr({imports:[RK]})}return n})();_t();var y2=n=>n?(...e)=>n(...e):(...e)=>fetch(...e);var Mp=class extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}},xw=class extends Mp{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},kp=class extends Mp{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},Np=class extends Mp{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}},DA=(function(n){return n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2",n})(DA||{});var Op=class{constructor(e,{headers:t={},customFetch:r,region:i=DA.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=y2(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return te(this,arguments,void 0,function*(t,r={}){var i;let o,a;try{let{headers:c,method:l,body:h,signal:p,timeout:_}=r,E={},{region:w}=r;w||(w=this.region);let C=new URL(`${this.url}/${t}`);w&&w!=="any"&&(E["x-region"]=w,C.searchParams.set("forceFunctionRegion",w));let k;h&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)?typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(E["Content-Type"]="application/octet-stream",k=h):typeof h=="string"?(E["Content-Type"]="text/plain",k=h):typeof FormData<"u"&&h instanceof FormData?k=h:(E["Content-Type"]="application/json",k=JSON.stringify(h)):k=h;let R=p;_&&(a=new AbortController,o=setTimeout(()=>a.abort(),_),p?(R=a.signal,p.addEventListener("abort",()=>a.abort())):R=a.signal);let j=yield this.fetch(C.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},E),this.headers),c),body:k,signal:R}).catch(pe=>{throw new xw(pe)}),K=j.headers.get("x-relay-error");if(K&&K==="true")throw new kp(j);if(!j.ok)throw new Np(j);let q=((i=j.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),Z;return q==="application/json"?Z=yield j.json():q==="application/octet-stream"||q==="application/pdf"?Z=yield j.blob():q==="text/event-stream"?Z=j:q==="multipart/form-data"?Z=yield j.formData():Z=yield j.text(),{data:Z,error:null,response:j}}catch(c){return{data:null,error:c,response:c instanceof Np||c instanceof kp?c.context:void 0}}finally{o&&clearTimeout(o)}})}};var zA=_h(A2(),1),{PostgrestClient:x2,PostgrestQueryBuilder:Lve,PostgrestFilterBuilder:Fve,PostgrestTransformBuilder:Vve,PostgrestBuilder:jve,PostgrestError:BK}=zA.default||zA;var qA=class{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){let t=process.versions;if(t&&t.node){let r=t.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){let r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{let e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}},WA=qA;var R2="2.84.0";var P2=`realtime-js/${R2}`,GA="1.0.0",M2="2.0.0",KA=GA;var Fp=1e4,k2=1e3,N2=100,Bc=(function(n){return n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed",n})(Bc||{}),on=(function(n){return n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving",n})(on||{}),$r=(function(n){return n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token",n})($r||{}),ZA=(function(n){return n.websocket="websocket",n})(ZA||{}),$c=(function(n){return n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed",n})($c||{});var Pw=class{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast"}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,r,i,o;let a=e.topic,c=(t=e.ref)!==null&&t!==void 0?t:"",l=(r=e.join_ref)!==null&&r!==void 0?r:"",h=e.payload.event,p=(o=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&o!==void 0?o:new ArrayBuffer(0),_=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+c.length+a.length+h.length,E=new ArrayBuffer(this.HEADER_LENGTH+_),w=new DataView(E),C=0;w.setUint8(C++,this.KINDS.userBroadcastPush),w.setUint8(C++,l.length),w.setUint8(C++,c.length),w.setUint8(C++,a.length),w.setUint8(C++,h.length),w.setUint8(C++,this.BINARY_ENCODING),Array.from(l,R=>w.setUint8(C++,R.charCodeAt(0))),Array.from(c,R=>w.setUint8(C++,R.charCodeAt(0))),Array.from(a,R=>w.setUint8(C++,R.charCodeAt(0))),Array.from(h,R=>w.setUint8(C++,R.charCodeAt(0)));var k=new Uint8Array(E.byteLength+p.byteLength);return k.set(new Uint8Array(E),0),k.set(new Uint8Array(p),E.byteLength),k.buffer}_encodeJsonUserBroadcastPush(e){var t,r,i,o;let a=e.topic,c=(t=e.ref)!==null&&t!==void 0?t:"",l=(r=e.join_ref)!==null&&r!==void 0?r:"",h=e.payload.event,p=(o=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&o!==void 0?o:{},E=new TextEncoder().encode(JSON.stringify(p)).buffer,w=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+c.length+a.length+h.length,C=new ArrayBuffer(this.HEADER_LENGTH+w),k=new DataView(C),R=0;k.setUint8(R++,this.KINDS.userBroadcastPush),k.setUint8(R++,l.length),k.setUint8(R++,c.length),k.setUint8(R++,a.length),k.setUint8(R++,h.length),k.setUint8(R++,this.JSON_ENCODING),Array.from(l,K=>k.setUint8(R++,K.charCodeAt(0))),Array.from(c,K=>k.setUint8(R++,K.charCodeAt(0))),Array.from(a,K=>k.setUint8(R++,K.charCodeAt(0))),Array.from(h,K=>k.setUint8(R++,K.charCodeAt(0)));var j=new Uint8Array(C.byteLength+E.byteLength);return j.set(new Uint8Array(C),0),j.set(new Uint8Array(E),C.byteLength),j.buffer}decode(e,t){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return t(r)}if(typeof e=="string"){let r=JSON.parse(e),[i,o,a,c,l]=r;return t({join_ref:i,ref:o,topic:a,event:c,payload:l})}return t({})}_binaryDecode(e){let t=new DataView(e),r=t.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,i)}}_decodeUserBroadcast(e,t,r){let i=t.getUint8(1),o=t.getUint8(2),a=t.getUint8(3),c=t.getUint8(4),l=this.HEADER_LENGTH+4,h=r.decode(e.slice(l,l+i));l=l+i;let p=r.decode(e.slice(l,l+o));l=l+o;let _=r.decode(e.slice(l,l+a));l=l+a;let E=e.slice(l,e.byteLength),w=c===this.JSON_ENCODING?JSON.parse(r.decode(E)):E,C={type:this.BROADCAST_EVENT,event:p,payload:w};return a>0&&(C.meta=JSON.parse(_)),{join_ref:null,ref:null,topic:h,event:this.BROADCAST_EVENT,payload:C}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e?.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}};var Id=class{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var wt=(function(n){return n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange",n})(wt||{}),YA=(n,e,t={})=>{var r;let i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((o,a)=>(o[a]=$K(a,n,e,i),o),{}):{}},$K=(n,e,t,r)=>{let i=e.find(c=>c.name===n),o=i?.type,a=t[n];return o&&!r.includes(o)?O2(o,a):QA(a)},O2=(n,e)=>{if(n.charAt(0)==="_"){let t=n.slice(1,n.length);return WK(e,t)}switch(n){case wt.bool:return HK(e);case wt.float4:case wt.float8:case wt.int2:case wt.int4:case wt.int8:case wt.numeric:case wt.oid:return zK(e);case wt.json:case wt.jsonb:return qK(e);case wt.timestamp:return GK(e);case wt.abstime:case wt.date:case wt.daterange:case wt.int4range:case wt.int8range:case wt.money:case wt.reltime:case wt.text:case wt.time:case wt.timestamptz:case wt.timetz:case wt.tsrange:case wt.tstzrange:return QA(e);default:return QA(e)}},QA=n=>n,HK=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},zK=n=>{if(typeof n=="string"){let e=parseFloat(n);if(!Number.isNaN(e))return e}return n},qK=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},WK=(n,e)=>{if(typeof n!="string")return n;let t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let o,a=n.slice(1,t);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(c=>O2(e,c))}return n},GK=n=>typeof n=="string"?n.replace(" ","T"):n,Mw=n=>{let e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};var Td=class{constructor(e,t,r={},i=Fp){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}};var Vp=class n{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{let{onJoin:o,onLeave:a,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=n.syncState(this.state,i,o,a),this.pendingDiffs.forEach(l=>{this.state=n.syncDiff(this.state,l,o,a)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},i=>{let{onJoin:o,onLeave:a,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=n.syncDiff(this.state,i,o,a),c())}),this.onJoin((i,o,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:a})}),this.onLeave((i,o,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){let o=this.cloneDeep(e),a=this.transformState(t),c={},l={};return this.map(o,(h,p)=>{a[h]||(l[h]=p)}),this.map(a,(h,p)=>{let _=o[h];if(_){let E=p.map(R=>R.presence_ref),w=_.map(R=>R.presence_ref),C=p.filter(R=>w.indexOf(R.presence_ref)<0),k=_.filter(R=>E.indexOf(R.presence_ref)<0);C.length>0&&(c[h]=C),k.length>0&&(l[h]=k)}else c[h]=p}),this.syncDiff(o,{joins:c,leaves:l},r,i)}static syncDiff(e,t,r,i){let{joins:o,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(c,l)=>{var h;let p=(h=e[c])!==null&&h!==void 0?h:[];if(e[c]=this.cloneDeep(l),p.length>0){let _=e[c].map(w=>w.presence_ref),E=p.filter(w=>_.indexOf(w.presence_ref)<0);e[c].unshift(...E)}r(c,p,l)}),this.map(a,(c,l)=>{let h=e[c];if(!h)return;let p=l.map(_=>_.presence_ref);h=h.filter(_=>p.indexOf(_.presence_ref)<0),e[c]=h,i(c,h,l),h.length===0&&delete e[c]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{let i=e[r];return"metas"in i?t[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var jp=(function(n){return n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system",n})(jp||{}),Qo=(function(n){return n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR",n})(Qo||{});var Up=class n{constructor(e,t={config:{}},r){var i,o;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=on.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Td(this,$r.join,this.params,this.timeout),this.rejoinTimer=new Id(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=on.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=on.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=on.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=on.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=on.errored,this.rejoinTimer.scheduleTimeout())}),this._on($r.reply,{},(a,c)=>{this._trigger(this._replyEventName(c),a)}),this.presence=new Vp(this),this.broadcastEndpointURL=Mw(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==on.closed){let{config:{broadcast:a,presence:c,private:l}}=this.params,h=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(w=>w.filter))!==null&&i!==void 0?i:[],p=!!this.bindings[jp.PRESENCE]&&this.bindings[jp.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,_={},E={broadcast:a,presence:Object.assign(Object.assign({},c),{enabled:p}),postgres_changes:h,private:l};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(w=>e?.(Qo.CHANNEL_ERROR,w)),this._onClose(()=>e?.(Qo.CLOSED)),this.updateJoinPayload(Object.assign({config:E},_)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",C=>b(this,[C],function*({postgres_changes:w}){var k;if(this.socket.setAuth(),w===void 0){e?.(Qo.SUBSCRIBED);return}else{let R=this.bindings.postgres_changes,j=(k=R?.length)!==null&&k!==void 0?k:0,K=[];for(let q=0;q<j;q++){let Z=R[q],{filter:{event:pe,schema:Pe,table:M,filter:S}}=Z,D=w&&w[q];if(D&&D.event===pe&&D.schema===Pe&&D.table===M&&D.filter===S)K.push(Object.assign(Object.assign({},Z),{id:D.id}));else{this.unsubscribe(),this.state=on.errored,e?.(Qo.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=K,e&&e(Qo.SUBSCRIBED);return}})).receive("error",w=>{this.state=on.errored,e?.(Qo.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{e?.(Qo.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(r){return b(this,arguments,function*(e,t={}){return yield this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)})}untrack(){return b(this,arguments,function*(e={}){return yield this.send({type:"presence",event:"untrack"},e)})}on(e,t,r){return this.state===on.joined&&e===jp.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}httpSend(i,o){return b(this,arguments,function*(e,t,r={}){var a;let c=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(t==null)return Promise.reject("Payload is required for httpSend()");let l={method:"POST",headers:{Authorization:c,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},h=yield this._fetchWithTimeout(this.broadcastEndpointURL,l,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);if(h.status===202)return{success:!0};let p=h.statusText;try{let _=yield h.json();p=_.error||_.message||p}catch{}return Promise.reject(new Error(p))})}send(r){return b(this,arguments,function*(e,t={}){var i,o;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");let{event:a,payload:c}=e,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:c,private:this.private}]})};try{let p=yield this._fetchWithTimeout(this.broadcastEndpointURL,h,(i=t.timeout)!==null&&i!==void 0?i:this.timeout);return yield(o=p.body)===null||o===void 0?void 0:o.cancel(),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var c,l,h;let p=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(l=(c=this.params)===null||c===void 0?void 0:c.config)===null||l===void 0?void 0:l.broadcast)===null||h===void 0)&&h.ack)&&a("ok"),p.receive("ok",()=>a("ok")),p.receive("error",()=>a("error")),p.receive("timeout",()=>a("timed out"))})})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=on.leaving;let t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger($r.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Td(this,$r.leave,{},e),r.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=on.closed,this.bindings={}}_fetchWithTimeout(e,t,r){return b(this,null,function*(){let i=new AbortController,o=setTimeout(()=>i.abort(),r),a=yield this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(o),a})}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Td(this,e,t,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>N2){let t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,o;let a=e.toLocaleLowerCase(),{close:c,error:l,leave:h,join:p}=$r;if(r&&[c,l,h,p].indexOf(a)>=0&&r!==this._joinRef())return;let E=this._onMessage(a,t,r);if(t&&!E)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(w=>{var C,k,R;return((C=w.filter)===null||C===void 0?void 0:C.event)==="*"||((R=(k=w.filter)===null||k===void 0?void 0:k.event)===null||R===void 0?void 0:R.toLocaleLowerCase())===a}).map(w=>w.callback(E,r)):(o=this.bindings[a])===null||o===void 0||o.filter(w=>{var C,k,R,j,K,q;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in w){let Z=w.id,pe=(C=w.filter)===null||C===void 0?void 0:C.event;return Z&&((k=t.ids)===null||k===void 0?void 0:k.includes(Z))&&(pe==="*"||pe?.toLocaleLowerCase()===((R=t.data)===null||R===void 0?void 0:R.type.toLocaleLowerCase()))}else{let Z=(K=(j=w?.filter)===null||j===void 0?void 0:j.event)===null||K===void 0?void 0:K.toLocaleLowerCase();return Z==="*"||Z===((q=t?.event)===null||q===void 0?void 0:q.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===a}).map(w=>{if(typeof E=="object"&&"ids"in E){let C=E.data,{schema:k,table:R,commit_timestamp:j,type:K,errors:q}=C;E=Object.assign(Object.assign({},{schema:k,table:R,commit_timestamp:j,eventType:K,new:{},old:{},errors:q}),this._getPayloadRecords(C))}w.callback(E,r)})}_isClosed(){return this.state===on.closed}_isJoined(){return this.state===on.joined}_isJoining(){return this.state===on.joining}_isLeaving(){return this.state===on.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){let i=e.toLocaleLowerCase(),o={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,t){let r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&n.isEqual(i.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on($r.close,{},e)}_onError(e){this._on($r.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=on.joining,this.joinPush.resend(e))}_getPayloadRecords(e){let t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=YA(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=YA(e.columns,e.old_record)),t}};var JA=()=>{},kw={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},ZK=[1e3,2e3,5e3,1e4],QK=1e4,YK=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,Bp=class{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Fp,this.transport=null,this.heartbeatIntervalMs=kw.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=JA,this.ref=0,this.reconnectTimer=null,this.vsn=KA,this.logger=JA,this.conn=null,this.sendBuffer=[],this.serializer=new Pw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((r=t?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${ZA.websocket}`,this.httpEndpoint=Mw(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=WA.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");let t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){let r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}removeChannel(e){return b(this,null,function*(){let t=yield e.unsubscribe();return this.channels.length===0&&this.disconnect(),t})}removeAllChannels(){return b(this,null,function*(){let e=yield Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e})}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Bc.connecting:return $c.Connecting;case Bc.open:return $c.Open;case Bc.closing:return $c.Closing;default:return $c.Closed}}isConnected(){return this.connectionState()===$c.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){let r=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{let o=new Up(`realtime:${e}`,t,this);return this.channels.push(o),o}}push(e){let{topic:t,event:r,payload:i,ref:o}=e,a=()=>{this.encode(e,c=>{var l;(l=this.conn)===null||l===void 0||l.send(c)})};this.log("push",`${t} ${r} (${o})`,i),this.isConnected()?a():this.sendBuffer.push(a)}setAuth(e=null){return b(this,null,function*(){this._authPromise=this._performAuth(e);try{yield this._authPromise}finally{this._authPromise=null}})}sendHeartbeat(){return b(this,null,function*(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(k2,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},kw.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")})}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(h){this.log("error","error in heartbeat callback",h)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);let{topic:r,event:i,payload:o,ref:a}=t,c=a?`(${a})`:"",l=o.status||"";this.log("receive",`${l} ${r} ${i} ${c}`.trim(),o),this.channels.filter(h=>h._isMember(r)).forEach(h=>h._trigger(i,o,a)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Bc.open||this.conn.readyState===Bc.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger($r.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;let r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{let r=new Blob([YK],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}_performAuth(e=null){return b(this,null,function*(){let t;e?t=e:this.accessToken?t=yield this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{let i={access_token:t,version:P2};t&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push($r.access_token,{access_token:t})}))})}_waitForAuthIfNeeded(){return b(this,null,function*(){this._authPromise&&(yield this._authPromise)})}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Id(()=>b(this,null,function*(){setTimeout(()=>b(this,null,function*(){yield this._waitForAuthIfNeeded(),this.isConnected()||this.connect()}),kw.RECONNECT_DELAY)}),this.reconnectAfterMs)}_initializeOptions(e){var t,r,i,o,a,c,l,h,p,_,E,w;switch(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:Fp,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:kw.HEARTBEAT_INTERVAL,this.worker=(o=e?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(a=e?.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(c=e?.heartbeatCallback)!==null&&c!==void 0?c:JA,this.vsn=(l=e?.vsn)!==null&&l!==void 0?l:KA,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e?.reconnectAfterMs)!==null&&h!==void 0?h:C=>ZK[C-1]||QK,this.vsn){case GA:this.encode=(p=e?.encode)!==null&&p!==void 0?p:(C,k)=>k(JSON.stringify(C)),this.decode=(_=e?.decode)!==null&&_!==void 0?_:(C,k)=>k(JSON.parse(C));break;case M2:this.encode=(E=e?.encode)!==null&&E!==void 0?E:this.serializer.encode.bind(this.serializer),this.decode=(w=e?.decode)!==null&&w!==void 0?w:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}};_t();var Cd=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function dt(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var Nw=class extends Cd{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Hc=class extends Cd{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};_t();var Sd=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),L2=()=>Response,Ow=n=>{if(Array.isArray(n))return n.map(t=>Ow(t));if(typeof n=="function"||n!==Object(n))return n;let e={};return Object.entries(n).forEach(([t,r])=>{let i=t.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=Ow(r)}),e},F2=n=>{if(typeof n!="object"||n===null)return!1;let e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var XA=n=>{var e;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(e=n.error)===null||e===void 0?void 0:e.message)||JSON.stringify(n)},JK=(n,e,t)=>te(void 0,void 0,void 0,function*(){let r=yield L2();n instanceof r&&!t?.noResolveJson?n.json().then(i=>{let o=n.status||500,a=i?.statusCode||o+"";e(new Nw(XA(i),o,a))}).catch(i=>{e(new Hc(XA(i),i))}):e(new Hc(XA(n),n))}),XK=(n,e,t,r)=>{let i={method:n,headers:e?.headers||{}};return n==="GET"||!r?i:(F2(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,e?.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),t))};function $p(n,e,t,r,i,o){return te(this,void 0,void 0,function*(){return new Promise((a,c)=>{n(t,XK(e,r,i,o)).then(l=>{if(!l.ok)throw l;return r?.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>JK(l,c,r))})})}function _a(n,e,t,r){return te(this,void 0,void 0,function*(){return $p(n,"GET",e,t,r)})}function nr(n,e,t,r,i){return te(this,void 0,void 0,function*(){return $p(n,"POST",e,r,i,t)})}function Hp(n,e,t,r,i){return te(this,void 0,void 0,function*(){return $p(n,"PUT",e,r,i,t)})}function V2(n,e,t,r){return te(this,void 0,void 0,function*(){return $p(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function Dd(n,e,t,r,i){return te(this,void 0,void 0,function*(){return $p(n,"DELETE",e,r,i,t)})}_t();_t();var Lw=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return te(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(dt(e))return{data:null,error:e};throw e}})}};var j2,ex=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[j2]="BlobDownloadBuilder",this.promise=null}asStream(){return new Lw(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return te(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(dt(e))return{data:null,error:e};throw e}})}};j2=Symbol.toStringTag;var U2=ex;var eZ={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},B2={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},Fw=class{constructor(e,t={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=Sd(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,i){return te(this,void 0,void 0,function*(){try{let o,a=Object.assign(Object.assign({},B2),i),c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)}),l=a.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.has("cacheControl")||o.append("cacheControl",a.cacheControl),l&&!o.has("metadata")&&o.append("metadata",this.encodeMetadata(l))):(o=r,c["cache-control"]=`max-age=${a.cacheControl}`,c["content-type"]=a.contentType,l&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!a.duplex&&(a.duplex="half")),i?.headers&&(c=Object.assign(Object.assign({},c),i.headers));let h=this._removeEmptyFolders(t),p=this._getFinalPath(h),_=yield(e=="PUT"?Hp:nr)(this.fetch,`${this.url}/object/${p}`,o,Object.assign({headers:c},a?.duplex?{duplex:a.duplex}:{}));return{data:{path:h,id:_.Id,fullPath:_.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(dt(o))return{data:null,error:o};throw o}})}upload(e,t,r){return te(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return te(this,void 0,void 0,function*(){let o=this._removeEmptyFolders(e),a=this._getFinalPath(o),c=new URL(this.url+`/object/upload/sign/${a}`);c.searchParams.set("token",t);try{let l,h=Object.assign({upsert:B2.upsert},i),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",h.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",h.cacheControl)):(l=r,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType);let _=yield Hp(this.fetch,c.toString(),l,{headers:p});return{data:{path:o,fullPath:_.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(dt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return te(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=Object.assign({},this.headers);t?.upsert&&(i["x-upsert"]="true");let o=yield nr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(this.url+o.url),c=a.searchParams.get("token");if(!c)throw new Cd("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:c},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dt(r))return{data:null,error:r};throw r}})}update(e,t,r){return te(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return te(this,void 0,void 0,function*(){try{return{data:yield nr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(dt(i))return{data:null,error:i};throw i}})}copy(e,t,r){return te(this,void 0,void 0,function*(){try{return{data:{path:(yield nr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(dt(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return te(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),o=yield nr(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers}),a=r?.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${a}`)},{data:o,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(dt(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return te(this,void 0,void 0,function*(){try{let i=yield nr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${o}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(dt(i))return{data:null,error:i};throw i}})}download(e,t){let i=typeof t?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(t?.transform||{}),a=o?`?${o}`:"",c=this._getFinalPath(e),l=()=>_a(this.fetch,`${this.url}/${i}/${c}${a}`,{headers:this.headers,noResolveJson:!0});return new U2(l,this.shouldThrowOnError)}info(e){return te(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{let r=yield _a(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Ow(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dt(r))return{data:null,error:r};throw r}})}exists(e){return te(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{return yield V2(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dt(r)&&r instanceof Hc){let i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){let r=this._getFinalPath(e),i=[],o=t?.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&i.push(o);let c=typeof t?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(t?.transform||{});l!==""&&i.push(l);let h=i.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${h}`)}}}remove(e){return te(this,void 0,void 0,function*(){try{return{data:yield Dd(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(dt(t))return{data:null,error:t};throw t}})}list(e,t,r){return te(this,void 0,void 0,function*(){try{let i=Object.assign(Object.assign(Object.assign({},eZ),t),{prefix:e||""});return{data:yield nr(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(dt(i))return{data:null,error:i};throw i}})}listV2(e,t){return te(this,void 0,void 0,function*(){try{let r=Object.assign({},e);return{data:yield nr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dt(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};_t();var Vw="2.84.0";var jw={"X-Client-Info":`storage-js/${Vw}`};var Uw=class{constructor(e,t={},r,i){this.shouldThrowOnError=!1;let o=new URL(e);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},jw),t),this.fetch=Sd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return te(this,void 0,void 0,function*(){try{let t=this.listBucketOptionsToQueryString(e);return{data:yield _a(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(dt(t))return{data:null,error:t};throw t}})}getBucket(e){return te(this,void 0,void 0,function*(){try{return{data:yield _a(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(dt(t))return{data:null,error:t};throw t}})}createBucket(e){return te(this,arguments,void 0,function*(t,r={public:!1}){try{return{data:yield nr(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(dt(i))return{data:null,error:i};throw i}})}updateBucket(e,t){return te(this,void 0,void 0,function*(){try{return{data:yield Hp(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return te(this,void 0,void 0,function*(){try{return{data:yield nr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(dt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return te(this,void 0,void 0,function*(){try{return{data:yield Dd(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(dt(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){let t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}};_t();var Bw=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},jw),t),this.fetch=Sd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return te(this,void 0,void 0,function*(){try{return{data:yield nr(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(dt(t))return{data:null,error:t};throw t}})}listBuckets(e){return te(this,void 0,void 0,function*(){try{let t=new URLSearchParams;e?.limit!==void 0&&t.set("limit",e.limit.toString()),e?.offset!==void 0&&t.set("offset",e.offset.toString()),e?.sortColumn&&t.set("sortColumn",e.sortColumn),e?.sortOrder&&t.set("sortOrder",e.sortOrder),e?.search&&t.set("search",e.search);let r=t.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield _a(this.fetch,i,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(dt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return te(this,void 0,void 0,function*(){try{return{data:yield Dd(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(dt(t))return{data:null,error:t};throw t}})}};_t();_t();var Ad={"X-Client-Info":`storage-js/${Vw}`,"Content-Type":"application/json"};var $w=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function On(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}var xd=class extends $w{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Hw=class extends $w{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};_t();var Rd=n=>n?(...e)=>n(...e):(...e)=>fetch(...e);var $2=n=>{if(typeof n!="object"||n===null)return!1;let e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var H2=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),tZ=(n,e,t)=>te(void 0,void 0,void 0,function*(){if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!t?.noResolveJson){let i=n.status||500,o=n;if(typeof o.json=="function")o.json().then(a=>{let c=a?.statusCode||a?.code||i+"";e(new xd(H2(a),i,c))}).catch(()=>{let a=i+"",c=o.statusText||`HTTP ${i} error`;e(new xd(c,i,a))});else{let a=i+"",c=o.statusText||`HTTP ${i} error`;e(new xd(c,i,a))}}else e(new Hw(H2(n),n))}),nZ=(n,e,t,r)=>{let i={method:n,headers:e?.headers||{}};return n==="GET"||!r?i:($2(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),t))};function rZ(n,e,t,r,i,o){return te(this,void 0,void 0,function*(){return new Promise((a,c)=>{n(t,nZ(e,r,i,o)).then(l=>{if(!l.ok)throw l;if(r?.noResolveJson)return l;let h=l.headers.get("content-type");return!h||!h.includes("application/json")?{}:l.json()}).then(l=>a(l)).catch(l=>tZ(l,c,r))})})}function Ln(n,e,t,r,i){return te(this,void 0,void 0,function*(){return rZ(n,"POST",e,r,i,t)})}var zw=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ad),t),this.fetch=Rd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return te(this,void 0,void 0,function*(){try{return{data:(yield Ln(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(On(t))return{data:null,error:t};throw t}})}getIndex(e,t){return te(this,void 0,void 0,function*(){try{return{data:yield Ln(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(On(r))return{data:null,error:r};throw r}})}listIndexes(e){return te(this,void 0,void 0,function*(){try{return{data:yield Ln(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(On(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return te(this,void 0,void 0,function*(){try{return{data:(yield Ln(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(On(r))return{data:null,error:r};throw r}})}};_t();var qw=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ad),t),this.fetch=Rd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return te(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ln(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(On(t))return{data:null,error:t};throw t}})}getVectors(e){return te(this,void 0,void 0,function*(){try{return{data:yield Ln(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(On(t))return{data:null,error:t};throw t}})}listVectors(e){return te(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Ln(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(On(t))return{data:null,error:t};throw t}})}queryVectors(e){return te(this,void 0,void 0,function*(){try{return{data:yield Ln(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(On(t))return{data:null,error:t};throw t}})}deleteVectors(e){return te(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ln(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(On(t))return{data:null,error:t};throw t}})}};_t();var Ww=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ad),t),this.fetch=Rd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return te(this,void 0,void 0,function*(){try{return{data:(yield Ln(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(On(t))return{data:null,error:t};throw t}})}getBucket(e){return te(this,void 0,void 0,function*(){try{return{data:yield Ln(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(On(t))return{data:null,error:t};throw t}})}listBuckets(){return te(this,arguments,void 0,function*(e={}){try{return{data:yield Ln(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(On(t))return{data:null,error:t};throw t}})}deleteBucket(e){return te(this,void 0,void 0,function*(){try{return{data:(yield Ln(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(On(t))return{data:null,error:t};throw t}})}};var zp=class extends Ww{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new Gw(this.url,this.headers,e,this.fetch)}},Gw=class extends zw{constructor(e,t,r,i){super(e,t,i),this.vectorBucketName=r}createIndex(e){let t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return te(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){let e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return te(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){let t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return te(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){let t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return te(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Kw(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},Kw=class extends qw{constructor(e,t,r,i,o){super(e,t,o),this.vectorBucketName=r,this.indexName=i}putVectors(e){let t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return te(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){let t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return te(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){let e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return te(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){let t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return te(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){let t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return te(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}};var qp=class extends Uw{constructor(e,t={},r,i){super(e,t,r,i)}from(e){return new Fw(this.url,this.headers,e,this.fetch)}get vectors(){return new zp(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Bw(this.url+"/iceberg",this.headers,this.fetch)}};var z2="2.84.0";var Wp="";typeof Deno<"u"?Wp="deno":typeof document<"u"?Wp="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Wp="react-native":Wp="node";var iZ={"X-Client-Info":`supabase-js-${Wp}/${z2}`},q2={headers:iZ},W2={schema:"public"},G2={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},K2={};var oZ=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),sZ=()=>Headers,Z2=(n,e,t)=>{let r=oZ(t),i=sZ();return(o,a)=>b(null,null,function*(){var c;let l=(c=yield e())!==null&&c!==void 0?c:n,h=new i(a?.headers);return h.has("apikey")||h.set("apikey",n),h.has("Authorization")||h.set("Authorization",`Bearer ${l}`),r(o,Object.assign(Object.assign({},a),{headers:h}))})};function aZ(n){return n.endsWith("/")?n:n+"/"}function Q2(n,e){var t,r;let{db:i,auth:o,realtime:a,global:c}=n,{db:l,auth:h,realtime:p,global:_}=e,E={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},h),o),realtime:Object.assign(Object.assign({},p),a),storage:{},global:Object.assign(Object.assign(Object.assign({},_),c),{headers:Object.assign(Object.assign({},(t=_?.headers)!==null&&t!==void 0?t:{}),(r=c?.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>b(null,null,function*(){return""})};return n.accessToken?E.accessToken=n.accessToken:delete E.accessToken,E}function Y2(n){let e=n?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(aZ(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}_t();_t();var Zw="2.84.0";var zc=30*1e3,Qw=3,Yw=Qw*zc,J2="http://localhost:9999",X2="supabase.auth.token";var ej={"X-Client-Info":`gotrue-js/${Zw}`};var Gp="X-Supabase-Api-Version",tx={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},tj=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,nj=600*1e3;var va=class extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}};function de(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}var Jw=class extends va{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}};function rj(n){return de(n)&&n.name==="AuthApiError"}var Hr=class extends va{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}},oo=class extends va{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}},Cn=class extends oo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function ij(n){return de(n)&&n.name==="AuthSessionMissingError"}var Yo=class extends oo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},qc=class extends oo{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},Wc=class extends oo{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function oj(n){return de(n)&&n.name==="AuthImplicitGrantRedirectError"}var Kp=class extends oo{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Pd=class extends oo{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}};function Xw(n){return de(n)&&n.name==="AuthRetryableFetchError"}var Zp=class extends oo{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}};var Gc=class extends oo{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};var eE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),sj=` 	
\r=`.split(""),cZ=(()=>{let n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<sj.length;e+=1)n[sj[e].charCodeAt(0)]=-2;for(let e=0;e<eE.length;e+=1)n[eE[e].charCodeAt(0)]=e;return n})();function aj(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){let r=e.queue>>e.queuedBits-6&63;t(eE[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){let r=e.queue>>e.queuedBits-6&63;t(eE[r]),e.queuedBits-=6}}function cj(n,e,t){let r=cZ[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function nx(n){let e=[],t=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=a=>{dZ(a,r,t)};for(let a=0;a<n.length;a+=1)cj(n.charCodeAt(a),i,o);return e.join("")}function uZ(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function lZ(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){let i=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}uZ(r,e)}}function dZ(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function ya(n){let e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<n.length;i+=1)cj(n.charCodeAt(i),t,r);return new Uint8Array(e)}function uj(n){let e=[];return lZ(n,t=>e.push(t)),new Uint8Array(e)}function Jo(n){let e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};return n.forEach(i=>aj(i,t,r)),aj(null,t,r),e.join("")}function lj(n){return Math.round(Date.now()/1e3)+n}function dj(){return Symbol("auth-callback")}var sn=()=>typeof window<"u"&&typeof document<"u",Kc={tested:!1,writable:!1},tE=()=>{if(!sn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Kc.tested)return Kc.writable;let n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Kc.tested=!0,Kc.writable=!0}catch{Kc.tested=!0,Kc.writable=!1}return Kc.writable};function hj(n){let e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}var nE=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),fj=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Zc=(n,e,t)=>b(null,null,function*(){yield n.setItem(e,JSON.stringify(t))}),wa=(n,e)=>b(null,null,function*(){let t=yield n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}}),Xo=(n,e)=>b(null,null,function*(){yield n.removeItem(e)}),Qp=class n{constructor(){this.promise=new n.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}};Qp.promiseConstructor=Promise;function rE(n){let e=n.split(".");if(e.length!==3)throw new Gc("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!tj.test(e[r]))throw new Gc("JWT not in base64url format");return{header:JSON.parse(nx(e[0])),payload:JSON.parse(nx(e[1])),signature:ya(e[2]),raw:{header:e[0],payload:e[1]}}}function pj(n){return b(this,null,function*(){return yield new Promise(e=>{setTimeout(()=>e(null),n)})})}function mj(n,e){return new Promise((r,i)=>{b(null,null,function*(){for(let o=0;o<1/0;o++)try{let a=yield n(o);if(!e(o,null,a)){r(a);return}}catch(a){if(!e(o,a)){i(a);return}}})})}function hZ(n){return("0"+n.toString(16)).substr(-2)}function fZ(){let e=new Uint32Array(56);if(typeof crypto>"u"){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length,i="";for(let o=0;o<56;o++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,hZ).join("")}function pZ(n){return b(this,null,function*(){let t=new TextEncoder().encode(n),r=yield crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")})}function mZ(n){return b(this,null,function*(){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;let t=yield pZ(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})}function Qc(n,e,t=!1){return b(this,null,function*(){let r=fZ(),i=r;t&&(i+="/PASSWORD_RECOVERY"),yield Zc(n,`${e}-code-verifier`,i);let o=yield mZ(r);return[o,r===o?"plain":"s256"]})}var gZ=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function gj(n){let e=n.headers.get(Gp);if(!e||!e.match(gZ))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function _j(n){if(!n)throw new Error("Missing exp claim");let e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function vj(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var _Z=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Yc(n){if(!_Z.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function iE(){let n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){let r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function yj(n,e){return new Proxy(n,{get:(t,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){let o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,r,i)}})}function rx(n){return JSON.parse(JSON.stringify(n))}var Jc=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),vZ=[502,503,504];function wj(n){return b(this,null,function*(){var e;if(!fj(n))throw new Pd(Jc(n),0);if(vZ.includes(n.status))throw new Pd(Jc(n),n.status);let t;try{t=yield n.json()}catch(o){throw new Hr(Jc(o),o)}let r,i=gj(n);if(i&&i.getTime()>=tx["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new Zp(Jc(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Cn}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new Zp(Jc(t),n.status,t.weak_password.reasons);throw new Jw(Jc(t),n.status||500,r)})}var yZ=(n,e,t,r)=>{let i={method:n,headers:e?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};function me(n,e,t,r){return b(this,null,function*(){var i;let o=Object.assign({},r?.headers);o[Gp]||(o[Gp]=tx["2024-01-01"].name),r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);let a=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(a.redirect_to=r.redirectTo);let c=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=yield wZ(n,e,t+c,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(l):{data:Object.assign({},l),error:null}})}function wZ(n,e,t,r,i,o){return b(this,null,function*(){let a=yZ(e,r,i,o),c;try{c=yield n(t,Object.assign({},a))}catch(l){throw console.error(l),new Pd(Jc(l),0)}if(c.ok||(yield wj(c)),r?.noResolveJson)return c;try{return yield c.json()}catch(l){yield wj(l)}})}function zr(n){var e;let t=null;EZ(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=lj(n.expires_in)));let r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function ix(n){let e=zr(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function so(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Ej(n){return{data:n,error:null}}function bj(n){let{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:o}=n,a=lr(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:o},l=Object.assign({},a);return{data:{properties:c,user:l},error:null}}function ox(n){return n}function EZ(n){return n.access_token&&n.refresh_token&&n.expires_in}var oE=["global","local","others"];var Md=class{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=nE(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}signOut(r){return b(this,arguments,function*(e,t=oE[0]){if(oE.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${oE.join(", ")}`);try{return yield me(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(de(i))return{data:null,error:i};throw i}})}inviteUserByEmail(r){return b(this,arguments,function*(e,t={}){try{return yield me(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:so})}catch(i){if(de(i))return{data:{user:null},error:i};throw i}})}generateLink(e){return b(this,null,function*(){try{let{options:t}=e,r=lr(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),yield me(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:bj,redirectTo:t?.redirectTo})}catch(t){if(de(t))return{data:{properties:null,user:null},error:t};throw t}})}createUser(e){return b(this,null,function*(){try{return yield me(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:so})}catch(t){if(de(t))return{data:{user:null},error:t};throw t}})}listUsers(e){return b(this,null,function*(){var t,r,i,o,a,c,l;try{let h={nextPage:null,lastPage:0,total:0},p=yield me(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:ox});if(p.error)throw p.error;let _=yield p.json(),E=(a=p.headers.get("x-total-count"))!==null&&a!==void 0?a:0,w=(l=(c=p.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&l!==void 0?l:[];return w.length>0&&(w.forEach(C=>{let k=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(C.split(";")[1].split("=")[1]);h[`${R}Page`]=k}),h.total=parseInt(E)),{data:Object.assign(Object.assign({},_),h),error:null}}catch(h){if(de(h))return{data:{users:[]},error:h};throw h}})}getUserById(e){return b(this,null,function*(){Yc(e);try{return yield me(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:so})}catch(t){if(de(t))return{data:{user:null},error:t};throw t}})}updateUserById(e,t){return b(this,null,function*(){Yc(e);try{return yield me(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:so})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}})}deleteUser(e,t=!1){return b(this,null,function*(){Yc(e);try{return yield me(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:so})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}})}_listFactors(e){return b(this,null,function*(){Yc(e.userId);try{let{data:t,error:r}=yield me(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(de(t))return{data:null,error:t};throw t}})}_deleteFactor(e){return b(this,null,function*(){Yc(e.userId),Yc(e.id);try{return{data:yield me(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(de(t))return{data:null,error:t};throw t}})}_listOAuthClients(e){return b(this,null,function*(){var t,r,i,o,a,c,l;try{let h={nextPage:null,lastPage:0,total:0},p=yield me(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:ox});if(p.error)throw p.error;let _=yield p.json(),E=(a=p.headers.get("x-total-count"))!==null&&a!==void 0?a:0,w=(l=(c=p.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&l!==void 0?l:[];return w.length>0&&(w.forEach(C=>{let k=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(C.split(";")[1].split("=")[1]);h[`${R}Page`]=k}),h.total=parseInt(E)),{data:Object.assign(Object.assign({},_),h),error:null}}catch(h){if(de(h))return{data:{clients:[]},error:h};throw h}})}_createOAuthClient(e){return b(this,null,function*(){try{return yield me(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(de(t))return{data:null,error:t};throw t}})}_getOAuthClient(e){return b(this,null,function*(){try{return yield me(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(de(t))return{data:null,error:t};throw t}})}_updateOAuthClient(e,t){return b(this,null,function*(){try{return yield me(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(de(r))return{data:null,error:r};throw r}})}_deleteOAuthClient(e){return b(this,null,function*(){try{return yield me(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(de(t))return{data:null,error:t};throw t}})}_regenerateOAuthClientSecret(e){return b(this,null,function*(){try{return yield me(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(de(t))return{data:null,error:t};throw t}})}};function sx(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}var Xc={debug:!!(globalThis&&tE()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},Yp=class extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}},sE=class extends Yp{};function ax(n,e,t){return b(this,null,function*(){Xc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);let r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Xc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},i=>b(null,null,function*(){if(i){Xc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return yield t()}finally{Xc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw Xc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new sE(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Xc.debug)try{let o=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield t()}})))})}function Ij(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function cx(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function Tj(n){return parseInt(n,16)}function Cj(n){let e=new TextEncoder().encode(n);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function Sj(n){var e;let{chainId:t,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:a,notBefore:c,requestId:l,resources:h,scheme:p,uri:_,version:E}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(E!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${E}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}let w=cx(n.address),C=p?`${p}://${r}`:r,k=n.statement?`${n.statement}
`:"",R=`${C} wants you to sign in with your Ethereum account:
${w}

${k}`,j=`URI: ${_}
Version: ${E}
Chain ID: ${t}${a?`
Nonce: ${a}`:""}
Issued At: ${o.toISOString()}`;if(i&&(j+=`
Expiration Time: ${i.toISOString()}`),c&&(j+=`
Not Before: ${c.toISOString()}`),l&&(j+=`
Request ID: ${l}`),h){let K=`
Resources:`;for(let q of h){if(!q||typeof q!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${q}`);K+=`
- ${q}`}j+=K}return`${R}
${j}`}_t();var kt=class extends Error{constructor({message:e,code:t,cause:r,name:i}){var o;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=t}},eu=class extends kt{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}};function Dj({error:n,options:e}){var t,r,i;let{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new kt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=o.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new kt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new kt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new kt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new kt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new kt({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return o.pubKeyCredParams.filter(c=>c.type==="public-key").length===0?new kt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new kt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){let a=window.location.hostname;if(ux(a)){if(o.rp.id!==a)return new kt({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new kt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new kt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new kt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new kt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function Aj({error:n,options:e}){let{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new kt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new kt({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){let r=window.location.hostname;if(ux(r)){if(t.rpId!==r)return new kt({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new kt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new kt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new kt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}var lx=class{createNewAbortSignal(){if(this.controller){let t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}let e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){let e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}},bZ=new lx;function Rj(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);let{challenge:e,user:t,excludeCredentials:r}=n,i=lr(n,["challenge","user","excludeCredentials"]),o=ya(e).buffer,a=Object.assign(Object.assign({},t),{id:ya(t.id).buffer}),c=Object.assign(Object.assign({},i),{challenge:o,user:a});if(r&&r.length>0){c.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){let h=r[l];c.excludeCredentials[l]=Object.assign(Object.assign({},h),{id:ya(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return c}function Pj(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);let{challenge:e,allowCredentials:t}=n,r=lr(n,["challenge","allowCredentials"]),i=ya(e).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(t&&t.length>0){o.allowCredentials=new Array(t.length);for(let a=0;a<t.length;a++){let c=t[a];o.allowCredentials[a]=Object.assign(Object.assign({},c),{id:ya(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return o}function Mj(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();let t=n;return{id:n.id,rawId:n.id,response:{attestationObject:Jo(new Uint8Array(n.response.attestationObject)),clientDataJSON:Jo(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function kj(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();let t=n,r=n.getClientExtensionResults(),i=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Jo(new Uint8Array(i.authenticatorData)),clientDataJSON:Jo(new Uint8Array(i.clientDataJSON)),signature:Jo(new Uint8Array(i.signature)),userHandle:i.userHandle?Jo(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function ux(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function xj(){var n,e;return!!(sn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}function IZ(n){return b(this,null,function*(){try{let e=yield navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new eu("Browser returned unexpected credential type",e)}:{data:null,error:new eu("Empty credential response",e)}}catch(e){return{data:null,error:Dj({error:e,options:n})}}})}function TZ(n){return b(this,null,function*(){try{let e=yield navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new eu("Browser returned unexpected credential type",e)}:{data:null,error:new eu("Empty credential response",e)}}catch(e){return{data:null,error:Aj({error:e,options:n})}}})}var CZ={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},SZ={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function aE(...n){let e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),t=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(let i of n)if(i)for(let o in i){let a=i[o];if(a!==void 0)if(Array.isArray(a))r[o]=a;else if(t(a))r[o]=a;else if(e(a)){let c=r[o];e(c)?r[o]=aE(c,a):r[o]=aE(a)}else r[o]=a}return r}function DZ(n,e){return aE(CZ,n,e||{})}function AZ(n,e){return aE(SZ,n,e||{})}var cE=class{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}_enroll(e){return b(this,null,function*(){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))})}_challenge(a,c){return b(this,arguments,function*({factorId:e,webauthn:t,friendlyName:r,signal:i},o){try{let{data:l,error:h}=yield this.client.mfa.challenge({factorId:e,webauthn:t});if(!l)return{data:null,error:h};let p=i??bZ.createNewAbortSignal();if(l.webauthn.type==="create"){let{user:_}=l.webauthn.credential_options.publicKey;_.name||(_.name=`${_.id}:${r}`),_.displayName||(_.displayName=_.name)}switch(l.webauthn.type){case"create":{let _=DZ(l.webauthn.credential_options.publicKey,o?.create),{data:E,error:w}=yield IZ({publicKey:_,signal:p});return E?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:E}},error:null}:{data:null,error:w}}case"request":{let _=AZ(l.webauthn.credential_options.publicKey,o?.request),{data:E,error:w}=yield TZ(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:_,signal:p}));return E?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:E}},error:null}:{data:null,error:w}}}}catch(l){return de(l)?{data:null,error:l}:{data:null,error:new Hr("Unexpected error in challenge",l)}}})}_verify(i){return b(this,arguments,function*({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})})}_authenticate(a,c){return b(this,arguments,function*({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!t)return{data:null,error:new va("rpId is required for WebAuthn authentication")};try{if(!xj())return{data:null,error:new Hr("Browser does not support WebAuthn",null)};let{data:l,error:h}=yield this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:i},{request:o});if(!l)return{data:null,error:h};let{webauthn:p}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:p.type,rpId:t,rpOrigins:r,credential_response:p.credential_response}})}catch(l){return de(l)?{data:null,error:l}:{data:null,error:new Hr("Unexpected error in authenticate",l)}}})}_register(a,c){return b(this,arguments,function*({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!t)return{data:null,error:new va("rpId is required for WebAuthn registration")};try{if(!xj())return{data:null,error:new Hr("Browser does not support WebAuthn",null)};let{data:l,error:h}=yield this._enroll({friendlyName:e});if(!l)return yield this.client.mfa.listFactors().then(E=>{var w;return(w=E.data)===null||w===void 0?void 0:w.all.find(C=>C.factor_type==="webauthn"&&C.friendly_name===e&&C.status!=="unverified")}).then(E=>E?this.client.mfa.unenroll({factorId:E?.id}):void 0),{data:null,error:h};let{data:p,error:_}=yield this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:i},{create:o});return p?this._verify({factorId:l.id,challengeId:p.challengeId,webauthn:{rpId:t,rpOrigins:r,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:_}}catch(l){return de(l)?{data:null,error:l}:{data:null,error:new Hr("Unexpected error in register",l)}}})}};Ij();var xZ={url:J2,storageKey:X2,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ej,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};function Nj(n,e,t){return b(this,null,function*(){return yield t()})}var kd={},RZ=(()=>{class n{get jwks(){var t,r;return(r=(t=kd[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){kd[this.storageKey]=Object.assign(Object.assign({},kd[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=kd[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){kd[this.storageKey]=Object.assign(Object.assign({},kd[this.storageKey]),{cachedAt:t})}constructor(t){var r,i,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;let a=Object.assign(Object.assign({},xZ),t);if(this.storageKey=a.storageKey,this.instanceID=(r=n.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,n.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&sn()){let c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Md({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=nE(a.fetch),this.lock=a.lock||Nj,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:sn()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=ax:this.lock=Nj,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new cE(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:tE()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=sx(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=sx(this.memoryStorage)),sn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",c=>b(this,null,function*(){this._debug("received broadcast notification from other tab or client",c),yield this._notifyAllSubscribers(c.data.event,c.data.session,!1)}))}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Zw}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}initialize(){return b(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=b(this,null,function*(){return yield this._acquireLock(-1,()=>b(this,null,function*(){return yield this._initialize()}))}),yield this.initializePromise)})}_initialize(){return b(this,null,function*(){var t;try{let r={},i="none";if(sn()&&(r=hj(window.location.href),this._isImplicitGrantCallback(r)?i="implicit":(yield this._isPKCECallback(r))&&(i="pkce")),sn()&&this.detectSessionInUrl&&i!=="none"){let{data:o,error:a}=yield this._getSessionFromURL(r,i);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),oj(a)){let h=(t=a.details)===null||t===void 0?void 0:t.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:a}}return yield this._removeSession(),{error:a}}let{session:c,redirectType:l}=o;return this._debug("#_initialize()","detected session in URL",c,"redirect type",l),yield this._saveSession(c),setTimeout(()=>b(this,null,function*(){l==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",c):yield this._notifyAllSubscribers("SIGNED_IN",c)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(r){return de(r)?this._returnResult({error:r}):this._returnResult({error:new Hr("Unexpected error during initialization",r)})}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signInAnonymously(t){return b(this,null,function*(){var r,i,o;try{let a=yield me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=t?.options)===null||o===void 0?void 0:o.captchaToken}},xform:zr}),{data:c,error:l}=a;if(l||!c)return this._returnResult({data:{user:null,session:null},error:l});let h=c.session,p=c.user;return c.session&&(yield this._saveSession(c.session),yield this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:p,session:h},error:null})}catch(a){if(de(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}signUp(t){return b(this,null,function*(){var r,i,o;try{let a;if("email"in t){let{email:_,password:E,options:w}=t,C=null,k=null;this.flowType==="pkce"&&([C,k]=yield Qc(this.storage,this.storageKey)),a=yield me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w?.emailRedirectTo,body:{email:_,password:E,data:(r=w?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:w?.captchaToken},code_challenge:C,code_challenge_method:k},xform:zr})}else if("phone"in t){let{phone:_,password:E,options:w}=t;a=yield me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:_,password:E,data:(i=w?.data)!==null&&i!==void 0?i:{},channel:(o=w?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:w?.captchaToken}},xform:zr})}else throw new qc("You must provide either an email or phone number and a password");let{data:c,error:l}=a;if(l||!c)return this._returnResult({data:{user:null,session:null},error:l});let h=c.session,p=c.user;return c.session&&(yield this._saveSession(c.session),yield this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:p,session:h},error:null})}catch(a){if(de(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}signInWithPassword(t){return b(this,null,function*(){try{let r;if("email"in t){let{email:a,password:c,options:l}=t;r=yield me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:c,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:ix})}else if("phone"in t){let{phone:a,password:c,options:l}=t;r=yield me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:c,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:ix})}else throw new qc("You must provide either an email or phone number and a password");let{data:i,error:o}=r;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!i||!i.session||!i.user){let a=new Yo;return this._returnResult({data:{user:null,session:null},error:a})}return i.session&&(yield this._saveSession(i.session),yield this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(r){if(de(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}signInWithOAuth(t){return b(this,null,function*(){var r,i,o,a;return yield this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})})}exchangeCodeForSession(t){return b(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>b(this,null,function*(){return this._exchangeCodeForSession(t)}))})}signInWithWeb3(t){return b(this,null,function*(){let{chain:r}=t;switch(r){case"ethereum":return yield this.signInWithEthereum(t);case"solana":return yield this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}})}signInWithEthereum(t){return b(this,null,function*(){var r,i,o,a,c,l,h,p,_,E,w;let C,k;if("message"in t)C=t.message,k=t.signature;else{let{chain:R,wallet:j,statement:K,options:q}=t,Z;if(sn())if(typeof j=="object")Z=j;else{let P=window;if("ethereum"in P&&typeof P.ethereum=="object"&&"request"in P.ethereum&&typeof P.ethereum.request=="function")Z=P.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!q?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Z=j}let pe=new URL((r=q?.url)!==null&&r!==void 0?r:window.location.href),Pe=yield Z.request({method:"eth_requestAccounts"}).then(P=>P).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Pe||Pe.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");let M=cx(Pe[0]),S=(i=q?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!S){let P=yield Z.request({method:"eth_chainId"});S=Tj(P)}let D={domain:pe.host,address:M,statement:K,uri:pe.href,version:"1",chainId:S,nonce:(o=q?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(c=(a=q?.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(l=q?.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(h=q?.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(p=q?.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(_=q?.signInWithEthereum)===null||_===void 0?void 0:_.resources};C=Sj(D),k=yield Z.request({method:"personal_sign",params:[Cj(C),M]})}try{let{data:R,error:j}=yield me(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:C,signature:k},!((E=t.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(w=t.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:zr});if(j)throw j;if(!R||!R.session||!R.user){let K=new Yo;return this._returnResult({data:{user:null,session:null},error:K})}return R.session&&(yield this._saveSession(R.session),yield this._notifyAllSubscribers("SIGNED_IN",R.session)),this._returnResult({data:Object.assign({},R),error:j})}catch(R){if(de(R))return this._returnResult({data:{user:null,session:null},error:R});throw R}})}signInWithSolana(t){return b(this,null,function*(){var r,i,o,a,c,l,h,p,_,E,w,C;let k,R;if("message"in t)k=t.message,R=t.signature;else{let{chain:j,wallet:K,statement:q,options:Z}=t,pe;if(sn())if(typeof K=="object")pe=K;else{let M=window;if("solana"in M&&typeof M.solana=="object"&&("signIn"in M.solana&&typeof M.solana.signIn=="function"||"signMessage"in M.solana&&typeof M.solana.signMessage=="function"))pe=M.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof K!="object"||!Z?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");pe=K}let Pe=new URL((r=Z?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in pe&&pe.signIn){let M=yield pe.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},Z?.signInWithSolana),{version:"1",domain:Pe.host,uri:Pe.href}),q?{statement:q}:null)),S;if(Array.isArray(M)&&M[0]&&typeof M[0]=="object")S=M[0];else if(M&&typeof M=="object"&&"signedMessage"in M&&"signature"in M)S=M;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)k=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),R=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in pe)||typeof pe.signMessage!="function"||!("publicKey"in pe)||typeof pe!="object"||!pe.publicKey||!("toBase58"in pe.publicKey)||typeof pe.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${Pe.host} wants you to sign in with your Solana account:`,pe.publicKey.toBase58(),...q?["",q,""]:[""],"Version: 1",`URI: ${Pe.href}`,`Issued At: ${(o=(i=Z?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((a=Z?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${Z.signInWithSolana.notBefore}`]:[],...!((c=Z?.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${Z.signInWithSolana.expirationTime}`]:[],...!((l=Z?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${Z.signInWithSolana.chainId}`]:[],...!((h=Z?.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${Z.signInWithSolana.nonce}`]:[],...!((p=Z?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${Z.signInWithSolana.requestId}`]:[],...!((E=(_=Z?.signInWithSolana)===null||_===void 0?void 0:_.resources)===null||E===void 0)&&E.length?["Resources",...Z.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);let M=yield pe.signMessage(new TextEncoder().encode(k),"utf8");if(!M||!(M instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");R=M}}try{let{data:j,error:K}=yield me(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:Jo(R)},!((w=t.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(C=t.options)===null||C===void 0?void 0:C.captchaToken}}:null),xform:zr});if(K)throw K;if(!j||!j.session||!j.user){let q=new Yo;return this._returnResult({data:{user:null,session:null},error:q})}return j.session&&(yield this._saveSession(j.session),yield this._notifyAllSubscribers("SIGNED_IN",j.session)),this._returnResult({data:Object.assign({},j),error:K})}catch(j){if(de(j))return this._returnResult({data:{user:null,session:null},error:j});throw j}})}_exchangeCodeForSession(t){return b(this,null,function*(){let r=yield wa(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(r??"").split("/");try{let{data:a,error:c}=yield me(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:zr});if(yield Xo(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!a||!a.session||!a.user){let l=new Yo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:o??null}),error:c})}catch(a){if(de(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}})}signInWithIdToken(t){return b(this,null,function*(){try{let{options:r,provider:i,token:o,access_token:a,nonce:c}=t,l=yield me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:a,nonce:c,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:zr}),{data:h,error:p}=l;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!h||!h.session||!h.user){let _=new Yo;return this._returnResult({data:{user:null,session:null},error:_})}return h.session&&(yield this._saveSession(h.session),yield this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:h,error:p})}catch(r){if(de(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}signInWithOtp(t){return b(this,null,function*(){var r,i,o,a,c;try{if("email"in t){let{email:l,options:h}=t,p=null,_=null;this.flowType==="pkce"&&([p,_]=yield Qc(this.storage,this.storageKey));let{error:E}=yield me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=h?.data)!==null&&r!==void 0?r:{},create_user:(i=h?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:p,code_challenge_method:_},redirectTo:h?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:E})}if("phone"in t){let{phone:l,options:h}=t,{data:p,error:_}=yield me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(o=h?.data)!==null&&o!==void 0?o:{},create_user:(a=h?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},channel:(c=h?.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p?.message_id},error:_})}throw new qc("You must provide either an email or phone number.")}catch(l){if(de(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}})}verifyOtp(t){return b(this,null,function*(){var r,i;try{let o,a;"options"in t&&(o=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(i=t.options)===null||i===void 0?void 0:i.captchaToken);let{data:c,error:l}=yield me(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:o,xform:zr});if(l)throw l;if(!c)throw new Error("An error occurred on token verification.");let h=c.session,p=c.user;return h?.access_token&&(yield this._saveSession(h),yield this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),this._returnResult({data:{user:p,session:h},error:null})}catch(o){if(de(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}signInWithSSO(t){return b(this,null,function*(){var r,i,o,a,c;try{let l=null,h=null;this.flowType==="pkce"&&([l,h]=yield Qc(this.storage,this.storageKey));let p=yield me(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=t?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:h}),headers:this.headers,xform:Ej});return!((a=p.data)===null||a===void 0)&&a.url&&sn()&&!(!((c=t.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(l){if(de(l))return this._returnResult({data:null,error:l});throw l}})}reauthenticate(){return b(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>b(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return b(this,null,function*(){try{return yield this._useSession(t=>b(this,null,function*(){let{data:{session:r},error:i}=t;if(i)throw i;if(!r)throw new Cn;let{error:o}=yield me(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:o})}))}catch(t){if(de(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}})}resend(t){return b(this,null,function*(){try{let r=`${this.url}/resend`;if("email"in t){let{email:i,type:o,options:a}=t,{error:c}=yield me(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in t){let{phone:i,type:o,options:a}=t,{data:c,error:l}=yield me(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c?.message_id},error:l})}throw new qc("You must provide either an email or phone number and a type")}catch(r){if(de(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}getSession(){return b(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>b(this,null,function*(){return this._useSession(r=>b(this,null,function*(){return r}))}))})}_acquireLock(t,r){return b(this,null,function*(){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){let i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=b(this,null,function*(){return yield i,yield r()});return this.pendingInLock.push(b(this,null,function*(){try{yield o}catch{}})),o}return yield this.lock(`lock:${this.storageKey}`,t,()=>b(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let i=r();for(this.pendingInLock.push(b(this,null,function*(){try{yield i}catch{}})),yield i;this.pendingInLock.length;){let o=[...this.pendingInLock];yield Promise.all(o),this.pendingInLock.splice(0,o.length)}return yield i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(t){return b(this,null,function*(){this._debug("#_useSession","begin");try{let r=yield this.__loadSession();return yield t(r)}finally{this._debug("#_useSession","end")}})}__loadSession(){return b(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null,r=yield wa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!t)return{data:{session:null},error:null};let i=t.expires_at?t.expires_at*1e3-Date.now()<Yw:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){let c=yield wa(this.userStorage,this.storageKey+"-user");c?.user?t.user=c.user:t.user=iE()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){let c={value:this.suppressGetSessionWarning};t.user=yj(t.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}let{data:o,error:a}=yield this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}})}getUser(t){return b(this,null,function*(){return t?yield this._getUser(t):(yield this.initializePromise,yield this._acquireLock(-1,()=>b(this,null,function*(){return yield this._getUser()})))})}_getUser(t){return b(this,null,function*(){try{return t?yield me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:so}):yield this._useSession(r=>b(this,null,function*(){var i,o,a;let{data:c,error:l}=r;if(l)throw l;return!(!((i=c.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Cn}:yield me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(o=c.session)===null||o===void 0?void 0:o.access_token)!==null&&a!==void 0?a:void 0,xform:so})}))}catch(r){if(de(r))return ij(r)&&(yield this._removeSession(),yield Xo(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}})}updateUser(i){return b(this,arguments,function*(t,r={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>b(this,null,function*(){return yield this._updateUser(t,r)}))})}_updateUser(i){return b(this,arguments,function*(t,r={}){try{return yield this._useSession(o=>b(this,null,function*(){let{data:a,error:c}=o;if(c)throw c;if(!a.session)throw new Cn;let l=a.session,h=null,p=null;this.flowType==="pkce"&&t.email!=null&&([h,p]=yield Qc(this.storage,this.storageKey));let{data:_,error:E}=yield me(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:h,code_challenge_method:p}),jwt:l.access_token,xform:so});if(E)throw E;return l.user=_.user,yield this._saveSession(l),yield this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})}))}catch(o){if(de(o))return this._returnResult({data:{user:null},error:o});throw o}})}setSession(t){return b(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>b(this,null,function*(){return yield this._setSession(t)}))})}_setSession(t){return b(this,null,function*(){try{if(!t.access_token||!t.refresh_token)throw new Cn;let r=Date.now()/1e3,i=r,o=!0,a=null,{payload:c}=rE(t.access_token);if(c.exp&&(i=c.exp,o=i<=r),o){let{data:l,error:h}=yield this._callRefreshToken(t.refresh_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!l)return{data:{user:null,session:null},error:null};a=l}else{let{data:l,error:h}=yield this._getUser(t.access_token);if(h)throw h;a={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:i-r,expires_at:i},yield this._saveSession(a),yield this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(r){if(de(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}})}refreshSession(t){return b(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>b(this,null,function*(){return yield this._refreshSession(t)}))})}_refreshSession(t){return b(this,null,function*(){try{return yield this._useSession(r=>b(this,null,function*(){var i;if(!t){let{data:c,error:l}=r;if(l)throw l;t=(i=c.session)!==null&&i!==void 0?i:void 0}if(!t?.refresh_token)throw new Cn;let{data:o,error:a}=yield this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})}))}catch(r){if(de(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}_getSessionFromURL(t,r){return b(this,null,function*(){try{if(!sn())throw new Wc("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Wc(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Kp("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Wc("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Kp("No code detected.");let{data:q,error:Z}=yield this._exchangeCodeForSession(t.code);if(Z)throw Z;let pe=new URL(window.location.href);return pe.searchParams.delete("code"),window.history.replaceState(window.history.state,"",pe.toString()),{data:{session:q.session,redirectType:null},error:null}}let{provider_token:i,provider_refresh_token:o,access_token:a,refresh_token:c,expires_in:l,expires_at:h,token_type:p}=t;if(!a||!l||!c||!p)throw new Wc("No session defined in URL");let _=Math.round(Date.now()/1e3),E=parseInt(l),w=_+E;h&&(w=parseInt(h));let C=w-_;C*1e3<=zc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${C}s, should have been closer to ${E}s`);let k=w-E;_-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,w,_):_-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,w,_);let{data:R,error:j}=yield this._getUser(a);if(j)throw j;let K={provider_token:i,provider_refresh_token:o,access_token:a,expires_in:E,expires_at:w,refresh_token:c,token_type:p,user:R.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:K,redirectType:t.type},error:null})}catch(i){if(de(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}})}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}_isPKCECallback(t){return b(this,null,function*(){let r=yield wa(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)})}signOut(){return b(this,arguments,function*(t={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>b(this,null,function*(){return yield this._signOut(t)}))})}_signOut(){return b(this,arguments,function*({scope:t}={scope:"global"}){return yield this._useSession(r=>b(this,null,function*(){var i;let{data:o,error:a}=r;if(a)return this._returnResult({error:a});let c=(i=o.session)===null||i===void 0?void 0:i.access_token;if(c){let{error:l}=yield this.admin.signOut(c,t);if(l&&!(rj(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(yield this._removeSession(),yield Xo(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})}))})}onAuthStateChange(t){let r=dj(),i={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),b(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>b(this,null,function*(){this._emitInitialSession(r)}))}),{data:{subscription:i}}}_emitInitialSession(t){return b(this,null,function*(){return yield this._useSession(r=>b(this,null,function*(){var i,o;try{let{data:{session:a},error:c}=r;if(c)throw c;yield(i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",a),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){yield(o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}}))})}resetPasswordForEmail(i){return b(this,arguments,function*(t,r={}){let o=null,a=null;this.flowType==="pkce"&&([o,a]=yield Qc(this.storage,this.storageKey,!0));try{return yield me(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:o,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(c){if(de(c))return this._returnResult({data:null,error:c});throw c}})}getUserIdentities(){return b(this,null,function*(){var t;try{let{data:r,error:i}=yield this.getUser();if(i)throw i;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(de(r))return this._returnResult({data:null,error:r});throw r}})}linkIdentity(t){return b(this,null,function*(){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)})}linkIdentityOAuth(t){return b(this,null,function*(){var r;try{let{data:i,error:o}=yield this._useSession(a=>b(this,null,function*(){var c,l,h,p,_;let{data:E,error:w}=a;if(w)throw w;let C=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(c=t.options)===null||c===void 0?void 0:c.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(h=t.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return yield me(this.fetch,"GET",C,{headers:this.headers,jwt:(_=(p=E.session)===null||p===void 0?void 0:p.access_token)!==null&&_!==void 0?_:void 0})}));if(o)throw o;return sn()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),this._returnResult({data:{provider:t.provider,url:i?.url},error:null})}catch(i){if(de(i))return this._returnResult({data:{provider:t.provider,url:null},error:i});throw i}})}linkIdentityIdToken(t){return b(this,null,function*(){return yield this._useSession(r=>b(this,null,function*(){var i;try{let{error:o,data:{session:a}}=r;if(o)throw o;let{options:c,provider:l,token:h,access_token:p,nonce:_}=t,E=yield me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=a?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:l,id_token:h,access_token:p,nonce:_,link_identity:!0,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:zr}),{data:w,error:C}=E;return C?this._returnResult({data:{user:null,session:null},error:C}):!w||!w.session||!w.user?this._returnResult({data:{user:null,session:null},error:new Yo}):(w.session&&(yield this._saveSession(w.session),yield this._notifyAllSubscribers("USER_UPDATED",w.session)),this._returnResult({data:w,error:C}))}catch(o){if(de(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}))})}unlinkIdentity(t){return b(this,null,function*(){try{return yield this._useSession(r=>b(this,null,function*(){var i,o;let{data:a,error:c}=r;if(c)throw c;return yield me(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(o=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})}))}catch(r){if(de(r))return this._returnResult({data:null,error:r});throw r}})}_refreshAccessToken(t){return b(this,null,function*(){let r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{let i=Date.now();return yield mj(o=>b(this,null,function*(){return o>0&&(yield pj(200*Math.pow(2,o-1))),this._debug(r,"refreshing attempt",o),yield me(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:zr})}),(o,a)=>{let c=200*Math.pow(2,o);return a&&Xw(a)&&Date.now()+c-i<zc})}catch(i){if(this._debug(r,"error",i),de(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(r,"end")}})}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}_handleProviderSignIn(t,r){return b(this,null,function*(){let i=yield this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",i),sn()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}})}_recoverAndRefresh(){return b(this,null,function*(){var t,r;let i="#_recoverAndRefresh()";this._debug(i,"begin");try{let o=yield wa(this.storage,this.storageKey);if(o&&this.userStorage){let c=yield wa(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:o.user},yield Zc(this.userStorage,this.storageKey+"-user",c)),o.user=(t=c?.user)!==null&&t!==void 0?t:iE()}else if(o&&!o.user&&!o.user){let c=yield wa(this.storage,this.storageKey+"-user");c&&c?.user?(o.user=c.user,yield Xo(this.storage,this.storageKey+"-user"),yield Zc(this.storage,this.storageKey,o)):o.user=iE()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&(yield this._removeSession());return}let a=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Yw;if(this._debug(i,`session has${a?"":" not"} expired with margin of ${Yw}s`),a){if(this.autoRefreshToken&&o.refresh_token){let{error:c}=yield this._callRefreshToken(o.refresh_token);c&&(console.error(c),Xw(c)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",c),yield this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{let{data:c,error:l}=yield this._getUser(o.access_token);!l&&c?.user?(o.user=c.user,yield this._saveSession(o),yield this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(i,"error getting user data, skipping SIGNED_IN notification",c)}else yield this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}})}_callRefreshToken(t){return b(this,null,function*(){var r,i;if(!t)throw new Cn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let o=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Qp;let{data:a,error:c}=yield this._refreshAccessToken(t);if(c)throw c;if(!a.session)throw new Cn;yield this._saveSession(a.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);let l={data:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(o,"error",a),de(a)){let c={data:null,error:a};return Xw(a)||(yield this._removeSession()),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(c),c}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(a),a}finally{this.refreshingDeferred=null,this._debug(o,"end")}})}_notifyAllSubscribers(t,r,i=!0){return b(this,null,function*(){let o=`#_notifyAllSubscribers(${t})`;this._debug(o,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:r});let a=[],c=Array.from(this.stateChangeEmitters.values()).map(l=>b(this,null,function*(){try{yield l.callback(t,r)}catch(h){a.push(h)}}));if(yield Promise.all(c),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(o,"end")}})}_saveSession(t){return b(this,null,function*(){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;let r=Object.assign({},t),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&(yield Zc(this.userStorage,this.storageKey+"-user",{user:r.user}));let o=Object.assign({},r);delete o.user;let a=rx(o);yield Zc(this.storage,this.storageKey,a)}else{let o=rx(r);yield Zc(this.storage,this.storageKey,o)}})}_removeSession(){return b(this,null,function*(){this._debug("#_removeSession()"),yield Xo(this.storage,this.storageKey),yield Xo(this.storage,this.storageKey+"-code-verifier"),yield Xo(this.storage,this.storageKey+"-user"),this.userStorage&&(yield Xo(this.userStorage,this.storageKey+"-user")),yield this._notifyAllSubscribers("SIGNED_OUT",null)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&sn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}_startAutoRefresh(){return b(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let t=setInterval(()=>this._autoRefreshTokenTick(),zc);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(()=>b(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return b(this,null,function*(){this._debug("#_stopAutoRefresh()");let t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)})}startAutoRefresh(){return b(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return b(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return b(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>b(this,null,function*(){try{let t=Date.now();try{return yield this._useSession(r=>b(this,null,function*(){let{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let o=Math.floor((i.expires_at*1e3-t)/zc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${zc}ms, refresh threshold is ${Qw} ticks`),o<=Qw&&(yield this._callRefreshToken(i.refresh_token))}))}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(t){if(t.isAcquireTimeout||t instanceof Yp)this._debug("auto refresh token tick lock not available");else throw t}})}_handleVisibilityChange(){return b(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!sn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>b(this,null,function*(){return yield this._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}})}_onVisibilityChanged(t){return b(this,null,function*(){let r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(yield this.initializePromise,yield this._acquireLock(-1,()=>b(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(t,r,i){return b(this,null,function*(){let o=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){let[a,c]=yield Qc(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(c)}`});o.push(l.toString())}if(i?.queryParams){let a=new URLSearchParams(i.queryParams);o.push(a.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${o.join("&")}`})}_unenroll(t){return b(this,null,function*(){try{return yield this._useSession(r=>b(this,null,function*(){var i;let{data:o,error:a}=r;return a?this._returnResult({data:null,error:a}):yield me(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})}))}catch(r){if(de(r))return this._returnResult({data:null,error:r});throw r}})}_enroll(t){return b(this,null,function*(){try{return yield this._useSession(r=>b(this,null,function*(){var i,o;let{data:a,error:c}=r;if(c)return this._returnResult({data:null,error:c});let l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:h,error:p}=yield me(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(i=a?.session)===null||i===void 0?void 0:i.access_token});return p?this._returnResult({data:null,error:p}):(t.factorType==="totp"&&h.type==="totp"&&(!((o=h?.totp)===null||o===void 0)&&o.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),this._returnResult({data:h,error:null}))}))}catch(r){if(de(r))return this._returnResult({data:null,error:r});throw r}})}_verify(t){return b(this,null,function*(){return this._acquireLock(-1,()=>b(this,null,function*(){try{return yield this._useSession(r=>b(this,null,function*(){var i;let{data:o,error:a}=r;if(a)return this._returnResult({data:null,error:a});let c=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Mj(t.webauthn.credential_response):kj(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:h}=yield me(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:c,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return h?this._returnResult({data:null,error:h}):(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:h}))}))}catch(r){if(de(r))return this._returnResult({data:null,error:r});throw r}}))})}_challenge(t){return b(this,null,function*(){return this._acquireLock(-1,()=>b(this,null,function*(){try{return yield this._useSession(r=>b(this,null,function*(){var i;let{data:o,error:a}=r;if(a)return this._returnResult({data:null,error:a});let c=yield me(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});if(c.error)return c;let{data:l}=c;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Rj(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Pj(l.webauthn.credential_options.publicKey)})})}),error:null}}}))}catch(r){if(de(r))return this._returnResult({data:null,error:r});throw r}}))})}_challengeAndVerify(t){return b(this,null,function*(){let{data:r,error:i}=yield this._challenge({factorId:t.factorId});return i?this._returnResult({data:null,error:i}):yield this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})})}_listFactors(){return b(this,null,function*(){var t;let{data:{user:r},error:i}=yield this.getUser();if(i)return{data:null,error:i};let o={all:[],phone:[],totp:[],webauthn:[]};for(let a of(t=r?.factors)!==null&&t!==void 0?t:[])o.all.push(a),a.status==="verified"&&o[a.factor_type].push(a);return{data:o,error:null}})}_getAuthenticatorAssuranceLevel(){return b(this,null,function*(){var t,r;let{data:{session:i},error:o}=yield this.getSession();if(o)return this._returnResult({data:null,error:o});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:a}=rE(i.access_token),c=null;a.aal&&(c=a.aal);let l=c;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(_=>_.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");let p=a.amr||[];return{data:{currentLevel:c,nextLevel:l,currentAuthenticationMethods:p},error:null}})}_getAuthorizationDetails(t){return b(this,null,function*(){try{return yield this._useSession(r=>b(this,null,function*(){let{data:{session:i},error:o}=r;return o?this._returnResult({data:null,error:o}):i?yield me(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:i.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Cn})}))}catch(r){if(de(r))return this._returnResult({data:null,error:r});throw r}})}_approveAuthorization(t,r){return b(this,null,function*(){try{return yield this._useSession(i=>b(this,null,function*(){let{data:{session:o},error:a}=i;if(a)return this._returnResult({data:null,error:a});if(!o)return this._returnResult({data:null,error:new Cn});let c=yield me(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return c.data&&c.data.redirect_url&&sn()&&!r?.skipBrowserRedirect&&window.location.assign(c.data.redirect_url),c}))}catch(i){if(de(i))return this._returnResult({data:null,error:i});throw i}})}_denyAuthorization(t,r){return b(this,null,function*(){try{return yield this._useSession(i=>b(this,null,function*(){let{data:{session:o},error:a}=i;if(a)return this._returnResult({data:null,error:a});if(!o)return this._returnResult({data:null,error:new Cn});let c=yield me(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return c.data&&c.data.redirect_url&&sn()&&!r?.skipBrowserRedirect&&window.location.assign(c.data.redirect_url),c}))}catch(i){if(de(i))return this._returnResult({data:null,error:i});throw i}})}_listOAuthGrants(){return b(this,null,function*(){try{return yield this._useSession(t=>b(this,null,function*(){let{data:{session:r},error:i}=t;return i?this._returnResult({data:null,error:i}):r?yield me(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Cn})}))}catch(t){if(de(t))return this._returnResult({data:null,error:t});throw t}})}_revokeOAuthGrant(t){return b(this,null,function*(){try{return yield this._useSession(r=>b(this,null,function*(){let{data:{session:i},error:o}=r;return o?this._returnResult({data:null,error:o}):i?yield me(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:t.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new Cn})}))}catch(r){if(de(r))return this._returnResult({data:null,error:r});throw r}})}fetchJwk(i){return b(this,arguments,function*(t,r={keys:[]}){let o=r.keys.find(h=>h.kid===t);if(o)return o;let a=Date.now();if(o=this.jwks.keys.find(h=>h.kid===t),o&&this.jwks_cached_at+nj>a)return o;let{data:c,error:l}=yield me(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=a,o=c.keys.find(h=>h.kid===t),!o)?null:o})}getClaims(i){return b(this,arguments,function*(t,r={}){try{let o=t;if(!o){let{data:k,error:R}=yield this.getSession();if(R||!k.session)return this._returnResult({data:null,error:R});o=k.session.access_token}let{header:a,payload:c,signature:l,raw:{header:h,payload:p}}=rE(o);r?.allowExpired||_j(c.exp);let _=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:yield this.fetchJwk(a.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!_){let{error:k}=yield this.getUser(o);if(k)throw k;return{data:{claims:c,header:a,signature:l},error:null}}let E=vj(a.alg),w=yield crypto.subtle.importKey("jwk",_,E,!0,["verify"]);if(!(yield crypto.subtle.verify(E,w,l,uj(`${h}.${p}`))))throw new Gc("Invalid JWT signature");return{data:{claims:c,header:a,signature:l},error:null}}catch(o){if(de(o))return this._returnResult({data:null,error:o});throw o}})}}return n.nextInstanceID={},n})(),dx=RZ;var PZ=dx,hx=PZ;var uE=class extends hx{constructor(e){super(e)}};var lE=class{constructor(e,t,r){var i,o,a;this.supabaseUrl=e,this.supabaseKey=t;let c=Y2(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);let l=`sb-${c.hostname.split(".")[0]}-auth-token`,h={db:W2,realtime:K2,auth:Object.assign(Object.assign({},G2),{storageKey:l}),global:q2},p=Q2(r??{},h);this.storageKey=(i=p.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=p.global.headers)!==null&&o!==void 0?o:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(_,E)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(E)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=p.auth)!==null&&a!==void 0?a:{},this.headers,p.global.fetch),this.fetch=Z2(t,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.accessToken&&this.accessToken().then(_=>this.realtime.setAuth(_)).catch(_=>console.warn("Failed to set initial Realtime auth token:",_)),this.rest=new x2(new URL("rest/v1",c).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new qp(this.storageUrl.href,this.headers,this.fetch,r?.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new Op(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return b(this,null,function*(){var e,t;if(this.accessToken)return yield this.accessToken();let{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:o,storageKey:a,flowType:c,lock:l,debug:h,throwOnError:p},_,E){let w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new uE({url:this.authUrl.href,headers:Object.assign(Object.assign({},w),_),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:o,flowType:c,lock:l,debug:h,throwOnError:p,fetch:E,hasCustomAuthorizationHeader:Object.keys(this.headers).some(C=>C.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Bp(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var Oj=(n,e,t)=>new lE(n,e,t);function MZ(){if(typeof window<"u"||typeof process>"u")return!1;let n=process.version;if(n==null)return!1;let e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}MZ()&&console.warn("\u26A0\uFE0F  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var Nd={production:!1,firebaseConfig:{apiKey:"AIzaSyA36WJbXgjRzOjLvU4WM6ZXp4CLWff-0-o",authDomain:"kerkennahmap.firebaseapp.com",projectId:"kerkennahmap",storageBucket:"kerkennahmap.firebasestorage.app",messagingSenderId:"271484483702",appId:"1:271484483702:web:5557f410ceaacac2010757",measurementId:"G-FXFDCLE25Q"},supabaseUrl:"https://bcuxfuqgwoqyammgmpjw.supabase.co",supabaseKey:"sb_secret_GnRXdBMwhJqpO4LZGKfwKg_HbVpIYjh"};var Od=class n{supabase=null;bucketName="places-images";constructor(){let e=Nd.supabaseUrl,t=Nd.supabaseKey;e&&t&&!e.includes("votre-projet")?(this.supabase=Oj(e,t),console.log("\u2705 Supabase initialis\xE9 avec succ\xE8s.")):console.warn("\u26A0\uFE0F Supabase non configur\xE9 ou cl\xE9s par d\xE9faut d\xE9tect\xE9es.")}uploadImage(e,t){return b(this,null,function*(){if(!this.supabase)throw new Error("Supabase client non initialis\xE9. V\xE9rifiez environment.ts");console.log(`\u{1F4E4} Upload vers ${this.bucketName}/${t}...`);let{data:r,error:i}=yield this.supabase.storage.from(this.bucketName).upload(t,e,{upsert:!0});if(i)throw console.error("\u274C Erreur Upload Supabase:",i),i;let{data:o}=this.supabase.storage.from(this.bucketName).getPublicUrl(t),a=o.publicUrl;return console.log("\u2705 Image upload\xE9e:",a),a})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})};function NZ(n,e){if(n&1&&Ut(0,"img",34),n&2){let t=Ve().ngIf;le("alt",ef(t.name))("src",t.images[0],Ao)}}function OZ(n,e){n&1&&Ut(0,"div",35)}function LZ(n,e){if(n&1&&(z(0,"span",36),J(1),$()),n&2){let t=e.$implicit;ee(),Tt(" ",t," ")}}function FZ(n,e){if(n&1){let t=bn();z(0,"div",37)(1,"button",38),Ue("click",function(){nt(t);let i=Ve().ngIf,o=Ve();return rt(o.openEditModal(i))}),J(2," \u270F\uFE0F Modifier "),$(),z(3,"button",39),Ue("click",function(){nt(t);let i=Ve().ngIf,o=Ve();return rt(o.onDeletePlace(i))}),J(4," \u{1F5D1}\uFE0F Supprimer "),$()()}}function VZ(n,e){if(n&1&&Ut(0,"img",43),n&2){let t=e.$implicit,r=Ve(2).ngIf;le("alt",TI("Photo de ",r.name))("src",t,Ao)}}function jZ(n,e){if(n&1&&(z(0,"div",21)(1,"h3",40),J(2," Galerie photos "),$(),z(3,"div",41),qe(4,VZ,1,3,"img",42),$()()),n&2){let t=Ve().ngIf;ee(4),le("ngForOf",t.images)}}function UZ(n,e){if(n&1&&(z(0,"div",4)(1,"div",5),qe(2,NZ,1,3,"img",6)(3,OZ,1,0,"div",7),z(4,"div",8)(5,"div",9)(6,"div",10),qe(7,LZ,2,1,"span",11),$(),z(8,"div",12)(9,"h1",13),J(10),$(),qe(11,FZ,5,0,"div",14),$()()(),z(12,"a",15),Ls(),z(13,"svg",16),Ut(14,"path",17),$()()(),zg(),z(15,"div",18)(16,"div",19)(17,"div",20)(18,"div",21)(19,"h2",22),J(20," \xC0 propos "),$(),z(21,"p",23),J(22),$()(),qe(23,jZ,5,1,"div",24),$(),z(24,"div",25)(25,"div",26)(26,"div",27)(27,"h3",28),J(28,"Localisation"),$()(),z(29,"div",29),Ut(30,"div",30),$(),z(31,"div",31)(32,"div")(33,"span",32),J(34,"Latitude :"),$(),J(35),Nr(36,"number"),$(),z(37,"div")(38,"span",32),J(39,"Longitude :"),$(),J(40),Nr(41,"number"),$()()(),z(42,"a",33),J(43," \u{1F5FA}\uFE0F Y aller (Google Maps) "),$()()()()()),n&2){let t=e.ngIf,r=Ve();ee(2),le("ngIf",t.images&&t.images.length>0),ee(),le("ngIf",!t.images||t.images.length===0),ee(4),le("ngForOf",t.categories),ee(3),Tt(" ",t.name," "),ee(),le("ngIf",r.isAdmin),ee(11),Tt(" ",t.description||"Aucune description pour l\u2019instant."," "),ee(),le("ngIf",t.images&&t.images.length>1),ee(7),le("leafletOptions",r.mapOptions)("leafletLayers",r.mapLayers),ee(5),Tt(" ",lc(36,12,t.latitude,"1.4-4")," "),ee(5),Tt(" ",lc(41,15,t.longitude,"1.4-4")," "),ee(2),le("href","https://www.google.com/maps/search/?api=1&query="+t.latitude+","+t.longitude,Ao)}}function BZ(n,e){n&1&&(z(0,"div",44),Ut(1,"div",45),$())}function $Z(n,e){if(n&1){let t=bn();z(0,"label",69)(1,"input",70),Ue("change",function(i){let o=nt(t).$implicit,a=Ve(3);return rt(a.toggleCategory(o,i))}),$(),z(2,"span"),J(3),$()()}if(n&2){let t=e.$implicit,r=Ve().ngIf;ee(),le("checked",r.categories==null?null:r.categories.includes(t)),ee(2),Fi(t)}}function HZ(n,e){if(n&1){let t=bn();z(0,"div",73),Ut(1,"img",74),z(2,"button",75),Ue("click",function(){let i=nt(t).$implicit,o=Ve(4);return rt(o.removeExistingImage(i))}),J(3," Supprimer "),$()()}if(n&2){let t=e.$implicit;ee(),le("src",t,Ao)}}function zZ(n,e){if(n&1&&(z(0,"div",71),qe(1,HZ,4,1,"div",72),$()),n&2){let t=Ve().ngIf;ee(),le("ngForOf",t.images)}}function qZ(n,e){n&1&&(z(0,"p",76),J(1,"Aucune image pour l\u2019instant."),$())}function WZ(n,e){n&1&&(z(0,"div",77),J(1," Upload en cours... "),$())}function GZ(n,e){if(n&1&&(z(0,"div",78),J(1),$()),n&2){let t=Ve(3);ee(),Tt(" ",t.uploadError," ")}}function KZ(n,e){if(n&1){let t=bn();z(0,"form",52)(1,"div")(2,"label",53),J(3,"Nom"),$(),z(4,"input",54),ji("ngModelChange",function(i){let o=nt(t).ngIf;return Po(o.name,i)||(o.name=i),rt(i)}),$()(),z(5,"div")(6,"label",53),J(7,"Description"),$(),z(8,"textarea",55),ji("ngModelChange",function(i){let o=nt(t).ngIf;return Po(o.description,i)||(o.description=i),rt(i)}),$()(),z(9,"div",56)(10,"div")(11,"label",53),J(12,"Latitude"),$(),z(13,"input",57),ji("ngModelChange",function(i){let o=nt(t).ngIf;return Po(o.latitude,i)||(o.latitude=i),rt(i)}),$()(),z(14,"div")(15,"label",53),J(16,"Longitude"),$(),z(17,"input",58),ji("ngModelChange",function(i){let o=nt(t).ngIf;return Po(o.longitude,i)||(o.longitude=i),rt(i)}),$()()(),z(18,"div")(19,"label",59),J(20,"Cat\xE9gories"),$(),z(21,"div",60),qe(22,$Z,4,2,"label",61),$()(),z(23,"div")(24,"label",59),J(25,"Images existantes"),$(),qe(26,zZ,2,1,"div",62)(27,qZ,2,0,"ng-template",null,1,dc),$(),z(29,"div")(30,"label",59),J(31,"Ajouter des images"),$(),z(32,"input",63),Ue("change",function(i){nt(t);let o=Ve(2);return rt(o.onFilesSelected(i))}),$(),qe(33,WZ,2,0,"div",64)(34,GZ,2,1,"div",65),$(),z(35,"div",66)(36,"button",67),Ue("click",function(){nt(t);let i=Ve(2);return rt(i.closeEditModal())}),J(37," Annuler "),$(),z(38,"button",68),Ue("click",function(){nt(t);let i=Ve(2);return rt(i.savePlace())}),J(39," \u{1F4BE} Enregistrer "),$()()()}if(n&2){let t=e.ngIf,r=Li(28),i=Ve(2);ee(4),Vi("ngModel",t.name),ee(4),Vi("ngModel",t.description),ee(5),Vi("ngModel",t.latitude),ee(4),Vi("ngModel",t.longitude),ee(5),le("ngForOf",i.availableCategories),ee(4),le("ngIf",t.images&&t.images.length>0)("ngIfElse",r),ee(7),le("ngIf",i.uploadingImages),ee(),le("ngIf",i.uploadError)}}function ZZ(n,e){if(n&1){let t=bn();z(0,"div",46)(1,"div",47)(2,"div",48)(3,"h2",49),J(4," Modifier cette place "),$(),z(5,"button",50),Ue("click",function(){nt(t);let i=Ve();return rt(i.closeEditModal())}),J(6," \u2715 "),$()(),qe(7,KZ,40,9,"form",51),$()()}if(n&2){let t=Ve();ee(7),le("ngIf",t.editingPlace)}}var dE=class n{route=H(Lr);router=H(yt);placesService=H(io);authService=H(Br);supabaseImageService=H(Od);place$=he(void 0);isAdmin=!1;showEditModal=!1;editingPlace=null;availableCategories=["Restaurant","Fruits de mer","Caf\xE9","Fast-food","Pizzeria","Boulangerie","Glacier","Bar","H\xF4tel","Maison d\u2019h\xF4tes","Camping","Plage","Parc","Jardin","Randonn\xE9e","Mus\xE9e","Monument","Site historique","Site arch\xE9ologique","Centre commercial","March\xE9","Souk","Commerce","Spa","Bien-\xEAtre","Activit\xE9s nautiques","P\xEAche","Famille","Romantique","Vue panoramique"];uploadingImages=!1;uploadError=null;mapOptions={layers:[fi.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18})],zoom:14,center:fi.latLng(34.71,11.15)};mapLayers=[];constructor(){let e="https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",t="https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",r="https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png";fi.Marker.prototype.options.icon=fi.icon({iconRetinaUrl:e,iconUrl:t,shadowUrl:r,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]})}ngOnInit(){this.authService.user$.subscribe(e=>{let t=e?.roles;this.isAdmin=!!t&&Array.isArray(t)&&t.includes("admin")}),this.place$=this.route.paramMap.pipe(Vt(e=>{let t=e.get("id");return t?this.placesService.getPlaceById(t):he(void 0)}),Rt(e=>{e&&this.updateMap(e)}))}updateMap(e){this.mapOptions=_e(Y({},this.mapOptions),{center:fi.latLng(e.latitude,e.longitude)}),this.mapLayers=[fi.marker([e.latitude,e.longitude]).bindPopup(e.name)]}openEditModal(e){this.uploadError=null,this.editingPlace=_e(Y({},e),{images:[...e.images||[]],categories:[...e.categories||[]]}),this.showEditModal=!0}toggleCategory(e,t){if(!this.editingPlace)return;let i=t.target.checked,o=this.editingPlace.categories??[];i?o.includes(e)||(this.editingPlace=_e(Y({},this.editingPlace),{categories:[...o,e]})):this.editingPlace=_e(Y({},this.editingPlace),{categories:o.filter(a=>a!==e)})}onFilesSelected(e){return b(this,null,function*(){if(!this.editingPlace)return;let t=e.target;if(!t.files||t.files.length===0)return;let r=Array.from(t.files);this.uploadingImages=!0,this.uploadError=null;try{let i=[];for(let o of r){let a=o.name.replace(/\s+/g,"-").toLowerCase(),l=`${this.editingPlace.id||"temp"}/${Date.now()}-${a}`,h=yield this.supabaseImageService.uploadImage(o,l);h&&i.push(h)}this.editingPlace=_e(Y({},this.editingPlace),{images:[...this.editingPlace.images||[],...i]}),t.value=""}catch(i){console.error("Erreur upload images",i),this.uploadError="Erreur lors de l'upload des images."}finally{this.uploadingImages=!1}})}removeExistingImage(e){this.editingPlace&&(this.editingPlace=_e(Y({},this.editingPlace),{images:(this.editingPlace.images||[]).filter(t=>t!==e)}))}closeEditModal(){this.showEditModal=!1,this.editingPlace=null,this.uploadError=null,this.uploadingImages=!1}savePlace(){return b(this,null,function*(){if(!this.editingPlace||!this.editingPlace.id)return;let e=this.editingPlace.id,t={name:this.editingPlace.name,description:this.editingPlace.description,latitude:this.editingPlace.latitude,longitude:this.editingPlace.longitude,categories:this.editingPlace.categories||[],images:this.editingPlace.images||[],updatedAt:new Date};try{yield this.placesService.updatePlace(e,t),this.closeEditModal(),this.place$=this.placesService.getPlaceById(e).pipe(Rt(r=>{r&&this.updateMap(r)}))}catch(r){console.error("Erreur update place",r)}})}onDeletePlace(e){return b(this,null,function*(){if(!(!e.id||!window.confirm("\xCAtes-vous s\xFBr de vouloir supprimer d\xE9finitivement cette place ?")))try{yield this.placesService.deletePlace(e.id),this.router.navigate(["/"])}catch(r){console.error("Erreur suppression place",r),alert("Erreur lors de la suppression de la place.")}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=nn({type:n,selectors:[["app-place-detail"]],decls:5,vars:5,consts:[["loading",""],["noImages",""],["class","min-h-screen bg-gray-50 pb-12",4,"ngIf","ngIfElse"],["class","fixed inset-0 z-50 flex items-center justify-center bg-black/60",4,"ngIf"],[1,"min-h-screen","bg-gray-50","pb-12"],[1,"relative","h-64","md:h-96","w-full","bg-gray-800","overflow-hidden"],["class","w-full h-full object-cover opacity-70",3,"src","alt",4,"ngIf"],["class","absolute inset-0 bg-gradient-to-r from-blue-900 to-blue-700 opacity-80",4,"ngIf"],[1,"absolute","bottom-0","left-0","w-full","p-6","md:p-10","bg-gradient-to-t","from-black/80","to-transparent"],[1,"container","mx-auto"],[1,"flex","flex-wrap","gap-2","mb-3"],["class","bg-yellow-400 text-blue-900 text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wide",4,"ngFor","ngForOf"],[1,"flex","flex-col","md:flex-row","md:items-center","gap-3"],[1,"text-3xl","md:text-5xl","font-bold","text-white","drop-shadow-md"],["class","flex items-center gap-2 md:ml-auto",4,"ngIf"],["routerLink","/",1,"absolute","top-4","left-4","bg-white/10","hover:bg-white/20","border","border-white/40","backdrop-blur","text-white","p-2","rounded-full","transition"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"container","mx-auto","mt-8","px-4","md:px-0"],[1,"grid","md:grid-cols-3","gap-8"],[1,"md:col-span-2","space-y-6"],[1,"bg-white","rounded-2xl","shadow-sm","p-6"],[1,"text-xl","font-semibold","text-gray-800","mb-2","border-b","pb-2"],[1,"text-gray-700","leading-relaxed"],["class","bg-white rounded-2xl shadow-sm p-6",4,"ngIf"],[1,"space-y-6"],[1,"bg-white","rounded-2xl","shadow-sm","overflow-hidden"],[1,"px-4","py-3","bg-blue-50","border-b","border-blue-100"],[1,"font-bold","text-blue-900","text-sm"],[1,"h-64","w-full","relative","z-0"],["leaflet","",1,"h-full","w-full",3,"leafletOptions","leafletLayers"],[1,"p-4","bg-gray-50","text-xs","text-gray-600","flex","flex-col","gap-1"],[1,"font-semibold"],["target","_blank","rel","noopener noreferrer",1,"block","w-full","bg-blue-600","hover:bg-blue-700","text-white","text-sm","font-medium","px-4","py-3","rounded-lg","shadow","flex","items-center","justify-center","gap-2",3,"href"],[1,"w-full","h-full","object-cover","opacity-70",3,"src","alt"],[1,"absolute","inset-0","bg-gradient-to-r","from-blue-900","to-blue-700","opacity-80"],[1,"bg-yellow-400","text-blue-900","text-xs","font-bold","px-3","py-1","rounded-full","uppercase","tracking-wide"],[1,"flex","items-center","gap-2","md:ml-auto"],["type","button",1,"inline-flex","items-center","gap-2","px-4","py-2","rounded-full","bg-yellow-400","text-gray-900","text-xs","md:text-sm","font-semibold","shadow-lg","hover:bg-yellow-300","transition",3,"click"],["type","button",1,"inline-flex","items-center","gap-2","px-4","py-2","rounded-full","bg-red-600","text-white","text-xs","md:text-sm","font-semibold","shadow-lg","hover:bg-red-500","transition",3,"click"],[1,"text-lg","font-semibold","text-gray-800","mb-3"],[1,"grid","grid-cols-2","md:grid-cols-3","gap-3"],["class","w-full h-32 md:h-40 object-cover rounded-xl border border-gray-200 hover:opacity-90 transition",3,"src","alt",4,"ngFor","ngForOf"],[1,"w-full","h-32","md:h-40","object-cover","rounded-xl","border","border-gray-200","hover:opacity-90","transition",3,"src","alt"],[1,"h-screen","flex","items-center","justify-center","bg-gray-50"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-blue-600"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/60"],[1,"bg-white","w-full","max-w-xl","mx-4","rounded-2xl","shadow-xl","flex","flex-col","max-h-[90vh]"],[1,"px-6","py-4","border-b","flex","items-center","justify-between"],[1,"text-lg","font-semibold","text-gray-900"],["type","button",1,"text-gray-400","hover:text-gray-600",3,"click"],["class","px-6 py-4 space-y-4 overflow-y-auto",4,"ngIf"],[1,"px-6","py-4","space-y-4","overflow-y-auto"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],["name","name","type","text",1,"w-full","rounded-lg","border","border-gray-200","px-3","py-2","text-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["name","description","rows","3",1,"w-full","rounded-lg","border","border-gray-200","px-3","py-2","text-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","resize-none",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-2","gap-4"],["name","latitude","type","number","step","0.000001",1,"w-full","rounded-lg","border","border-gray-200","px-3","py-2","text-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["name","longitude","type","number","step","0.000001",1,"w-full","rounded-lg","border","border-gray-200","px-3","py-2","text-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"flex","flex-wrap","gap-2"],["class","inline-flex items-center gap-2 text-xs bg-gray-100 px-3 py-1 rounded-full cursor-pointer",4,"ngFor","ngForOf"],["class","grid grid-cols-3 gap-3",4,"ngIf","ngIfElse"],["type","file","multiple","",1,"block","w-full","text-xs","text-gray-600","file:mr-3","file:py-2","file:px-3","file:rounded-full","file:border-0","file:text-xs","file:font-semibold","file:bg-yellow-50","file:text-yellow-700","hover:file:bg-yellow-100",3,"change"],["class","mt-2 text-xs text-blue-600",4,"ngIf"],["class","mt-2 text-xs text-red-600",4,"ngIf"],[1,"flex","justify-end","gap-3","pt-2"],["type","button",1,"px-4","py-2","text-sm","rounded-lg","border","border-gray-300","hover:bg-gray-50",3,"click"],["type","button",1,"px-4","py-2","text-sm","rounded-lg","bg-yellow-400","hover:bg-yellow-500","text-gray-900","font-semibold","shadow",3,"click"],[1,"inline-flex","items-center","gap-2","text-xs","bg-gray-100","px-3","py-1","rounded-full","cursor-pointer"],["type","checkbox",1,"rounded","border-gray-300",3,"change","checked"],[1,"grid","grid-cols-3","gap-3"],["class","relative group",4,"ngFor","ngForOf"],[1,"relative","group"],[1,"w-full","h-24","object-cover","rounded-lg","border","border-gray-200",3,"src"],["type","button",1,"absolute","top-1","right-1","text-[10px]","px-2","py-1","rounded-full","bg-black/70","text-white","opacity-0","group-hover:opacity-100","transition",3,"click"],[1,"text-xs","text-gray-500","italic"],[1,"mt-2","text-xs","text-blue-600"],[1,"mt-2","text-xs","text-red-600"]],template:function(t,r){if(t&1&&(qe(0,UZ,44,18,"div",2),Nr(1,"async"),qe(2,BZ,2,0,"ng-template",null,0,dc)(4,ZZ,8,1,"div",3)),t&2){let i=Li(3);le("ngIf",uc(1,3,r.place$))("ngIfElse",i),ee(4),le("ngIf",r.showEditModal)}},dependencies:[Mn,qs,gr,_d,Uc,gd,yc,qi,Aw,Dw,Ed,CA,Tw,Cw,Pp,Rp,cf,uf],encapsulation:2})};var ao=_h(Ip());function QZ(n,e){if(n&1&&(z(0,"div",22),J(1),$()),n&2){let t=Ve();ee(),Tt(" ",t.errorMessage," ")}}function YZ(n,e){if(n&1&&(z(0,"div",23),J(1),$()),n&2){let t=Ve();ee(),Tt(" ",t.successMessage," ")}}function JZ(n,e){if(n&1){let t=bn();z(0,"label",24)(1,"input",25),Ue("change",function(i){let o=nt(t).$implicit,a=Ve();return rt(a.toggleCategory(o,i))}),$(),z(2,"span",26),J(3),$()()}if(n&2){let t=e.$implicit,r=Ve();ee(),le("checked",r.model.categories==null?null:r.model.categories.includes(t)),ee(2),Fi(t)}}function XZ(n,e){n&1&&(z(0,"div",27),J(1," T\xE9l\xE9chargement en cours... "),$())}function eQ(n,e){if(n&1){let t=bn();z(0,"div",30),Ut(1,"img",31),z(2,"button",32),Ue("click",function(){let i=nt(t).$implicit,o=Ve(2);return rt(o.removeImage(i))}),J(3," \u2715 "),$()()}if(n&2){let t=e.$implicit;ee(),le("src",t,Ao)}}function tQ(n,e){if(n&1&&(z(0,"div",28),qe(1,eQ,4,1,"div",29),$()),n&2){let t=Ve();ee(),le("ngForOf",t.model.images)}}function nQ(n,e){n&1&&(z(0,"span"),J(1,"Ajouter le lieu"),$())}function rQ(n,e){n&1&&(z(0,"span"),J(1,"Enregistrement..."),$())}var hE=class n{constructor(e,t,r,i){this.placesService=e;this.imageService=t;this.auth=r;this.router=i;let o="https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",a="https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",c="https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png";ao.Marker.prototype.options.icon=ao.icon({iconRetinaUrl:o,iconUrl:a,shadowUrl:c,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]})}model={name:"",description:"",latitude:34.71,longitude:11.15,categories:[],status:"pending",images:[]};categoriesList=["Restaurant","Fruits de mer","Caf\xE9","Fast-food","Pizzeria","Boulangerie","Glacier","Bar","H\xF4tel","Maison d\u2019h\xF4tes","Camping","Plage","Parc","Jardin","Randonn\xE9e","Mus\xE9e","Monument","Site historique","Site arch\xE9ologique","Centre commercial","March\xE9","Souk","Commerce","Spa","Bien-\xEAtre","Activit\xE9s nautiques","P\xEAche","Famille","Romantique","Vue panoramique"];isSubmitting=!1;uploadingImage=!1;errorMessage="";successMessage="";mapOptions={layers:[ao.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18})],zoom:10,center:ao.latLng(34.71,11.15)};marker=null;ngOnInit(){this.updateMarker(this.model.latitude,this.model.longitude)}onMapReady(e){e.on("click",t=>{this.model.latitude=t.latlng.lat,this.model.longitude=t.latlng.lng,this.updateMarker(t.latlng.lat,t.latlng.lng)})}updateMarker(e,t){this.marker?this.marker.setLatLng([e,t]):this.marker=ao.marker([e,t])}get mapLayers(){return this.marker?[this.marker]:[]}toggleCategory(e,t){let i=t.target.checked;this.model.categories||(this.model.categories=[]),i?this.model.categories.includes(e)||this.model.categories.push(e):this.model.categories=this.model.categories.filter(o=>o!==e)}onFileSelected(e){return b(this,null,function*(){let t=e.target;if(!t.files||t.files.length===0)return;let r=Array.from(t.files);this.uploadingImage=!0,this.errorMessage="";try{this.model.images||(this.model.images=[]);for(let i of r){let o=i.name.replace(/[^a-zA-Z0-9.]/g,"_"),c=`places/${`${Date.now()}_${o}`}`;console.log("\u{1F4E4} Upload image:",c);let l=yield this.imageService.uploadImage(i,c);l&&this.model.images.push(l)}t.value=""}catch(i){console.error("Upload failed",i),this.errorMessage="Erreur lors de l'upload des images : "+(i?.message||"V\xE9rifiez votre configuration Supabase")}finally{this.uploadingImage=!1}})}removeImage(e){this.model.images&&(this.model.images=this.model.images.filter(t=>t!==e))}onSubmit(e){return b(this,null,function*(){if(!(e.invalid||this.isSubmitting)){this.isSubmitting=!0,this.errorMessage="",this.successMessage="";try{let t=yield QE(this.auth.user$);if(!t){this.errorMessage="Vous devez \xEAtre connect\xE9.",this.isSubmitting=!1;return}let r={name:this.model.name.trim(),description:this.model.description.trim(),latitude:this.model.latitude,longitude:this.model.longitude,categories:this.model.categories||[],images:this.model.images||[],status:"pending",createdBy:t.uid||t.id||"unknown",createdAt:new Date};yield this.placesService.addPlace(r),this.successMessage="Lieu ajout\xE9 avec succ\xE8s !",e.resetForm({latitude:34.71,longitude:11.15,categories:[],images:[]}),this.model={latitude:34.71,longitude:11.15,categories:[],images:[],status:"pending"},this.updateMarker(34.71,11.15),setTimeout(()=>this.router.navigate(["/"]),1500)}catch(t){console.error(t),this.errorMessage="Erreur lors de l'enregistrement."}finally{this.isSubmitting=!1}}})}static \u0275fac=function(t){return new(t||n)(ce(io),ce(Od),ce(Br),ce(yt))};static \u0275cmp=nn({type:n,selectors:[["app-add-place"]],decls:42,vars:20,consts:[["placeForm","ngForm"],[1,"container","mx-auto","p-6","max-w-3xl"],[1,"bg-white","rounded-xl","shadow-lg","p-8"],[1,"text-2xl","font-bold","text-blue-900","mb-6","border-b","pb-2"],["class","mb-4 bg-red-50 text-red-600 p-3 rounded border border-red-100",4,"ngIf"],["class","mb-4 bg-green-50 text-green-600 p-3 rounded border border-green-100",4,"ngIf"],[1,"space-y-6",3,"ngSubmit"],[1,"block","text-gray-700","font-medium","mb-1"],["type","text","name","name","required","","placeholder","Ex: Restaurant La Sir\xE8ne",1,"w-full","p-3","border","border-gray-300","rounded","focus:ring-2","focus:ring-blue-500","outline-none",3,"ngModelChange","ngModel"],["name","description","required","","rows","3","placeholder","D\xE9crivez ce lieu...",1,"w-full","p-3","border","border-gray-300","rounded","focus:ring-2","focus:ring-blue-500","outline-none",3,"ngModelChange","ngModel"],[1,"block","text-gray-700","font-medium","mb-2"],[1,"text-xs","text-gray-500","mb-2"],[1,"flex","flex-wrap","gap-2"],["class","flex items-center gap-2 bg-gray-50 px-3 py-2 rounded-full border cursor-pointer hover:bg-blue-50",4,"ngFor","ngForOf"],[1,"h-64","w-full","rounded","overflow-hidden","border","border-gray-300","relative","z-0"],["leaflet","",1,"h-full","w-full",3,"leafletMapReady","leafletOptions","leafletLayers"],["type","file","multiple","","accept","image/*",1,"block","w-full","text-sm","text-gray-600","file:mr-4","file:py-2","file:px-4","file:rounded-full","file:border-0","file:text-sm","file:font-semibold","file:bg-blue-50","file:text-blue-700","hover:file:bg-blue-100",3,"change"],["class","text-sm text-blue-600 mt-1",4,"ngIf"],["class","mt-3 grid grid-cols-3 gap-3",4,"ngIf"],[1,"pt-4"],["type","submit",1,"w-full","bg-blue-600","text-white","font-bold","py-3","rounded-lg","shadow-md","hover:bg-blue-700","transition","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[4,"ngIf"],[1,"mb-4","bg-red-50","text-red-600","p-3","rounded","border","border-red-100"],[1,"mb-4","bg-green-50","text-green-600","p-3","rounded","border","border-green-100"],[1,"flex","items-center","gap-2","bg-gray-50","px-3","py-2","rounded-full","border","cursor-pointer","hover:bg-blue-50"],["type","checkbox",1,"rounded","text-blue-600",3,"change","checked"],[1,"text-gray-700","text-xs","md:text-sm"],[1,"text-sm","text-blue-600","mt-1"],[1,"mt-3","grid","grid-cols-3","gap-3"],["class","relative group rounded-lg overflow-hidden border border-gray-200",4,"ngFor","ngForOf"],[1,"relative","group","rounded-lg","overflow-hidden","border","border-gray-200"],["alt","Photo du lieu",1,"w-full","h-24","object-cover",3,"src"],["type","button",1,"absolute","top-1","right-1","text-[10px]","px-2","py-1","rounded-full","bg-black/70","text-white","opacity-0","group-hover:opacity-100","transition",3,"click"]],template:function(t,r){if(t&1){let i=bn();z(0,"div",1)(1,"div",2)(2,"h1",3),J(3," Ajouter un nouveau lieu "),$(),qe(4,QZ,2,1,"div",4)(5,YZ,2,1,"div",5),z(6,"form",6,0),Ue("ngSubmit",function(){nt(i);let a=Li(7);return rt(r.onSubmit(a))}),z(8,"div")(9,"label",7),J(10,"Nom du lieu *"),$(),z(11,"input",8),ji("ngModelChange",function(a){return nt(i),Po(r.model.name,a)||(r.model.name=a),rt(a)}),$()(),z(12,"div")(13,"label",7),J(14,"Description *"),$(),z(15,"textarea",9),ji("ngModelChange",function(a){return nt(i),Po(r.model.description,a)||(r.model.description=a),rt(a)}),$()(),z(16,"div")(17,"label",10),J(18,"Cat\xE9gories"),$(),z(19,"p",11),J(20," S\xE9lectionnez une ou plusieurs cat\xE9gories correspondant au lieu. "),$(),z(21,"div",12),qe(22,JZ,4,2,"label",13),$()(),z(23,"div")(24,"label",7),J(25," Position (Cliquez sur la carte) * "),$(),z(26,"p",11),J(27),Nr(28,"number"),Nr(29,"number"),$(),z(30,"div",14)(31,"div",15),Ue("leafletMapReady",function(a){return nt(i),rt(r.onMapReady(a))}),$()()(),z(32,"div")(33,"label",7),J(34,"Photos du lieu"),$(),z(35,"input",16),Ue("change",function(a){return nt(i),rt(r.onFileSelected(a))}),$(),qe(36,XZ,2,0,"div",17)(37,tQ,2,1,"div",18),$(),z(38,"div",19)(39,"button",20),qe(40,nQ,2,0,"span",21)(41,rQ,2,0,"span",21),$()()()()()}if(t&2){let i=Li(7);ee(4),le("ngIf",r.errorMessage),ee(),le("ngIf",r.successMessage),ee(6),Vi("ngModel",r.model.name),ee(4),Vi("ngModel",r.model.description),ee(7),le("ngForOf",r.categoriesList),ee(5),V_(" Lat: ",lc(28,14,r.model.latitude,"1.4-4"),", Lng: ",lc(29,17,r.model.longitude,"1.4-4")," "),ee(4),le("leafletOptions",r.mapOptions)("leafletLayers",r.mapLayers),ee(5),le("ngIf",r.uploadingImage),ee(),le("ngIf",r.model.images&&r.model.images.length>0),ee(2),le("disabled",!i.form.valid||r.isSubmitting||r.uploadingImage),ee(),le("ngIf",!r.isSubmitting),ee(),le("ngIf",r.isSubmitting)}},dependencies:[Mn,qs,gr,Aw,Dw,Ed,Tw,Cw,SA,Pp,Rp,_d,Uc,gd,uf],encapsulation:2})};function iQ(n,e){if(n&1&&(z(0,"div",9)(1,"strong"),J(2,"Oups !"),$(),J(3),$()),n&2){let t=Ve();ee(3),Tt(" ",t.errorMessage," ")}}function oQ(n,e){if(n&1&&(z(0,"div",10),J(1),$()),n&2){let t=Ve();ee(),Tt(" DEBUG: ",t.debugInfo," ")}}var fE=class n{constructor(e,t){this.auth=e;this.router=t}isLoading=!1;errorMessage="";debugInfo="";loginWithGoogle(){return b(this,null,function*(){this.isLoading=!0,this.errorMessage="",this.debugInfo="";try{console.log("Tentative de connexion Google..."),yield this.auth.googleSignin(),console.log("Connexion r\xE9ussie !"),this.router.navigate(["/"])}catch(e){console.error("Erreur login d\xE9taill\xE9e:",e),this.debugInfo=JSON.stringify(e,null,2),e.code==="auth/popup-closed-by-user"?this.errorMessage="Connexion annul\xE9e par l'utilisateur.":e.code==="auth/configuration-not-found"?this.errorMessage="Google Auth n'est pas activ\xE9 dans la console Firebase.":e.code==="auth/unauthorized-domain"?this.errorMessage="Le domaine localhost n'est pas autoris\xE9 dans Firebase Auth.":this.errorMessage="Erreur : "+(e.message||"Inconnue")}finally{this.isLoading=!1}})}static \u0275fac=function(t){return new(t||n)(ce(Br),ce(yt))};static \u0275cmp=nn({type:n,selectors:[["app-login"]],decls:13,vars:3,consts:[[1,"min-h-[calc(100vh-140px)]","flex","items-center","justify-center","bg-gray-50","px-4"],[1,"max-w-md","w-full","bg-white","rounded-xl","shadow-lg","overflow-hidden","border","border-gray-100"],[1,"bg-blue-600","px-8","py-6","text-center"],[1,"text-2xl","font-bold","text-white"],[1,"text-blue-100","mt-2"],[1,"p-8","space-y-6"],["class","bg-red-50 text-red-600 p-3 rounded-lg text-sm border border-red-100",4,"ngIf"],["class","bg-gray-800 text-green-400 p-3 rounded text-xs overflow-auto max-h-40 font-mono",4,"ngIf"],[1,"w-full","flex","items-center","justify-center","gap-3","px-4","py-3","border","border-gray-300","rounded-lg","shadow-sm","bg-white","text-gray-700","font-medium","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","transition-all","disabled:opacity-70",3,"click","disabled"],[1,"bg-red-50","text-red-600","p-3","rounded-lg","text-sm","border","border-red-100"],[1,"bg-gray-800","text-green-400","p-3","rounded","text-xs","overflow-auto","max-h-40","font-mono"]],template:function(t,r){t&1&&(z(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),J(4,"Bienvenue !"),$(),z(5,"p",4),J(6,"Connectez-vous pour g\xE9rer vos lieux"),$()(),z(7,"div",5),qe(8,iQ,4,1,"div",6)(9,oQ,2,1,"div",7),z(10,"button",8),Ue("click",function(){return r.loginWithGoogle()}),z(11,"span"),J(12,"Continuer avec Google"),$()()()()()),t&2&&(ee(8),le("ngIf",r.errorMessage),ee(),le("ngIf",r.debugInfo),ee(),le("disabled",r.isLoading))},dependencies:[Mn,gr],encapsulation:2})};var sQ=(n,e)=>({"text-green-600":n,"text-red-600":e});function aQ(n,e){n&1&&(z(0,"span"),J(1,"\u{1F331} Injecter les Donn\xE9es de Test"),$())}function cQ(n,e){n&1&&(z(0,"span"),J(1,"Injection en cours..."),$())}function uQ(n,e){if(n&1&&(z(0,"span",10),J(1),$()),n&2){let t=Ve();le("ngClass",DI(2,sQ,t.message.includes("Succ\xE8s"),t.message.includes("Erreur"))),ee(),Tt(" ",t.message," ")}}var pE=class n{placesService=H(io);isLoading=!1;message="";kerkennahPlaces=[{name:"Borj El Hissar",description:"Ancien fort hispano-turc situ\xE9 pr\xE8s de Sidi Fredj. Un site historique incontournable offrant une vue imprenable sur la mer.",latitude:34.7089,longitude:11.1644,categories:["Histoire","Tourisme"],status:"approved",images:["https://upload.wikimedia.org/wikipedia/commons/thumb/e/e3/Borj_El_Hissar_-_Kerkennah_-_Tunisie.jpg/800px-Borj_El_Hissar_-_Kerkennah_-_Tunisie.jpg"]},{name:"Mus\xE9e du Patrimoine Insulaire (Sidi Abbes)",description:"Un mus\xE9e fascinant \xE0 El Abbassia qui retrace l'histoire, les traditions et le mode de vie unique des habitants de l'archipel.",latitude:34.7255,longitude:11.2485,categories:["Culture","Mus\xE9e"],status:"approved",images:["https://upload.wikimedia.org/wikipedia/commons/thumb/6/6d/Mus%C3%A9e_du_patrimoine_insulaire_de_Kerkennah_04.jpg/800px-Mus%C3%A9e_du_patrimoine_insulaire_de_Kerkennah_04.jpg"]},{name:"Port de Sidi Youssef",description:"Le point d'entr\xE9e principal de l'archipel via le ferry (Loud). Un lieu vivant o\xF9 l'on prend le pouls de l'\xEEle.",latitude:34.6542,longitude:10.9987,categories:["Transport","Port"],status:"approved",images:["https://upload.wikimedia.org/wikipedia/commons/thumb/d/d9/Arriv%C3%A9e_du_bac_%C3%A0_Sidi_Youssef_01.jpg/800px-Arriv%C3%A9e_du_bac_%C3%A0_Sidi_Youssef_01.jpg"]},{name:"Plage de Sidi Fredj",description:"Une des plages les plus populaires, id\xE9ale pour la baignade et les couchers de soleil spectaculaires.",latitude:34.705,longitude:11.15,categories:["Plage","D\xE9tente"],status:"approved",images:["https://upload.wikimedia.org/wikipedia/commons/thumb/3/3e/Plage_de_Sidi_Fekhri_01.jpg/800px-Plage_de_Sidi_Fekhri_01.jpg"]},{name:"Grand H\xF4tel Kerkennah",description:"Un h\xF4tel historique situ\xE9 les pieds dans l'eau \xE0 Sidi Fredj, connu pour son architecture typique.",latitude:34.7065,longitude:11.152,categories:["H\xF4tel","Restaurant"],status:"approved",images:["https://dynamic-media-cdn.tripadvisor.com/media/photo-o/12/04/25/8e/grand-hotel-kerkennah.jpg?w=1200&h=-1&s=1"]},{name:"Site Arch\xE9ologique de Kerkouane (Similaire)",description:"Ruines antiques t\xE9moignant du pass\xE9 punique et romain de l'archipel (Cercina).",latitude:34.69,longitude:11.12,categories:["Histoire","Ruines"],status:"approved",images:["https://upload.wikimedia.org/wikipedia/commons/thumb/a/a8/Ruines_romaines_%C3%A0_Kerkennah.jpg/800px-Ruines_romaines_%C3%A0_Kerkennah.jpg"]},{name:"Village de Remla",description:"Le chef-lieu administratif de l'archipel. On y trouve le march\xE9, la poste et l'animation locale.",latitude:34.713,longitude:11.195,categories:["Ville","Commerce"],status:"approved",images:["https://upload.wikimedia.org/wikipedia/commons/thumb/8/83/Remla_centre_ville.jpg/800px-Remla_centre_ville.jpg"]},{name:"Port de P\xEAche El Attaya",description:"Un village de p\xEAcheurs authentique \xE0 la pointe nord. C\xE9l\xE8bre pour ses techniques de p\xEAche traditionnelles (Charfia).",latitude:34.745,longitude:11.28,categories:["P\xEAche","Authentique"],status:"approved",images:["https://upload.wikimedia.org/wikipedia/commons/thumb/f/f2/Port_d%27El_Attaya_02.jpg/800px-Port_d%27El_Attaya_02.jpg"]},{name:"Restaurant Le Sirene",description:"Sp\xE9cialit\xE9s de fruits de mer frais p\xEAch\xE9s localement. Une institution culinaire.",latitude:34.707,longitude:11.155,categories:["Restaurant","Gastronomie"],status:"approved",images:["https://media-cdn.tripadvisor.com/media/photo-s/1a/43/6e/58/terrasse.jpg"]},{name:"Archipel des \xEElots inhabit\xE9s",description:"Excursion en bateau vers les \xEElots sauvages autour de Gremdi. Nature pr\xE9serv\xE9e.",latitude:34.76,longitude:11.3,categories:["Nature","Aventure"],status:"approved",images:["https://upload.wikimedia.org/wikipedia/commons/thumb/c/c7/Kerkennah_Paysage.jpg/800px-Kerkennah_Paysage.jpg"]}];seedDatabase(){return b(this,null,function*(){if(!confirm("Voulez-vous vraiment injecter ces 10 lieux dans Firebase ?"))return;this.isLoading=!0,this.message="Injection en cours...";let e=0;try{for(let t of this.kerkennahPlaces){let r=_e(Y({},t),{createdBy:"system_seeder",createdAt:new Date});yield this.placesService.addPlace(r),e++}this.message=`\u2705 Succ\xE8s ! ${e} lieux ajout\xE9s. Allez voir la carte !`}catch(t){console.error(t),this.message="\u274C Erreur lors de l'injection."}finally{this.isLoading=!1}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=nn({type:n,selectors:[["app-admin-list"]],decls:15,vars:4,consts:[[1,"container","mx-auto","p-6"],[1,"text-3xl","font-bold","text-blue-900","mb-8"],[1,"card"],[1,"text-xl","font-semibold","mb-4"],[1,"text-gray-600","mb-4"],[1,"flex","items-center","gap-4"],[1,"btn-seed","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[4,"ngIf"],["class","font-medium",3,"ngClass",4,"ngIf"],[1,"mt-8","text-gray-400","text-center","italic"],[1,"font-medium",3,"ngClass"]],template:function(t,r){t&1&&(z(0,"div",0)(1,"h1",1),J(2,"Administration"),$(),z(3,"div",2)(4,"h2",3),J(5,"Outils de D\xE9veloppement"),$(),z(6,"p",4),J(7," Utilisez ce bouton pour remplir votre base de donn\xE9es avec 10 lieux embl\xE9matiques de Kerkennah. (Images Wikimedia/Publiques). "),$(),z(8,"div",5)(9,"button",6),Ue("click",function(){return r.seedDatabase()}),qe(10,aQ,2,0,"span",7)(11,cQ,2,0,"span",7),$(),qe(12,uQ,2,5,"span",8),$()(),z(13,"div",9),J(14," (La liste de mod\xE9ration sera d\xE9velopp\xE9e ult\xE9rieurement) "),$()()),t&2&&(ee(9),le("disabled",r.isLoading),ee(),le("ngIf",!r.isLoading),ee(),le("ngIf",r.isLoading),ee(),le("ngIf",r.message))},dependencies:[Mn,HI,gr],styles:[".card[_ngcontent-%COMP%]{margin-bottom:1rem;border-radius:.5rem;--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1));padding:1.5rem;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.btn-seed[_ngcontent-%COMP%]{border-radius:.25rem;--tw-bg-opacity: 1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1));padding:.5rem 1rem;--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1));transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.btn-seed[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(21 128 61 / var(--tw-bg-opacity, 1))}"]})};var mE=class n{constructor(e,t){this.auth=e;this.router=t}canActivate(){return this.auth.user$.pipe(dr(1),Ae(e=>!!e),Rt(e=>{e||(console.log("Acc\xE8s refus\xE9 : connexion requise"),this.router.navigate(["/login"]))}))}static \u0275fac=function(t){return new(t||n)(ve(Br),ve(yt))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})};var gE=class n{auth=H(jo);router=H(yt);canActivate(){return uy(this.auth).pipe(dr(1),Vt(e=>b(this,null,function*(){if(!e)return console.warn("AdminGuard: Pas d'utilisateur connect\xE9."),!1;let t=yield iL(e,!0);return t.claims.admin?(console.log("\u2705 AdminGuard: Acc\xE8s autoris\xE9."),!0):(console.error("\u26D4 AdminGuard: Acc\xE8s refus\xE9. Claims:",t.claims),!1)})),Ae(e=>e?!0:(alert("Acc\xE8s refus\xE9 : droits administrateur requis"),this.router.createUrlTree(["/"]))))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})};var Lj=[{path:"",component:mw},{path:"place/:id",component:dE},{path:"add-place",component:hE,canActivate:[mE]},{path:"login",component:fE},{path:"admin",canActivate:[gE],children:[{path:"places",component:pE},{path:"",redirectTo:"places",pathMatch:"full"}]},{path:"**",redirectTo:""}];var fx=class{constructor(e,t){this._delegate=e,this.firebase=t,Ol(e,new In("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),$f(this._delegate)))}_getService(e,t=Ki){var r;this._delegate.checkDestroyed();let i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=Ki){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Ol(this._delegate,e)}_addOrOverwriteComponent(e){JT(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}};var lQ={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},Fj=new Xn("app-compat","Firebase",lQ);function dQ(n){let e={},t={__esModule:!0,initializeApp:o,app:i,registerVersion:lt,setLogLevel:Fv,onLog:Lv,apps:null,SDK_VERSION:ci,INTERNAL:{registerComponent:c,removeApp:r,useAsService:l,modularAPIs:XT}};t.default=t,Object.defineProperty(t,"apps",{get:a});function r(h){delete e[h]}function i(h){if(h=h||Ki,!VT(e,h))throw Fj.create("no-app",{appName:h});return e[h]}i.App=n;function o(h,p={}){let _=Ll(h,p);if(VT(e,_.name))return e[_.name];let E=new n(_,t);return e[_.name]=E,E}function a(){return Object.keys(e).map(h=>e[h])}function c(h){let p=h.name,_=p.replace("-compat","");if(er(h)&&h.type==="PUBLIC"){let E=(w=i())=>{if(typeof w[_]!="function")throw Fj.create("invalid-app-argument",{appName:p});return w[_]()};h.serviceProps!==void 0&&Lf(E,h.serviceProps),t[_]=E,n.prototype[_]=function(...w){return this._getService.bind(this,p).apply(this,h.multipleInstances?w:[])}}return h.type==="PUBLIC"?t[_]:null}function l(h,p){return p==="serverAuth"?null:p}return t}function jj(){let n=dQ(fx);n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:jj,extendNamespace:e,createSubscribe:Mv,ErrorFactory:Xn,deepExtend:Lf});function e(t){Lf(n,t)}return n}var hQ=jj();var Vj=new Fr("@firebase/app-compat"),fQ="@firebase/app-compat",pQ="0.4.2";function mQ(n){lt(fQ,pQ,n)}try{let n=Ff();if(n.firebase!==void 0){Vj.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);let e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Vj.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}var _E=hQ;mQ();var gQ="firebase",_Q="11.10.0";_E.registerVersion(gQ,_Q,"app-compat");var Uj=new ae("angularfire2.app.options");var j0e=typeof module<"u"&&!!module.hot;globalThis.\u0275AngularfireInstanceCache||=[];eT(fw,{providers:[xT(Lj,Dv()),t1(()=>n1(Nd.firebaseConfig)),nL(()=>rL()),HV(()=>WV()),{provide:Uj,useValue:Nd.firebaseConfig}]}).catch(n=>console.error(n));
